"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[5771],{5771:(e,t,n)=>{n.r(t),n.d(t,{DATA_TYPE:()=>T,FLAGS:()=>P,PERSONALIZATION_TAGS:()=>f,TRACKED_MANIFEST_TYPE:()=>L,US_GEO:()=>m,addMepAnalytics:()=>Ce,addSectionAnchors:()=>ae,applyPers:()=>_e,buildVariantInfo:()=>pe,canServeManifest:()=>Ie,categorizeActions:()=>Ae,checkForPreviousPageMatch:()=>me,cleanAndSortManifestList:()=>je,combineMepSources:()=>Re,createContent:()=>V,createMartechMetadata:()=>se,deleteMarkedEls:()=>ne,fetchData:()=>D,getEntitlementMap:()=>ge,getEntitlements:()=>he,getFileName:()=>S,getGeoRestriction:()=>ke,getManifestMarketingAction:()=>Le,getMepConsentConfig:()=>Pe,handleCommands:()=>oe,handleFragmentCommand:()=>xe,handleTwpButtons:()=>F,init:()=>De,matchGlob:()=>H,modifyNonFragmentSelector:()=>Y,normalizePath:()=>O,overrideVariant:()=>Ee,parseManifestVariants:()=>re,parseNestedPlaceholders:()=>Ne,parsePlaceholders:()=>de,replaceInner:()=>J,replacePlaceholders:()=>U,updateFragDataProps:()=>te});var a=n(6715),o=n(1608),i=()=>navigator.userAgent,r=window.screen.width<550||window.screen.height<550,s=i().includes("Macintosh")&&navigator.maxTouchPoints>1,c=i().includes("Linux")&&navigator.maxTouchPoints>1,l=i().includes("CriOS"),d=i().includes("EdgiOS"),u=i().includes("FxiOS"),m="en-us",f={all:()=>!0,chrome:()=>i().includes("Chrome")&&!i().includes("Edg")||l,firefox:()=>i().includes("Firefox")||u,safari:()=>i().includes("Safari")&&!i().includes("Chrome")&&!l&&!d&&!u,edge:()=>i().includes("Edg"),android:()=>i().includes("Android")||c,ios:()=>/iPad|iPhone|iPod/.test(i())||s,windows:()=>i().includes("Windows"),mac:()=>i().includes("Macintosh")&&!s,"mobile-device":()=>s||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Touch/i.test(i())||c,phone:()=>f["mobile-device"]()&&r,tablet:()=>f["mobile-device"]()&&!r,desktop:()=>!f["mobile-device"](),loggedout:()=>(0,o.isSignedOut)(),loggedin:()=>!(0,o.isSignedOut)()},p=Object.keys(f),v="p13n-deleted",g="p13n-replaced",h="not ",w="target-",y="_inline",b="martechReturned",C=new URL(window.location.href),P={all:"all",includeFragments:"include-fragments",includeGnav:"include-gnav"},E=!1,k={fragment:"fragment",twpButtons:"twp-buttons",other:"other"},L="personalization",I=/[^a-z0-9\- _,&=:]/g,M=["action","selector","pagefilter","page filter","page filter optional"],T={JSON:"json",TEXT:"text"},A="in-block:",O=function(e){var t;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e;if((e=>null===e||void 0===e?void 0:e.includes("/content/dam/"))(a)||null===(t=a)||void 0===t||!t.includes("/"))return a;const i=a.includes("/federal/"),r=(0,o.getConfig)();a.startsWith(r.codeRoot)||a.startsWith("http")||a.startsWith("/")||(a="/".concat(a));try{const e=new URL(a),{hash:t,pathname:s}=e,c=s.split("/")[1],l="#_dnt";return(a.startsWith(r.codeRoot)||a.includes(".hlx.")||a.includes(".aem.")||a.includes(".adobe.")||a.includes("localhost:"))&&(a=!n||"en-US"===r.locale.ietf||t.includes(l)||c in r.locales||a.includes(".json")?s:"".concat(r.locale.prefix).concat(s)),a=i?(0,o.getFederatedUrl)(a):a,"".concat(a).concat(t.replace(l,""))}catch(s){return a=i?(0,o.getFederatedUrl)(a):a,a}},S=e=>null===e||void 0===e?void 0:e.split("/").pop(),j=["insertscript","replacepage","updatemetadata","useblockcode"],x={insertafter:"afterend",insertbefore:"beforebegin",prepend:"afterbegin",append:"beforeend"},N={remove:"remove",replace:"replace",updateAttribute:"updateattribute"};function _(e,t,n){t&&(e.dataset.manifestId=t),n&&(e.dataset.adobeTargetTestid=n)}function R(e){const t=e.toLowerCase().trim();return t.startsWith("/")||t.startsWith("http")?k.fragment:"twp buttons"===t?k.twpButtons:k.other}function U(e,t){const n=t||(0,o.getConfig)().placeholders;if(!n)return e;let a=e;const i=a.match(/{{(.*?)}}/g);return i?(i.forEach((e=>{const t=e.replace(/{{|}}/g,"").trim();n[t]&&(a=a.replace(e,n[t]))})),a):a}var W=(e,t,n,a,i)=>{var r;"replace"===t&&e.classList.add(v,g);let s=n;try{const{pathname:e,search:t,hash:a}=new URL(n);s="".concat(e).concat(t).concat(a)}catch{}const c=(0,o.createTag)("a",{href:s},n);_(c,a,i);const l=!(null===e||void 0===e||null===(r=e.parentElement)||void 0===r||!r.closest("p"))||"P"===e.nodeName&&t.includes("pend")?c:(0,o.createTag)("p",void 0,c);return/#.*delay=/.test(s)&&l.classList.add("hide-block"),(e=>{const t=document.querySelector("body > main > div");return t===e||(null===t||void 0===t?void 0:t.contains(e))})(e)&&(0,o.loadLink)("".concat((0,o.localizeLink)(c.href),".plain.html"),{as:"fetch",crossorigin:"anonymous",rel:"preload"}),l},V=(e,t)=>{let{content:n,manifestId:a,targetManifestId:i,action:r,modifiers:s}=t;if("replace"===r&&_(e,a,i),"A"===(null===e||void 0===e?void 0:e.nodeName)&&null!==s&&void 0!==s&&s.includes("href"))return e.setAttribute("href",((e,t,n)=>{const a=e.getAttribute("href"),o=U(t);return"insertafter"===n||"append"===n?"".concat(a).concat(o):"insertbefore"===n||"prepend"===n?"".concat(o).concat(a):o})(e,n,r)),_(e,a,i),e;if(R(n)!==k.fragment){const t=U(n);if("replace"===r)return e.innerHTML=t,e;const s=(0,o.createTag)("div",{},t);return _(s,a,i),s}const c=W(e,r,n,a,i);return _(c,a,i),"MAIN"!==(null===e||void 0===e?void 0:e.parentElement.nodeName)?c:(0,o.createTag)("div",void 0,c)},F=(e,t)=>{if(R(t)===k.twpButtons){var n,a;const t=(null===(n=e.closest("p"))||void 0===n?void 0:n.querySelector("em"))||(null===(a=e.closest("div"))||void 0===a?void 0:a.querySelector("em"));if(t){const e=t.parentElement;let n=e.innerHTML.replace(/<em/g,"<strong");n=n.replace(/<\/em/g,"</strong"),e.innerHTML=n}}},B={[N.remove]:(e,t)=>{let{content:n,selector:a}=t;"false"!==n&&e.classList.add(v),F(e,a)},[N.replace]:(e,t)=>{e&&!e.classList.contains(g)&&e.insertAdjacentElement("beforebegin",V(e,t))},[N.updateAttribute]:(e,t)=>{const{manifestId:n,targetManifestId:a}=t;if(!t.attribute||!t.content)return;const[o,i]=t.attribute.split("_");let r;if(t.content=U(t.content),"href"===o&&i){const n=e.getAttribute("href");if("#"===i)e.href+=e.href.includes(t.content)?"":t.content;else try{const e=new URL(n),a=new URLSearchParams(e.search);a.set(i,t.content),e.search=a.toString(),r=e.toString()}catch(s){console.log("Invalid updateAttribute URL: ".concat(n),s.message||s)}}else r=t.content;r&&(e.setAttribute(o,r),_(e,n,a))}},z=function(){var e;null!==(e=(0,o.getConfig)().mep)&&void 0!==e&&e.preview&&console.log(...arguments)},D=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T.JSON,n=arguments.length>2?arguments[2]:void 0;try{const a=await fetch(O(e),n);if(!a.ok){if(404===a.status)throw new Error("File not found");throw new Error("Invalid response: ".concat(a.status," ").concat(a.statusText))}return await a[t]()}catch(a){z("Error loading content: ".concat(e),a.message||a)}return null},q=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.reduce(((e,n)=>[...e,...n[t]||[]]),n)},G=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e.reduce(((e,a)=>{var o;return null===(o=a[t])||void 0===o||o.forEach((n=>{const{selector:o,val:i}=n;if("blocks"===t)return void(e[o]=i);if(o in e)return;const r={action:n.action,fragment:i,selector:o,manifestPath:a.manifestPath,manifestId:n.manifestId,targetManifestId:n.targetManifestId};for(const t in e)e[t].fragment===o&&(e[t]=r);e[o]=r})),{...n,...e}}),{})},H=(e,t)=>{const n=e.replace(/\*\*/g,".*");return new RegExp("^".concat(n,"(\\.html)?$"),"i").test(t)};async function J(e,t){if(!e||!t)return!1;let n=e.endsWith("/")?"".concat(e,"index"):e;n=n.endsWith(".plain.html")?n:"".concat(n,".plain.html");const a=await D(n,T.TEXT);if(!a)return!1;t.innerHTML=a;const{decorateArea:i}=(0,o.getConfig)();return i&&i(t),!0}var K=e=>{const{selector:t,val:n}=e;if(!t||!n)return;const a=t.startsWith("og:")?"property":"name";let i=document.querySelector("meta[".concat(a,'="').concat(t,'"]'));i||(i=(0,o.createTag)("meta",{[a]:t}),document.head.append(i)),i.setAttribute("content",n)};function Z(e){return Object.keys(e).reduce(((t,n)=>(t[function(e){const t=e.toLowerCase();return t.includes("countryip")||t.includes("countrychoice")||t.includes("previouspage")?t.replace(I,(e=>["(",")","/","*"].includes(e)?e:"")):t.replace(I,"")}(n)]=e[n],t)),{})}var $=(e,t)=>e?t.replace(e,":nth-child(".concat(e,")")):t;function X(e){let t=e;const n={section:"main > div","primary-cta":"strong a","secondary-cta":"em a","action-area":"*:has(> em a, > strong a)","any-marquee-section":'main > div:has([class*="marquee"])',"any-marquee":'[class*="marquee"]',"any-header":":is(h1, h2, h3, h4, h5, h6)"},a=t.match(/^[a-zA-Z/./-]*/),o=a?a[0].toLowerCase():"",i=o.split(/\.|:/)[0],r=t.match(/[0-9]*$/),s=r&&o.match(/^[a-zA-Z]/)?r[0]:"";return!o||["html","body","header","footer","main","div","a","p","strong","em","picture","source","img","h","ul","ol","li"].includes(o)?t:["row","col"].includes(o)?(t=t.replace(o,"> div"),t=$(s,t),t):Object.keys(n).includes(i)?(t=t.replace(i,n[i]),t=$(s,t),t):(o.startsWith(".")||(t=".".concat(t)),s&&(t=t.replace(s,""),t="".concat(t,":nth-child(").concat(s," of ").concat(t,")")),t)}function Y(e,t){const{sel:n,modifiers:a}=function(e){let t=e;const n=[],a=t.split(/\s+#_/);return a.length&&(t=a.shift(),a.forEach((e=>{e.split(/_|#_/).forEach((e=>n.push(e.toLowerCase().trim())))}))),R(t)===k.twpButtons&&(n.push(P.includeFragments),n.push(P.all),n.push(P.includeGnav)),{sel:t,modifiers:n}}(e);let o,i=n.split(">").join(" > ").split(",").join(" , ").replaceAll(/main\s*>?\s*(section\d*)/gi,"$1").split(/\s+/).map(X).join(" ").trim();if(t===N.updateAttribute){const e=i.split(" ").pop();o=e.replace(".",""),i=i.replace(e,"").trim()}return t===N.remove&&R(e)===k.twpButtons&&(i='a:not([data-remove="false"])'),{modifiedSelector:i,modifiers:a,attribute:o}}var Q=(e,t)=>{if(!t)return e;try{const{origin:n,pathname:a,search:o}=new URL(e);return"".concat(n).concat(a).concat(o,"#").concat(t)}catch(n){return"".concat(e,"#").concat(t)}},ee=(e,t,n)=>{[...e[0].children].forEach((e=>e.dataset[t]=n))},te=(e,t,n,a)=>{const{manifestId:o,adobeTargetTestid:i}=e.dataset;t?(o&&ee(n,"manifestId",o),i&&ee(n,"adobeTargetTestid",i)):_(a,o,i)},ne=function(){[...(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".".concat(v))].forEach((e=>e.remove()))};function ae(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".section-metadata").forEach((e=>{[...e.children].forEach((t=>{var n,a;const o=null===(n=t.children[0])||void 0===n?void 0:n.textContent.toLowerCase().trim(),i=null===(a=t.children[1])||void 0===a?void 0:a.textContent.toLowerCase().trim().replaceAll(/\s+/g,"-");o&&i&&"anchor"===o&&e.parentElement.setAttribute("id",i)}))}))}function oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=document.querySelector("main > div");return ae(t),e.forEach((e=>{const{action:r,content:s,selector:c}=e;if(e.content=n&&R(s)===k.fragment?Q(s,y):s,c.startsWith(A))return function(e){var t,n,a,i,r,s;const c=e.selector.substring(A.length).trim().split(/\s+/),[l]=c,d=(0,o.getConfig)();let u;if(null!==(n=(t=d.mep).inBlock)&&void 0!==n||(t.inBlock={}),null!==(i=(a=d.mep.inBlock)[l])&&void 0!==i||(a[l]={}),1===c.length&&delete e.selector,c.length>1){if(u=c.slice(1).join(" "),e.selector=u,u.startsWith("https://mas.adobe.com/")){const t=e=>{const{hash:t}=new URL(e),n=t.startsWith("#")?t.substring(1):t,a=new URLSearchParams(n);return a.get("fragment")||a.get("query")};if(u=t(u),u){var m,f;null!==(f=(m=d.mep.inBlock[l]).fragments)&&void 0!==f||(m.fragments={});const{fragments:n}=d.mep.inBlock[l];e.content=t(e.content),n[u]=e}return}if(R(u)===k.fragment){var p,v;u.includes("/federal/")&&(u=(0,o.getFederatedUrl)(u)),e.content.includes("/federal/")&&(e.content=(0,o.getFederatedUrl)(e.content)),null!==(v=(p=d.mep.inBlock[l]).fragments)&&void 0!==v||(p.fragments={});const{fragments:t}=d.mep.inBlock[l];if(delete e.selector,u in t)return;for(const n in t)t[n].content===u&&(t[n]=e);t[u]=e,u=O(u);for(const n in t)t[n].content===u&&(t[n]=e);return void(t[u]=e)}}null!==(s=(r=d.mep.inBlock[l]).commands)&&void 0!==s||(r.commands=[]),d.mep.inBlock[l].commands.push(e)}(e),void(e.selectorType=A);const{els:l,modifiers:d,attribute:u}=function(e,t,n,a){const o=n?t:document,i=e.trim();if(!i)return{};if(R(i)===k.fragment)try{return{els:o.querySelectorAll('a[href*="'.concat(O(i,!1),'"], a[href*="').concat(O(i,!0),'"]')),modifiers:[P.all,P.includeFragments]}}catch(d){return{els:[],modifiers:[]}}const{modifiedSelector:r,modifiers:s,attribute:c}=Y(i,a);let l;try{if(l=o.querySelectorAll(r),R(i)===k.twpButtons){const e=/free.trial|essai gratuit|kostenlos testen|testversion|\u7121\u6599\u3067\u59cb\u3081\u308b|d\xe9tails de la version d\u2019essai gratuite|details zur kostenlosen testversion/g;l=[...l].filter((t=>t.outerHTML.toLowerCase().match(e))).map((e=>["strong","em"].includes(e.parentElement.tagName.toLowerCase())?e.parentElement:e))}}catch(d){return z("Invalid selector: ",i),{}}return s.includes(P.all)||!l.length||(l=[l[0]]),{els:l,modifiers:s,attribute:c}}(c,t,a,r);Object.assign(e,{modifiers:d,attribute:u}),null===l||void 0===l||l.forEach((n=>{if(!n||!(r in B)&&!(r in x)||t&&!t.contains(n)||E&&null!==i&&void 0!==i&&i.contains(n))return;if(r in B)return void B[r](n,e);const a=R(c)===k.fragment?n.parentElement:n;null===a||void 0===a||a.insertAdjacentElement(x[r],V(a,e))})),(l.length&&!e.modifiers.includes(P.all)||!e.modifiers.includes(P.includeFragments))&&(e.completed=!0)})),ne(t),e.filter((e=>!e.completed&&e.selectorType!==A))}var ie=(e,t,n,a,i)=>{var r,s,c;const l=(0,o.getConfig)();let d=S(a),u=d.replace(".json","");i&&(u=i),null!==(r=l.mep)&&void 0!==r&&r.preview||(d=!1);const m=null===(s=e.action)||void 0===s?void 0:s.toLowerCase().replace("content","").replace("fragment","").replace("tosection","");if(!m)return void z("Row found with empty action field: ",e);const f=e["page filter"]||e["page filter optional"],{selector:p}=e;if(f&&!H(f,new URL(window.location).pathname))return;null!==(c=l.mep)&&void 0!==c&&c.preview||(d=!1);const{origin:v}=C;t.forEach((t=>{const a=!!t.includes(w)&&u;if(!e[t]||"false"===e[t].toLowerCase())return;const o={action:m,selector:p,pageFilter:f,content:e[t],selectorType:R(p),manifestId:d,targetManifestId:a};if(m in B&&o.selectorType===k.fragment)n[t].fragments.push({selector:O(o.selector.split(" #_")[0]),val:O(e[t]),action:m,manifestId:d,targetManifestId:a});else if(j.includes(m))if(n[t][m]=n[t][m]||[],"useblockcode"===m){const{blockSelector:o,blockTarget:i}=((e,t,n)=>{var a,o,i,r;let s=e;null!==(a=s)&&void 0!==a&&a.includes("\\")&&(s=null===(o=s)||void 0===o?void 0:o.split("\\").join("/")),null!==(i=s)&&void 0!==i&&i.startsWith("/")||(s="/".concat(s));const c=null===(r=s)||void 0===r?void 0:r.split("/").pop();return s=s.startsWith("/libs/")?"".concat(t.miloLibs||t.codeRoot).concat(s.replace("/libs","")):"".concat(n).concat(s),{blockSelector:c,blockTarget:s}})(e[t],l,v);n[t][m].push({selector:o,val:i,pageFilter:f,manifestId:d,targetManifestId:a})}else n[t][m].push({selector:O(p),val:O(e[t]),pageFilter:f,manifestId:d,targetManifestId:a});else(m in B||m in x)&&n[t].commands.push(o)}))};function re(e,t,n){if(null===e||void 0===e||!e.length)return null;const a={},i=e.map((e=>Z(e)));try{var r;const e={},s=Object.keys(i[0]).filter((e=>!M.includes(e)));s.forEach((t=>{e[t]={commands:[],fragments:[]}})),i.forEach((a=>{ie(a,s,e,t,n)})),a.variants=e,a.variantNames=s;return null!==(r=(0,o.getConfig)().mep)&&void 0!==r&&r.preview||(a.manifestId=!1),a}catch(s){z("error parsing personalization manifestConfig:",s,i)}return null}async function se(e,t,a){"en-US"!==t.locale.ietf&&await n.e(6664).then(n.bind(n,6664)).then((n=>{var o,i;let{processTrackingLabels:r}=n;null!==(i=(o=t.mep).analyticLocalization)&&void 0!==i||(o.analyticLocalization={}),e.forEach(((n,o)=>{const i=e[o];let s=i[m]||i.us||i.en||i.key;if(!s)return;s=r(s);const c=r(n[a]);t.mep.analyticLocalization[c]=s}))}))}var ce=(e,t)=>{var n;if(!e.includes("countrychoice")&&!e.includes("countryip"))return!1;const a=null===(n=e.match(/\(([^)]+)\)/))||void 0===n||null===(n=n[1])||void 0===n?void 0:n.split(",").map((e=>e.trim()));if(null===a||void 0===a||!a.length)return!1;const{countryChoice:o,countryIP:i}=t.mep,r=e.includes("countrychoice")?o:i;return a.includes(r)};function le(e,t){if(e.includes("countrychoice")||e.includes("countryip")){const n=e.replace("uk","gb");return ce(n,t)}return!1}function de(e,t){var n;let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(null===e||void 0===e||!e.length||"default"===a)return t;const{countryIP:o,countryChoice:i}=t.mep||{},r=[a.toLowerCase(),null===(n=t.mep)||void 0===n?void 0:n.prefix,t.locale.region.toLowerCase(),...o?["countryip(".concat(o,")")]:[],...i?["countrychoice(".concat(i,")")]:[],t.locale.ietf.toLowerCase(),...t.locale.ietf.toLowerCase().split("-"),"value","other"],s=(null!==e&&void 0!==e&&e.length?Object.entries(e[0]):[]).find((e=>{let[n]=e;const a=n.toLowerCase();return r.includes(a)||le(a,t)})),c=null===s||void 0===s?void 0:s[0];if(c){const n=e.reduce(((e,t)=>(e[t.key]=t[c],e)),{});t.placeholders={...t.placeholders||{},...n}}return se(e,t,c),t}var ue=e=>{const[t,n]=e.split("param-")[1].split("=");if(!t)return!1;const a=new URLSearchParams(Array.from(C.searchParams,(e=>{let[t,n]=e;return[t.toLowerCase(),null===n||void 0===n?void 0:n.toLowerCase()]}))).get(t.toLowerCase());return null!==a&&(!n||n===a)},me=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.referrer;if(!t)return!1;const n=e.toLowerCase().split("previouspage-")[1];return H(n,new URL(t).pathname)};function fe(e){return e.map((e=>e.trim())).filter(Boolean)}function pe(e){return e.reduce(((e,t)=>{let n=[t];return t.startsWith(w)||(n=t.split(/,(?![^(]*\))/)),e[t]=fe(n),e.allNames=[...e.allNames,...fe(t.split(/(?:\([^)]*\))?,|&|\bnot\b/))],e}),{allNames:[]})}var ve=e=>{var t;const n="prod"===(null===(t=e.env)||void 0===t?void 0:t.name)?"prod":"stage";return"https://www.adobe.com/federal/assets/data/mep-xlg-tags.json?sheet=".concat(n)},ge=async()=>{var e,t,n;const a=(0,o.getConfig)();if(null!==(e=a.mep)&&void 0!==e&&e.entitlementMap)return a.mep.entitlementMap;const i=ve(a),r=await D(i,T.JSON);if(!r)return a.consumerEntitlements||{};const s={};return null===r||void 0===r||null===(t=r.data)||void 0===t||t.forEach((e=>{const{id:t,tagname:n}=e;s[t]=n})),null!==(n=a.mep)&&void 0!==n||(a.mep={}),a.mep.entitlementMap={...a.consumerEntitlements,...s},a.mep.entitlementMap},he=async e=>{const t=await ge();return e.flatMap((e=>{var n;return(null===(n=e.segments)||void 0===n?void 0:n.flatMap((e=>{const n=t[e.id];return n?[n]:[]})))||[]}))};function we(e){return("uk"===e.toLowerCase()?"gb":e.toLowerCase()).split("_")[0]}async function ye(e){var t,n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=(0,o.getConfig)();if(null!==(t=r.mep)&&void 0!==t&&null!==(t=t.variantOverride)&&void 0!==t&&t[e])return r.mep.variantOverride[e];const s=pe(a),c=Object.values(await ge()).some((e=>s.allNames.includes(e)));let l=[];var d;c&&(l=null!==r&&void 0!==r&&null!==(d=r.mep)&&void 0!==d&&d.enablePersV2?[]:await r.entitlements());const u=e=>{var t,n;if(!e)return!0;if(e===(null===i||void 0===i?void 0:i.toLowerCase()))return!0;if(e.startsWith("param-"))return ue(e);if(e.toLowerCase().startsWith("previouspage-"))return me(e);if(le(e,r))return!0;if(null!==(t=l)&&void 0!==t&&t.includes(e))return!0;const{lob:a,event:o}=r.mep.promises;return!(!a||a!==(null===(n=e.split("lob-")[1])||void 0===n?void 0:n.toLowerCase()))||(!("registered"!==e||!o)||p.includes(e)&&f[e]())},m=e=>{const t=e.includes(":")?e.split(":")[1]:e;if(t.startsWith(w))return u(t);return!t.split("&").map((e=>{const t=e.trim().startsWith(h),n=u(e.replace(h,"").trim());return t?!n:n})).includes(!1)};null!==(n=r.mep)&&void 0!==n&&n.geoLocation&&await async function(e){var t,n;const a=new URLSearchParams(window.location.search),o=a.get("country")||(null===(t=document.cookie.split("; ").find((e=>e.startsWith("international="))))||void 0===t?void 0:t.split("=")[1]),i=(null===(n=a.get("akamaiLocale"))||void 0===n?void 0:n.toLowerCase())||sessionStorage.getItem("akamai");if(e.mep=e.mep||{},o&&(e.mep.countryChoice=we(o)),i&&(e.mep.countryIP=we(i)),!e.mep.countryChoice&&e.mep.countryIP)e.mep.countryChoice=e.mep.countryIP;else if(!e.mep.countryIP&&e.mep.countryIPPromise)try{let t=await e.mep.countryIPPromise;t&&(t="uk"===t?"gb":t.split("_")[0],e.mep.countryIP=t,e.mep.countryChoice||(e.mep.countryChoice=t))}catch(r){z("MEP Error: Unable to get user country")}}(r);return a.find((e=>s[e].some(m)))}var be=e=>({disabled:e.disabled,event:e.event,manifest:e.manifestPath,executionOrder:"1-1",selectedVariant:{commands:[],fragments:[]},selectedVariantName:"default",variantNames:["all"],variants:{},source:["promo"]}),Ce=(e,t)=>{var n;null===(n=e.mep)||void 0===n||null===(n=n.experiments)||void 0===n||n.forEach((e=>{var n,a;(null===e||void 0===e||null===(n=e.selectedVariant)||void 0===n||null===(n=n.useblockcode)||void 0===n||n.forEach((e=>{let{selector:t,targetManifestId:n}=e;t&&n&&document.querySelectorAll(".".concat(t)).forEach((e=>e.dataset.adobeTargetTestid=n))})),t)&&(null===e||void 0===e||null===(a=e.selectedVariant)||void 0===a||null===(a=a.updatemetadata)||void 0===a||a.forEach((e=>{"gnav-source"===(null===e||void 0===e?void 0:e.selector)&&e.targetManifestId&&(t.dataset.adobeTargetTestid=e.targetManifestId)})))}))};function Pe(){const e=(0,a.getAllCookies)(),t=e[a.OPT_ON_AND_CONSENT_COOKIE],n=e[a.KNDCTR_CONSENT_COOKIE]||"",i=(0,a.getConsentState)({optOnConsentCookie:t,kndctrConsentCookie:n});return t&&"pre"!==i?(0,a.parseOptanonConsent)(t).configuration:{performance:!0,advertising:(0,o.isSignedOut)()&&"pre"!==i}}var Ee=(e,t)=>{const n=(0,o.getConfig)();n.mep.variantOverride||(n.mep.variantOverride={}),n.mep.variantOverride[e]||(n.mep.variantOverride[e]=t)},ke=e=>{const{geoRestriction:t,manifestPath:n}=e;if(!t)return!0;const a=(null===t||void 0===t?void 0:t.split(",").map((e=>e.trim().toLowerCase()))).includes((0,o.getConfig)().mep.akamaiCode);return a||Ee(n,"Default"),a};function Le(e,t){return["core services","non-marketing","marketing decrease","marketing increase"].includes(e)?e:null!==t&&void 0!==t&&t.includes("promo")?"core services":"marketing increase"}function Ie(e){if(!ke(e))return!1;const{mktgAction:t,variantNames:n,manifestPath:a}=e;if("core services"===t)return!0;const{performance:i,advertising:r}=(0,o.getConfig)().mep.consentState;return"non-marketing"===t?i:"marketing increase"===t?r:(r&&i||Ee(a,n[0]),!0)}async function Me(e,t){var n,a,i,r,s;const{name:c,manifestData:l,manifestPath:d,manifestUrl:u,manifestPlaceholders:m,manifestInfo:f,variantLabel:p,disabled:v,event:g,source:h}=e;if(v&&(!t||!Object.keys(t).length))return be(e);let w=l;if(!w){const e=await D(d,T.JSON);D&&(w=e)}const y=(null===(n=w)||void 0===n||null===(n=n.experiences)||void 0===n?void 0:n.data)||(null===(a=w)||void 0===a?void 0:a.data)||w;if(!y)return null;const b=f||(null===(i=w)||void 0===i||null===(i=i.info)||void 0===i?void 0:i.data),C=null===b||void 0===b?void 0:b.reduce(((e,t)=>(e[t.key]=t.value,e)),{}),P=null===C||void 0===C||null===(r=C["manifest-override-name"])||void 0===r?void 0:r.toLowerCase(),E=re(y,d,c||P);if(!E)return z("Error loading personalization manifestConfig: ",c||d),null;const k={"manifest-type":["Personalization","Promo","Test"],"manifest-execution-order":["First","Normal","Last"]};if(b){var I,M,A;if(E.manifestType=null===C||void 0===C||null===(I=C["manifest-type"])||void 0===I?void 0:I.toLowerCase(),E.manifestType===L){E.manifestOverrideName=P;const e=P||S(d).replace(".json","");E.analyticsTitle=e.trim().slice(0,15)}const e={"manifest-type":1,"manifest-execution-order":1};Object.keys(C).forEach((t=>{if(!k[t])return;const n=k[t].indexOf(C[t]);e[t]=n>-1?n:1})),E.executionOrder="".concat(e["manifest-execution-order"],"-").concat(e["manifest-type"]),E.mktgAction=null===(M=C["manifest-marketing-action"])||void 0===M?void 0:M.toLowerCase(),E.geoRestriction=null===(A=C["manifest-geo-restriction"])||void 0===A?void 0:A.toLowerCase()}else E.manifestType=k["manifest-type"][1],E.executionOrder="1-1";let j=v;E.mktgAction=Le(E.mktgAction,h),E.manifestPath=O(d);if(!Ie(E)){var x;if(null===(x=(0,o.getConfig)().mep)||void 0===x||!x.preview)return null;j=!0}return E.selectedVariantName=await ye(E.manifestPath,E.variantNames,p),E.placeholderData=m||(null===(s=w)||void 0===s||null===(s=s.placeholders)||void 0===s?void 0:s.data),E.name=c,E.manifest=d,E.manifestUrl=u,E.disabled=j,E.event=g,null!==h&&void 0!==h&&h.length&&(E.source=h),E}var Te=e=>{let{selector:t,val:n,action:a,manifestId:o,targetManifestId:i}=e;return{selector:O(t),val:O(n),action:a,manifestId:o,targetManifestId:i}};async function Ae(e,t){var n,a,i;if(!e)return null;const{manifestPath:r,selectedVariant:s}=e;if(!s||"default"===s)return{experiment:e};const{replacepage:c}=s;return null!==(n=s.replacepage)&&void 0!==n&&n.length&&(t.mep.replacepage=c[0]),null===(a=s.insertscript)||void 0===a||a.map((e=>(0,o.loadScript)(e.val))),null===(i=s.updatemetadata)||void 0===i||i.map((e=>K(e))),s.fragments&&(s.fragments=s.fragments.map(Te)),{manifestPath:r,experiment:e,blocks:s.useblockcode,fragments:s.fragments,commands:s.commands}}function Oe(e){if(!e)return!1;const t=Object.create(null);return decodeURIComponent(e).split("---").forEach((e=>{const n=e.trim().split("--");if(n.length>1){const[e,a]=n;t[e]=a}})),t}function Se(e,t){return e.executionOrder===t.executionOrder?0:e.executionOrder>t.executionOrder?1:-1}function je(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,o.getConfig)();const a={};let i=e,r=!1;return null!==(t=n.mep)&&void 0!==t&&t.experiments&&(i=[...e,...n.mep.experiments]),i.forEach((e=>{try{if(null===e||void 0===e||!e.manifest)return;if(e.manifestPath||(e.manifestPath=O(e.manifest)),e.source&&!e.source.includes("target")&&(e.manifest=O(e.manifest)),e.manifestPath in a){var t;let o=a[e.manifestPath],i=e;e.name&&(o=e,i=a[e.manifestPath]),i.source=i.source.concat(o.source),i.name=o.name,i.selectedVariantName=o.selectedVariantName,r="prod"===(null===n||void 0===n||null===(t=n.env)||void 0===t?void 0:t.name)&&o.selectedVariantName.startsWith("target-"),r&&(i.variants=o.variants,i.placeholderData=o.placeholderData),i.selectedVariant=i.variants[i.selectedVariantName],a[e.manifestPath]=i}else a[e.manifestPath]=e;const i=a[e.manifestPath],{selectedVariantName:s,variantNames:c,placeholderData:l}=i;s&&c.includes(s)?i.selectedVariant=i.variants[s]:(i.selectedVariantName="default",i.selectedVariant="default"),de(l,(0,o.getConfig)(),i.selectedVariantName)}catch(s){var i;z("MEP Error parsing manifests: ".concat(s.toString())),null===(i=window.lana)||void 0===i||i.log("MEP Error parsing manifests: ".concat(s.toString()))}})),Object.keys(a).forEach((e=>{delete a[e].variants})),Object.values(a).sort(Se)}function xe(e,t){const{action:n,fragment:a,manifestId:o,targetManifestId:i}=e,r=t.href.includes(y)&&!a.includes(y);return n===N.replace?(t.href=a,r&&(t.href+="#".concat(y)),_(t,o,i),a):(n===N.remove&&t.parentElement.remove(),!1)}function Ne(e){let{placeholders:t}=e;t&&Object.entries(t).forEach((e=>{let[n,a]=e;t[n]=U(a,t)}))}async function _e(e){let{manifests:t}=e;if(null===t||void 0===t||!t.length)return;let n=t;const a=(0,o.getConfig)();for(let o=0;o<n.length;o+=1){var i;n[o]=await Me(n[o],null===(i=a.mep)||void 0===i?void 0:i.variantOverride)}n=je(n,a),Ne(a);let r=[];for(const o of n){const e=await Ae(o,a);e&&r.push(e)}r=r.filter(Boolean),a.mep.experiments=[...a.mep.experiments,...n],a.mep.blocks=G(r,"blocks",a.mep.blocks),a.mep.fragments=G(r,"fragments",a.mep.fragments),a.mep.commands=q(r,"commands",a.mep.commands);const s=document.querySelector("main");if(a.mep.replacepage&&!E&&s){await J(a.mep.replacepage.val,s);const{manifestId:e,targetManifestId:t}=a.mep.replacepage;_(s,e,t)}a.mep.commands=oe(a.mep.commands);const c=r.filter((e=>{var t;return(null===(t=e.experiment)||void 0===t?void 0:t.manifestType)===L}));if(!c.length)return;const l=c.map((e=>{var t,n;const a=e.experiment.selectedVariantName.replace(w,"").trim().slice(0,15),o=a.split(":");return(o.length>2||""===(null===(t=o[0])||void 0===t?void 0:t.trim())||""===(null===(n=o[1])||void 0===n?void 0:n.trim()))&&z('MEP Error: When using (optional) column nicknames, please use the following syntax: "<nickname>: <original audience>"'),!a.includes(":")||a.startsWith(":")?"default"===a?"nopzn":a:o[0].trim()})),d=c.map((e=>e.experiment.analyticsTitle));a.mep.martech="|".concat(l.join("--"),"|").concat(d.join("--"))}var Re=async(e,t,a,o,i)=>{let r=[];const s={pzn:e,"pzn-roc":t,"mktg-decrease":i};if(Object.entries(s).forEach((e=>{let[t,n]=e;n&&(r=r.concat(function(e,t){return e?e.toLowerCase().split(/,|(\s+)|(\\n)/g).filter((e=>null===e||void 0===e?void 0:e.trim())).map((e=>({manifestPath:e,source:[t]}))):[]}(n,t)))})),a){const{default:e}=await n.e(4898).then(n.bind(n,4898));r=r.concat(e(a,C.searchParams))}if(o&&"off"!==o){const e=r.map((e=>{const{manifestPath:t}=e;if(null!==t&&void 0!==t&&t.startsWith("/"))return t;try{return new URL(t).pathname}catch(n){return t}}));o.split("---").forEach((t=>{const n=t.trim().toLowerCase().split("--")[0];e.includes(n)||r.push({manifestPath:n,source:["mep param"]})}))}return r};async function Ue(e){let{config:t,targetAjoManifests:n,targetAjoPropositions:a}=e;if(n.forEach((e=>{e.source=[t.mep.ajoEnabled?"ajo":"target"]})),t.mep.targetAjoManifests=n,t.mep.enablePersV2?window.addEventListener("alloy_sendEvent",(()=>{null!==a&&void 0!==a&&a.length&&window._satellite&&window._satellite.track("propositionDisplay",a)}),{once:!0}):null!==a&&void 0!==a&&a.length&&window._satellite&&window._satellite.track("propositionDisplay",a),"postlcp"===t.mep.targetEnabled){const e=new CustomEvent(b,{detail:"Martech returned"});window.dispatchEvent(e)}return n}function We(e){return Math.ceil(e/250)/4}function Ve(e,t,n,a){const o=function(e){return We(Date.now()-e)}(t),i=We(n);let r="target response time ".concat(o,":timed out ").concat(e,":timeout ").concat(i);a&&(r+=":".concat(a)),window.addEventListener("alloy_sendEvent",(()=>{var e,t;null===(e=window._satellite)||void 0===e||null===(t=e.track)||void 0===t||t.call(e,"event",{documentUnloading:!0,xdm:{eventType:"web.webinteraction.linkClicks",web:{webInteraction:{linkClicks:{value:1},type:"other",name:r}}},data:{_adobe_corpnew:{digitalData:{primaryEvent:{eventInfo:{eventName:r}}}}}})}),{once:!0})}var Fe=e=>{var t,n;return null!==(t=null===(n=e.propositions||e.decisions)||void 0===n||null===(n=n.map((e=>{const{id:t}=e;return e.items.map((e=>({...e,id:t})))})))||void 0===n||null===(n=n.flat())||void 0===n||null===(n=n.map((e=>{var t,n,a,o,i,r,s;const c=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.content;return c&&(c.manifestLocation||c.manifestContent)?{manifestPath:c.manifestLocation||c.manifestPath,manifestUrl:c.manifestLocation,manifestData:(null===(n=c.manifestContent)||void 0===n||null===(n=n.experiences)||void 0===n?void 0:n.data)||(null===(a=c.manifestContent)||void 0===a?void 0:a.data),manifestPlaceholders:null===(o=c.manifestContent)||void 0===o||null===(o=o.placeholders)||void 0===o?void 0:o.data,manifestInfo:null===(i=c.manifestContent)||void 0===i?void 0:i.info.data,name:(null===(r=e.meta)||void 0===r?void 0:r["activity.name"])||e.id,variantLabel:(null===(s=e.meta)||void 0===s?void 0:s["experience.name"])&&"target-".concat(e.meta["experience.name"])||c.experienceName,meta:e.meta}:null})))||void 0===n?void 0:n.filter(Boolean))&&void 0!==t?t:[]};async function Be(e){const{getTargetAjoPersonalization:t}=await n.e(897).then(n.bind(n,897)),{targetAjoManifests:a,targetAjoPropositions:o}=await t({handleAlloyResponse:Fe,config:e,sendTargetResponseAnalytics:Ve});return Ue({config:e,targetAjoManifests:a,targetAjoPropositions:o})}var ze=()=>new Promise((e=>{window.addEventListener(b,(t=>e(t.detail)),{once:!0})}));async function De(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];const{mepParam:a,mepHighlight:i,mepButton:r,pzn:s,pznroc:c,promo:l,enablePersV2:d,target:u,ajo:f,countryIPPromise:p,mepgeolocation:v,targetInteractionPromise:g,calculatedTimeout:h,postLCP:w,promises:y,mepMarketingDecrease:b,akamaiCode:C}=e,P=(0,o.getConfig)();if(w)E=!0;else{var k,L,I;for(const[e,t]of Object.entries(y))y[e]=await t;P.mep={updateFragDataProps:te,preview:"off"!==r&&("prod"!==(null===(k=P.env)||void 0===k?void 0:k.name)||a||""===a||r),variantOverride:Oe(a),highlight:void 0!==i&&"false"!==i,targetEnabled:u,ajoEnabled:f,experiments:[],prefix:(null===(L=P.locale)||void 0===L||null===(L=L.prefix.split("/")[1])||void 0===L?void 0:L.toLowerCase())||m,enablePersV2:d,countryIPPromise:p,geoLocation:v,targetInteractionPromise:g,promises:y,akamaiCode:null===C||void 0===C?void 0:C.toLowerCase(),consentState:Pe()},t=t.concat(await Re(s,c,l,a,b)),null===(I=t)||void 0===I||I.forEach((e=>{if(e.disabled)return;const t=O(e.manifestPath);(0,o.loadLink)(t,{as:"fetch",crossorigin:"anonymous",rel:"preload"})})),(s||c)&&(0,o.loadLink)(ve(P),{as:"fetch",crossorigin:"anonymous",rel:"preload"})}d&&!0===u?t=t.concat(await async function(e){var t;let{config:n,targetInteractionPromise:a,calculatedTimeout:o}=e;const i=n.mep.ajoEnabled?"ajo":"target";let r=[],s=[];if(null!==n&&void 0!==n&&null!==(t=n.mep)&&void 0!==t&&t.enablePersV2&&a){const{targetInteractionData:e,respTime:t,respStartTime:n}=await a;if(Ve(!1,n,o),e.result){var c;const n=We(t);performance.clearMarks(),performance.clearMeasures();try{window.lana.log("".concat(i," response time: ").concat(n),{tags:"martech",errorType:"e",sampleRate:.5})}catch(l){console.error("Error logging ".concat(i," response time:"),l)}r=Fe(e.result),s=(null===(c=e.result)||void 0===c?void 0:c.propositions)||[]}}return Ue({config:n,targetAjoManifests:r,targetAjoPropositions:s})}({config:P,targetInteractionPromise:g,calculatedTimeout:h})):(!0!==u&&!0!==f||(t=t.concat(await Be(P))),"postlcp"!==u&&"postlcp"!==f||Be(P)),w&&(P.mep.targetAjoManifests||await ze(),t=P.mep.targetAjoManifests);try{var M,T;null!==(M=t)&&void 0!==M&&M.length&&await _e({manifests:t}),null!==(T=P.mep)&&void 0!==T&&T.preview&&await n.e(8269).then(n.bind(n,8269)).then((e=>{let{saveToMmm:t}=e;return t()}))}catch(S){var A;z("MEP Error: ".concat(S.toString())),null===(A=window.lana)||void 0===A||A.log("MEP Error: ".concat(S.toString()))}}}}]);
//# sourceMappingURL=5771.a598bc5e.chunk.js.map