{"version":3,"file":"static/js/988.050f3f51.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/dynamic-navigation/dynamic-navigation.js","../node_modules/@adobecom/features/dynamic-navigation/status.js"],"sourcesContent":["import { getMetadata } from '../../utils/utils.js';\n\nexport function foundDisableValues() {\n  const dynamicNavDisableValues = getMetadata('dynamic-nav-disable');\n  if (!dynamicNavDisableValues) return false;\n\n  const metadataPairsMap = dynamicNavDisableValues.split(',').map((pair) => pair.split(';'));\n  const foundValues = metadataPairsMap.filter(([metadataKey, metadataContent]) => {\n    const metaTagContent = getMetadata(metadataKey.toLowerCase());\n    return (metaTagContent\n        && metaTagContent.toLowerCase() === metadataContent.toLowerCase());\n  });\n\n  return foundValues.length ? foundValues : false;\n}\n\nexport default function dynamicNav(url, key) {\n  if (foundDisableValues()) return url;\n  const metadataContent = getMetadata('dynamic-nav');\n\n  if (metadataContent === 'entry') {\n    window.sessionStorage.setItem('gnavSource', url);\n    window.sessionStorage.setItem('dynamicNavKey', key);\n    return url;\n  }\n\n  if (metadataContent !== 'on' || key !== window.sessionStorage.getItem('dynamicNavKey')) return url;\n\n  return window.sessionStorage.getItem('gnavSource') || url;\n}\n","import { createTag, getConfig, getMetadata } from '../../utils/utils.js';\nimport { foundDisableValues } from './dynamic-navigation.js';\n\nexport const ACTIVE = 'active';\nexport const ENABLED = 'enabled';\nexport const INACTIVE = 'inactive';\nexport const tooltipInfo = {\n  active: 'Displayed in green, this status appears when a user is on an entry page or a page with the Dynamic Nav enabled, indicating that the nav is fully functioning.',\n  enabled: 'Displayed in yellow, this status indicates that the Dynamic Nav is set to \"on,\" but the user has not yet visited an entry page.',\n  inactive: 'Displayed in red, this status indicates that the Dynamic Nav is either not configured or has been disabled.',\n};\n\nconst getCurrentSource = (status, storageSource, authoredSource) => {\n  if (status === 'on') {\n    return storageSource || authoredSource;\n  }\n  return authoredSource;\n};\n\nconst getStatus = (status, disabled, storageSource) => {\n  if (status === 'entry') return ACTIVE;\n\n  if (disabled) return INACTIVE;\n\n  if (status === 'on' && storageSource) return ACTIVE;\n\n  if (status === 'on' && !storageSource) return ENABLED;\n\n  return INACTIVE;\n};\n\nconst processDisableValues = (valueStr, elem, foundValues = false) => {\n  if (!valueStr || valueStr.length === 0) return;\n\n  const disableValueList = valueStr.split(',');\n  const table = createTag('table');\n  const flatValues = Array.isArray(foundValues) && foundValues.flat();\n\n  table.innerHTML = `\n      <caption>Disable Values</caption>\n      <thead>\n        <tr>\n          <th>Key</th>\n          <th>Value</th>\n          <th>Match?</th>\n        </tr>\n      </thead>\n      <tbody>\n      </tbody>`;\n\n  const tBody = table.querySelector('tbody');\n\n  disableValueList.forEach((pair) => {\n    const itemRow = createTag('tr');\n    const [key, value] = pair.split(';');\n    const keyElem = createTag('td');\n    const valElem = createTag('td');\n    const matchElem = createTag('td');\n    keyElem.innerText = key;\n    valElem.innerText = value;\n    matchElem.innerText = flatValues && flatValues.includes(value) ? 'yes' : 'no';\n\n    itemRow.append(keyElem, valElem, matchElem);\n    tBody.append(itemRow);\n  });\n\n  elem.append(table);\n};\n\nconst returnPath = (url) => {\n  if (!url.startsWith('https://')) return '';\n  const sourceUrl = new URL(url);\n  return sourceUrl.pathname;\n};\n\nconst createStatusWidget = (dynamicNavKey) => {\n  const storedSource = window.sessionStorage.getItem('gnavSource');\n  const authoredSource = getMetadata('gnav-source') || 'Metadata not found: site gnav source';\n  const dynamicNavSetting = getMetadata('dynamic-nav');\n  const currentSource = getCurrentSource(dynamicNavSetting, storedSource, authoredSource);\n  const dynamicNavDisableValues = getMetadata('dynamic-nav-disable');\n  const foundValues = foundDisableValues();\n  const status = getStatus(dynamicNavSetting, foundValues.length >= 1, storedSource);\n  const statusWidget = createTag('div', { class: 'dynamic-nav-status' });\n\n  statusWidget.innerHTML = `\n    <span class=\"title\"><span class=\"dns-badge\"></span>Dynamic Nav</span>\n    <section class=\"details hidden\">\n      <span class=\"dns-close\"></span>\n      <div class=\"message additional-info\">\n        <p>Additional Info:\n          <span>${tooltipInfo[status]}</span>\n        </p>\n      </div>\n      <p class=\"status\">Status: <span>${status}</span></p> \n      <p class=\"setting\">Setting: <span>${dynamicNavSetting}</span></p>\n      <p class=\"consumer-key\">Consumer key: <span>${dynamicNavKey}</span></p>\n      <div class=\"nav-source-info\">\n        <p>Authored and stored source match: <span>${authoredSource === currentSource}</span></p>\n        <p>Authored Nav Source:\n        <span>${returnPath(authoredSource)}</span></p>\n        <p>Stored Nav Source:\n        <span>${returnPath(currentSource)}</span></p>\n      </div>\n      <div class=\"disable-values\">\n      </div>\n    </section>\n  `;\n\n  processDisableValues(dynamicNavDisableValues, statusWidget.querySelector('.disable-values'), foundValues);\n  statusWidget.classList.add(status);\n\n  statusWidget.addEventListener('click', () => {\n    statusWidget.querySelector('.details').classList.toggle('hidden');\n    statusWidget.querySelector('.dns-badge').classList.toggle('dns-open');\n  });\n\n  return statusWidget;\n};\n\nexport default async function main() {\n  const { dynamicNavKey } = getConfig();\n  const statusWidget = createStatusWidget(dynamicNavKey);\n  const topNav = document.querySelector('.feds-topnav');\n  const fedsWrapper = document.querySelector('.feds-nav-wrapper');\n  const dnsClose = statusWidget.querySelector('.dns-close');\n\n  dnsClose.addEventListener('click', () => {\n    topNav.removeChild(statusWidget);\n  });\n\n  fedsWrapper.after(statusWidget);\n}\n"],"names":["foundDisableValues","dynamicNavDisableValues","getMetadata","foundValues","split","map","pair","filter","_ref","metadataKey","metadataContent","metaTagContent","toLowerCase","length","dynamicNav","url","key","window","sessionStorage","setItem","getItem","ACTIVE","ENABLED","INACTIVE","tooltipInfo","active","enabled","inactive","returnPath","startsWith","URL","pathname","createStatusWidget","dynamicNavKey","storedSource","authoredSource","dynamicNavSetting","currentSource","getCurrentSource","status","storageSource","getStatus","disabled","statusWidget","createTag","class","innerHTML","concat","valueStr","elem","arguments","undefined","disableValueList","table","flatValues","Array","isArray","flat","tBody","querySelector","forEach","itemRow","value","keyElem","valElem","matchElem","innerText","includes","append","processDisableValues","classList","add","addEventListener","toggle","main","getConfig","topNav","document","fedsWrapper","removeChild","after"],"sourceRoot":""}