(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[8952],{6271:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=6271,e.exports=a},6184:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=6184,e.exports=a},6571:(e,a,n)=>{"use strict";n.r(a),n.d(a,{LANA_OPTIONS:()=>m,default:()=>g,handleIFrameEvents:()=>w,lanaLog:()=>v});var r=n(3815),o=n(5379),l=(n(2560),"AppLoaded"),t="EXTERNAL",d="SWITCH",i="RETURN_BACK",s="OrderComplete",c="Error",u="Close",p=(e,a)=>{var n;let r=null===e||void 0===e||null===(n=e.offer)||void 0===n||null===(n=n.product_arrangement)||void 0===n?void 0:n.family;return r&&a.includes(r)},m={clientId:"merch-at-scale",sampleRate:10,tags:"manage-plan"},v=async(e,a)=>{var n,r,o;let{userId:l}=null!==(n=await(null===(r=window.adobeIMS)||void 0===r?void 0:r.getProfile()))&&void 0!==n?n:{};null===(o=window.lana)||void 0===o||o.log("ManagePlan/".concat(a,"/").concat(l,": ").concat(e),m)},f=!1;var w=e=>{var a,n,r;let{data:p}=e,m=null;try{m=JSON.parse(p)}catch{return}let{app:w,subType:g,data:h}=m||{};if("ManagePlan"===w)switch(g){case l:null!==(a=document.querySelector(".upgrade-flow-content iframe"))&&void 0!==a&&null!==(a=a.classList)&&void 0!==a&&a.remove("loading"),null!==(n=document.querySelector(".upgrade-flow-content sp-theme"))&&void 0!==n&&n.remove(),v("Showing modal",g);break;case t:if(null===h||void 0===h||!h.externalUrl||!h.target)return;v("Opening external URL",g),window.open(h.externalUrl,h.target);break;case d:if(null===h||void 0===h||!h.externalUrl||!h.target)return;v("Opening external URL (SWITCH)",g),window.open(h.externalUrl,h.target);break;case i:if(null===h||void 0===h||!h.externalUrl||!h.target)return;h.returnUrl&&window.sessionStorage.setItem("upgradeModalReturnUrl",h.returnUrl),v("Opening external URL (RETURN_BACK)",g),window.open(h.externalUrl,h.target);break;case s:f=!0;break;case c:break;case u:f&&(v("Reloading page to update entitlements",g),(0,o.aa)()),v("Closing modal",g),null===(r=document.querySelector(".dialog-modal.upgrade-flow-modal"))||void 0===r||r.dispatchEvent(new Event("closeModal"))}};async function g(e,a,l,t,d){var i;if(!d.includes(e)||null!==l&&void 0!==l&&l.find((e=>p(e,d))))return;let s=null===l||void 0===l||null===(i=l.filter((e=>!0===e.change_plan_available)))||void 0===i?void 0:i.find((e=>p(e,t)));if(!s)return;let{env:c,base:u}=(0,o.i)(),m=function(e,a,n){var r,o;let l=null===e||void 0===e?void 0:e.value[0].offerId,t=null===a||void 0===a||null===(r=a.offer)||void 0===r?void 0:r.offer_id;if(!l||!t)return;let d=new URL("prod"===(null===n||void 0===n?void 0:n.name)?"https://plan.adobe.com":"https://stage.plan.adobe.com");return d.searchParams.append("intent","switch"),d.searchParams.append("toOfferId",l),d.searchParams.append("fromOffer",t),d.searchParams.append("language","en"),d.searchParams.append("surface","ADOBE_COM"),d.searchParams.append("ctx","if"),d.searchParams.append("ctxRtUrl",encodeURIComponent(window.location.href)),null!==(o=e.dataset)&&void 0!==o&&o.promotionCode&&d.searchParams.append("promoCode",e.dataset.promotionCode),d.toString()}(a,s,c);if(m){window.addEventListener("message",w);let{getModal:e}=await n.e(4554).then(n.bind(n,2173)),a=async(a,r)=>{a.preventDefault(),await Promise.all([n(6184)("".concat(u,"/features/spectrum-web-components/dist/theme.js")),n(6271)("".concat(u,"/features/spectrum-web-components/dist/progress-circle.js"))]);let l=(0,o.r)("div",{class:"upgrade-flow-content"}),t=(0,o.r)("iframe",{src:m,title:"Upgrade modal",frameborder:"0",marginwidth:"0",marginheight:"0",allowfullscreen:"true",loading:"lazy",class:"loading upgrade-flow-iframe"}),d=(0,o.r)("sp-progress-circle",{label:"progress circle",indeterminate:!0,size:"l"}),i=(0,o.r)("sp-theme",{theme:"spectrum",color:"light",scale:"medium",dir:"ltr"});if(i.append(d),l.append(i),l.append(t),r){let e=window.location.hash.replace("#","")===r?"":window.location.hash;window.location.hash=r,window.addEventListener("milo:modal:closed",(()=>{window.location.hash=e}),{once:!0})}return e(null,{id:"switch-modal",content:l,closeEvent:"closeModal",class:["upgrade-flow-modal"]})};return{text:await(0,r.a)("upgrade-now",(0,o.i)()),className:"upgrade",url:m,handler:a}}}}}]);
//# sourceMappingURL=8952.78aac800.chunk.js.map