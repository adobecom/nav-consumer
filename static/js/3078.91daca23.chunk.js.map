{"version":3,"file":"static/js/3078.91daca23.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/cdt/cdt.js","../node_modules/@adobecom/features/personalization/promo-utils.js","../node_modules/@adobecom/features/placeholders.js"],"sourcesContent":["import { getMetadata, getConfig, createTag, getMepEnablement } from '../../utils/utils.js';\nimport getPromoManifests from '../personalization/promo-utils.js';\nimport { replaceKey } from '../placeholders.js';\n\nfunction loadCountdownTimer(\n  container,\n  cdtLabel,\n  cdtDays,\n  cdtHours,\n  cdtMins,\n  timeRangesEpoch,\n) {\n  let isVisible = false;\n  let interval;\n  const oneMinuteinMs = 60000;\n\n  const instant = new URL(window.location.href)?.searchParams?.get('instant');\n  let currentTime = instant ? Date.parse(instant) : Date.now();\n\n  function appendTimerBox(parent, value, label) {\n    const fragment = createTag('div', { class: 'timer-fragment' }, null, { parent });\n    const unitContainer = createTag('div', { class: 'timer-unit-container' }, null, { parent: fragment });\n    createTag('div', { class: 'timer-unit-label' }, label, { parent: fragment });\n\n    createTag('div', { class: 'timer-box' }, Math.floor(value / 10).toString(), { parent: unitContainer });\n    createTag('div', { class: 'timer-box' }, (value % 10).toString(), { parent: unitContainer });\n  }\n\n  function appendSeparator(parent) {\n    createTag('div', { class: 'timer-separator' }, ':', { parent });\n  }\n\n  function appendTimerBlock(parent, daysLeft, hoursLeft, minutesLeft) {\n    const timerBlock = createTag('div', { class: 'timer-block' }, null, { parent });\n    appendTimerBox(timerBlock, daysLeft, cdtDays);\n    appendSeparator(timerBlock);\n    appendTimerBox(timerBlock, hoursLeft, cdtHours);\n    appendSeparator(timerBlock);\n    appendTimerBox(timerBlock, minutesLeft, cdtMins);\n  }\n\n  function appendTimerLabel(parent, label) {\n    createTag('div', { class: 'timer-label' }, label, { parent });\n  }\n\n  function removeCountdown() {\n    container.replaceChildren();\n  }\n\n  function render(daysLeft, hoursLeft, minutesLeft) {\n    if (!isVisible) return;\n\n    removeCountdown();\n\n    appendTimerLabel(container, cdtLabel);\n    appendTimerBlock(container, daysLeft, hoursLeft, minutesLeft);\n  }\n\n  function updateCountdown() {\n    for (let i = 0; i < timeRangesEpoch.length; i += 2) {\n      const startTime = timeRangesEpoch[i];\n      const endTime = timeRangesEpoch[i + 1];\n\n      if (currentTime >= startTime && currentTime <= endTime) {\n        isVisible = true;\n        const diffTime = endTime - currentTime;\n        const daysLeft = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n        const hoursLeft = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const minutesLeft = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));\n        render(daysLeft, hoursLeft, minutesLeft);\n        currentTime += oneMinuteinMs;\n        return;\n      }\n    }\n\n    isVisible = false;\n    clearInterval(interval);\n    removeCountdown();\n  }\n\n  function startCountdown() {\n    updateCountdown();\n    interval = setInterval(updateCountdown, oneMinuteinMs);\n  }\n\n  startCountdown();\n}\n\nfunction isMobile() {\n  return window.matchMedia('(max-width: 767px)').matches;\n}\n\nfunction getCDTTimeRange() {\n  const promoEnabled = getMepEnablement('manifestnames', 'promo');\n  const PAGE_URL = new URL(window.location.href);\n  const persManifests = getPromoManifests(promoEnabled, PAGE_URL.searchParams);\n  let cdtMetadata = null;\n  persManifests?.forEach((manifest) => {\n    if (manifest.disabled) return;\n    if (!manifest.event.cdtStart || !manifest.event.cdtEnd) return;\n\n    cdtMetadata = `${manifest.event.cdtStart},${manifest.event.cdtEnd}`;\n  });\n\n  if (!cdtMetadata) {\n    cdtMetadata = getMetadata('countdown-timer');\n    if (cdtMetadata === null) {\n      throw new Error('Metadata for countdown-timer is not available');\n    }\n  }\n\n  const cdtRange = cdtMetadata.split(',');\n  if (cdtRange.length % 2 !== 0) {\n    throw new Error('Invalid countdown timer range');\n  }\n\n  const timeRangesEpoch = cdtRange.map((time) => {\n    const parsedTime = Date.parse(time?.trim());\n    return Number.isNaN(parsedTime) ? null : parsedTime;\n  });\n\n  if (timeRangesEpoch.includes(null)) {\n    throw new Error('Invalid format for countdown timer range');\n  }\n\n  return timeRangesEpoch;\n}\n\nexport default async function initCDT(el, classList) {\n  const placeholders = ['cdt-ends-in', 'cdt-days', 'cdt-hours', 'cdt-mins'];\n  const [cdtLabel, cdtDays, cdtHours, cdtMins] = await Promise.all(\n    placeholders.map((placeholder) => replaceKey(placeholder, getConfig())),\n  );\n\n  const timeRangesEpoch = getCDTTimeRange();\n  const cdtDiv = createTag('div', { class: 'countdown-timer' }, null, { parent: el });\n  cdtDiv.classList.add(isMobile() ? 'vertical' : 'horizontal');\n  if (classList.contains('dark')) cdtDiv.classList.add('dark');\n  if (classList.contains('center')) cdtDiv.classList.add('center');\n\n  loadCountdownTimer(cdtDiv, cdtLabel, cdtDays, cdtHours, cdtMins, timeRangesEpoch);\n}\n","import { getMetadata, getConfig } from '../../utils/utils.js';\n\nconst GMTStringToLocalDate = (gmtString) => new Date(`${gmtString}+00:00`);\n\nconst APAC = ['au', 'cn', 'hk_en', 'hk_zh', 'id_en', 'id_id', 'in', 'in_hi', 'kr', 'my_en', 'my_ms', 'nz', 'ph_en', 'ph_fil', 'sg', 'th_en', 'th_th', 'tw', 'vn_en', 'vn_vi'];\nconst EMEA = ['ae_en', 'ae_ar', 'africa', 'at', 'be_en', 'be_fr', 'be_nl', 'bg', 'ch_de', 'ch_fr', 'ch_it', 'cis_en', 'cis_ru', 'cz', 'de', 'dk', 'ee', 'eg_ar', 'eg_en', 'es', 'fi', 'fr', 'gr_el', 'gr_en', 'hu', 'ie', 'il_en', 'il_he', 'iq', 'is', 'it', 'kw_ar', 'kw_en', 'lt', 'lu_de', 'lu_en', 'lu_fr', 'lv', 'mena_ar', 'mena_en', 'ng', 'nl', 'no', 'pl', 'pt', 'qa_ar', 'qa_en', 'ro', 'ru', 'sa_en', 'sa_ar', 'se', 'si', 'sk', 'tr', 'ua', 'uk', 'za'];\nconst AMERICAS = ['us', 'ar', 'br', 'ca', 'ca_fr', 'cl', 'co', 'cr', 'ec', 'gt', 'la', 'mx', 'pe', 'pr'];\nconst JP = ['jp'];\nconst REGIONS = { APAC, EMEA, AMERICAS, JP };\nconst localeCode = getConfig()?.locale?.prefix?.substring(1) || 'us';\nconst regionCode = Object.keys(REGIONS)\n  .find((r) => REGIONS[r]?.includes(localeCode))?.toLowerCase() || null;\n\nexport const isDisabled = (event, searchParams) => {\n  if (!event) return false;\n  if (event.locales && !event.locales.includes(localeCode)) return true;\n  const currentDate = searchParams?.get('instant') ? new Date(searchParams.get('instant')) : new Date();\n  if ((!event.start && event.end) || (!event.end && event.start)) return true;\n  return Boolean(event.start && event.end\n    && (currentDate < event.start || currentDate > event.end));\n};\n\nconst isManifestWithinLocale = (locales) => {\n  if (!locales) return true;\n  return locales.split(';').map((locale) => locale.trim()).includes(localeCode);\n};\n\nconst getRegionalPromoManifests = (manifestNames, region, searchParams) => {\n  const attachedManifests = manifestNames\n    ? manifestNames.split(',')?.map((manifest) => manifest?.trim())\n    : [];\n\n  const schedule = getMetadata(region ? `${region}_schedule` : 'schedule');\n  if (!schedule) {\n    return [];\n  }\n  return schedule.split(',')\n    .map((manifest) => {\n      const [name, start, end, manifestPath, locales, cdtStart, cdtEnd] = manifest.trim().split('|').map((s) => s.trim());\n      if (attachedManifests.includes(name) && isManifestWithinLocale(locales)) {\n        const event = {\n          name,\n          start: GMTStringToLocalDate(start),\n          end: GMTStringToLocalDate(end),\n          cdtStart,\n          cdtEnd,\n        };\n        const disabled = isDisabled(event, searchParams);\n        return { manifestPath, disabled, event, source: ['promo'] };\n      }\n      return null;\n    })\n    .filter((manifest) => manifest != null);\n};\n\nexport default function getPromoManifests(manifestNames, searchParams) {\n  const promoManifests = regionCode != null ? getRegionalPromoManifests(\n    manifestNames[`${regionCode}_manifestnames`],\n    regionCode,\n    searchParams,\n  ) : [];\n  const globalPromoManifests = getRegionalPromoManifests(\n    manifestNames.manifestnames,\n    null,\n    searchParams,\n  );\n  return [...promoManifests, ...globalPromoManifests];\n}\n","import { customFetch, getConfig, getMetadata } from '../utils/utils.js';\n\nconst fetchedPlaceholders = {};\nwindow.mph = {};\n\nconst getPlaceholdersPath = (config, sheet) => {\n  const path = `${config.locale.contentRoot}/placeholders.json`;\n  const query = sheet !== 'default' && typeof sheet === 'string' && sheet.length ? `?sheet=${sheet}` : '';\n  return `${path}${query}`;\n};\n\nconst parsePlaceholderJson = async (resp, placeholders) => {\n  try {\n    const json = resp.ok ? await resp.json() : { data: [] };\n    json.data?.forEach((item) => {\n      window.mph[item.key] = item.value;\n      placeholders[item.key] = item.value;\n    });\n  } catch (e) {\n    window.lana.log(`Error parsing placeholder json: ${e.message}`, { tags: 'placeholders', errorType: 'e' });\n  }\n};\n\nconst fetchPlaceholder = (path, placeholderRequest) => new Promise(\n  // eslint-disable-next-line no-async-promise-executor\n  async (resolve) => {\n    const resp = await placeholderRequest || await customFetch(\n      { resource: path, withCacheRules: true },\n    ).catch(() => ({}));\n    const placeholders = {};\n\n    if (Array.isArray(resp)) {\n      // Overlay placeholders\n      for (const r of resp) await parsePlaceholderJson(r, placeholders);\n    } else {\n      await parsePlaceholderJson(resp, placeholders);\n    }\n\n    resolve(placeholders);\n  },\n);\n\nconst fetchPlaceholders = async ({\n  config,\n  sheet,\n  placeholderRequest,\n  placeholderPath,\n}) => {\n  const path = placeholderPath || getPlaceholdersPath(config, sheet);\n\n  fetchedPlaceholders[path] ||= fetchPlaceholder(path, placeholderRequest);\n\n  return fetchedPlaceholders[path];\n};\n\nfunction keyToStr(key) {\n  return key.replaceAll('-', ' ');\n}\n\nasync function getPlaceholder(key, config, sheet) {\n  let defaultFetched = false;\n  const defaultLocale = 'en-US';\n  const geoLocDisabled = getMetadata('disable-geo-placeholders') || 'off';\n\n  const getDefaultContentRoot = () => {\n    const defaultContentRoot = config.locale.contentRoot;\n    const localePrefix = config.locale.prefix;\n\n    if (!localePrefix.length) return defaultContentRoot;\n\n    // Certain locale prefixes are common beginnings of words, such as /es\n    // This could also be part of a page path, such as '/esign'\n    if (defaultContentRoot.endsWith(localePrefix)) {\n      return defaultContentRoot.replace(localePrefix, '');\n    }\n\n    return defaultContentRoot.replace(`${localePrefix}/`, '/');\n  };\n\n  const getDefaultPlaceholders = async () => {\n    const defaultConfig = {\n      locale: {\n        ietf: defaultLocale,\n        contentRoot: getDefaultContentRoot(),\n      },\n    };\n\n    const defaultPlaceholders = await fetchPlaceholders({ config: defaultConfig, sheet })\n      .catch(() => ({}));\n    defaultFetched = true;\n    return defaultPlaceholders;\n  };\n\n  if (config.placeholders?.[key]) return config.placeholders[key];\n  let placeholders;\n\n  if (geoLocDisabled === 'on') {\n    placeholders = await getDefaultPlaceholders();\n  } else {\n    placeholders = await fetchPlaceholders({ config, sheet });\n  }\n\n  if (typeof placeholders?.[key] === 'string') return placeholders[key];\n\n  if (!defaultFetched && config.locale.ietf !== defaultLocale) {\n    const defaultPlaceholders = await getDefaultPlaceholders();\n    if (defaultPlaceholders?.[key]) return defaultPlaceholders[key];\n  }\n\n  return keyToStr(key);\n}\n\nexport async function replaceKey(key, config, sheet = 'default') {\n  if (typeof key !== 'string' || !key.length) return '';\n\n  const label = await getPlaceholder(key, config, sheet);\n  return label;\n}\n\nexport async function replaceKeyArray(keys, config, sheet = 'default') {\n  if (!Array.isArray(keys) || !keys.length) return [];\n\n  const promiseArr = [];\n  keys.forEach((key) => {\n    promiseArr.push(getPlaceholder(key, config, sheet));\n  });\n\n  const placeholders = await Promise.all(promiseArr);\n  return placeholders;\n}\n\nexport async function replaceText(\n  text,\n  config,\n  regex = /{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,\n  sheet = 'default',\n) {\n  if (typeof text !== 'string' || !text.length) return '';\n\n  const matches = [...text.matchAll(new RegExp(regex))];\n  if (!matches.length) {\n    return text;\n  }\n  const keys = Array.from(matches, (match) => match[1] || match[2]);\n  const placeholders = await replaceKeyArray(keys, config, sheet);\n  // The .shift method is very slow, thus using normal iterator\n  let i = 0;\n  // eslint-disable-next-line no-plusplus\n  let finalText = text.replaceAll(regex, () => placeholders[i++]);\n  finalText = finalText.replace(/&nbsp;/g, '\\u00A0');\n  return finalText;\n}\n\nexport async function decoratePlaceholderArea({\n  placeholderPath,\n  placeholderRequest,\n  nodes,\n}) {\n  if (!nodes.length) return;\n  const config = getConfig();\n  await fetchPlaceholders({ placeholderPath, config, placeholderRequest });\n  const replaceNodes = nodes.map(async (nodeEl) => {\n    if (nodeEl.nodeType === Node.TEXT_NODE) {\n      nodeEl.nodeValue = await replaceText(nodeEl.nodeValue, config);\n    } else if (nodeEl.nodeType === Node.ELEMENT_NODE) {\n      const attrPromises = [...nodeEl.attributes].map(async (attr) => {\n        const attrVal = await replaceText(attr.value, config);\n        return { name: attr.name, value: attrVal };\n      });\n      const results = await Promise.all(attrPromises);\n      results.forEach(({ name, value }) => {\n        nodeEl.setAttribute(name, value);\n      });\n    }\n  });\n  await Promise.all(replaceNodes);\n}\n"],"names":["loadCountdownTimer","container","cdtLabel","cdtDays","cdtHours","cdtMins","timeRangesEpoch","_URL","interval","isVisible","oneMinuteinMs","instant","URL","window","location","href","searchParams","get","currentTime","Date","parse","now","appendTimerBox","parent","value","label","fragment","createTag","class","unitContainer","Math","floor","toString","appendSeparator","removeCountdown","replaceChildren","render","daysLeft","hoursLeft","minutesLeft","timerBlock","appendTimerBlock","updateCountdown","i","length","startTime","endTime","diffTime","clearInterval","setInterval","initCDT","el","classList","Promise","all","map","placeholder","replaceKey","getConfig","promoEnabled","getMepEnablement","PAGE_URL","persManifests","getPromoManifests","cdtMetadata","forEach","manifest","disabled","event","cdtStart","cdtEnd","concat","getMetadata","Error","cdtRange","split","time","parsedTime","trim","Number","isNaN","includes","getCDTTimeRange","cdtDiv","add","matchMedia","matches","contains","GMTStringToLocalDate","gmtString","REGIONS","APAC","EMEA","AMERICAS","JP","localeCode","_getConfig","locale","prefix","substring","regionCode","_Object$keys$find","Object","keys","find","r","_REGIONS$r","toLowerCase","isDisabled","locales","currentDate","start","end","Boolean","getRegionalPromoManifests","manifestNames","region","_manifestNames$split","attachedManifests","schedule","name","manifestPath","s","isManifestWithinLocale","source","filter","manifestnames","fetchedPlaceholders","mph","parsePlaceholderJson","async","resp","placeholders","_json$data","ok","json","data","item","key","e","lana","log","message","tags","errorType","fetchPlaceholders","config","sheet","placeholderRequest","placeholderPath","_ref","path","getPlaceholdersPath","contentRoot","query","fetchPlaceholder","customFetch","resource","withCacheRules","catch","Array","isArray","resolve","getPlaceholder","_config$placeholders","_placeholders","defaultFetched","defaultLocale","geoLocDisabled","getDefaultContentRoot","defaultContentRoot","localePrefix","endsWith","replace","getDefaultPlaceholders","defaultConfig","ietf","defaultPlaceholders","replaceAll","keyToStr","arguments","undefined","replaceKeyArray","promiseArr","push","replaceText","text","regex","matchAll","RegExp","from","match","finalText","decoratePlaceholderArea","_ref2","nodes","replaceNodes","nodeEl","nodeType","Node","TEXT_NODE","nodeValue","ELEMENT_NODE","attrPromises","attributes","attrVal","attr","_ref3","setAttribute"],"sourceRoot":""}