{"version":3,"file":"static/js/5771.a598bc5e.chunk.js","mappings":"shCAsBMA,EAAQA,IAAMC,UAAUC,UACxBC,EAAaC,OAAOC,OAAOC,MAAQ,KAAOF,OAAOC,OAAOE,OAAS,IACjEC,EAAaR,IAAQS,SAAS,cAAgBR,UAAUS,eAAiB,EACzEC,EAAcX,IAAQS,SAAS,UAAYR,UAAUS,eAAiB,EACtEE,EAAcZ,IAAQS,SAAS,SAC/BI,EAAYb,IAAQS,SAAS,UAC7BK,EAAed,IAAQS,SAAS,SAEzBM,EAAS,QACTC,EAAuB,CAClCC,IAAKA,KAAM,EACXC,OAAQA,IAAOlB,IAAQS,SAAS,YAAcT,IAAQS,SAAS,QAAWG,EAC1EO,QAASA,IAAMnB,IAAQS,SAAS,YAAcK,EAC9CM,OAAQA,IAAMpB,IAAQS,SAAS,YAAcT,IAAQS,SAAS,YAAcG,IAAgBC,IAAcC,EAC1GO,KAAMA,IAAMrB,IAAQS,SAAS,OAC7Ba,QAASA,IAAMtB,IAAQS,SAAS,YAAcE,EAC9CY,IAAKA,IAAM,mBAAmBC,KAAKxB,MAAYQ,EAC/CiB,QAASA,IAAMzB,IAAQS,SAAS,WAChCiB,IAAKA,IAAM1B,IAAQS,SAAS,eAAiBD,EAC7C,gBAAiBmB,IAAMnB,GAClB,uEACAgB,KAAKxB,MAAYW,EACtBiB,MAAOA,IAAMZ,EAAqB,oBAAsBb,EACxD0B,OAAQA,IAAMb,EAAqB,qBAAuBb,EAC1D2B,QAASA,KAAOd,EAAqB,mBACrCe,UAAWA,KAAMC,EAAAA,EAAAA,eACjBC,SAAUA,MAAOD,EAAAA,EAAAA,gBAEbE,EAAuBC,OAAOC,KAAKpB,GAGnCqB,EAAkB,eAClBC,EAAmB,gBACnBC,EAAsB,OACtBC,EAAoB,UACpBC,EAAc,UACdC,EAAyB,kBACzBC,EAAW,IAAIC,IAAIxC,OAAOyC,SAASC,MAC5BC,EAAQ,CACnB9B,IAAK,MACL+B,iBAAkB,oBAClBC,YAAa,gBAEXC,GAAY,EACVC,EAAiB,CACrBC,SAAU,WACVC,WAAY,cACZC,MAAO,SAGIC,EAAwB,kBAG/BC,EAAiB,qBAEjBC,EAAgB,CACpB,SACA,WACA,aACA,cACA,wBAGWC,EAAY,CACvBC,KAAM,OACNC,KAAM,QAGFC,EAA2B,YAIpBC,EAAgB,SAACC,GAAuB,IAAAC,EAAA,IAApBC,IAAAC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAC3BG,EAAON,EAEX,GALoBM,IAAS,OAAAA,QAAA,IAAAA,OAAA,EAAAA,EAAM5D,SAAS,iBAKxC6D,CAAaD,IAAU,QAADL,EAACK,SAAA,IAAAL,IAAAA,EAAMvD,SAAS,KAAM,OAAO4D,EAEvD,MAAME,EAAYF,EAAK5D,SAAS,aAE1B+D,GAASC,EAAAA,EAAAA,aACVJ,EAAKK,WAAWF,EAAOG,WAAcN,EAAKK,WAAW,SAAYL,EAAKK,WAAW,OACpFL,EAAA,IAAAO,OAAWP,IAGb,IACE,MAAMQ,EAAM,IAAIjC,IAAIyB,IACd,KAAES,EAAA,SAAMC,GAAaF,EACrBG,EAAcD,EAASE,MAAM,KAAK,GAClCC,EAAU,QAkBhB,OAhBIb,EAAKK,WAAWF,EAAOG,WACtBN,EAAK5D,SAAS,UACd4D,EAAK5D,SAAS,UACd4D,EAAK5D,SAAS,YACd4D,EAAK5D,SAAS,iBAMf4D,GALGJ,GACuB,UAAvBO,EAAOW,OAAOC,MACdN,EAAKrE,SAASyE,IACdF,KAAeR,EAAOa,SACtBhB,EAAK5D,SAAS,SACVsE,EAEP,GAAAH,OAAUJ,EAAOW,OAAOG,QAAMV,OAAGG,IAGrCV,EAAOE,GAAYgB,EAAAA,EAAAA,iBAAgBlB,GAAQA,EACpC,GAAPO,OAAUP,GAAIO,OAAGE,EAAKU,QAAQN,EAAS,IACzC,CAAE,MAAOO,GAEP,OADApB,EAAOE,GAAYgB,EAAAA,EAAAA,iBAAgBlB,GAAQA,EACpCA,CACT,CACF,EAEaqB,EAAerB,GAAS,OAAAA,QAAA,IAAAA,OAAA,EAAAA,EAAMY,MAAM,KAAKU,MAOhDC,EAAc,CAClB,eACA,cACA,iBACA,gBAGIC,EAAc,CAClBC,YAAa,WACbC,aAAc,cACdC,QAAS,aACTC,OAAQ,aAGJC,EAAgB,CACpBC,OAAQ,SACRX,QAAS,UACTY,gBAAiB,mBAGnB,SAASC,EAAOC,EAAIC,EAAYC,GAC1BD,IAAYD,EAAGG,QAAQF,WAAaA,GACpCC,IAAkBF,EAAGG,QAAQC,kBAAoBF,EACvD,CAEA,SAASG,EAAgBC,GACvB,MAAMC,EAAMD,EAASE,cAAcC,OACnC,OAAIF,EAAInC,WAAW,MAAQmC,EAAInC,WAAW,QAAgBvB,EAAeC,SAC7D,gBAARyD,EAA8B1D,EAAeE,WAC1CF,EAAeG,KACxB,CAEO,SAAS0D,EAAoBC,EAAOC,GACzC,MAAMC,EAAeD,IAAMzC,EAAAA,EAAAA,aAAY0C,aACvC,IAAKA,EAAc,OAAOF,EAC1B,IAAIG,EAAMH,EACV,MAAMI,EAAUD,EAAIE,MAAM,cAC1B,OAAKD,GACLA,EAAQE,SAASD,IACf,MAAME,EAAMF,EAAM9B,QAAQ,SAAU,IAAIuB,OACpCI,EAAaK,KAAMJ,EAAMA,EAAI5B,QAAQ8B,EAAOH,EAAaK,IAAK,IAE7DJ,GALcA,CAMvB,CAEA,IAQMK,EAAaA,CAACnB,EAAIoB,EAAQC,EAASpB,EAAYC,KAAqB,IAAAoB,EACzD,YAAXF,GAAsBpB,EAAGuB,UAAUC,IAAIzF,EAAiBC,GAC5D,IAAIQ,EAAO6E,EACX,IACE,MAAM,SAAE5C,EAAA,OAAUgD,EAAA,KAAQjD,GAAS,IAAIlC,IAAI+E,GAC3C7E,EAAA,GAAA8B,OAAUG,GAAQH,OAAGmD,GAAMnD,OAAGE,EAChC,CAAE,MAEF,CACA,MAAMkD,GAAIC,EAAAA,EAAAA,WAAU,IAAK,CAAEnF,QAAQ6E,GACnCtB,EAAO2B,EAAGzB,EAAYC,GACtB,MAEM0B,IAFoB,OAAA5B,QAAA,IAAAA,GAAI,QAAJsB,EAAAtB,EAAI6B,qBAAA,IAAAP,IAAJA,EAAmBQ,QAAQ,OAC/B,MAAhB9B,EAAG+B,UAAoBX,EAAOjH,SAAS,QACduH,GAAIC,EAAAA,EAAAA,WAAU,SAAK,EAAWD,GAM7D,MAL6B,YAAYxG,KAAKsB,IACpBoF,EAAKL,UAAUC,IAAI,cAzEvBxB,KACtB,MAAMgC,EAAaC,SAASC,cAAc,qBAC1C,OAAOF,IAAehC,IAAM,OAAAgC,QAAA,IAAAA,OAAA,EAAAA,EAAYG,SAASnC,GAAE,EAwE/CoC,CAAepC,KACjBqC,EAAAA,EAAAA,UAAA,GAAA/D,QAAYgE,EAAAA,EAAAA,cAAaZ,EAAElF,MAAK,eAAe,CAAE+F,GAAI,QAASC,YAAa,YAAaC,IAAK,YAExFb,CAAA,EAGIc,EAAgBA,CAAC1C,EAAA2C,KAAqE,IAAjE,QAAEtB,EAAA,WAASpB,EAAA,iBAAYC,EAAA,OAAkBkB,EAAA,UAAQwB,GAAUD,EAI3F,GAHe,YAAXvB,GACFrB,EAAOC,EAAIC,EAAYC,GAEJ,OAAjB,OAAAF,QAAA,IAAAA,OAAA,EAAAA,EAAI+B,WAAoB,OAAAa,QAAA,IAAAA,GAAAA,EAAWzI,SAAS,QAG9C,OAFA6F,EAAG6C,aAAa,OAnCGC,EAAC9C,EAAIqB,EAASD,KACnC,MAAM5E,EAAOwD,EAAG+C,aAAa,QACvBC,EAAatC,EAAoBW,GACvC,MAAe,gBAAXD,GAAuC,WAAXA,EAA4B,GAAP9C,OAAU9B,GAAI8B,OAAG0E,GACvD,iBAAX5B,GAAwC,YAAXA,EAA6B,GAAP9C,OAAU0E,GAAU1E,OAAG9B,GACvEwG,CAAA,EA8BmBF,CAAe9C,EAAIqB,EAASD,IACpDrB,EAAOC,EAAIC,EAAYC,GAChBF,EAET,GAAIK,EAAgBgB,KAAaxE,EAAeC,SAAU,CACxD,MAAMkG,EAAatC,EAAoBW,GAEvC,GAAe,YAAXD,EAGF,OAFApB,EAAGiD,UAAYD,EAERhD,EAGT,MAAMkD,GAAYvB,EAAAA,EAAAA,WAAU,MAAO,CAAC,EAAGqB,GAEvC,OADAjD,EAAOmD,EAAWjD,EAAYC,GACvBgD,CACT,CAEA,MAAMtB,EAAOT,EAAWnB,EAAIoB,EAAQC,EAASpB,EAAYC,GAEzD,OADAH,EAAO6B,EAAM3B,EAAYC,GACU,UAA/B,OAAAF,QAAA,IAAAA,OAAA,EAAAA,EAAI6B,cAAcE,UAA4BH,GAC3CD,EAAAA,EAAAA,WAAU,WAAO,EAAWC,EAAK,EAG7BuB,EAAmBA,CAACnD,EAAIM,KACnC,GAAID,EAAgBC,KAAczD,EAAeE,WAAY,KAAAqG,EAAAC,EAC3D,MAAMC,GAAgC,QAAdF,EAAApD,EAAG8B,QAAQ,YAAG,IAAAsB,OAAA,EAAdA,EAAiBlB,cAAc,SAAyB,QAArBmB,EAAKrD,EAAG8B,QAAQ,cAAK,IAAAuB,OAAA,EAAhBA,EAAmBnB,cAAc,OACjG,GAAIoB,EAAiB,CACnB,MAAMC,EAAUD,EAAgBzB,cAEhC,IAAI2B,EADSD,EAAQN,UACH/D,QAAQ,OAAQ,WAClCsE,EAASA,EAAOtE,QAAQ,SAAU,YAClCqE,EAAQN,UAAYO,CACtB,CACF,GAGIC,EAAW,CACf,CAAC7D,EAAcC,QAAS,CAACG,EAAA0D,KAA8B,IAA1B,QAAErC,EAAA,SAASf,GAASoD,EAC/B,UAAZrC,GAAqBrB,EAAGuB,UAAUC,IAAIzF,GAC1CoH,EAAiBnD,EAAIM,EAAS,EAEhC,CAACV,EAAcV,SAAU,CAACc,EAAI2D,KACvB3D,IAAMA,EAAGuB,UAAUY,SAASnG,IACjCgE,EAAG4D,sBACD,cACAlB,EAAc1C,EAAI2D,GACnB,EAEH,CAAC/D,EAAcE,iBAAkB,CAACE,EAAI2D,KACpC,MAAM,WAAE1D,EAAA,iBAAYC,GAAqByD,EACzC,IAAKA,EAAIE,YAAcF,EAAItC,QAAS,OACpC,MAAOwC,EAAWC,GAAaH,EAAIE,UAAUlF,MAAM,KAGnD,IAAIgC,EACJ,GAHAgD,EAAItC,QAAUX,EAAoBiD,EAAItC,SAGpB,SAAdwC,GAAwBC,EAAW,CACrC,MAAMtH,EAAOwD,EAAG+C,aAAa,QAC7B,GACO,MADCe,EACI9D,EAAGxD,MAAQwD,EAAGxD,KAAKrC,SAASwJ,EAAItC,SAAW,GAAKsC,EAAItC,aAE5D,IACE,MAAM9C,EAAM,IAAIjC,IAAIE,GACduH,EAAa,IAAIC,gBAAgBzF,EAAIkD,QAC3CsC,EAAWE,IAAIH,EAAWH,EAAItC,SAC9B9C,EAAIkD,OAASsC,EAAWG,WACxBvD,EAAQpC,EAAI2F,UACd,CAAE,MAAOC,GAEPC,QAAQC,IAAA,gCAAA/F,OAAoC9B,GAAQ2H,EAAMG,SAAWH,EACvE,CAEN,MACExD,EAAQgD,EAAItC,QAGVV,IACFX,EAAG6C,aAAagB,EAAWlD,GAC3BZ,EAAOC,EAAIC,EAAYC,GACzB,GAIEmE,EAAM,WAAY,IAAAE,EAEX,QAAXA,GADepG,EAAAA,EAAAA,aACJqG,WAAA,IAAAD,GAAPA,EAAYE,SAASL,QAAQC,OAAIzG,UACvC,EAEa8G,EAAYC,eAAOpG,GAAuC,IAAlCqG,EAAAhH,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAOR,EAAUC,KAAMa,EAAAN,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC1D,IACE,MAAM+G,QAAaC,MAAMtH,EAAce,GAAML,GAC7C,IAAK2G,EAAKE,GAAI,CAEZ,GAAoB,MAAhBF,EAAKG,OACP,MAAM,IAAIC,MAAM,kBAElB,MAAM,IAAIA,MAAA,qBAAA3G,OAA2BuG,EAAKG,OAAM,KAAA1G,OAAIuG,EAAKK,YAC3D,CACA,aAAaL,EAAKD,IACpB,CAAE,MAAOzF,GAEPkF,EAAA,0BAAA/F,OAA8BC,GAAOY,EAAEmF,SAAWnF,EACpD,CACA,OAAO,IACT,EAkBMgG,EAAmB,SAACC,EAAKC,GAAA,IAAMC,EAAA1H,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAW,GAAC,OAAMwH,EACpDG,QAAO,CAACC,EAASC,IAAM,IAAID,KAAYC,EAAEJ,IAAS,KAAKC,EAAQ,EAE5DI,EAAqB,SAACN,EAAKC,GAAA,IAAMC,EAAA1H,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAW,CAAC,SAAMwH,EAAIG,QAAO,CAACI,EAASC,KAAS,IAAAC,EAuBrF,OAtBS,QAATA,EAAAD,EAAKP,UAAI,IAAAQ,GAATA,EAAY5E,SAASwE,IACnB,MAAM,SAAEnF,EAAA,IAAUQ,GAAQ2E,EAC1B,GAAa,WAATJ,EAEF,YADAM,EAAQrF,GAAYQ,GAItB,GAAIR,KAAYqF,EAAS,OACzB,MAAMvE,EAAS,CACbA,OAAQqE,EAAErE,OACVtE,SAAUgE,EACVR,WACAwF,aAAcF,EAAKE,aACnB7F,WAAYwF,EAAExF,WACdC,iBAAkBuF,EAAEvF,kBAGtB,IAAK,MAAMgB,KAAOyE,EACZA,EAAQzE,GAAKpE,WAAawD,IAAUqF,EAAQzE,GAAOE,GAEzDuE,EAAQrF,GAAYc,CAAA,IAEf,IAAKkE,KAAaK,EAAS,GACjC,CAAC,EAAC,EAEQI,EAAYA,CAACC,EAAWC,KACnC,MAAMC,EAAUF,EAAU9G,QAAQ,QAAS,MAE3C,OADY,IAAIiH,OAAA,IAAA7H,OAAW4H,EAAO,eAAe,KACtChL,KAAK+K,EAAS,EAG3B,eAAsBG,EAAarI,EAAMsI,GACvC,IAAKtI,IAASsI,EAAS,OAAO,EAC9B,IAAIC,EAAYvI,EAAKwI,SAAS,KAAO,GAAJjI,OAAOP,EAAI,SAAUA,EACtDuI,EAAYA,EAAUC,SAAS,eAAiBD,EAAA,GAAAhI,OAAegI,EAAS,eACxE,MAAME,QAAa9B,EAAU4B,EAAWlJ,EAAUE,MAClD,IAAKkJ,EAAM,OAAO,EAElBH,EAAQpD,UAAYuD,EACpB,MAAM,aAAEC,IAAiBtI,EAAAA,EAAAA,aAEzB,OADIsI,GAAcA,EAAaJ,IACxB,CACT,CAGA,IAAMK,EAAeC,IACnB,MAAM,SAAErG,EAAA,IAAUQ,GAAQ6F,EAC1B,IAAKrG,IAAaQ,EAAK,OACvB,MAAM8F,EAAWtG,EAASlC,WAAW,OAAS,WAAa,OAC3D,IAAIyI,EAAS5E,SAASC,cAAA,QAAA5D,OAAsBsI,EAAQ,MAAAtI,OAAKgC,EAAQ,OAC5DuG,IACHA,GAASlF,EAAAA,EAAAA,WAAU,OAAQ,CAAE,CAACiF,GAAWtG,IACzC2B,SAAS6E,KAAKnH,OAAOkH,IAEvBA,EAAOhE,aAAa,UAAW/B,EAAI,EAWrC,SAASiG,EAAcC,GACrB,OAAOnL,OAAOC,KAAKkL,GAAKzB,QAAO,CAAC0B,EAAQ/F,KACtC+F,EAVJ,SAAsBC,GACpB,MAAMC,EAAcD,EAAI1G,cACxB,OAAK2G,EAAYhN,SAAS,cAAiBgN,EAAYhN,SAAS,kBAAqBgN,EAAYhN,SAAS,gBAGnGgN,EAAYjI,QAAQhC,GAAiBkK,GAAU,CAAC,IAAK,IAAK,IAAK,KAAKjN,SAASiN,GAAQA,EAAO,KAF1FD,EAAYjI,QAAQhC,EAAgB,GAG/C,CAIWmK,CAAanG,IAAQ8F,EAAI9F,GACzB+F,IACN,CAAC,EACN,CA2DA,IAAMK,EAAkBA,CAACC,EAAWC,IAAUD,EAC1CC,EAAKtI,QAAQqI,EAAA,cAAAjJ,OAAyBiJ,EAAS,MAC/CC,EACJ,SAASC,EAAmBC,GAC1B,IAAIF,EAAOE,EACX,MAAMC,EAAoB,CACxBC,QAAS,aACT,cAAe,WACf,gBAAiB,OACjB,cAAe,4BACf,sBAAuB,qCACvB,cAAe,qBACf,aAAc,+BAQVC,EAAiBL,EAAKxG,MAAM,kBAC5B8G,EAAYD,EAAiBA,EAAe,GAAGrH,cAAgB,GAC/DuH,EAAiBD,EAAUnJ,MAAM,QAAQ,GACzCqJ,EAAiBR,EAAKxG,MAAM,WAC5BuG,EAAYS,GAAkBF,EAAU9G,MAAM,aAAegH,EAAe,GAAK,GACvF,OAAKF,GAVW,CACd,OAAQ,OAAQ,SAAU,SAAU,OACpC,MAAO,IAAK,IAAK,SAAU,KAAM,UAAW,SAAU,MAAO,IAC7D,KAAM,KAAM,MAOY3N,SAAS2N,GAAmBN,EAX/B,CAAC,MAAO,OAYZrN,SAAS2N,IAC1BN,EAAOA,EAAKtI,QAAQ4I,EAAW,SAC/BN,EAAOF,EAAgBC,EAAWC,GAC3BA,GAEL3L,OAAOC,KAAK6L,GAAmBxN,SAAS4N,IAC1CP,EAAOA,EAAKtI,QAAQ6I,EAAgBJ,EAAkBI,IACtDP,EAAOF,EAAgBC,EAAWC,GAC3BA,IAGJM,EAAU1J,WAAW,OAAMoJ,EAAA,IAAAlJ,OAAWkJ,IACvCD,IACFC,EAAOA,EAAKtI,QAAQqI,EAAW,IAC/BC,EAAA,GAAAlJ,OAAUkJ,EAAI,eAAAlJ,OAAciJ,EAAS,QAAAjJ,OAAOkJ,EAAI,MAE3CA,EACT,CAmBO,SAASS,EAA0B3H,EAAUc,GAClD,MAAM,IAAEb,EAAA,UAAKqC,GAnBf,SAAsBtC,GACpB,IAAIC,EAAMD,EACV,MAAMsC,EAAY,GACZsF,EAAQ3H,EAAI5B,MAAM,SAaxB,OAZIuJ,EAAMrK,SACR0C,EAAM2H,EAAMC,QACZD,EAAMjH,SAASmH,IACbA,EAAKzJ,MAAM,QAAQsC,SAASoH,GAAQzF,EAAU0F,KAAKD,EAAI7H,cAAcC,SAAQ,KAG7EJ,EAAgBE,KAAS1D,EAAeE,aAC1C6F,EAAU0F,KAAK7L,EAAMC,kBACrBkG,EAAU0F,KAAK7L,EAAM9B,KACrBiI,EAAU0F,KAAK7L,EAAME,cAGhB,CAAE4D,MAAKqC,YAChB,CAE6B2F,CAAajI,GAExC,IASIuD,EATA2E,EAAmBjI,EACpB5B,MAAM,KAAK8J,KAAK,OAChB9J,MAAM,KAAK8J,KAAK,OAChBC,WAAW,6BAA8B,MACzC/J,MAAM,OACNgK,IAAIlB,GACJgB,KAAK,KACLhI,OAIH,GAAIW,IAAWxB,EAAcE,gBAAiB,CAC5C,MAAM8I,EAASJ,EAAiB7J,MAAM,KAAKU,MAC3CwE,EAAY+E,EAAO1J,QAAQ,IAAK,IAChCsJ,EAAmBA,EAAiBtJ,QAAQ0J,EAAQ,IAAInI,MAC1D,CAMA,OAJIW,IAAWxB,EAAcC,QAAUQ,EAAgBC,KAAczD,EAAeE,aAClFyL,EAAmB,gCAGd,CACLA,mBACA5F,YACAiB,YAEJ,CA6CA,IAAMgF,EAAUA,CAACtK,EAAKuK,KACpB,IAAKA,EAAS,OAAOvK,EACrB,IACE,MAAM,OAAEwK,EAAA,SAAQtK,EAAA,OAAUgD,GAAW,IAAInF,IAAIiC,GAC7C,MAAO,GAAPD,OAAUyK,GAAMzK,OAAGG,GAAQH,OAAGmD,EAAM,KAAAnD,OAAIwK,EAC1C,CAAE,MAAO3J,GACP,MAAO,GAAPb,OAAUC,EAAG,KAAAD,OAAIwK,EACnB,GAGIE,GAAsBA,CAACC,EAAUC,EAAIvI,KACzC,IAAIsI,EAAS,GAAGE,UAAUlI,SACvBmI,GAAWA,EAAMjJ,QAAQ+I,GAAMvI,GACjC,EAGU0I,GAAsBA,CAAC3H,EAAG4H,EAAQL,EAAUnM,KACvD,MAAM,WAAEmD,EAAA,kBAAYG,GAAsBsB,EAAEvB,QACxCmJ,GACErJ,GAAY+I,GAAoBC,EAAU,aAAchJ,GACxDG,GAAmB4I,GAAoBC,EAAU,oBAAqB7I,IAE1EL,EAAOjD,EAAUmD,EAAYG,EAC/B,EAGWmJ,GAAkB,WAC7B,KAD8B3L,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAASqE,UAC5BuH,iBAAA,IAAAlL,OAAqBvC,KAC7BkF,SAASjB,GAAOA,EAAGH,UACxB,EAEO,SAAS4J,MAAkB7L,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAASqE,UAClCuH,iBAAiB,qBAAqBvI,SAASyI,IACpD,IAAIA,EAAMP,UAAUlI,SAAS0I,IAAQ,IAAAC,EAAAC,EACnC,MAAMC,EAAqB,QAArBF,EAAOD,EAAIR,SAAS,UAAC,IAAAS,OAAA,EAAdA,EAAiBG,YAAYvJ,cAAcC,OAClDuJ,EAAqB,QAArBH,EAAOF,EAAIR,SAAS,UAAC,IAAAU,OAAA,EAAdA,EAAiBE,YAAYvJ,cAAcC,OAAOiI,WAAW,OAAQ,KAC7EoB,GAASE,GAAiB,WAATF,GACtBJ,EAAM7H,cAAcgB,aAAa,KAAMmH,EAAK,GAC5C,GAEN,CAEO,SAASC,GACdC,GAIA,IAHAC,EAAAvM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAASqE,SACTmI,EAAAxM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACAyM,EAAAzM,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAEA,MAAM0M,EAAWrI,SAASC,cAAc,cA4CxC,OA3CAuH,GAAkBU,GAClBD,EAASjJ,SAAS0C,IAChB,MAAM,OAAEvC,EAAA,QAAQC,EAAA,SAASf,GAAaqD,EAItC,GAHAA,EAAItC,QAAU+I,GAAe/J,EAAgBgB,KAAaxE,EAAeC,SACrE+L,EAAQxH,EAASlF,GACjBkF,EACAf,EAASlC,WAAWb,GAGtB,OA3PN,SAAgCgN,GAAS,IAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACvC,MAAMC,EAAmBP,EAAQjK,SAASyK,UAAUxN,EAAyBM,QAC1E4C,OAAO9B,MAAM,QACTqM,GAAaF,EAEd5M,GAASC,EAAAA,EAAAA,aAIf,IAAI8M,EAEJ,GALW,QAAXR,GAAAD,EAAAtM,EAAOsG,KAAI0G,eAAA,IAAAT,IAAXD,EAAWU,QAAY,CAAC,GACI,QAA5BP,GAAAD,EAAAxM,EAAOsG,IAAI0G,SAAQF,UAAS,IAAAL,IAA5BD,EAAmBM,GAAe,CAAC,GAGH,IAA5BF,EAAiBjN,eAAqB0M,EAAQjK,SAC9CwK,EAAiBjN,OAAS,EAAG,CAG/B,GAFAoN,EAAgBH,EAAiBK,MAAM,GAAG1C,KAAK,KAC/C8B,EAAQjK,SAAW2K,EACfA,EAAc7M,WAAW,0BAA2B,CACtD,MAAMgN,EAAiBC,IACrB,MAAM,KAAE7M,GAAS,IAAIlC,IAAI+O,GACnBC,EAAY9M,EAAKJ,WAAW,KAAOI,EAAKuM,UAAU,GAAKvM,EACvD+M,EAAe,IAAIvH,gBAAgBsH,GACzC,OAAOC,EAAaC,IAAI,aAAeD,EAAaC,IAAI,QAAQ,EAGlE,GADAP,EAAgBG,EAAcH,GAC1BA,EAAe,KAAAQ,EAAAC,EACa,QAA9BA,GAAAD,EAAAvN,EAAOsG,IAAI0G,QAAQF,IAAWW,iBAAA,IAAAD,IAA9BD,EAA8BE,UAAc,CAAC,GAC7C,MAAM,UAAEA,GAAczN,EAAOsG,IAAI0G,QAAQF,GACzCT,EAAQlJ,QAAU+J,EAAcb,EAAQlJ,SACxCsK,EAAUV,GAAiBV,CAC7B,CACA,MACF,CACA,GAAIlK,EAAgB4K,KAAmBpO,EAAeC,SAAU,KAAA8O,EAAAC,EAC1DZ,EAAc9Q,SAAS,eAAc8Q,GAAgBhM,EAAAA,EAAAA,iBAAgBgM,IACrEV,EAAQlJ,QAAQlH,SAAS,eAAcoQ,EAAQlJ,SAAUpC,EAAAA,EAAAA,iBAAgBsL,EAAQlJ,UACvD,QAA9BwK,GAAAD,EAAA1N,EAAOsG,IAAI0G,QAAQF,IAAWW,iBAAA,IAAAE,IAA9BD,EAA8BD,UAAc,CAAC,GAC7C,MAAM,UAAEA,GAAczN,EAAOsG,IAAI0G,QAAQF,GAEzC,UADOT,EAAQjK,SACX2K,KAAiBU,EAAW,OAGhC,IAAK,MAAMzK,KAAOyK,EACZA,EAAUzK,GAAKG,UAAY4J,IAAeU,EAAUzK,GAAOqJ,GAEjEoB,EAAUV,GAAiBV,EAE3BU,EAAgBzN,EAAcyN,GAE9B,IAAK,MAAM/J,KAAOyK,EACZA,EAAUzK,GAAKG,UAAY4J,IAAeU,EAAUzK,GAAOqJ,GAGjE,YADAoB,EAAUV,GAAiBV,EAE7B,CACF,CAC8B,QAA9BM,GAAAD,EAAA1M,EAAOsG,IAAI0G,QAAQF,IAAWd,gBAAA,IAAAW,IAA9BD,EAA8BV,SAAa,IAC3ChM,EAAOsG,IAAI0G,QAAQF,GAAWd,SAAS5B,KAAKiC,EAC9C,CAkMMuB,CAAuBnI,QACvBA,EAAIoI,aAAexO,GAGrB,MAAM,IACJyO,EAAA,UACApJ,EAAA,UACAiB,GA1GN,SAA6BtD,EAAK4J,EAAQE,EAAajJ,GACrD,MAAM6K,EAAO5B,EAAcF,EAASlI,SAC9B3B,EAAWC,EAAIE,OACrB,IAAKH,EAAU,MAAO,CAAC,EAEvB,GAAID,EAAgBC,KAAczD,EAAeC,SAC/C,IAIE,MAAO,CAAEkP,IAHSC,EAAKzC,iBAAA,YAAAlL,OACTd,EAAc8C,GAAU,GAAM,iBAAAhC,OAAgBd,EAAc8C,GAAU,GAAK,OAEhEsC,UAAW,CAACnG,EAAM9B,IAAK8B,EAAMC,kBACxD,CAAE,MAAOyC,GAEP,MAAO,CAAE6M,IAAK,GAAIpJ,UAAW,GAC/B,CAEF,MAAM,iBACJ4F,EAAA,UACA5F,EAAA,UACAiB,GACEoE,EAA0B3H,EAAUc,GAExC,IAAI4K,EACJ,IAEE,GADAA,EAAMC,EAAKzC,iBAAiBhB,GACxBnI,EAAgBC,KAAczD,EAAeE,WAAY,CAC3D,MAAMmP,EAAQ,iLACdF,EAAM,IAAIA,GACPG,QAAQnM,GAAOA,EAAGoM,UAAU5L,cAAcQ,MAAMkL,KAChDvD,KAAK3I,GAAQ,CAAC,SAAU,MAAM7F,SAAS6F,EAAG6B,cAAcwK,QAAQ7L,eAC7DR,EAAG6B,cACH7B,GACR,CACF,CAAE,MAAOb,GAGP,OADAkF,EAAI,qBAAsB/D,GACnB,CAAC,CACV,CACA,OAAIsC,EAAUzI,SAASsC,EAAM9B,OAASqR,EAAInO,SAC1CmO,EAAM,CAACA,EAAI,KAD8C,CAAEA,MAAKpJ,YAAWiB,YAG7E,CAkEQyI,CAAoBhM,EAAU6J,EAAQE,EAAajJ,GAEvDvF,OAAO0Q,OAAO5I,EAAK,CAAEf,YAAWiB,cAEhC,OAAAmI,QAAA,IAAAA,GAAAA,EAAK/K,SAASjB,IACZ,IAAKA,KACGoB,KAAUqC,MAAerC,KAAU7B,IACrC4K,IAAWA,EAAOhI,SAASnC,IAC3BpD,GAAa,OAAA0N,QAAA,IAAAA,GAAAA,EAAUnI,SAASnC,GAAM,OAE5C,GAAIoB,KAAUqC,EAEZ,YADAA,EAASrC,GAAQpB,EAAI2D,GAGvB,MAAM6I,EAAenM,EAAgBC,KAAczD,EAAeC,SAC9DkD,EAAG6B,cACH7B,EACJ,OAAAwM,QAAA,IAAAA,GAAAA,EAAc5I,sBACZrE,EAAY6B,GACZsB,EAAc8J,EAAc7I,GAC7B,KAEEqI,EAAInO,SAAW8F,EAAIf,UAAUzI,SAASsC,EAAM9B,OAC3CgJ,EAAIf,UAAUzI,SAASsC,EAAMC,qBACjCiH,EAAI8I,WAAY,EAClB,IAEFlD,GAAgBY,GACTD,EAASiC,QAAQxI,IAASA,EAAI8I,WAChC9I,EAAIoI,eAAiBxO,GAC5B,CAEA,IAAMmP,GAAiBA,CAACC,EAAMC,EAAcC,EAAU/G,EAAcgH,KAAc,IAAAC,EAAAC,EAAAC,EAChF,MAAM/O,GAASC,EAAAA,EAAAA,aACf,IAAI8B,EAAab,EAAY0G,GACzBoH,EAAWjN,EAAWf,QAAQ,QAAS,IACvC4N,IAAWI,EAAWJ,GACd,QAARC,EAAC7O,EAAOsG,WAAA,IAAAuI,GAAPA,EAAYtI,UAASxE,GAAa,GAEvC,MAAMmB,EAAc,QAAd4L,EAASL,EAAKvL,cAAA,IAAA4L,OAAA,EAALA,EAAaxM,cACzBtB,QAAQ,UAAW,IAAIA,QAAQ,WAAY,IAAIA,QAAQ,YAAa,IACvE,IAAKkC,EAEH,YADAiD,EAAI,sCAAuCsI,GAG7C,MAAMQ,EAAaR,EAAK,gBAAkBA,EAAK,yBACzC,SAAErM,GAAaqM,EAErB,GAAIQ,IAAepH,EAAUoH,EAAY,IAAI7Q,IAAIxC,OAAOyC,UAAUkC,UAAW,OAEjE,QAARwO,EAAC/O,EAAOsG,WAAA,IAAAyI,GAAPA,EAAYxI,UAASxE,GAAa,GACvC,MAAM,OAAE8I,GAAW1M,EACnBuQ,EAAa3L,SAASmM,IACpB,MAAMlN,IAAmBkN,EAAGjT,SAAS+B,IAAqBgR,EAC1D,IAAKP,EAAKS,IAAkC,UAA3BT,EAAKS,GAAI5M,cAA2B,OAErD,MAAM6M,EAAc,CAClBjM,SACAd,WACA6M,aACA9L,QAASsL,EAAKS,GACdrB,aAAc1L,EAAgBC,GAC9BL,aACAC,oBAGF,GAAIkB,KAAUqC,GAAY4J,EAAYtB,eAAiBlP,EAAeC,SACpE+P,EAASO,GAAIzB,UAAUrD,KAAK,CAC1BhI,SAAU9C,EAAc6P,EAAY/M,SAAS3B,MAAM,OAAO,IAC1DmC,IAAKtD,EAAcmP,EAAKS,IACxBhM,SACAnB,aACAC,0BAEG,GAAIZ,EAAYnF,SAASiH,GAG9B,GAFAyL,EAASO,GAAIhM,GAAUyL,EAASO,GAAIhM,IAAW,GAEhC,iBAAXA,EAA2B,CAC7B,MAAM,cAAE6J,EAAA,YAAeqC,GA3aTC,EAACC,EAAMtP,EAAQ6K,KAAW,IAAA0E,EAAAC,EAAAC,EAAAC,EAC9C,IAAI9M,EAAM0M,EACN,QAAJC,EAAI3M,SAAA,IAAA2M,GAAAA,EAAKtT,SAAS,QAAO2G,EAAM,QAAN4M,EAAM5M,SAAA,IAAA4M,OAAA,EAAAA,EAAK/O,MAAM,MAAM8J,KAAK,MAChD,QAADkF,EAAC7M,SAAA,IAAA6M,GAAAA,EAAKvP,WAAW,OAAM0C,EAAA,IAAAxC,OAAUwC,IACrC,MAAMmK,EAAgB,QAAhB2C,EAAgB9M,SAAA,IAAA8M,OAAA,EAAAA,EAAKjP,MAAM,KAAKU,MAStC,OALEyB,EAFEA,EAAI1C,WAAW,UAEjB,GAAAE,OAASJ,EAAO2P,UAAY3P,EAAOG,UAAQC,OAAGwC,EAAI5B,QAAQ,QAAS,KAEnE,GAAAZ,OAASyK,GAAMzK,OAAGwC,GAGb,CAAEmK,gBAAeqC,YAAaxM,EAAK,EA8ZGyM,CAAcZ,EAAKS,GAAKlP,EAAQ6K,GACvE8D,EAASO,GAAIhM,GAAQkH,KAAK,CACxBhI,SAAU2K,EACVnK,IAAKwM,EACLH,aACAlN,aACAC,oBAEJ,MACE2M,EAASO,GAAIhM,GAAQkH,KAAK,CACxBhI,SAAU9C,EAAc8C,GACxBQ,IAAKtD,EAAcmP,EAAKS,IACxBD,aACAlN,aACAC,0BAGKkB,KAAUqC,GAAYrC,KAAU7B,IACzCsN,EAASO,GAAIlD,SAAS5B,KAAK+E,EAC7B,GACA,EAGG,SAASS,GAAsBC,EAAMjI,EAAcoH,GACxD,GAAK,OAAAa,QAAA,IAAAA,IAAAA,EAAMlQ,OAAQ,OAAO,KAE1B,MAAMmQ,EAAiB,CAAC,EAClBC,EAAcF,EAAKpF,KAAKuF,GAAMnH,EAAcmH,KAElD,IAAI,IAAAC,EACF,MAAMtB,EAAW,CAAC,EACZD,EAAe/Q,OAAOC,KAAKmS,EAAY,IAC1C9B,QAAQiB,IAAQjQ,EAAchD,SAASiT,KAE1CR,EAAa3L,SAASmM,IACpBP,EAASO,GAAM,CAAElD,SAAU,GAAIyB,UAAW,GAAI,IAGhDsC,EAAYhN,SAAS0L,IACnBD,GAAeC,EAAMC,EAAcC,EAAU/G,EAAcoH,EAAS,IAGtEc,EAAenB,SAAWA,EAC1BmB,EAAepB,aAAeA,EAI9B,OAFY,QAARuB,GADWhQ,EAAAA,EAAAA,aACHqG,WAAA,IAAA2J,GAAPA,EAAY1J,UAASuJ,EAAe/N,YAAa,GAE/C+N,CACT,CAAE,MAAO7O,GAEPkF,EAAI,gDAAiDlF,EAAG8O,EAC1D,CACA,OAAO,IACT,CAEA,eAAsBG,GAAsBvN,EAAc3C,EAAQmQ,GACrC,UAAvBnQ,EAAOW,OAAOC,YAEZ,+BAAsCwP,MAAKC,IAA+B,IAAAC,EAAAC,EAAA,IAA9B,sBAAEC,GAAsBH,EAC7D,QAAXE,GAAAD,EAAAtQ,EAAOsG,KAAImK,4BAAA,IAAAF,IAAXD,EAAWG,qBAAyB,CAAC,GAErC9N,EAAaI,SAAQ,CAAC2E,EAAMH,KAC1B,MAAMmJ,EAAW/N,EAAa4E,GAC9B,IAAIoJ,EAAUD,EAASnU,IAAWmU,EAASE,IAAMF,EAASG,IAAMH,EAAS1N,IAEzE,IAAK2N,EAAS,OAEdA,EAAUH,EAAsBG,GAChC,MAAMG,EAAkBN,EAAsB9I,EAAKyI,IACnDnQ,EAAOsG,IAAImK,qBAAqBK,GAAmBH,CAAA,GACnD,GAEN,CACA,IAAMI,GAA2BA,CAACC,EAAMhR,KAAW,IAAAiR,EACjD,IAAKD,EAAK/U,SAAS,mBAAqB+U,EAAK/U,SAAS,aAAc,OAAO,EAC3E,MAAMiV,EAAsC,QAAtCD,EAAcD,EAAKlO,MAAM,sBAAa,IAAAmO,GAAK,QAALA,EAAxBA,EAA4B,UAAC,IAAAA,OAAA,EAA7BA,EAAgCxQ,MAAM,KAAKgK,KAAK0G,GAAOA,EAAG5O,SAC9E,GAAK,OAAA2O,QAAA,IAAAA,IAAAA,EAAavR,OAAQ,OAAO,EACjC,MAAM,cAAEyR,EAAA,UAAeC,GAAcrR,EAAOsG,IACtCgL,EAAcN,EAAK/U,SAAS,iBAAmBmV,EAAgBC,EACrE,OAAOH,EAAYjV,SAASqV,EAAY,EAG1C,SAASC,GAAgBvI,EAAKhJ,GAC5B,GAAIgJ,EAAI/M,SAAS,kBAAoB+M,EAAI/M,SAAS,aAAc,CAC9D,MAAMgN,EAAcD,EAAIhI,QAAQ,KAAM,MACtC,OAAO+P,GAAyB9H,EAAajJ,EAC/C,CACA,OAAO,CACT,CAEO,SAASwR,GAAkB7O,EAAc3C,GAAkC,IAAAyR,EAAA,IAA1BC,EAAAhS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAsB,GAC5E,GAAK,OAAAiD,QAAA,IAAAA,IAAAA,EAAchD,QAAkC,YAAxB+R,EAAmC,OAAO1R,EACvE,MAAM,UAAEqR,EAAA,cAAWD,GAAkBpR,EAAOsG,KAAO,CAAC,EAC9CqL,EAAa,CACjBD,EAAoBpP,cACb,QADyBmP,EAChCzR,EAAOsG,WAAA,IAAAmL,OAAA,EAAPA,EAAY3Q,OACZd,EAAOW,OAAOiR,OAAOtP,iBACjB+O,EAAY,CAAC,aAADjR,OAAciR,EAAS,MAAO,MAC1CD,EAAgB,CAAC,iBAADhR,OAAkBgR,EAAa,MAAO,GAC1DpR,EAAOW,OAAOC,KAAK0B,iBAChBtC,EAAOW,OAAOC,KAAK0B,cAAc7B,MAAM,KAC1C,QACA,SAGIoR,GADO,OAAAlP,QAAA,IAAAA,GAAAA,EAAchD,OAAShC,OAAOmU,QAAQnP,EAAa,IAAM,IAClDoP,MAAKC,IAAW,IAATC,GAAGD,EAC5B,MAAM/I,EAAcgJ,EAAI3P,cACxB,OAAOqP,EAAW1V,SAASgN,IAAgBsI,GAAgBtI,EAAajJ,EAAO,IAE3EgD,EAAM,OAAA6O,QAAA,IAAAA,OAAA,EAAAA,EAAS,GAErB,GAAI7O,EAAK,CACP,MAAMsE,EAAU3E,EAAa0E,QAAO,CAAC6K,EAAKxK,KACxCwK,EAAIxK,EAAK1E,KAAO0E,EAAK1E,GACdkP,IACN,CAAC,GACJlS,EAAO2C,aAAe,IAAM3C,EAAO2C,cAAgB,CAAC,KAAO2E,EAC7D,CAIA,OAFA4I,GAAsBvN,EAAc3C,EAAQgD,GAErChD,CACT,CAEA,IAAMmS,GAAsBC,IAC1B,MAAOpB,EAAMpO,GAAOwP,EAAS3R,MAAM,UAAU,GAAGA,MAAM,KACtD,IAAKuQ,EAAM,OAAO,EAClB,MAGMqB,EAHS,IAAIvM,gBACjBwM,MAAMC,KAAKpU,EAASkP,cAAcmF,IAAA,IAAExP,EAAKP,GAAK+P,EAAA,MAAM,CAACxP,EAAIV,cAAe,OAAAG,QAAA,IAAAA,OAAA,EAAAA,EAAOH,cAAc,KAEjEgL,IAAI0D,EAAK1O,eACvC,OAAuB,OAAnB+P,KACEzP,GAAYA,IAAQyP,EAGd,EAGDI,GAA4B,SAACC,GAAyD,IAAxCC,EAAAjT,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAkBqE,SAAS6O,SACpF,IAAKD,EAAiB,OAAO,EAC7B,MAAME,EAAqBH,EAAgBpQ,cAAc7B,MAAM,iBAAiB,GAChF,OAAOoH,EAAUgL,EAAoB,IAAIzU,IAAIuU,GAAiBpS,SAChE,EAEA,SAASuS,GAAU5L,GACjB,OAAOA,EAAIuD,KAAKsI,GAAMA,EAAExQ,SAAQ0L,OAAO+E,QACzC,CACO,SAASC,GAAiBvE,GAC/B,OAAOA,EAAarH,QAAO,CAAC6L,EAAKlC,KAC/B,IAAImC,EAAU,CAACnC,GAIf,OAHKA,EAAK9Q,WAAWlC,KAAoBmV,EAAUnC,EAAKvQ,MAAM,iBAC9DyS,EAAIlC,GAAQ8B,GAAUK,GACtBD,EAAIE,SAAW,IAAIF,EAAIE,YAAaN,GAAU9B,EAAKvQ,MAAM,+BAClDyS,CAAA,GACN,CAAEE,SAAU,IACjB,CAEA,IAAMC,GAAiBrT,IAAW,IAAAsT,EAChC,MAAMC,EAA6B,UAAd,QAAPD,EAAAtT,EAAOwT,WAAA,IAAAF,OAAA,EAAPA,EAAYtC,MAAkB,OAAS,QACrD,MAAO,qEAAP5Q,OAA4EmT,EAAK,EAGtEE,GAAoBhN,UAAY,IAAAiN,EAAAC,EAAAC,EAC3C,MAAM5T,GAASC,EAAAA,EAAAA,aACf,GAAW,QAAXyT,EAAI1T,EAAOsG,WAAA,IAAAoN,GAAPA,EAAYG,eAAgB,OAAO7T,EAAOsG,IAAIuN,eAClD,MAAMC,EAAiBT,GAAcrT,GAC/B+T,QAAoBvN,EAAUsN,EAAgB5U,EAAUC,MAC9D,IAAK4U,EAAa,OAAO/T,EAAOgU,sBAAwB,CAAC,EACzD,MAAMC,EAAe,CAAC,EAOtB,OANA,OAAAF,QAAA,IAAAA,GAAa,QAAbJ,EAAAI,EAAalE,YAAA,IAAA8D,GAAbA,EAAmB5Q,SAASmR,IAC1B,MAAM,GAAElJ,EAAA,QAAImJ,GAAYD,EACxBD,EAAajJ,GAAMmJ,CAAA,IAEd,QAAPP,EAAA5T,EAAOsG,WAAA,IAAAsN,IAAP5T,EAAOsG,IAAQ,CAAC,GAChBtG,EAAOsG,IAAIuN,eAAiB,IAAK7T,EAAOgU,wBAAyBC,GAC1DjU,EAAOsG,IAAIuN,cAAA,EAGPO,GAAkB3N,UAC7B,MAAMoN,QAAuBJ,KAE7B,OAAO5D,EAAKwE,SAASC,IAAgB,IAAAC,EAMnC,OALyB,QAAnBA,EAAOD,EAAYE,gBAAA,IAAAD,OAAA,EAAZA,EAAsBF,SAASI,IAC1C,MAAMC,EAAWb,EAAeY,EAAQzJ,IACxC,OAAO0J,EAAW,CAACA,GAAY,EAAC,MAGnB,EAAC,GAChB,EAGJ,SAASC,GAAYC,GACnB,OAAkC,OAA1BA,EAAQtS,cAAyB,KAAOsS,EAAQtS,eAAe7B,MAAM,KAAK,EACpF,CA4BAgG,eAAeoO,GACbjN,GAGA,IAAAkN,EAAAC,EAAA,IAFArG,EAAAhP,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAe,GACfsV,EAAAtV,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAe,KAEf,MAAMM,GAASC,EAAAA,EAAAA,aACf,GAAW,QAAX6U,EAAI9U,EAAOsG,WAAA,IAAAwO,GAAK,QAALA,EAAPA,EAAYG,uBAAA,IAAAH,GAAZA,EAA8BlN,GAChC,OAAO5H,EAAOsG,IAAI2O,gBAAgBrN,GAGpC,MAAMuH,EAAc8D,GAAiBvE,GAG/BwG,EADkBvX,OAAOwX,aAAa1B,MACF2B,MAAMC,GAAQlG,EAAYiE,SAASnX,SAASoZ,KAEtF,IAAIC,EAAmB,GACA,IAAAC,EAAnBL,IAEAI,EADE,OAAAtV,QAAA,IAAAA,GAAQ,QAARuV,EAAAvV,EAAQsG,WAAA,IAAAiP,GAARA,EAAaC,aACI,SAEMxV,EAAOiU,gBAIpC,MAAMwB,EAAYzE,IAAS,IAAA0E,EAAAC,EACzB,IAAK3E,EAAM,OAAO,EAClB,GAAIA,KAAS,OAAAgE,QAAA,IAAAA,OAAA,EAAAA,EAAc1S,eAAe,OAAO,EACjD,GAAI0O,EAAK9Q,WAAW,UAAW,OAAOiS,GAAmBnB,GACzD,GAAIA,EAAK1O,cAAcpC,WAAW,iBAAkB,OAAOuS,GAA0BzB,GACrF,GAAIO,GAAgBP,EAAMhR,GAAS,OAAO,EAC1C,GAAI,QAAJ0V,EAAIJ,SAAA,IAAAI,GAAAA,EAAkBzZ,SAAS+U,GAAO,OAAO,EAC7C,MAAM,IAAE4E,EAAA,MAAKC,GAAU7V,EAAOsG,IAAIwP,SAClC,SAAIF,GAAOA,KAA4B,QAA5BD,EAAQ3E,EAAKvQ,MAAM,QAAQ,UAAC,IAAAkV,OAAA,EAApBA,EAAuBrT,oBAC7B,eAAT0O,IAAyB6E,IACtBnY,EAAqBzB,SAAS+U,IAASxU,EAAqBwU,KAAO,EAGtE+E,EAAgBC,IAEpB,MAAMhF,EAAOgF,EAAE/Z,SAAS,KAAO+Z,EAAEvV,MAAM,KAAK,GAAKuV,EACjD,GAAIhF,EAAK9Q,WAAWlC,GAAoB,OAAOyX,EAASzE,GAMxD,OALsBA,EAAKvQ,MAAM,KAAKgK,KAAKwL,IACzC,MAAMC,EAAUD,EAAU1T,OAAOrC,WAAWnC,GACtC+E,EAAQ2S,EAASQ,EAAUjV,QAAQjD,EAAqB,IAAIwE,QAClE,OAAO2T,GAAWpT,EAAQA,CAAA,IAEN7G,UAAS,EAAM,EAG5B,QAAX8Y,EAAI/U,EAAOsG,WAAA,IAAAyO,GAAPA,EAAYoB,mBA5ElB1P,eAA6BzG,GAAQ,IAAAoW,EAAAC,EACnC,MAAMC,EAAY,IAAIxQ,gBAAgBlK,OAAOyC,SAASkF,QAChDqR,EAAU0B,EAAUhJ,IAAI,aAAyF,QAAhF8I,EAAMrS,SAASwS,OAAO9V,MAAM,MAAMsR,MAAMtG,GAAQA,EAAIvL,WAAW,2BAAiB,IAAAkW,OAAA,EAA1EA,EAA6E3V,MAAM,KAAK,IAC/H+V,GAAyC,QAA5BH,EAAAC,EAAUhJ,IAAI,uBAAc,IAAA+I,OAAA,EAA5BA,EAA+B/T,gBAAiBmU,eAAeC,QAAQ,UAQ1F,GAPA1W,EAAOsG,IAAMtG,EAAOsG,KAAO,CAAC,EACxBsO,IACF5U,EAAOsG,IAAI8K,cAAgBuD,GAAYC,IAErC4B,IACFxW,EAAOsG,IAAI+K,UAAYsD,GAAY6B,KAEhCxW,EAAOsG,IAAI8K,eAAiBpR,EAAOsG,IAAI+K,UAC1CrR,EAAOsG,IAAI8K,cAAgBpR,EAAOsG,IAAI+K,eACjC,IAAKrR,EAAOsG,IAAI+K,WAAarR,EAAOsG,IAAIqQ,iBAC7C,IACE,IAAItF,QAAkBrR,EAAOsG,IAAIqQ,iBAC7BtF,IACFA,EAA0B,OAAdA,EAAqB,KAAOA,EAAU5Q,MAAM,KAAK,GAC7DT,EAAOsG,IAAI+K,UAAYA,EAClBrR,EAAOsG,IAAI8K,gBAAepR,EAAOsG,IAAI8K,cAAgBC,GAE9D,CAAE,MAAOpQ,GACPkF,EAAI,wCACN,CAEJ,CAoDUyQ,CAAc5W,GAItB,OADwB0O,EAAaqD,MAAM8E,GAAY1H,EAAY0H,GAASzB,KAAKW,IAEnF,CAEA,IAAMe,GAA2BC,IAAA,CAC/BC,SAAUD,EAASC,SACnBnB,MAAOkB,EAASlB,MAChBkB,SAAUA,EAASnP,aACnBqP,eAAgB,MAChBC,gBAAiB,CAAElL,SAAU,GAAIyB,UAAW,IAC5CiE,oBAAqB,UACrBhD,aAAc,CAAC,OACfC,SAAU,CAAC,EACXwI,OAAQ,CAAC,WAGEC,GAAkBA,CAACpX,EAAQqX,KAAW,IAAAC,EAC1C,QAAPA,EAAAtX,EAAOsG,WAAA,IAAAgR,GAAK,QAALA,EAAPA,EAAYC,mBAAA,IAAAD,GAAZA,EAAyBvU,SAASyU,IAAe,IAAAC,EAOnCC,GANZ,OAAAF,QAAA,IAAAA,GAAY,QAAZC,EAAAD,EAAYN,uBAAA,IAAAO,GAAiB,QAAjBA,EAAZA,EAA6BE,oBAAA,IAAAF,GAA7BA,EAA2C1U,SAAQ6U,IAAoC,IAAnC,SAAExV,EAAA,iBAAUJ,GAAiB4V,EAC3ExV,GAAYJ,GACd+B,SAASuH,iBAAA,IAAAlL,OAAqBgC,IAC3BW,SAASjB,GAAQA,EAAGG,QAAQC,kBAAoBF,GACrD,IAEEqV,KACF,OAAAG,QAAA,IAAAA,GAAY,QAAZE,EAAAF,EAAYN,uBAAA,IAAAQ,GAAiB,QAAjBA,EAAZA,EAA6BG,sBAAA,IAAAH,GAA7BA,EAA6C3U,SAAS+U,IACnB,iBAA7B,OAAAA,QAAA,IAAAA,OAAA,EAAAA,EAAgB1V,WAA8B0V,EAAe9V,mBAC/DqV,EAAOpV,QAAQC,kBAAoB4V,EAAe9V,iBACpD,IAEJ,GACA,EAGG,SAAS+V,KACd,MAAMC,GAAUC,EAAAA,EAAAA,iBACVC,EAAqBF,EAAQG,EAAAA,2BAC7BC,EAAsBJ,EAAQK,EAAAA,wBAA0B,GACxDC,GAAeC,EAAAA,EAAAA,iBAAgB,CAAEL,qBAAoBE,wBAE3D,OAAKF,GAAuC,QAAjBI,GAMpBE,EAAAA,EAAAA,qBAAoBN,GAAoBO,cALtC,CACLC,aAAa,EACbC,aAAanb,EAAAA,EAAAA,gBAAkC,QAAjB8a,EAIpC,CAEO,IAAMM,GAAkBA,CAAChR,EAAciR,KAC5C,MAAM7Y,GAASC,EAAAA,EAAAA,aACVD,EAAOsG,IAAI2O,kBAAiBjV,EAAOsG,IAAI2O,gBAAkB,CAAC,GAC1DjV,EAAOsG,IAAI2O,gBAAgBrN,KAC9B5H,EAAOsG,IAAI2O,gBAAgBrN,GAAgBiR,EAC7C,EAGWC,GAAqBhJ,IAChC,MAAM,eAAEiJ,EAAA,aAAgBnR,GAAiBkI,EACzC,IAAKiJ,EAAgB,OAAO,EAC5B,MACMC,GADW,OAAAD,QAAA,IAAAA,OAAA,EAAAA,EAAgBtY,MAAM,KAAKgK,KAAK/C,GAASA,EAAKnF,OAAOD,iBAC3CrG,UAASgE,EAAAA,EAAAA,aAAYqG,IAAIkQ,YAEpD,OADKwC,GAAWJ,GAAgBhR,EAAc,WACvCoR,CAAA,EAGF,SAASC,GAA2BC,EAAY/B,GAErD,MADwB,CAAC,gBAAiB,gBAAiB,qBAAsB,sBAC7Dlb,SAASid,GAAoBA,EAC7C,OAAA/B,QAAA,IAAAA,GAAAA,EAAQlb,SAAS,SAAiB,gBAC/B,oBACT,CAEO,SAASkd,GAAiBrJ,GAC/B,IAAKgJ,GAAkBhJ,GAAiB,OAAO,EAC/C,MAAM,WAAEoJ,EAAA,aAAYxK,EAAA,aAAc9G,GAAiBkI,EACnD,GAAmB,kBAAfoJ,EAAgC,OAAO,EAE3C,MAAQR,YAAAU,EAAA,YAAaT,IAAgB1Y,EAAAA,EAAAA,aAAYqG,IAAIgS,aACrD,MAAmB,kBAAfY,EAAuCE,EACxB,uBAAfF,EAA4CP,GAE3CA,GAAgBS,GAAaR,GAAgBhR,EAAc8G,EAAa,KACtE,EACT,CAEAjI,eAAe4S,GAAkBC,EAAMrE,GAAiB,IAAAsE,EAAAC,EAAAC,EAAAC,EAAAC,EACtD,MAAM,KACJ3I,EAAA,aACA4I,EAAA,aACAhS,EAAA,YACAiS,EAAA,qBACAC,EAAA,aACAC,EAAA,aACA/E,EAAA,SACAgC,EAAA,MACAnB,EAAA,OACAsB,GACEmC,EACJ,GAAItC,KAAc/B,IAAoBtX,OAAOC,KAAKqX,GAAiBtV,QACjE,OAAOmX,GAAwBwC,GAEjC,IAAIzJ,EAAO+J,EACX,IAAK/J,EAAM,CACT,MAAMkE,QAAoBvN,EAAUoB,EAAc1I,EAAUC,MACxDqH,IAAWqJ,EAAOkE,EACxB,CAEA,MAAMiG,GAAW,QAAAT,EAAA1J,SAAA,IAAA0J,GAAM,QAANA,EAAAA,EAAMxJ,mBAAA,IAAAwJ,OAAA,EAANA,EAAmB1J,QAAQ,QAAR2J,EAAQ3J,SAAA,IAAA2J,OAAA,EAAAA,EAAM3J,OAAQA,EAC1D,IAAKmK,EAAU,OAAO,KACtB,MAAMC,EAAUF,IAAgB,QAAhBN,EAAgB5J,SAAA,IAAA4J,GAAM,QAANA,EAAAA,EAAMH,YAAA,IAAAG,OAAA,EAANA,EAAY5J,MACtCqK,EAAU,OAAAD,QAAA,IAAAA,OAAA,EAAAA,EAAS5S,QAAO,CAAC6L,EAAKxL,KACpCwL,EAAIxL,EAAK1E,KAAO0E,EAAKjF,MACdyQ,IACN,CAAC,GACEiH,EAAuB,OAAAD,QAAA,IAAAA,GAAkC,QAAlCR,EAAAQ,EAAU,iCAAwB,IAAAR,OAAA,EAAlCA,EAAqCpX,cAE5DwN,EAAiBF,GAAsBoK,EAAUpS,EADtCoJ,GAAQmJ,GAGzB,IAAKrK,EAGH,OADA3J,EAAI,iDAAkD6K,GAAQpJ,GACvD,KAET,MAAMwS,EAAa,CACjB,gBAAiB,CAAC,kBAAmB,QAAS,QAC9C,2BAA4B,CAAC,QAAS,SAAU,SAElD,GAAIH,EAAS,KAAAI,EAAAC,EAAAC,EAEX,GADAzK,EAAe0K,aAAe,OAAAN,QAAA,IAAAA,GAAyB,QAAzBG,EAAAH,EAAU,wBAAe,IAAAG,OAAA,EAAzBA,EAA4B/X,cACtDwN,EAAe0K,eAAiBzb,EAAuB,CACzD+Q,EAAeqK,qBAAuBA,EACtC,MAAMM,EAAYN,GAAwBjZ,EAAY0G,GAAc5G,QAAQ,QAAS,IACrF8O,EAAe4K,eAAiBD,EAAUlY,OAAO0K,MAAM,EAAG,GAC5D,CACA,MAAMgK,EAAiB,CACrB,gBAAiB,EACjB,2BAA4B,GAE9BtZ,OAAOC,KAAKsc,GAASnX,SAASC,IAC5B,IAAKoX,EAAWpX,GAAM,OACtB,MAAM2X,EAAQP,EAAWpX,GAAK4X,QAAQV,EAAQlX,IAC9CiU,EAAejU,GAAO2X,GAAS,EAAIA,EAAQ,CAAC,IAE9C7K,EAAemH,eAAA,GAAA7W,OAAoB6W,EAAe,4BAA2B,KAAA7W,OAAI6W,EAAe,kBAChGnH,EAAeoJ,WAAgD,QAAhDoB,EAAaJ,EAAQ,oCAA2B,IAAAI,OAAA,EAAnCA,EAAsChY,cAClEwN,EAAeiJ,eAAmD,QAAnDwB,EAAiBL,EAAQ,mCAA0B,IAAAK,OAAA,EAAlCA,EAAqCjY,aACvE,MAEEwN,EAAe0K,aAAeJ,EAAW,iBAAiB,GAC1DtK,EAAemH,eAAiB,MAGlC,IAAI4D,EAAgB7D,EACpBlH,EAAeoJ,WAAaD,GAA2BnJ,EAAeoJ,WAAY/B,GAClFrH,EAAelI,aAAetI,EAAcsI,GAE5C,IADkBuR,GAAiBrJ,GACnB,KAAAgL,EACd,GAAiB,QAAbA,GAAC7a,EAAAA,EAAAA,aAAYqG,WAAA,IAAAwU,IAAZA,EAAiBvU,QAAS,OAAO,KACtCsU,GAAgB,CAClB,CAeA,OAbA/K,EAAe4B,0BAA4BmD,GACzC/E,EAAelI,aACfkI,EAAepB,aACfsG,GAGFlF,EAAeiL,gBAAkBjB,IAAwB,QAAxBH,EAAwB9J,SAAA,IAAA8J,GAAM,QAANA,EAAAA,EAAMhX,oBAAA,IAAAgX,OAAA,EAANA,EAAoB9J,MAC7EC,EAAekB,KAAOA,EACtBlB,EAAeiH,SAAWnP,EAC1BkI,EAAe+J,YAAcA,EAC7B/J,EAAekH,SAAW6D,EAC1B/K,EAAe+F,MAAQA,EACnB,OAAAsB,QAAA,IAAAA,GAAAA,EAAQxX,SAAQmQ,EAAeqH,OAASA,GACrCrH,CACT,CAEA,IAAMkL,GAAqBC,IAAA,IAAC,SAAE7Y,EAAA,IAAUQ,EAAA,OAAKM,EAAA,WAAQnB,EAAA,iBAAYC,GAAiBiZ,EAAA,MAAO,CACvF7Y,SAAU9C,EAAc8C,GACxBQ,IAAKtD,EAAcsD,GACnBM,SACAnB,aACAC,mBACD,EACD,eAAsBkZ,GAAkB1D,EAAYxX,GAAQ,IAAAmb,EAAAC,EAAAC,EAC1D,IAAK7D,EAAY,OAAO,KACxB,MAAM,aAAE5P,EAAA,gBAAcsP,GAAoBM,EAC1C,IAAKN,GAAuC,YAApBA,EAA+B,MAAO,CAAEM,cAGhE,MAAM,YAAE8D,GAAgBpE,EASxB,OAPoB,QAApBiE,EAAIjE,EAAgBoE,mBAAA,IAAAH,GAAhBA,EAA6Bxb,SAAQK,EAAOsG,IAAIgV,YAAcA,EAAY,IAE9D,QAAhBF,EAAAlE,EAAgBqE,oBAAA,IAAAH,GAAhBA,EAA8B3Q,KAAK+Q,IAAWC,EAAAA,EAAAA,YAAWD,EAAO5Y,OAChD,QAAhByY,EAAAnE,EAAgBW,sBAAA,IAAAwD,GAAhBA,EAAgC5Q,KAAKhC,GAAaD,EAAYC,KAE9DyO,EAAgBzJ,YAAhByJ,EAAgBzJ,UAAcyJ,EAAgBzJ,UAAUhD,IAAIuQ,KAErD,CACLpT,eACA4P,aACAkE,OAAQxE,EAAgBS,aACxBlK,UAAWyJ,EAAgBzJ,UAC3BzB,SAAUkL,EAAgBlL,SAE9B,CAEA,SAAS2P,GAAcC,GACrB,IAAKA,EAAU,OAAO,EACtB,MAAMC,EAAYle,OAAOme,OAAO,MAUhC,OATqBC,mBAAmBH,GAC3Bnb,MAAM,OAAOsC,SAAS2E,IACjC,MAAMsU,EAAOtU,EAAKnF,OAAO9B,MAAM,MAC/B,GAAIub,EAAKrc,OAAS,EAAG,CACnB,MAAOiI,EAAcsP,GAAmB8E,EACxCH,EAAUjU,GAAgBsP,CAC5B,KAGK2E,CACT,CAEA,SAASI,GAAsBzY,EAAG0Y,GAChC,OAAI1Y,EAAEyT,iBAAmBiF,EAAEjF,eAAuB,EAC3CzT,EAAEyT,eAAiBiF,EAAEjF,eAAiB,GAAK,CACpD,CAEO,SAASkF,GAAyBC,GAAiC,IAAAC,EAAA,IAAtBrc,EAAAN,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,IAASO,EAAAA,EAAAA,aAC3D,MAAMqc,EAAc,CAAC,EACrB,IAAIC,EAAeH,EACfI,GAAuC,EAiD3C,OAhDW,QAAXH,EAAIrc,EAAOsG,WAAA,IAAA+V,GAAPA,EAAY9E,cAAagF,EAAe,IAAIH,KAAcpc,EAAOsG,IAAIiR,cACzEgF,EAAaxZ,SAASgU,IACpB,IACE,GAAK,OAAAA,QAAA,IAAAA,IAAAA,EAAUA,SAAU,OAGzB,GAFKA,EAASnP,eAAcmP,EAASnP,aAAetI,EAAcyX,EAASA,WACvEA,EAASI,SAAWJ,EAASI,OAAOlb,SAAS,YAAW8a,EAASA,SAAWzX,EAAcyX,EAASA,WACnGA,EAASnP,gBAAgB0U,EAAa,KAAAG,EACxC,IAAIC,EAAeJ,EAAYvF,EAASnP,cACpC+U,EAAgB5F,EAChBA,EAAS/F,OACX0L,EAAe3F,EACf4F,EAAgBL,EAAYvF,EAASnP,eAEvC+U,EAAcxF,OAASwF,EAAcxF,OAAO/W,OAAOsc,EAAavF,QAChEwF,EAAc3L,KAAO0L,EAAa1L,KAClC2L,EAAcjL,oBAAsBgL,EAAahL,oBACjD8K,EAA6D,UAAtB,OAAAxc,QAAA,IAAAA,GAAQ,QAARyc,EAAAzc,EAAQwT,WAAA,IAAAiJ,OAAA,EAARA,EAAazL,OAAmB0L,EAAahL,oBAAoBxR,WAAW,WAE/Gsc,IACFG,EAAchO,SAAW+N,EAAa/N,SACtCgO,EAAc5B,gBAAkB2B,EAAa3B,iBAG/C4B,EAAczF,gBAAkByF,EAAchO,SAASgO,EAAcjL,qBACrE4K,EAAYvF,EAASnP,cAAgB+U,CACvC,MACEL,EAAYvF,EAASnP,cAAgBmP,EAGvC,MAAMjH,EAAiBwM,EAAYvF,EAASnP,eACtC,oBAAE8J,EAAA,aAAqBhD,EAAA,gBAAcqM,GAAoBjL,EAE3D4B,GAAuBhD,EAAazS,SAASyV,GAC/C5B,EAAeoH,gBAAkBpH,EAAenB,SAAS+C,IAGzD5B,EAAe4B,oBAAsB,UACrC5B,EAAeoH,gBAAkB,WAEnC1F,GAAkBuJ,GAAiB9a,EAAAA,EAAAA,aAAa6P,EAAe4B,oBACjE,CAAE,MAAOzQ,GAAG,IAAA2b,EACVzW,EAAA,gCAAA/F,OAAoCa,EAAE+E,aAC/B,QAAP4W,EAAAhhB,OAAOihB,YAAA,IAAAD,GAAPA,EAAazW,IAAA,gCAAA/F,OAAoCa,EAAE+E,YACrD,KAEFrI,OAAOC,KAAK0e,GAAavZ,SAASC,WACzBsZ,EAAYtZ,GAAK2L,QAAA,IAEnBhR,OAAOwX,OAAOmH,GAAaQ,KAAKb,GACzC,CAEO,SAASc,GAAsB1Q,EAAS7I,GAC7C,MAAM,OAAEN,EAAA,SAAQtE,EAAA,WAAUmD,EAAA,iBAAYC,GAAqBqK,EACrD2Q,EAAaxZ,EAAElF,KAAKrC,SAASgC,KAAiBW,EAAS3C,SAASgC,GACtE,OAAIiF,IAAWxB,EAAcV,SAC3BwC,EAAElF,KAAOM,EACLoe,IAAWxZ,EAAElF,MAAA,IAAA8B,OAAYnC,IAC7B4D,EAAO2B,EAAGzB,EAAYC,GACfpD,IAELsE,IAAWxB,EAAcC,QAC3B6B,EAAEG,cAAchC,UAEX,EACT,CAEO,SAASsb,GAAAC,GAA0C,IAAlB,aAAEva,GAAaua,EAChDva,GACLhF,OAAOmU,QAAQnP,GAAcI,SAAQoa,IAAkB,IAAhBna,EAAKP,GAAK0a,EAC/Cxa,EAAaK,GAAOR,EAAoBC,EAAOE,EAAa,GAEhE,CAEA,eAAsBya,GAAAC,GAAyB,IAAf,UAAEjB,GAAUiB,EAC1C,GAAK,OAAAjB,QAAA,IAAAA,IAAAA,EAAWzc,OAAQ,OACxB,IAAI4X,EAAc6E,EAClB,MAAMpc,GAASC,EAAAA,EAAAA,aAEf,IAAK,IAAIsH,EAAI,EAAGA,EAAIgQ,EAAY5X,OAAQ4H,GAAK,EAAG,KAAA+V,EAC9C/F,EAAYhQ,SAAW8R,GACrB9B,EAAYhQ,GACL,QADM+V,EACbtd,EAAOsG,WAAA,IAAAgX,OAAA,EAAPA,EAAYrI,gBAEhB,CACAsC,EAAc4E,GAAyB5E,EAAavX,GACpDid,GAAwBjd,GAExB,IAAIsH,EAAU,GAEd,IAAK,MAAMkQ,KAAcD,EAAa,CACpC,MAAMjS,QAAe4V,GAAkB1D,EAAYxX,GAC/CsF,GAAQgC,EAAQ8C,KAAK9E,EAC3B,CACAgC,EAAUA,EAAQ2G,OAAO+E,SAEzBhT,EAAOsG,IAAIiR,YAAc,IAAIvX,EAAOsG,IAAIiR,eAAgBA,GACxDvX,EAAOsG,IAAIoV,OAASlU,EAAmBF,EAAS,SAAUtH,EAAOsG,IAAIoV,QACrE1b,EAAOsG,IAAImH,UAAYjG,EAAmBF,EAAS,YAAatH,EAAOsG,IAAImH,WAC3EzN,EAAOsG,IAAI0F,SAAW/E,EAAiBK,EAAS,WAAYtH,EAAOsG,IAAI0F,UAEvE,MAAMuR,EAAOxZ,SAASC,cAAc,QACpC,GAAIhE,EAAOsG,IAAIgV,cAAgB5c,GAAa6e,EAAM,OAC1CrV,EAAalI,EAAOsG,IAAIgV,YAAY1Y,IAAK2a,GAC/C,MAAM,WAAExb,EAAA,iBAAYC,GAAqBhC,EAAOsG,IAAIgV,YACpDzZ,EAAO0b,EAAMxb,EAAYC,EAC3B,CAEAhC,EAAOsG,IAAI0F,SAAWD,GAAe/L,EAAOsG,IAAI0F,UAEhD,MAAMwR,EAAUlW,EAAQ2G,QAAQwP,IAAA,IAAAC,EAAA,OAAS,QAAFA,EAAAD,EAAEjG,kBAAA,IAAAkG,OAAA,EAAFA,EAAclD,gBAAiBzb,CAAsB,IAC5F,IAAKye,EAAQ7d,OAAQ,OAErB,MAAMge,EAAcH,EAAQ/S,KAAKgT,IAAM,IAAAG,EAAAC,EACrC,MAAMjb,EAAM6a,EAAEjG,WAAW9F,oBAAoB1Q,QAAQhD,EAAmB,IAAIuE,OAAO0K,MAAM,EAAG,IACtF/F,EAAMtE,EAAInC,MAAM,KAItB,OAHIyG,EAAIvH,OAAS,GAAwB,MAAd,QAALie,EAAA1W,EAAI,UAAC,IAAA0W,OAAA,EAALA,EAAQrb,SAAoC,MAAd,QAALsb,EAAA3W,EAAI,UAAC,IAAA2W,OAAA,EAALA,EAAQtb,UACrD4D,EAAI,0HAEDvD,EAAI3G,SAAS,MAAQ2G,EAAI1C,WAAW,KAAqB,YAAR0C,EAAoB,QAAUA,EAC7EsE,EAAI,GAAG3E,MAAM,IAEhBub,EAAeN,EAAQ/S,KAAKgT,GAAMA,EAAEjG,WAAWkD,iBACrD1a,EAAOsG,IAAIyX,QAAA,IAAA3d,OAAcud,EAAYpT,KAAK,MAAK,KAAAnK,OAAI0d,EAAavT,KAAK,MACvE,CAUO,IAAMyT,GAAoBvX,MAC/BwX,EACAC,EACAC,EACAvC,EACAwC,KAEA,IAAIC,EAAgB,GAEpB,MAAMC,EAAU,CACdC,IAAKN,EACL,UAAWC,EACX,gBAAiBE,GAOnB,GALAzgB,OAAOmU,QAAQwM,GAASvb,SAAQyb,IAAqB,IAAnBrH,EAAQ1U,GAAK+b,EACxC/b,IACL4b,EAAgBA,EAAcje,OAxBlC,SAAsCqe,EAAgBtH,GACpD,OAAKsH,EACEA,EAAenc,cACnB7B,MAAM,kBACNwN,QAAQpO,GAAS,OAAAA,QAAA,IAAAA,OAAA,EAAAA,EAAM0C,SACvBkI,KAAK7C,IAAA,CAAoBA,eAAcuP,OAAQ,CAACA,OAJvB,EAK9B,CAkByCuH,CAA6Bjc,EAAO0U,IAAQ,IAG/EgH,EAAc,CAChB,MAAQQ,QAASC,SAA4B,+BAC7CP,EAAgBA,EAAcje,OAAOwe,EAAkBT,EAAchgB,EAASkP,cAChF,CAEA,GAAIuO,GAAyB,QAAbA,EAAoB,CAClC,MAAMiD,EAAoBR,EAAc5T,KAAKsM,IAC3C,MAAM,aAAEnP,GAAiBmP,EACzB,GAAI,OAAAnP,QAAA,IAAAA,GAAAA,EAAc1H,WAAW,KAAM,OAAO0H,EAC1C,IAEE,OADY,IAAIxJ,IAAIwJ,GACTrH,QACb,CAAE,MAAOU,GACP,OAAO2G,CACT,KAGFgU,EAASnb,MAAM,OAAOsC,SAAS+b,IAC7B,MAAMlX,EAAekX,EAAavc,OAAOD,cAAc7B,MAAM,MAAM,GAC9Doe,EAAkB5iB,SAAS2L,IAC9ByW,EAAcjU,KAAK,CAAExC,eAAcuP,OAAQ,CAAC,cAC9C,GAEJ,CAEA,OAAOkH,CAAA,EAGT5X,eAAesY,GAAAC,GAEb,IADA,OAAEhf,EAAA,mBAAQif,EAAA,sBAAoBC,GAAsBF,EAepD,GAbAC,EAAmBlc,SAASgU,IAC1BA,EAASI,OAAS,CAACnX,EAAOsG,IAAI6Y,WAAa,MAAQ,SAAS,IAE9Dnf,EAAOsG,IAAI2Y,mBAAqBA,EAC5Bjf,EAAOsG,IAAIkP,aACb5Z,OAAOwjB,iBAAiB,mBAAmB,KACrC,OAAAF,QAAA,IAAAA,GAAAA,EAAuBvf,QAAU/D,OAAOyjB,YAC1CzjB,OAAOyjB,WAAWC,MAAM,qBAAsBJ,EAChD,GACC,CAAEK,MAAM,IACF,OAAAL,QAAA,IAAAA,GAAAA,EAAuBvf,QAAU/D,OAAOyjB,YACjDzjB,OAAOyjB,WAAWC,MAAM,qBAAsBJ,GAEf,YAA7Blf,EAAOsG,IAAIkZ,cAA6B,CAC1C,MAAM3J,EAAQ,IAAI4J,YAAYvhB,EAAwB,CAAEwhB,OAAQ,qBAChE9jB,OAAO+jB,cAAc9J,EACvB,CACA,OAAOoJ,CACT,CAEA,SAASW,GAAeC,GACtB,OAAOC,KAAKC,KAAKF,EAAM,KAAO,CAChC,CAOA,SAASG,GAA4BC,EAASC,EAAeC,EAAc/Z,GAEzE,MAAMga,EAPR,SAA+BF,GAE7B,OAAON,GADcS,KAAKC,MAAQJ,EAEpC,CAIuBK,CAAsBL,GACrCM,EAAcZ,GAAeO,GACnC,IAAIvd,EAAA,wBAAAxC,OAA8BggB,EAAY,eAAAhgB,OAAc6f,EAAO,aAAA7f,OAAYogB,GAC3Epa,IAASxD,GAAA,IAAAxC,OAAWgG,IAExBxK,OAAOwjB,iBAAiB,mBAAmB,KAAM,IAAAqB,EAAAC,EACxC,QAAPD,EAAA7kB,OAAOyjB,kBAAA,IAAAoB,GAAY,QAAZC,EAAPD,EAAmBnB,aAAA,IAAAoB,GAAnBA,EAAAC,KAAAF,EAA2B,QAAS,CAClCG,mBAAmB,EACnBC,IAAK,CACHC,UAAW,gCACXC,IAAK,CACHC,eAAgB,CACdC,WAAY,CAAExe,MAAO,GACrBiE,KAAM,QACNsK,KAAMpO,KAIZiN,KACE,CAAEqR,eAAgB,CAAEC,YAAa,CAAEC,aAAc,CAAEC,UAAW,CAAEC,UAAW1e,QAC7E,GACD,CAAE2c,MAAM,GACb,CAEA,IAAMgC,GAAuBC,IAAA,IAAAC,EAAAC,EAAA,OAqBX,QArBWD,EAAiD,QAAjDC,EAAeF,EAASG,cAAgBH,EAASI,iBAAA,IAAAF,GAI3E,QAJ2EA,EAAjDA,EACzBjX,KAAKlD,IACL,MAAM,GAAEyD,GAAOzD,EACf,OAAOA,EAAEsa,MAAMpX,KAAK/C,IAAA,IAAeA,EAAMsD,QAAM,WAChD,IAAA0W,GACM,QADNA,EAJ0BA,EAKzBI,cAAK,IAAAJ,GAeN,QAfMA,EALoBA,EAMzBjX,KAAK/C,IAAS,IAAAqa,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACd,MAAMlf,EAAU,OAAAuE,QAAA,IAAAA,GAAM,QAANqa,EAAAra,EAAMmI,YAAA,IAAAkS,OAAA,EAANA,EAAY5e,QAC5B,OAAKA,IAAaA,EAAQmf,kBAAoBnf,EAAQof,iBAC/C,CACL3a,aAAczE,EAAQmf,kBAAoBnf,EAAQyE,aAClDiS,YAAa1W,EAAQmf,iBACrB1I,cAAsB,QAARoI,EAAA7e,EAAQof,uBAAA,IAAAP,GAAiB,QAAjBA,EAARA,EAAyBjS,mBAAA,IAAAiS,OAAA,EAAzBA,EAAsCnS,QAAgB,QAAhBoS,EAAQ9e,EAAQof,uBAAA,IAAAN,OAAA,EAARA,EAAyBpS,MACrFiK,qBAA8B,QAA9BoI,EAAsB/e,EAAQof,uBAAA,IAAAL,GAAiB,QAAjBA,EAARA,EAAyBvf,oBAAA,IAAAuf,OAAA,EAAzBA,EAAuCrS,KAC7DkK,aAAsB,QAAtBoI,EAAchf,EAAQof,uBAAA,IAAAJ,OAAA,EAARA,EAAyB7I,KAAKzJ,KAC5CmB,MAAW,QAALoR,EAAA1a,EAAK8a,YAAA,IAAAJ,OAAA,EAALA,EAAY,mBAAoB1a,EAAKsD,GAC3CgK,cAAoB,QAALqN,EAAA3a,EAAK8a,YAAA,IAAAH,OAAA,EAALA,EAAY,qBAAiB,UAAAjiB,OAAesH,EAAK8a,KAAK,qBAChErf,EAAQsf,eACbD,KAAM9a,EAAK8a,MAVkE,IAW9E,WACF,IAAAd,OAAA,EApB0BA,EAqBzBzT,OAAO+E,gBAAO,IAAAyO,EAAAA,EAAK,EAAC,EAmCxBhb,eAAeic,GAAY1iB,GACzB,MAAM,4BAAE2iB,SAAsC,8BACxC,mBACJ1D,EAAA,sBACAC,SACQyD,EACR,CAAEpB,uBAAqBvhB,SAAQggB,iCAEjC,OAAOjB,GACL,CAAE/e,SAAQif,qBAAoBC,yBAElC,CAEA,IAAM0D,GAAeA,IAAM,IAAIC,SAASC,IAEtClnB,OAAOwjB,iBAAiBlhB,GADN2X,GAAUiN,EAAQjN,EAAM6J,SACgB,CAAEH,MAAM,GAAO,IAG3E,eAAsBwD,KAAuB,IAAlBC,EAAAtjB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAc,CAAC,EACpC0c,EAAY,GAChB,MAAM,SACJR,EAAA,aAAUqH,EAAA,UAAcC,EAAA,IAAW3E,EAAA,OAAK4E,EAAA,MAAQC,EAAA,aAAO5N,EAAA,OACvD6N,EAAA,IAAQC,EAAA,iBAAK3M,EAAA,eAAkB4M,EAAA,yBAAgBC,EAAA,kBAA0BC,EAAA,QACzEC,EAAA,SAAS5N,EAAA,qBAAUsI,EAAA,WAAsB5H,GACvCwM,EACEhjB,GAASC,EAAAA,EAAAA,aAEf,GAAIyjB,EACFhlB,GAAY,MACP,KAAAilB,EAAAC,EAAAC,EACL,IAAK,MAAO7gB,EAAK8gB,KAAYnmB,OAAOmU,QAAQgE,GAAWA,EAAS9S,SAAa8gB,EAC7E9jB,EAAOsG,IAAM,CACX6E,uBACA5E,QAAwB,QAAd2c,IACiB,UAAd,QAAPS,EAAA3jB,EAAOwT,WAAA,IAAAmQ,OAAA,EAAPA,EAAY3S,OAAmB4K,GAAyB,KAAbA,GAAmBsH,GACpEjO,gBAAiB0G,GAAcC,GAC/BmI,eAA6B,IAAjBd,GAA+C,UAAjBA,EAC1CzD,cAAe6D,EACflE,WAAYmE,EACZ/L,YAAa,GACbzW,QAAe,QAAP8iB,EAAA5jB,EAAOW,cAAA,IAAAijB,GAA2B,QAA3BA,EAAPA,EAAe9iB,OAAOL,MAAM,KAAK,UAAC,IAAAmjB,OAAA,EAAlCA,EAAqCthB,gBAAiB/F,EAC9DiZ,eACAmB,mBACAR,YAAaoN,EACbC,2BACA1N,WACAU,WAAY,OAAAA,QAAA,IAAAA,OAAA,EAAAA,EAAYlU,cACxBgW,aAAcP,MAGhBqE,EAAYA,EAAUhc,aAAa4d,GACjCO,EACA4E,EACAC,EACAxH,EACAwC,IAEF,QAAAyF,EAAAzH,SAAA,IAAAyH,GAAAA,EAAW9gB,SAASgU,IAClB,GAAIA,EAASC,SAAU,OACvB,MAAMgN,EAAgB1kB,EAAcyX,EAASnP,eAC7CzD,EAAAA,EAAAA,UAAS6f,EAAe,CAAE3f,GAAI,QAASC,YAAa,YAAaC,IAAK,WAAY,KAEhFga,GAAO4E,KAAQhf,EAAAA,EAAAA,UAASkP,GAAcrT,GAAS,CAAEqE,GAAI,QAASC,YAAa,YAAaC,IAAK,WACnG,CACIiR,IAA2B,IAAX6N,EAClBjH,EAAYA,EAAUhc,aAlG1BqG,eAAewd,GAEb,IAAAC,EAAA,IADA,OAAElkB,EAAA,yBAAQwjB,EAAA,kBAA0BC,GAAkBQ,EAEtD,MAAME,EAAYnkB,EAAOsG,IAAI6Y,WAAa,MAAQ,SAClD,IAAIF,EAAqB,GACrBC,EAAwB,GAC5B,GAAI,OAAAlf,QAAA,IAAAA,GAAQ,QAARkkB,EAAAlkB,EAAQsG,WAAA,IAAA4d,GAARA,EAAa1O,cAAgBgO,EAA0B,CACzD,MAAM,sBAAEY,EAAA,SAAuBC,EAAA,cAAUC,SAAwBd,EAEjE,GADAxD,IAA4B,EAAOsE,EAAeb,GAC9CW,EAAsB9e,OAAQ,KAAAif,EAChC,MAAMC,EAAsB5E,GAAeyE,GAC3C3L,YAAY+L,aACZ/L,YAAYgM,gBACZ,IACE9oB,OAAOihB,KAAK1W,IAAA,GAAA/F,OAAO+jB,EAAS,oBAAA/jB,OAAmBokB,GAAuB,CACpEG,KAAM,UACNC,UAAW,IACXC,WAAY,IAEhB,CAAE,MAAO5jB,GAEPiF,QAAQD,MAAA,iBAAA7F,OAAuB+jB,EAAS,mBAAmBljB,EAC7D,CACAge,EAAqBsC,GAAoB6C,EAAsB9e,QAC/D4Z,GAA8C,QAAtBqF,EAAAH,EAAsB9e,cAAA,IAAAif,OAAA,EAAtBA,EAA8B5C,eAAgB,EACxE,CACF,CAEA,OAAO5C,GACL,CAAE/e,SAAQif,qBAAoBC,yBAElC,CAmEuC4F,CACjC,CAAE9kB,SAAQwjB,2BAA0BC,yBAGvB,IAAXJ,IAA2B,IAARC,IAAclH,EAAYA,EAAUhc,aAAasiB,GAAY1iB,KACrE,YAAXqjB,GAAgC,YAARC,GAAmBZ,GAAY1iB,IAEzD0jB,IACG1jB,EAAOsG,IAAI2Y,0BAA0B2D,KAC1CxG,EAAYpc,EAAOsG,IAAI2Y,oBAEzB,IAAI,IAAA8F,EAAAC,EACE,QAAJD,EAAI3I,SAAA,IAAA2I,GAAAA,EAAWplB,cAAcyd,GAAU,CAAEhB,cAC9B,QAAX4I,EAAIhlB,EAAOsG,WAAA,IAAA0e,GAAPA,EAAYze,eAAe,+BAAuB6J,MAAK6U,IAAA,IAAC,UAAEC,GAAUD,EAAA,OAAMC,GAAW,GAC3F,CAAE,MAAOjkB,GAAG,IAAAkkB,EACVhf,EAAA,cAAA/F,OAAkBa,EAAE+E,aACb,QAAPmf,EAAAvpB,OAAOihB,YAAA,IAAAsI,GAAPA,EAAahf,IAAA,cAAA/F,OAAkBa,EAAE+E,YACnC,CACF,C","sources":["../node_modules/@adobecom/features/personalization/personalization.js"],"sourcesContent":["/* eslint-disable default-param-last */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-console */\n\nimport {\n  createTag,\n  getConfig,\n  loadLink,\n  loadScript,\n  localizeLink,\n  getFederatedUrl,\n  isSignedOut,\n} from '../../utils/utils.js';\nimport {\n  getConsentState,\n  parseOptanonConsent,\n  getAllCookies,\n  KNDCTR_CONSENT_COOKIE,\n  OPT_ON_AND_CONSENT_COOKIE,\n} from '../../martech/helpers.js';\n\n/* c8 ignore start */\nconst getUA = () => navigator.userAgent;\nconst PHONE_SIZE = window.screen.width < 550 || window.screen.height < 550;\nconst safariIpad = getUA().includes('Macintosh') && navigator.maxTouchPoints > 1;\nconst isGalaxyTab = getUA().includes('Linux') && navigator.maxTouchPoints > 1;\nconst isChromeIOS = getUA().includes('CriOS');\nconst isEdgeIOS = getUA().includes('EdgiOS');\nconst isFirefoxIOS = getUA().includes('FxiOS');\n\nexport const US_GEO = 'en-us';\nexport const PERSONALIZATION_TAGS = {\n  all: () => true,\n  chrome: () => (getUA().includes('Chrome') && !getUA().includes('Edg')) || isChromeIOS,\n  firefox: () => getUA().includes('Firefox') || isFirefoxIOS,\n  safari: () => getUA().includes('Safari') && !getUA().includes('Chrome') && !isChromeIOS && !isEdgeIOS && !isFirefoxIOS,\n  edge: () => getUA().includes('Edg'),\n  android: () => getUA().includes('Android') || isGalaxyTab,\n  ios: () => /iPad|iPhone|iPod/.test(getUA()) || safariIpad,\n  windows: () => getUA().includes('Windows'),\n  mac: () => getUA().includes('Macintosh') && !safariIpad,\n  'mobile-device': () => safariIpad\n    || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Touch/i\n      .test(getUA()) || isGalaxyTab,\n  phone: () => PERSONALIZATION_TAGS['mobile-device']() && PHONE_SIZE,\n  tablet: () => PERSONALIZATION_TAGS['mobile-device']() && !PHONE_SIZE,\n  desktop: () => !PERSONALIZATION_TAGS['mobile-device'](),\n  loggedout: () => isSignedOut(),\n  loggedin: () => !isSignedOut(),\n};\nconst PERSONALIZATION_KEYS = Object.keys(PERSONALIZATION_TAGS);\n/* c8 ignore stop */\n\nconst CLASS_EL_DELETE = 'p13n-deleted';\nconst CLASS_EL_REPLACE = 'p13n-replaced';\nconst COLUMN_NOT_OPERATOR = 'not ';\nconst TARGET_EXP_PREFIX = 'target-';\nconst INLINE_HASH = '_inline';\nconst MARTECH_RETURNED_EVENT = 'martechReturned';\nconst PAGE_URL = new URL(window.location.href);\nexport const FLAGS = {\n  all: 'all',\n  includeFragments: 'include-fragments',\n  includeGnav: 'include-gnav',\n};\nlet isPostLCP = false;\nconst SELECTOR_TYPES = {\n  fragment: 'fragment',\n  twpButtons: 'twp-buttons',\n  other: 'other',\n};\n\nexport const TRACKED_MANIFEST_TYPE = 'personalization';\n\n// Replace any non-alpha chars except comma, space, ampersand, colon, and hyphen\nconst RE_KEY_REPLACE = /[^a-z0-9\\- _,&=:]/g;\n\nconst MANIFEST_KEYS = [\n  'action',\n  'selector',\n  'pagefilter',\n  'page filter',\n  'page filter optional',\n];\n\nexport const DATA_TYPE = {\n  JSON: 'json',\n  TEXT: 'text',\n};\n\nconst IN_BLOCK_SELECTOR_PREFIX = 'in-block:';\n\nconst isDamContent = (path) => path?.includes('/content/dam/');\n\nexport const normalizePath = (p, localize = true) => {\n  let path = p;\n\n  if (isDamContent(path) || !path?.includes('/')) return path;\n\n  const isFederal = path.includes('/federal/');\n\n  const config = getConfig();\n  if (!path.startsWith(config.codeRoot) && !path.startsWith('http') && !path.startsWith('/')) {\n    path = `/${path}`;\n  }\n\n  try {\n    const url = new URL(path);\n    const { hash, pathname } = url;\n    const firstFolder = pathname.split('/')[1];\n    const mepHash = '#_dnt';\n\n    if (path.startsWith(config.codeRoot)\n      || path.includes('.hlx.')\n      || path.includes('.aem.')\n      || path.includes('.adobe.')\n      || path.includes('localhost:')) {\n      if (!localize\n        || config.locale.ietf === 'en-US'\n        || hash.includes(mepHash)\n        || firstFolder in config.locales\n        || path.includes('.json')) {\n        path = pathname;\n      } else {\n        path = `${config.locale.prefix}${pathname}`;\n      }\n    }\n    path = isFederal ? getFederatedUrl(path) : path;\n    return `${path}${hash.replace(mepHash, '')}`;\n  } catch (e) {\n    path = isFederal ? getFederatedUrl(path) : path;\n    return path;\n  }\n};\n\nexport const getFileName = (path) => path?.split('/').pop();\n\nconst isInLcpSection = (el) => {\n  const lcpSection = document.querySelector('body > main > div');\n  return lcpSection === el || lcpSection?.contains(el);\n};\n\nconst GLOBAL_CMDS = [\n  'insertscript',\n  'replacepage',\n  'updatemetadata',\n  'useblockcode',\n];\n\nconst CREATE_CMDS = {\n  insertafter: 'afterend',\n  insertbefore: 'beforebegin',\n  prepend: 'afterbegin',\n  append: 'beforeend',\n};\n\nconst COMMANDS_KEYS = {\n  remove: 'remove',\n  replace: 'replace',\n  updateAttribute: 'updateattribute',\n};\n\nfunction addIds(el, manifestId, targetManifestId) {\n  if (manifestId) el.dataset.manifestId = manifestId;\n  if (targetManifestId) el.dataset.adobeTargetTestid = targetManifestId;\n}\n\nfunction getSelectorType(selector) {\n  const sel = selector.toLowerCase().trim();\n  if (sel.startsWith('/') || sel.startsWith('http')) return SELECTOR_TYPES.fragment;\n  if (sel === 'twp buttons') return SELECTOR_TYPES.twpButtons;\n  return SELECTOR_TYPES.other;\n}\n\nexport function replacePlaceholders(value, ph) {\n  const placeholders = ph || getConfig().placeholders;\n  if (!placeholders) return value;\n  let val = value;\n  const matches = val.match(/{{(.*?)}}/g);\n  if (!matches) return val;\n  matches.forEach((match) => {\n    const key = match.replace(/{{|}}/g, '').trim();\n    if (placeholders[key]) val = val.replace(match, placeholders[key]);\n  });\n  return val;\n}\n\nconst getUpdatedHref = (el, content, action) => {\n  const href = el.getAttribute('href');\n  const newContent = replacePlaceholders(content);\n  if (action === 'insertafter' || action === 'append') return `${href}${newContent}`;\n  if (action === 'insertbefore' || action === 'prepend') return `${newContent}${href}`;\n  return newContent;\n};\n\nconst createFrag = (el, action, content, manifestId, targetManifestId) => {\n  if (action === 'replace') el.classList.add(CLASS_EL_DELETE, CLASS_EL_REPLACE);\n  let href = content;\n  try {\n    const { pathname, search, hash } = new URL(content);\n    href = `${pathname}${search}${hash}`;\n  } catch {\n    // ignore\n  }\n  const a = createTag('a', { href }, content);\n  addIds(a, manifestId, targetManifestId);\n  const noParagraphWrap = !!el?.parentElement?.closest('p')\n    || (el.nodeName === 'P' && action.includes('pend'));\n  const frag = noParagraphWrap ? a : createTag('p', undefined, a);\n  const isDelayedModalAnchor = /#.*delay=/.test(href);\n  if (isDelayedModalAnchor) frag.classList.add('hide-block');\n  if (isInLcpSection(el)) {\n    loadLink(`${localizeLink(a.href)}.plain.html`, { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n  }\n  return frag;\n};\n\nexport const createContent = (el, { content, manifestId, targetManifestId, action, modifiers }) => {\n  if (action === 'replace') {\n    addIds(el, manifestId, targetManifestId);\n  }\n  if (el?.nodeName === 'A' && modifiers?.includes('href')) {\n    el.setAttribute('href', getUpdatedHref(el, content, action));\n    addIds(el, manifestId, targetManifestId);\n    return el;\n  }\n  if (getSelectorType(content) !== SELECTOR_TYPES.fragment) {\n    const newContent = replacePlaceholders(content);\n\n    if (action === 'replace') {\n      el.innerHTML = newContent;\n\n      return el;\n    }\n\n    const container = createTag('div', {}, newContent);\n    addIds(container, manifestId, targetManifestId);\n    return container;\n  }\n\n  const frag = createFrag(el, action, content, manifestId, targetManifestId);\n  addIds(frag, manifestId, targetManifestId);\n  if (el?.parentElement.nodeName !== 'MAIN') return frag;\n  return createTag('div', undefined, frag);\n};\n\nexport const handleTwpButtons = (el, selector) => {\n  if (getSelectorType(selector) === SELECTOR_TYPES.twpButtons) {\n    const secondaryButton = el.closest('p')?.querySelector('em') || el.closest('div')?.querySelector('em');\n    if (secondaryButton) {\n      const wrapper = secondaryButton.parentElement;\n      const html = wrapper.innerHTML;\n      let result = html.replace(/<em/g, '<strong');\n      result = result.replace(/<\\/em/g, '</strong');\n      wrapper.innerHTML = result;\n    }\n  }\n};\n\nconst COMMANDS = {\n  [COMMANDS_KEYS.remove]: (el, { content, selector }) => {\n    if (content !== 'false') el.classList.add(CLASS_EL_DELETE);\n    handleTwpButtons(el, selector);\n  },\n  [COMMANDS_KEYS.replace]: (el, cmd) => {\n    if (!el || el.classList.contains(CLASS_EL_REPLACE)) return;\n    el.insertAdjacentElement(\n      'beforebegin',\n      createContent(el, cmd),\n    );\n  },\n  [COMMANDS_KEYS.updateAttribute]: (el, cmd) => {\n    const { manifestId, targetManifestId } = cmd;\n    if (!cmd.attribute || !cmd.content) return;\n    const [attribute, parameter] = cmd.attribute.split('_');\n    cmd.content = replacePlaceholders(cmd.content);\n\n    let value;\n    if (attribute === 'href' && parameter) {\n      const href = el.getAttribute('href');\n      switch (parameter) {\n        case '#': el.href += el.href.includes(cmd.content) ? '' : cmd.content; break;\n        default:\n          try {\n            const url = new URL(href);\n            const parameters = new URLSearchParams(url.search);\n            parameters.set(parameter, cmd.content);\n            url.search = parameters.toString();\n            value = url.toString();\n          } catch (error) {\n            /* c8 ignore next 2 */\n            console.log(`Invalid updateAttribute URL: ${href}`, error.message || error);\n          }\n      }\n    } else {\n      value = cmd.content;\n    }\n\n    if (value) {\n      el.setAttribute(attribute, value);\n      addIds(el, manifestId, targetManifestId);\n    }\n  },\n};\n\nconst log = (...msg) => {\n  const config = getConfig();\n  if (config.mep?.preview) console.log(...msg);\n};\n\nexport const fetchData = async (url, type = DATA_TYPE.JSON, config) => {\n  try {\n    const resp = await fetch(normalizePath(url), config);\n    if (!resp.ok) {\n      /* c8 ignore next 5 */\n      if (resp.status === 404) {\n        throw new Error('File not found');\n      }\n      throw new Error(`Invalid response: ${resp.status} ${resp.statusText}`);\n    }\n    return await resp[type]();\n  } catch (e) {\n    /* c8 ignore next 3 */\n    log(`Error loading content: ${url}`, e.message || e);\n  }\n  return null;\n};\n\nconst getBlockProps = (fVal, config, origin) => {\n  let val = fVal;\n  if (val?.includes('\\\\')) val = val?.split('\\\\').join('/');\n  if (!val?.startsWith('/')) val = `/${val}`;\n  const blockSelector = val?.split('/').pop();\n\n  if (val.startsWith('/libs/')) {\n    /* c8 ignore next 1 */\n    val = `${config.miloLibs || config.codeRoot}${val.replace('/libs', '')}`;\n  } else {\n    val = `${origin}${val}`;\n  }\n\n  return { blockSelector, blockTarget: val };\n};\n\nconst consolidateArray = (arr, prop, existing = []) => arr\n  .reduce((results, i) => [...results, ...i[prop] || []], existing);\n\nconst consolidateObjects = (arr, prop, existing = {}) => arr.reduce((propMap, item) => {\n  item[prop]?.forEach((i) => {\n    const { selector, val } = i;\n    if (prop === 'blocks') {\n      propMap[selector] = val;\n      return;\n    }\n\n    if (selector in propMap) return;\n    const action = {\n      action: i.action,\n      fragment: val,\n      selector,\n      manifestPath: item.manifestPath,\n      manifestId: i.manifestId,\n      targetManifestId: i.targetManifestId,\n    };\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in propMap) {\n      if (propMap[key].fragment === selector) propMap[key] = action;\n    }\n    propMap[selector] = action;\n  });\n  return { ...existing, ...propMap };\n}, {});\n\nexport const matchGlob = (searchStr, inputStr) => {\n  const pattern = searchStr.replace(/\\*\\*/g, '.*');\n  const reg = new RegExp(`^${pattern}(\\\\.html)?$`, 'i'); // devtool bug needs this backtick: `\n  return reg.test(inputStr);\n};\n\nexport async function replaceInner(path, element) {\n  if (!path || !element) return false;\n  let plainPath = path.endsWith('/') ? `${path}index` : path;\n  plainPath = plainPath.endsWith('.plain.html') ? plainPath : `${plainPath}.plain.html`;\n  const html = await fetchData(plainPath, DATA_TYPE.TEXT);\n  if (!html) return false;\n\n  element.innerHTML = html;\n  const { decorateArea } = getConfig();\n  if (decorateArea) decorateArea(element);\n  return true;\n}\n/* c8 ignore stop */\n\nconst setMetadata = (metadata) => {\n  const { selector, val } = metadata;\n  if (!selector || !val) return;\n  const propName = selector.startsWith('og:') ? 'property' : 'name';\n  let metaEl = document.querySelector(`meta[${propName}=\"${selector}\"]`);\n  if (!metaEl) {\n    metaEl = createTag('meta', { [propName]: selector });\n    document.head.append(metaEl);\n  }\n  metaEl.setAttribute('content', val);\n};\n\nfunction toLowerAlpha(str) {\n  const modifiedStr = str.toLowerCase();\n  if (!modifiedStr.includes('countryip') && !modifiedStr.includes('countrychoice') && !modifiedStr.includes('previouspage')) {\n    return modifiedStr.replace(RE_KEY_REPLACE, '');\n  }\n  return modifiedStr.replace(RE_KEY_REPLACE, (char) => (['(', ')', '/', '*'].includes(char) ? char : ''));\n}\n\nfunction normalizeKeys(obj) {\n  return Object.keys(obj).reduce((newObj, key) => {\n    newObj[toLowerAlpha(key)] = obj[key];\n    return newObj;\n  }, {});\n}\n\nfunction registerInBlockActions(command) {\n  const blockAndSelector = command.selector.substring(IN_BLOCK_SELECTOR_PREFIX.length)\n    .trim().split(/\\s+/);\n  const [blockName] = blockAndSelector;\n\n  const config = getConfig();\n  config.mep.inBlock ??= {};\n  config.mep.inBlock[blockName] ??= {};\n\n  let blockSelector;\n  if (blockAndSelector.length === 1) delete command.selector;\n  if (blockAndSelector.length > 1) {\n    blockSelector = blockAndSelector.slice(1).join(' ');\n    command.selector = blockSelector;\n    if (blockSelector.startsWith('https://mas.adobe.com/')) {\n      const getFragmentId = (masUrl) => {\n        const { hash } = new URL(masUrl);\n        const hashValue = hash.startsWith('#') ? hash.substring(1) : hash;\n        const searchParams = new URLSearchParams(hashValue);\n        return searchParams.get('fragment') || searchParams.get('query');\n      };\n      blockSelector = getFragmentId(blockSelector);\n      if (blockSelector) {\n        config.mep.inBlock[blockName].fragments ??= {};\n        const { fragments } = config.mep.inBlock[blockName];\n        command.content = getFragmentId(command.content);\n        fragments[blockSelector] = command;\n      }\n      return;\n    }\n    if (getSelectorType(blockSelector) === SELECTOR_TYPES.fragment) {\n      if (blockSelector.includes('/federal/')) blockSelector = getFederatedUrl(blockSelector);\n      if (command.content.includes('/federal/')) command.content = getFederatedUrl(command.content);\n      config.mep.inBlock[blockName].fragments ??= {};\n      const { fragments } = config.mep.inBlock[blockName];\n      delete command.selector;\n      if (blockSelector in fragments) return;\n\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in fragments) {\n        if (fragments[key].content === blockSelector) fragments[key] = command;\n      }\n      fragments[blockSelector] = command;\n\n      blockSelector = normalizePath(blockSelector);\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in fragments) {\n        if (fragments[key].content === blockSelector) fragments[key] = command;\n      }\n      fragments[blockSelector] = command;\n      return;\n    }\n  }\n  config.mep.inBlock[blockName].commands ??= [];\n  config.mep.inBlock[blockName].commands.push(command);\n}\n\nconst updateEndNumber = (endNumber, term) => (endNumber\n  ? term.replace(endNumber, `:nth-child(${endNumber})`)\n  : term);\nfunction modifySelectorTerm(termParam) {\n  let term = termParam;\n  const specificSelectors = {\n    section: 'main > div',\n    'primary-cta': 'strong a',\n    'secondary-cta': 'em a',\n    'action-area': '*:has(> em a, > strong a)',\n    'any-marquee-section': 'main > div:has([class*=\"marquee\"])',\n    'any-marquee': '[class*=\"marquee\"]',\n    'any-header': ':is(h1, h2, h3, h4, h5, h6)',\n  };\n  const otherSelectors = ['row', 'col'];\n  const htmlEls = [\n    'html', 'body', 'header', 'footer', 'main',\n    'div', 'a', 'p', 'strong', 'em', 'picture', 'source', 'img', 'h',\n    'ul', 'ol', 'li',\n  ];\n  const startTextMatch = term.match(/^[a-zA-Z/./-]*/);\n  const startText = startTextMatch ? startTextMatch[0].toLowerCase() : '';\n  const startTextPart1 = startText.split(/\\.|:/)[0];\n  const endNumberMatch = term.match(/[0-9]*$/);\n  const endNumber = endNumberMatch && startText.match(/^[a-zA-Z]/) ? endNumberMatch[0] : '';\n  if (!startText || htmlEls.includes(startText)) return term;\n  if (otherSelectors.includes(startText)) {\n    term = term.replace(startText, '> div');\n    term = updateEndNumber(endNumber, term);\n    return term;\n  }\n  if (Object.keys(specificSelectors).includes(startTextPart1)) {\n    term = term.replace(startTextPart1, specificSelectors[startTextPart1]);\n    term = updateEndNumber(endNumber, term);\n    return term;\n  }\n\n  if (!startText.startsWith('.')) term = `.${term}`;\n  if (endNumber) {\n    term = term.replace(endNumber, '');\n    term = `${term}:nth-child(${endNumber} of ${term})`;\n  }\n  return term;\n}\nfunction getModifiers(selector) {\n  let sel = selector;\n  const modifiers = [];\n  const flags = sel.split(/\\s+#_/);\n  if (flags.length) {\n    sel = flags.shift();\n    flags.forEach((flag) => {\n      flag.split(/_|#_/).forEach((mod) => modifiers.push(mod.toLowerCase().trim()));\n    });\n  }\n  if (getSelectorType(sel) === SELECTOR_TYPES.twpButtons) {\n    modifiers.push(FLAGS.includeFragments);\n    modifiers.push(FLAGS.all);\n    modifiers.push(FLAGS.includeGnav);\n  }\n\n  return { sel, modifiers };\n}\nexport function modifyNonFragmentSelector(selector, action) {\n  const { sel, modifiers } = getModifiers(selector);\n\n  let modifiedSelector = sel\n    .split('>').join(' > ')\n    .split(',').join(' , ')\n    .replaceAll(/main\\s*>?\\s*(section\\d*)/gi, '$1')\n    .split(/\\s+/)\n    .map(modifySelectorTerm)\n    .join(' ')\n    .trim();\n\n  let attribute;\n\n  if (action === COMMANDS_KEYS.updateAttribute) {\n    const string = modifiedSelector.split(' ').pop();\n    attribute = string.replace('.', '');\n    modifiedSelector = modifiedSelector.replace(string, '').trim();\n  }\n\n  if (action === COMMANDS_KEYS.remove && getSelectorType(selector) === SELECTOR_TYPES.twpButtons) {\n    modifiedSelector = 'a:not([data-remove=\"false\"])';\n  }\n\n  return {\n    modifiedSelector,\n    modifiers,\n    attribute,\n  };\n}\n\nfunction getSelectedElements(sel, rootEl, forceRootEl, action) {\n  const root = forceRootEl ? rootEl : document;\n  const selector = sel.trim();\n  if (!selector) return {};\n\n  if (getSelectorType(selector) === SELECTOR_TYPES.fragment) {\n    try {\n      const fragments = root.querySelectorAll(\n        `a[href*=\"${normalizePath(selector, false)}\"], a[href*=\"${normalizePath(selector, true)}\"]`,\n      );\n      return { els: fragments, modifiers: [FLAGS.all, FLAGS.includeFragments] };\n    } catch (e) {\n      /* c8 ignore next 2 */\n      return { els: [], modifiers: [] };\n    }\n  }\n  const {\n    modifiedSelector,\n    modifiers,\n    attribute,\n  } = modifyNonFragmentSelector(selector, action);\n\n  let els;\n  try {\n    els = root.querySelectorAll(modifiedSelector);\n    if (getSelectorType(selector) === SELECTOR_TYPES.twpButtons) {\n      const regex = /free.trial|essai gratuit|kostenlos testen|testversion||dtails de la version dessai gratuite|details zur kostenlosen testversion/g;\n      els = [...els]\n        .filter((el) => el.outerHTML.toLowerCase().match(regex))\n        .map((el) => (['strong', 'em'].includes(el.parentElement.tagName.toLowerCase())\n          ? el.parentElement\n          : el));\n    }\n  } catch (e) {\n    /* eslint-disable-next-line no-console */\n    log('Invalid selector: ', selector);\n    return {};\n  }\n  if (modifiers.includes(FLAGS.all) || !els.length) return { els, modifiers, attribute };\n  els = [els[0]];\n  return { els, modifiers, attribute };\n}\n\nconst addHash = (url, newHash) => {\n  if (!newHash) return url;\n  try {\n    const { origin, pathname, search } = new URL(url);\n    return `${origin}${pathname}${search}#${newHash}`;\n  } catch (e) {\n    return `${url}#${newHash}`;\n  }\n};\n\nconst setDataIdOnChildren = (sections, id, value) => {\n  [...sections[0].children].forEach(\n    (child) => (child.dataset[id] = value),\n  );\n};\n\nexport const updateFragDataProps = (a, inline, sections, fragment) => {\n  const { manifestId, adobeTargetTestid } = a.dataset;\n  if (inline) {\n    if (manifestId) setDataIdOnChildren(sections, 'manifestId', manifestId);\n    if (adobeTargetTestid) setDataIdOnChildren(sections, 'adobeTargetTestid', adobeTargetTestid);\n  } else {\n    addIds(fragment, manifestId, adobeTargetTestid);\n  }\n};\n\nexport const deleteMarkedEls = (rootEl = document) => {\n  [...rootEl.querySelectorAll(`.${CLASS_EL_DELETE}`)]\n    .forEach((el) => el.remove());\n};\n\nexport function addSectionAnchors(rootEl = document) {\n  rootEl.querySelectorAll('.section-metadata').forEach((block) => {\n    [...block.children].forEach((row) => {\n      const col1 = row.children[0]?.textContent.toLowerCase().trim();\n      const col2 = row.children[1]?.textContent.toLowerCase().trim().replaceAll(/\\s+/g, '-');\n      if (!col1 || !col2 || col1 !== 'anchor') return;\n      block.parentElement.setAttribute('id', col2);\n    });\n  });\n}\n\nexport function handleCommands(\n  commands,\n  rootEl = document,\n  forceInline = false,\n  forceRootEl = false,\n) {\n  const section1 = document.querySelector('main > div');\n  addSectionAnchors(rootEl);\n  commands.forEach((cmd) => {\n    const { action, content, selector } = cmd;\n    cmd.content = forceInline && getSelectorType(content) === SELECTOR_TYPES.fragment\n      ? addHash(content, INLINE_HASH)\n      : content;\n    if (selector.startsWith(IN_BLOCK_SELECTOR_PREFIX)) {\n      registerInBlockActions(cmd);\n      cmd.selectorType = IN_BLOCK_SELECTOR_PREFIX;\n      return;\n    }\n    const {\n      els,\n      modifiers,\n      attribute,\n    } = getSelectedElements(selector, rootEl, forceRootEl, action);\n\n    Object.assign(cmd, { modifiers, attribute });\n\n    els?.forEach((el) => {\n      if (!el\n        || (!(action in COMMANDS) && !(action in CREATE_CMDS))\n        || (rootEl && !rootEl.contains(el))\n        || (isPostLCP && section1?.contains(el))) return;\n\n      if (action in COMMANDS) {\n        COMMANDS[action](el, cmd);\n        return;\n      }\n      const insertAnchor = getSelectorType(selector) === SELECTOR_TYPES.fragment\n        ? el.parentElement\n        : el;\n      insertAnchor?.insertAdjacentElement(\n        CREATE_CMDS[action],\n        createContent(insertAnchor, cmd),\n      );\n    });\n    if ((els.length && !cmd.modifiers.includes(FLAGS.all))\n      || !cmd.modifiers.includes(FLAGS.includeFragments)) {\n      cmd.completed = true;\n    }\n  });\n  deleteMarkedEls(rootEl);\n  return commands.filter((cmd) => !cmd.completed\n    && cmd.selectorType !== IN_BLOCK_SELECTOR_PREFIX);\n}\n\nconst getVariantInfo = (line, variantNames, variants, manifestPath, fTargetId) => {\n  const config = getConfig();\n  let manifestId = getFileName(manifestPath);\n  let targetId = manifestId.replace('.json', '');\n  if (fTargetId) targetId = fTargetId;\n  if (!config.mep?.preview) manifestId = false;\n  // retro support\n  const action = line.action?.toLowerCase()\n    .replace('content', '').replace('fragment', '').replace('tosection', '');\n  if (!action) {\n    log('Row found with empty action field: ', line);\n    return;\n  }\n  const pageFilter = line['page filter'] || line['page filter optional'];\n  const { selector } = line;\n\n  if (pageFilter && !matchGlob(pageFilter, new URL(window.location).pathname)) return;\n\n  if (!config.mep?.preview) manifestId = false;\n  const { origin } = PAGE_URL;\n  variantNames.forEach((vn) => {\n    const targetManifestId = vn.includes(TARGET_EXP_PREFIX) ? targetId : false;\n    if (!line[vn] || line[vn].toLowerCase() === 'false') return;\n\n    const variantInfo = {\n      action,\n      selector,\n      pageFilter,\n      content: line[vn],\n      selectorType: getSelectorType(selector),\n      manifestId,\n      targetManifestId,\n    };\n\n    if (action in COMMANDS && variantInfo.selectorType === SELECTOR_TYPES.fragment) {\n      variants[vn].fragments.push({\n        selector: normalizePath(variantInfo.selector.split(' #_')[0]),\n        val: normalizePath(line[vn]),\n        action,\n        manifestId,\n        targetManifestId,\n      });\n    } else if (GLOBAL_CMDS.includes(action)) {\n      variants[vn][action] = variants[vn][action] || [];\n\n      if (action === 'useblockcode') {\n        const { blockSelector, blockTarget } = getBlockProps(line[vn], config, origin);\n        variants[vn][action].push({\n          selector: blockSelector,\n          val: blockTarget,\n          pageFilter,\n          manifestId,\n          targetManifestId,\n        });\n      } else {\n        variants[vn][action].push({\n          selector: normalizePath(selector),\n          val: normalizePath(line[vn]),\n          pageFilter,\n          manifestId,\n          targetManifestId,\n        });\n      }\n    } else if (action in COMMANDS || action in CREATE_CMDS) {\n      variants[vn].commands.push(variantInfo);\n    }\n  });\n};\n\nexport function parseManifestVariants(data, manifestPath, targetId) {\n  if (!data?.length) return null;\n\n  const manifestConfig = {};\n  const experiences = data.map((d) => normalizeKeys(d));\n\n  try {\n    const variants = {};\n    const variantNames = Object.keys(experiences[0])\n      .filter((vn) => !MANIFEST_KEYS.includes(vn));\n\n    variantNames.forEach((vn) => {\n      variants[vn] = { commands: [], fragments: [] };\n    });\n\n    experiences.forEach((line) => {\n      getVariantInfo(line, variantNames, variants, manifestPath, targetId);\n    });\n\n    manifestConfig.variants = variants;\n    manifestConfig.variantNames = variantNames;\n    const config = getConfig();\n    if (!config.mep?.preview) manifestConfig.manifestId = false;\n\n    return manifestConfig;\n  } catch (e) {\n    /* c8 ignore next 3 */\n    log('error parsing personalization manifestConfig:', e, experiences);\n  }\n  return null;\n}\n\nexport async function createMartechMetadata(placeholders, config, column) {\n  if (config.locale.ietf === 'en-US') return;\n\n  await import('../../martech/attributes.js').then(({ processTrackingLabels }) => {\n    config.mep.analyticLocalization ??= {};\n\n    placeholders.forEach((item, i) => {\n      const firstRow = placeholders[i];\n      let usValue = firstRow[US_GEO] || firstRow.us || firstRow.en || firstRow.key;\n\n      if (!usValue) return;\n\n      usValue = processTrackingLabels(usValue);\n      const translatedValue = processTrackingLabels(item[column]);\n      config.mep.analyticLocalization[translatedValue] = usValue;\n    });\n  });\n}\nconst matchesCountryChoiceOrIP = (name, config) => {\n  if (!name.includes('countrychoice') && !name.includes('countryip')) return false;\n  const countryList = name.match(/\\(([^)]+)\\)/)?.[1]?.split(',').map((c) => (c).trim());\n  if (!countryList?.length) return false;\n  const { countryChoice, countryIP } = config.mep;\n  const testCountry = name.includes('countrychoice') ? countryChoice : countryIP;\n  return countryList.includes(testCountry);\n};\n\nfunction hasCountryMatch(str, config) {\n  if (str.includes('countrychoice') || str.includes('countryip')) {\n    const modifiedStr = str.replace('uk', 'gb');\n    return matchesCountryChoiceOrIP(modifiedStr, config);\n  }\n  return false;\n}\n/* c8 ignore start */\nexport function parsePlaceholders(placeholders, config, selectedVariantName = '') {\n  if (!placeholders?.length || selectedVariantName === 'default') return config;\n  const { countryIP, countryChoice } = config.mep || {};\n  const valueNames = [\n    selectedVariantName.toLowerCase(),\n    config.mep?.prefix,\n    config.locale.region.toLowerCase(),\n    ...(countryIP ? [`countryip(${countryIP})`] : []),\n    ...(countryChoice ? [`countrychoice(${countryChoice})`] : []),\n    config.locale.ietf.toLowerCase(),\n    ...config.locale.ietf.toLowerCase().split('-'),\n    'value',\n    'other',\n  ];\n  const keys = placeholders?.length ? Object.entries(placeholders[0]) : [];\n  const keyVal = keys.find(([key]) => {\n    const modifiedStr = key.toLowerCase();\n    return valueNames.includes(modifiedStr) || hasCountryMatch(modifiedStr, config);\n  });\n  const key = keyVal?.[0];\n\n  if (key) {\n    const results = placeholders.reduce((res, item) => {\n      res[item.key] = item[key];\n      return res;\n    }, {});\n    config.placeholders = { ...(config.placeholders || {}), ...results };\n  }\n\n  createMartechMetadata(placeholders, config, key);\n\n  return config;\n}\n\nconst checkForParamMatch = (paramStr) => {\n  const [name, val] = paramStr.split('param-')[1].split('=');\n  if (!name) return false;\n  const params = new URLSearchParams(\n    Array.from(PAGE_URL.searchParams, ([key, value]) => [key.toLowerCase(), value?.toLowerCase()]),\n  );\n  const searchParamVal = params.get(name.toLowerCase());\n  if (searchParamVal !== null) {\n    if (val) return val === searchParamVal;\n    return true; // if no val is set, just check for existence of param\n  }\n  return false;\n};\n\nexport const checkForPreviousPageMatch = (previousPageStr, lastVisitedPage = document.referrer) => {\n  if (!lastVisitedPage) return false;\n  const previousPageString = previousPageStr.toLowerCase().split('previouspage-')[1];\n  return matchGlob(previousPageString, new URL(lastVisitedPage).pathname);\n};\n\nfunction trimNames(arr) {\n  return arr.map((v) => v.trim()).filter(Boolean);\n}\nexport function buildVariantInfo(variantNames) {\n  return variantNames.reduce((acc, name) => {\n    let nameArr = [name];\n    if (!name.startsWith(TARGET_EXP_PREFIX)) nameArr = name.split(/,(?![^(]*\\))/);\n    acc[name] = trimNames(nameArr);\n    acc.allNames = [...acc.allNames, ...trimNames(name.split(/(?:\\([^)]*\\))?,|&|\\bnot\\b/))];\n    return acc;\n  }, { allNames: [] });\n}\n\nconst getXLGListURL = (config) => {\n  const sheet = config.env?.name === 'prod' ? 'prod' : 'stage';\n  return `https://www.adobe.com/federal/assets/data/mep-xlg-tags.json?sheet=${sheet}`;\n};\n\nexport const getEntitlementMap = async () => {\n  const config = getConfig();\n  if (config.mep?.entitlementMap) return config.mep.entitlementMap;\n  const entitlementUrl = getXLGListURL(config);\n  const fetchedData = await fetchData(entitlementUrl, DATA_TYPE.JSON);\n  if (!fetchedData) return config.consumerEntitlements || {};\n  const entitlements = {};\n  fetchedData?.data?.forEach((ent) => {\n    const { id, tagname } = ent;\n    entitlements[id] = tagname;\n  });\n  config.mep ??= {};\n  config.mep.entitlementMap = { ...config.consumerEntitlements, ...entitlements };\n  return config.mep.entitlementMap;\n};\n\nexport const getEntitlements = async (data) => {\n  const entitlementMap = await getEntitlementMap();\n\n  return data.flatMap((destination) => {\n    const ents = destination.segments?.flatMap((segment) => {\n      const entMatch = entitlementMap[segment.id];\n      return entMatch ? [entMatch] : [];\n    });\n\n    return ents || [];\n  });\n};\n\nfunction normCountry(country) {\n  return (country.toLowerCase() === 'uk' ? 'gb' : country.toLowerCase()).split('_')[0];\n}\nasync function setMepCountry(config) {\n  const urlParams = new URLSearchParams(window.location.search);\n  const country = urlParams.get('country') || (document.cookie.split('; ').find((row) => row.startsWith('international='))?.split('=')[1]);\n  const akamaiCode = urlParams.get('akamaiLocale')?.toLowerCase() || sessionStorage.getItem('akamai');\n  config.mep = config.mep || {};\n  if (country) {\n    config.mep.countryChoice = normCountry(country);\n  }\n  if (akamaiCode) {\n    config.mep.countryIP = normCountry(akamaiCode);\n  }\n  if (!config.mep.countryChoice && config.mep.countryIP) {\n    config.mep.countryChoice = config.mep.countryIP;\n  } else if (!config.mep.countryIP && config.mep.countryIPPromise) {\n    try {\n      let countryIP = await config.mep.countryIPPromise;\n      if (countryIP) {\n        countryIP = countryIP === 'uk' ? 'gb' : countryIP.split('_')[0];\n        config.mep.countryIP = countryIP;\n        if (!config.mep.countryChoice) config.mep.countryChoice = countryIP;\n      }\n    } catch (e) {\n      log('MEP Error: Unable to get user country');\n    }\n  }\n}\n\nasync function getPersonalizationVariant(\n  manifestPath,\n  variantNames = [],\n  variantLabel = null,\n) {\n  const config = getConfig();\n  if (config.mep?.variantOverride?.[manifestPath]) {\n    return config.mep.variantOverride[manifestPath];\n  }\n\n  const variantInfo = buildVariantInfo(variantNames);\n\n  const entitlementKeys = Object.values(await getEntitlementMap());\n  const hasEntitlementTag = entitlementKeys.some((tag) => variantInfo.allNames.includes(tag));\n\n  let userEntitlements = [];\n  if (hasEntitlementTag) {\n    if (config?.mep?.enablePersV2) {\n      userEntitlements = [];\n    } else {\n      userEntitlements = await config.entitlements();\n    }\n  }\n\n  const hasMatch = (name) => {\n    if (!name) return true;\n    if (name === variantLabel?.toLowerCase()) return true;\n    if (name.startsWith('param-')) return checkForParamMatch(name);\n    if (name.toLowerCase().startsWith('previouspage-')) return checkForPreviousPageMatch(name);\n    if (hasCountryMatch(name, config)) return true;\n    if (userEntitlements?.includes(name)) return true;\n    const { lob, event } = config.mep.promises;\n    if (lob && lob === name.split('lob-')[1]?.toLowerCase()) return true;\n    if (name === 'registered' && event) return true;\n    return PERSONALIZATION_KEYS.includes(name) && PERSONALIZATION_TAGS[name]();\n  };\n\n  const matchVariant = (n) => {\n    // split before checks\n    const name = n.includes(':') ? n.split(':')[1] : n;\n    if (name.startsWith(TARGET_EXP_PREFIX)) return hasMatch(name);\n    const processedList = name.split('&').map((condition) => {\n      const reverse = condition.trim().startsWith(COLUMN_NOT_OPERATOR);\n      const match = hasMatch(condition.replace(COLUMN_NOT_OPERATOR, '').trim());\n      return reverse ? !match : match;\n    });\n    return !processedList.includes(false);\n  };\n\n  if (config.mep?.geoLocation) {\n    await setMepCountry(config);\n  }\n\n  const matchingVariant = variantNames.find((variant) => variantInfo[variant].some(matchVariant));\n  return matchingVariant;\n}\n\nconst createDefaultExperiment = (manifest) => ({\n  disabled: manifest.disabled,\n  event: manifest.event,\n  manifest: manifest.manifestPath,\n  executionOrder: '1-1',\n  selectedVariant: { commands: [], fragments: [] },\n  selectedVariantName: 'default',\n  variantNames: ['all'],\n  variants: {},\n  source: ['promo'],\n});\n\nexport const addMepAnalytics = (config, header) => {\n  config.mep?.experiments?.forEach((experiment) => {\n    experiment?.selectedVariant?.useblockcode?.forEach(({ selector, targetManifestId }) => {\n      if (selector && targetManifestId) {\n        document.querySelectorAll(`.${selector}`)\n          .forEach((el) => (el.dataset.adobeTargetTestid = targetManifestId));\n      }\n    });\n    if (header) {\n      experiment?.selectedVariant?.updatemetadata?.forEach((updateMetaData) => {\n        if (updateMetaData?.selector === 'gnav-source' && updateMetaData.targetManifestId) {\n          header.dataset.adobeTargetTestid = updateMetaData.targetManifestId;\n        }\n      });\n    }\n  });\n};\n\nexport function getMepConsentConfig() {\n  const cookies = getAllCookies();\n  const optOnConsentCookie = cookies[OPT_ON_AND_CONSENT_COOKIE];\n  const kndctrConsentCookie = cookies[KNDCTR_CONSENT_COOKIE] || '';\n  const consentState = getConsentState({ optOnConsentCookie, kndctrConsentCookie });\n\n  if (!optOnConsentCookie || consentState === 'pre') {\n    return {\n      performance: true,\n      advertising: isSignedOut() && consentState !== 'pre',\n    };\n  }\n  return parseOptanonConsent(optOnConsentCookie).configuration;\n}\n\nexport const overrideVariant = (manifestPath, variantName) => {\n  const config = getConfig();\n  if (!config.mep.variantOverride) config.mep.variantOverride = {};\n  if (!config.mep.variantOverride[manifestPath]) {\n    config.mep.variantOverride[manifestPath] = variantName;\n  }\n};\n\nexport const getGeoRestriction = (manifestConfig) => {\n  const { geoRestriction, manifestPath } = manifestConfig;\n  if (!geoRestriction) return true;\n  const geoArray = geoRestriction?.split(',').map((item) => item.trim().toLowerCase());\n  const isAllowed = geoArray.includes(getConfig().mep.akamaiCode);\n  if (!isAllowed) overrideVariant(manifestPath, 'Default');\n  return isAllowed;\n};\n\nexport function getManifestMarketingAction(mktgAction, source) {\n  const allowedServices = ['core services', 'non-marketing', 'marketing decrease', 'marketing increase'];\n  if (allowedServices.includes(mktgAction)) return mktgAction;\n  if (source?.includes('promo')) return 'core services';\n  return 'marketing increase';\n}\n\nexport function canServeManifest(manifestConfig) {\n  if (!getGeoRestriction(manifestConfig)) return false;\n  const { mktgAction, variantNames, manifestPath } = manifestConfig;\n  if (mktgAction === 'core services') return true;\n\n  const { performance, advertising } = getConfig().mep.consentState;\n  if (mktgAction === 'non-marketing') return performance;\n  if (mktgAction === 'marketing increase') return advertising;\n\n  if (!advertising || !performance) overrideVariant(manifestPath, variantNames[0]);\n  return true;\n}\n\nasync function getManifestConfig(info, variantOverride) {\n  const {\n    name,\n    manifestData,\n    manifestPath,\n    manifestUrl,\n    manifestPlaceholders,\n    manifestInfo,\n    variantLabel,\n    disabled,\n    event,\n    source,\n  } = info;\n  if (disabled && (!variantOverride || !Object.keys(variantOverride).length)) {\n    return createDefaultExperiment(info);\n  }\n  let data = manifestData;\n  if (!data) {\n    const fetchedData = await fetchData(manifestPath, DATA_TYPE.JSON);\n    if (fetchData) data = fetchedData;\n  }\n\n  const persData = data?.experiences?.data || data?.data || data;\n  if (!persData) return null;\n  const infoTab = manifestInfo || data?.info?.data;\n  const infoObj = infoTab?.reduce((acc, item) => {\n    acc[item.key] = item.value;\n    return acc;\n  }, {});\n  const manifestOverrideName = infoObj?.['manifest-override-name']?.toLowerCase();\n  const targetId = name || manifestOverrideName;\n  const manifestConfig = parseManifestVariants(persData, manifestPath, targetId);\n\n  if (!manifestConfig) {\n    /* c8 ignore next 3 */\n    log('Error loading personalization manifestConfig: ', name || manifestPath);\n    return null;\n  }\n  const infoKeyMap = {\n    'manifest-type': ['Personalization', 'Promo', 'Test'],\n    'manifest-execution-order': ['First', 'Normal', 'Last'],\n  };\n  if (infoTab) {\n    manifestConfig.manifestType = infoObj?.['manifest-type']?.toLowerCase();\n    if (manifestConfig.manifestType === TRACKED_MANIFEST_TYPE) {\n      manifestConfig.manifestOverrideName = manifestOverrideName;\n      const analytics = manifestOverrideName || getFileName(manifestPath).replace('.json', '');\n      manifestConfig.analyticsTitle = analytics.trim().slice(0, 15);\n    }\n    const executionOrder = {\n      'manifest-type': 1,\n      'manifest-execution-order': 1,\n    };\n    Object.keys(infoObj).forEach((key) => {\n      if (!infoKeyMap[key]) return;\n      const index = infoKeyMap[key].indexOf(infoObj[key]);\n      executionOrder[key] = index > -1 ? index : 1;\n    });\n    manifestConfig.executionOrder = `${executionOrder['manifest-execution-order']}-${executionOrder['manifest-type']}`;\n    manifestConfig.mktgAction = infoObj['manifest-marketing-action']?.toLowerCase();\n    manifestConfig.geoRestriction = infoObj['manifest-geo-restriction']?.toLowerCase();\n  } else {\n    // eslint-disable-next-line prefer-destructuring\n    manifestConfig.manifestType = infoKeyMap['manifest-type'][1];\n    manifestConfig.executionOrder = '1-1';\n  }\n\n  let finalDisabled = disabled;\n  manifestConfig.mktgAction = getManifestMarketingAction(manifestConfig.mktgAction, source);\n  manifestConfig.manifestPath = normalizePath(manifestPath);\n  const isAllowed = canServeManifest(manifestConfig);\n  if (!isAllowed) {\n    if (!getConfig().mep?.preview) return null;\n    finalDisabled = true;\n  }\n\n  manifestConfig.selectedVariantName = await getPersonalizationVariant(\n    manifestConfig.manifestPath,\n    manifestConfig.variantNames,\n    variantLabel,\n  );\n\n  manifestConfig.placeholderData = manifestPlaceholders || data?.placeholders?.data;\n  manifestConfig.name = name;\n  manifestConfig.manifest = manifestPath;\n  manifestConfig.manifestUrl = manifestUrl;\n  manifestConfig.disabled = finalDisabled;\n  manifestConfig.event = event;\n  if (source?.length) manifestConfig.source = source;\n  return manifestConfig;\n}\n\nconst normalizeFragPaths = ({ selector, val, action, manifestId, targetManifestId }) => ({\n  selector: normalizePath(selector),\n  val: normalizePath(val),\n  action,\n  manifestId,\n  targetManifestId,\n});\nexport async function categorizeActions(experiment, config) {\n  if (!experiment) return null;\n  const { manifestPath, selectedVariant } = experiment;\n  if (!selectedVariant || selectedVariant === 'default') return { experiment };\n\n  // only one replacepage can be defined\n  const { replacepage } = selectedVariant;\n  // eslint-disable-next-line prefer-destructuring\n  if (selectedVariant.replacepage?.length) config.mep.replacepage = replacepage[0];\n\n  selectedVariant.insertscript?.map((script) => loadScript(script.val));\n  selectedVariant.updatemetadata?.map((metadata) => setMetadata(metadata));\n\n  selectedVariant.fragments &&= selectedVariant.fragments.map(normalizeFragPaths);\n\n  return {\n    manifestPath,\n    experiment,\n    blocks: selectedVariant.useblockcode,\n    fragments: selectedVariant.fragments,\n    commands: selectedVariant.commands,\n  };\n}\n\nfunction parseMepParam(mepParam) {\n  if (!mepParam) return false;\n  const mepObject = Object.create(null);\n  const decodedParam = decodeURIComponent(mepParam);\n  decodedParam.split('---').forEach((item) => {\n    const pair = item.trim().split('--');\n    if (pair.length > 1) {\n      const [manifestPath, selectedVariant] = pair;\n      mepObject[manifestPath] = selectedVariant;\n    }\n  });\n\n  return mepObject;\n}\n\nfunction compareExecutionOrder(a, b) {\n  if (a.executionOrder === b.executionOrder) return 0;\n  return a.executionOrder > b.executionOrder ? 1 : -1;\n}\n\nexport function cleanAndSortManifestList(manifests, config = getConfig()) {\n  const manifestObj = {};\n  let allManifests = manifests;\n  let targetManifestWinsOverServerManifest = false;\n  if (config.mep?.experiments) allManifests = [...manifests, ...config.mep.experiments];\n  allManifests.forEach((manifest) => {\n    try {\n      if (!manifest?.manifest) return;\n      if (!manifest.manifestPath) manifest.manifestPath = normalizePath(manifest.manifest);\n      if (manifest.source && !manifest.source.includes('target')) manifest.manifest = normalizePath(manifest.manifest);\n      if (manifest.manifestPath in manifestObj) {\n        let fullManifest = manifestObj[manifest.manifestPath];\n        let freshManifest = manifest;\n        if (manifest.name) {\n          fullManifest = manifest;\n          freshManifest = manifestObj[manifest.manifestPath];\n        }\n        freshManifest.source = freshManifest.source.concat(fullManifest.source);\n        freshManifest.name = fullManifest.name;\n        freshManifest.selectedVariantName = fullManifest.selectedVariantName;\n        targetManifestWinsOverServerManifest = config?.env?.name === 'prod' && fullManifest.selectedVariantName.startsWith('target-');\n\n        if (targetManifestWinsOverServerManifest) {\n          freshManifest.variants = fullManifest.variants;\n          freshManifest.placeholderData = fullManifest.placeholderData;\n        }\n\n        freshManifest.selectedVariant = freshManifest.variants[freshManifest.selectedVariantName];\n        manifestObj[manifest.manifestPath] = freshManifest;\n      } else {\n        manifestObj[manifest.manifestPath] = manifest;\n      }\n\n      const manifestConfig = manifestObj[manifest.manifestPath];\n      const { selectedVariantName, variantNames, placeholderData } = manifestConfig;\n\n      if (selectedVariantName && variantNames.includes(selectedVariantName)) {\n        manifestConfig.selectedVariant = manifestConfig.variants[selectedVariantName];\n      } else {\n        /* c8 ignore next 2 */\n        manifestConfig.selectedVariantName = 'default';\n        manifestConfig.selectedVariant = 'default';\n      }\n      parsePlaceholders(placeholderData, getConfig(), manifestConfig.selectedVariantName);\n    } catch (e) {\n      log(`MEP Error parsing manifests: ${e.toString()}`);\n      window.lana?.log(`MEP Error parsing manifests: ${e.toString()}`);\n    }\n  });\n  Object.keys(manifestObj).forEach((key) => {\n    delete manifestObj[key].variants;\n  });\n  return Object.values(manifestObj).sort(compareExecutionOrder);\n}\n\nexport function handleFragmentCommand(command, a) {\n  const { action, fragment, manifestId, targetManifestId } = command;\n  const addInline = (a.href.includes(INLINE_HASH) && !fragment.includes(INLINE_HASH));\n  if (action === COMMANDS_KEYS.replace) {\n    a.href = fragment;\n    if (addInline) a.href += `#${INLINE_HASH}`;\n    addIds(a, manifestId, targetManifestId);\n    return fragment;\n  }\n  if (action === COMMANDS_KEYS.remove) {\n    a.parentElement.remove();\n  }\n  return false;\n}\n\nexport function parseNestedPlaceholders({ placeholders }) {\n  if (!placeholders) return;\n  Object.entries(placeholders).forEach(([key, value]) => {\n    placeholders[key] = replacePlaceholders(value, placeholders);\n  });\n}\n\nexport async function applyPers({ manifests }) {\n  if (!manifests?.length) return;\n  let experiments = manifests;\n  const config = getConfig();\n\n  for (let i = 0; i < experiments.length; i += 1) {\n    experiments[i] = await getManifestConfig(\n      experiments[i],\n      config.mep?.variantOverride,\n    );\n  }\n  experiments = cleanAndSortManifestList(experiments, config);\n  parseNestedPlaceholders(config);\n\n  let results = [];\n\n  for (const experiment of experiments) {\n    const result = await categorizeActions(experiment, config);\n    if (result) results.push(result);\n  }\n  results = results.filter(Boolean);\n\n  config.mep.experiments = [...config.mep.experiments, ...experiments];\n  config.mep.blocks = consolidateObjects(results, 'blocks', config.mep.blocks);\n  config.mep.fragments = consolidateObjects(results, 'fragments', config.mep.fragments);\n  config.mep.commands = consolidateArray(results, 'commands', config.mep.commands);\n\n  const main = document.querySelector('main');\n  if (config.mep.replacepage && !isPostLCP && main) {\n    await replaceInner(config.mep.replacepage.val, main);\n    const { manifestId, targetManifestId } = config.mep.replacepage;\n    addIds(main, manifestId, targetManifestId);\n  }\n\n  config.mep.commands = handleCommands(config.mep.commands);\n\n  const pznList = results.filter((r) => (r.experiment?.manifestType === TRACKED_MANIFEST_TYPE));\n  if (!pznList.length) return;\n\n  const pznVariants = pznList.map((r) => {\n    const val = r.experiment.selectedVariantName.replace(TARGET_EXP_PREFIX, '').trim().slice(0, 15);\n    const arr = val.split(':');\n    if (arr.length > 2 || arr[0]?.trim() === '' || arr[1]?.trim() === '') {\n      log('MEP Error: When using (optional) column nicknames, please use the following syntax: \"<nickname>: <original audience>\"');\n    }\n    if (!val.includes(':') || val.startsWith(':')) return val === 'default' ? 'nopzn' : val;\n    return arr[0].trim();\n  });\n  const pznManifests = pznList.map((r) => r.experiment.analyticsTitle);\n  config.mep.martech = `|${pznVariants.join('--')}|${pznManifests.join('--')}`;\n}\n\nfunction parseManifestUrlAndAddSource(manifestString, source) {\n  if (!manifestString) return [];\n  return manifestString.toLowerCase()\n    .split(/,|(\\s+)|(\\\\n)/g)\n    .filter((path) => path?.trim())\n    .map((manifestPath) => ({ manifestPath, source: [source] }));\n}\n\nexport const combineMepSources = async (\n  persEnabled,\n  rocPersEnabled,\n  promoEnabled,\n  mepParam,\n  mepMarketingDecrease,\n) => {\n  let persManifests = [];\n\n  const sources = {\n    pzn: persEnabled,\n    'pzn-roc': rocPersEnabled,\n    'mktg-decrease': mepMarketingDecrease,\n  };\n  Object.entries(sources).forEach(([source, value]) => {\n    if (!value) return;\n    persManifests = persManifests.concat(parseManifestUrlAndAddSource(value, source));\n  });\n\n  if (promoEnabled) {\n    const { default: getPromoManifests } = await import('./promo-utils.js');\n    persManifests = persManifests.concat(getPromoManifests(promoEnabled, PAGE_URL.searchParams));\n  }\n\n  if (mepParam && mepParam !== 'off') {\n    const persManifestPaths = persManifests.map((manifest) => {\n      const { manifestPath } = manifest;\n      if (manifestPath?.startsWith('/')) return manifestPath;\n      try {\n        const url = new URL(manifestPath);\n        return url.pathname;\n      } catch (e) {\n        return manifestPath;\n      }\n    });\n\n    mepParam.split('---').forEach((manifestPair) => {\n      const manifestPath = manifestPair.trim().toLowerCase().split('--')[0];\n      if (!persManifestPaths.includes(manifestPath)) {\n        persManifests.push({ manifestPath, source: ['mep param'] });\n      }\n    });\n  }\n\n  return persManifests;\n};\n\nasync function updateManifestsAndPropositions(\n  { config, targetAjoManifests, targetAjoPropositions },\n) {\n  targetAjoManifests.forEach((manifest) => {\n    manifest.source = [config.mep.ajoEnabled ? 'ajo' : 'target'];\n  });\n  config.mep.targetAjoManifests = targetAjoManifests;\n  if (config.mep.enablePersV2) {\n    window.addEventListener('alloy_sendEvent', () => {\n      if (targetAjoPropositions?.length && window._satellite) {\n        window._satellite.track('propositionDisplay', targetAjoPropositions);\n      }\n    }, { once: true });\n  } else if (targetAjoPropositions?.length && window._satellite) {\n    window._satellite.track('propositionDisplay', targetAjoPropositions);\n  }\n  if (config.mep.targetEnabled === 'postlcp') {\n    const event = new CustomEvent(MARTECH_RETURNED_EVENT, { detail: 'Martech returned' });\n    window.dispatchEvent(event);\n  }\n  return targetAjoManifests;\n}\n\nfunction roundToQuarter(num) {\n  return Math.ceil(num / 250) / 4;\n}\n\nfunction calculateResponseTime(responseStart) {\n  const responseTime = Date.now() - responseStart;\n  return roundToQuarter(responseTime);\n}\n\nfunction sendTargetResponseAnalytics(failure, responseStart, timeoutLocal, message) {\n  // temporary solution until we can decide on a better timeout value\n  const responseTime = calculateResponseTime(responseStart);\n  const timeoutTime = roundToQuarter(timeoutLocal);\n  let val = `target response time ${responseTime}:timed out ${failure}:timeout ${timeoutTime}`;\n  if (message) val += `:${message}`;\n  // eslint-disable-next-line no-underscore-dangle\n  window.addEventListener('alloy_sendEvent', () => {\n    window._satellite?.track?.('event', {\n      documentUnloading: true,\n      xdm: {\n        eventType: 'web.webinteraction.linkClicks',\n        web: {\n          webInteraction: {\n            linkClicks: { value: 1 },\n            type: 'other',\n            name: val,\n          },\n        },\n      },\n      data:\n        { _adobe_corpnew: { digitalData: { primaryEvent: { eventInfo: { eventName: val } } } } },\n    });\n  }, { once: true });\n}\n\nconst handleAlloyResponse = (response) => ((response.propositions || response.decisions))\n  ?.map((i) => {\n    const { id } = i;\n    return i.items.map((item) => ({ ...item, id }));\n  })\n  ?.flat()\n  ?.map((item) => {\n    const content = item?.data?.content;\n    if (!content || !(content.manifestLocation || content.manifestContent)) return null;\n    return {\n      manifestPath: content.manifestLocation || content.manifestPath,\n      manifestUrl: content.manifestLocation,\n      manifestData: content.manifestContent?.experiences?.data || content.manifestContent?.data,\n      manifestPlaceholders: content.manifestContent?.placeholders?.data,\n      manifestInfo: content.manifestContent?.info.data,\n      name: item.meta?.['activity.name'] || item.id,\n      variantLabel: (item.meta?.['experience.name'] && `target-${item.meta['experience.name']}`)\n        || content.experienceName,\n      meta: item.meta,\n    };\n  })\n  ?.filter(Boolean) ?? [];\n\nasync function handleMartechTargetInteraction(\n  { config, targetInteractionPromise, calculatedTimeout },\n) {\n  const targetAjo = config.mep.ajoEnabled ? 'ajo' : 'target';\n  let targetAjoManifests = [];\n  let targetAjoPropositions = [];\n  if (config?.mep?.enablePersV2 && targetInteractionPromise) {\n    const { targetInteractionData, respTime, respStartTime } = await targetInteractionPromise;\n    sendTargetResponseAnalytics(false, respStartTime, calculatedTimeout);\n    if (targetInteractionData.result) {\n      const roundedResponseTime = roundToQuarter(respTime);\n      performance.clearMarks();\n      performance.clearMeasures();\n      try {\n        window.lana.log(`${targetAjo} response time: ${roundedResponseTime}`, {\n          tags: 'martech',\n          errorType: 'e',\n          sampleRate: 0.5,\n        });\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(`Error logging ${targetAjo} response time:`, e);\n      }\n      targetAjoManifests = handleAlloyResponse(targetInteractionData.result);\n      targetAjoPropositions = targetInteractionData.result?.propositions || [];\n    }\n  }\n\n  return updateManifestsAndPropositions(\n    { config, targetAjoManifests, targetAjoPropositions },\n  );\n}\n\nasync function callMartech(config) {\n  const { getTargetAjoPersonalization } = await import('../../martech/martech.js');\n  const {\n    targetAjoManifests,\n    targetAjoPropositions,\n  } = await getTargetAjoPersonalization(\n    { handleAlloyResponse, config, sendTargetResponseAnalytics },\n  );\n  return updateManifestsAndPropositions(\n    { config, targetAjoManifests, targetAjoPropositions },\n  );\n}\n\nconst awaitMartech = () => new Promise((resolve) => {\n  const listener = (event) => resolve(event.detail);\n  window.addEventListener(MARTECH_RETURNED_EVENT, listener, { once: true });\n});\n\nexport async function init(enablements = {}) {\n  let manifests = [];\n  const {\n    mepParam, mepHighlight, mepButton, pzn, pznroc, promo, enablePersV2,\n    target, ajo, countryIPPromise, mepgeolocation, targetInteractionPromise, calculatedTimeout,\n    postLCP, promises, mepMarketingDecrease, akamaiCode,\n  } = enablements;\n  const config = getConfig();\n\n  if (postLCP) {\n    isPostLCP = true;\n  } else {\n    for (const [key, promise] of Object.entries(promises)) promises[key] = await promise;\n    config.mep = {\n      updateFragDataProps,\n      preview: (mepButton !== 'off'\n        && (config.env?.name !== 'prod' || mepParam || mepParam === '' || mepButton)),\n      variantOverride: parseMepParam(mepParam),\n      highlight: (mepHighlight !== undefined && mepHighlight !== 'false'),\n      targetEnabled: target,\n      ajoEnabled: ajo,\n      experiments: [],\n      prefix: config.locale?.prefix.split('/')[1]?.toLowerCase() || US_GEO,\n      enablePersV2,\n      countryIPPromise,\n      geoLocation: mepgeolocation,\n      targetInteractionPromise,\n      promises,\n      akamaiCode: akamaiCode?.toLowerCase(),\n      consentState: getMepConsentConfig(),\n    };\n\n    manifests = manifests.concat(await combineMepSources(\n      pzn,\n      pznroc,\n      promo,\n      mepParam,\n      mepMarketingDecrease,\n    ));\n    manifests?.forEach((manifest) => {\n      if (manifest.disabled) return;\n      const normalizedURL = normalizePath(manifest.manifestPath);\n      loadLink(normalizedURL, { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n    });\n    if (pzn || pznroc) loadLink(getXLGListURL(config), { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n  }\n  if (enablePersV2 && target === true) {\n    manifests = manifests.concat(await handleMartechTargetInteraction(\n      { config, targetInteractionPromise, calculatedTimeout },\n    ));\n  } else {\n    if (target === true || ajo === true) manifests = manifests.concat(await callMartech(config));\n    if (target === 'postlcp' || ajo === 'postlcp') callMartech(config);\n  }\n  if (postLCP) {\n    if (!config.mep.targetAjoManifests) await awaitMartech();\n    manifests = config.mep.targetAjoManifests;\n  }\n  try {\n    if (manifests?.length) await applyPers({ manifests });\n    if (config.mep?.preview) await import('./preview.js').then(({ saveToMmm }) => saveToMmm());\n  } catch (e) {\n    log(`MEP Error: ${e.toString()}`);\n    window.lana?.log(`MEP Error: ${e.toString()}`);\n  }\n}\n"],"names":["getUA","navigator","userAgent","PHONE_SIZE","window","screen","width","height","safariIpad","includes","maxTouchPoints","isGalaxyTab","isChromeIOS","isEdgeIOS","isFirefoxIOS","US_GEO","PERSONALIZATION_TAGS","all","chrome","firefox","safari","edge","android","ios","test","windows","mac","mobile-device","phone","tablet","desktop","loggedout","isSignedOut","loggedin","PERSONALIZATION_KEYS","Object","keys","CLASS_EL_DELETE","CLASS_EL_REPLACE","COLUMN_NOT_OPERATOR","TARGET_EXP_PREFIX","INLINE_HASH","MARTECH_RETURNED_EVENT","PAGE_URL","URL","location","href","FLAGS","includeFragments","includeGnav","isPostLCP","SELECTOR_TYPES","fragment","twpButtons","other","TRACKED_MANIFEST_TYPE","RE_KEY_REPLACE","MANIFEST_KEYS","DATA_TYPE","JSON","TEXT","IN_BLOCK_SELECTOR_PREFIX","normalizePath","p","_path","localize","arguments","length","undefined","path","isDamContent","isFederal","config","getConfig","startsWith","codeRoot","concat","url","hash","pathname","firstFolder","split","mepHash","locale","ietf","locales","prefix","getFederatedUrl","replace","e","getFileName","pop","GLOBAL_CMDS","CREATE_CMDS","insertafter","insertbefore","prepend","append","COMMANDS_KEYS","remove","updateAttribute","addIds","el","manifestId","targetManifestId","dataset","adobeTargetTestid","getSelectorType","selector","sel","toLowerCase","trim","replacePlaceholders","value","ph","placeholders","val","matches","match","forEach","key","createFrag","action","content","_el$parentElement","classList","add","search","a","createTag","frag","parentElement","closest","nodeName","lcpSection","document","querySelector","contains","isInLcpSection","loadLink","localizeLink","as","crossorigin","rel","createContent","_ref","modifiers","setAttribute","getUpdatedHref","getAttribute","newContent","innerHTML","container","handleTwpButtons","_el$closest","_el$closest2","secondaryButton","wrapper","result","COMMANDS","_ref2","cmd","insertAdjacentElement","attribute","parameter","parameters","URLSearchParams","set","toString","error","console","log","message","_config$mep","mep","preview","fetchData","async","type","resp","fetch","ok","status","Error","statusText","consolidateArray","arr","prop","existing","reduce","results","i","consolidateObjects","propMap","item","_item$prop","manifestPath","matchGlob","searchStr","inputStr","pattern","RegExp","replaceInner","element","plainPath","endsWith","html","decorateArea","setMetadata","metadata","propName","metaEl","head","normalizeKeys","obj","newObj","str","modifiedStr","char","toLowerAlpha","updateEndNumber","endNumber","term","modifySelectorTerm","termParam","specificSelectors","section","startTextMatch","startText","startTextPart1","endNumberMatch","modifyNonFragmentSelector","flags","shift","flag","mod","push","getModifiers","modifiedSelector","join","replaceAll","map","string","addHash","newHash","origin","setDataIdOnChildren","sections","id","children","child","updateFragDataProps","inline","deleteMarkedEls","querySelectorAll","addSectionAnchors","block","row","_row$children$","_row$children$2","col1","textContent","col2","handleCommands","commands","rootEl","forceInline","forceRootEl","section1","command","_config$mep2","_config$mep2$inBlock","_config$mep$inBlock","_config$mep$inBlock$b","_config$mep$inBlock$b6","_config$mep$inBlock$b7","blockAndSelector","substring","blockName","blockSelector","inBlock","slice","getFragmentId","masUrl","hashValue","searchParams","get","_config$mep$inBlock$b2","_config$mep$inBlock$b3","fragments","_config$mep$inBlock$b4","_config$mep$inBlock$b5","registerInBlockActions","selectorType","els","root","regex","filter","outerHTML","tagName","getSelectedElements","assign","insertAnchor","completed","getVariantInfo","line","variantNames","variants","fTargetId","_config$mep3","_line$action","_config$mep4","targetId","pageFilter","vn","variantInfo","blockTarget","getBlockProps","fVal","_val","_val2","_val3","_val4","miloLibs","parseManifestVariants","data","manifestConfig","experiences","d","_config$mep5","createMartechMetadata","column","then","_ref3","_config$mep6","_config$mep6$analytic","processTrackingLabels","analyticLocalization","firstRow","usValue","us","en","translatedValue","matchesCountryChoiceOrIP","name","_name$match","countryList","c","countryChoice","countryIP","testCountry","hasCountryMatch","parsePlaceholders","_config$mep7","selectedVariantName","valueNames","region","keyVal","entries","find","_ref4","key2","res","checkForParamMatch","paramStr","searchParamVal","Array","from","_ref5","checkForPreviousPageMatch","previousPageStr","lastVisitedPage","referrer","previousPageString","trimNames","v","Boolean","buildVariantInfo","acc","nameArr","allNames","getXLGListURL","_config$env","sheet","env","getEntitlementMap","_config$mep8","_fetchedData$data","_config$mep9","entitlementMap","entitlementUrl","fetchedData","consumerEntitlements","entitlements","ent","tagname","getEntitlements","flatMap","destination","_destination$segments","segments","segment","entMatch","normCountry","country","getPersonalizationVariant","_config$mep10","_config$mep12","variantLabel","variantOverride","hasEntitlementTag","values","some","tag","userEntitlements","_config$mep11","enablePersV2","hasMatch","_userEntitlements","_name$split$","lob","event","promises","matchVariant","n","condition","reverse","geoLocation","_document$cookie$spli","_urlParams$get","urlParams","cookie","akamaiCode","sessionStorage","getItem","countryIPPromise","setMepCountry","variant","createDefaultExperiment","manifest","disabled","executionOrder","selectedVariant","source","addMepAnalytics","header","_config$mep13","experiments","experiment","_experiment$selectedV","_experiment$selectedV2","useblockcode","_ref6","updatemetadata","updateMetaData","getMepConsentConfig","cookies","getAllCookies","optOnConsentCookie","OPT_ON_AND_CONSENT_COOKIE","kndctrConsentCookie","KNDCTR_CONSENT_COOKIE","consentState","getConsentState","parseOptanonConsent","configuration","performance","advertising","overrideVariant","variantName","getGeoRestriction","geoRestriction","isAllowed","getManifestMarketingAction","mktgAction","canServeManifest","performance2","getManifestConfig","info","_data","_data2","_data3","_infoObj$manifestOve","_data4","manifestData","manifestUrl","manifestPlaceholders","manifestInfo","persData","infoTab","infoObj","manifestOverrideName","infoKeyMap","_infoObj$manifestTyp","_infoObj$manifestMar","_infoObj$manifestGeo","manifestType","analytics","analyticsTitle","index","indexOf","finalDisabled","_getConfig$mep","placeholderData","normalizeFragPaths","_ref7","categorizeActions","_selectedVariant$repl","_selectedVariant$inse","_selectedVariant$upda","replacepage","insertscript","script","loadScript","blocks","parseMepParam","mepParam","mepObject","create","decodeURIComponent","pair","compareExecutionOrder","b","cleanAndSortManifestList","manifests","_config$mep14","manifestObj","allManifests","targetManifestWinsOverServerManifest","_config$env2","fullManifest","freshManifest","_window$lana","lana","sort","handleFragmentCommand","addInline","parseNestedPlaceholders","_ref8","_ref9","applyPers","_ref10","_config$mep15","main","pznList","r","_r$experiment","pznVariants","_arr$","_arr$2","pznManifests","martech","combineMepSources","persEnabled","rocPersEnabled","promoEnabled","mepMarketingDecrease","persManifests","sources","pzn","_ref11","manifestString","parseManifestUrlAndAddSource","default","getPromoManifests","persManifestPaths","manifestPair","updateManifestsAndPropositions","_ref12","targetAjoManifests","targetAjoPropositions","ajoEnabled","addEventListener","_satellite","track","once","targetEnabled","CustomEvent","detail","dispatchEvent","roundToQuarter","num","Math","ceil","sendTargetResponseAnalytics","failure","responseStart","timeoutLocal","responseTime","Date","now","calculateResponseTime","timeoutTime","_window$_satellite","_window$_satellite$tr","call","documentUnloading","xdm","eventType","web","webInteraction","linkClicks","_adobe_corpnew","digitalData","primaryEvent","eventInfo","eventName","handleAlloyResponse","response","_map$flat$map$filter","_ref13","propositions","decisions","items","flat","_item$data","_content$manifestCont","_content$manifestCont2","_content$manifestCont3","_content$manifestCont4","_item$meta","_item$meta2","manifestLocation","manifestContent","meta","experienceName","callMartech","getTargetAjoPersonalization","awaitMartech","Promise","resolve","init","enablements","mepHighlight","mepButton","pznroc","promo","target","ajo","mepgeolocation","targetInteractionPromise","calculatedTimeout","postLCP","_config$env3","_config$locale","_manifests","promise","highlight","normalizedURL","_ref14","_config$mep16","targetAjo","targetInteractionData","respTime","respStartTime","_targetInteractionDat","roundedResponseTime","clearMarks","clearMeasures","tags","errorType","sampleRate","handleMartechTargetInteraction","_manifests2","_config$mep17","_ref15","saveToMmm","_window$lana2"],"sourceRoot":""}