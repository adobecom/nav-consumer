"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[5092,3718,3619],{3718:(e,t,n)=>{function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if("function"!=typeof e)return;let n=null;return function(){for(var o=arguments.length,l=new Array(o),i=0;i<o;i++)l[i]=arguments[i];clearTimeout(n),n=setTimeout((()=>e(...l)),t)}}n.r(t),n.d(t,{a:()=>o,b:()=>l});var l={debounce:o}},3619:(e,t,n)=>{n.r(t),n.d(t,{a:()=>u});var o={},l=async function(e){var t,n;let l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return!1;let{live:i,profile:r,webPath:a}=e,s=!l||(null===i||void 0===i||null===(t=i.permissions)||void 0===t?void 0:t.includes("write")),d="Publishing is currently disabled for this page",u=await(async e=>{if(void 0!==o[e])return o[e];let t=null,n=await fetch(e);return n.ok&&(t=await n.json()),o[e]=t,o[e]})("/.milo/publish-permissions-config.json?limit=50000"),c=null===u||void 0===u||null===(n=u.urls)||void 0===n||null===(n=n.data)||void 0===n?void 0:n.find((e=>{let{url:t}=e;return t.endsWith("**")?a.includes(t.slice(0,-2)):t===a}));if(c){s=!1,c.message&&(d=c.message);let e=u[c.group];if(e&&null!==r&&void 0!==r&&r.email){var p;let t,n=null===(p=e.data)||void 0===p?void 0:p.find((e=>{let{allow:n,deny:o}=e;return o?(t=!0,o===r.email):n===r.email}));s=t?!n:!!n}}return{canPublish:s,message:d}},i=".publish.plugin button",r=".profile-email",a="Are you sure? This will publish to production.",s=!1;async function d(e,t){let{canPublish:n,message:o}=await l(e,!1);n?t.removeAttribute("disabled"):(t.setAttribute("disabled",!0),t.insertAdjacentHTML("beforeend","<span>".concat(o,"</span>")),setTimeout((()=>t.querySelector("span").remove()),4e3))}async function u(e){var t,n;if(s)return;if(s=!0,"HELIX-SIDEKICK"===e.nodeName)return void function(e){let t=async(e,t)=>{let{canPublish:n,message:o}=await l(e,!1);n?t.removeAttribute("disabled"):t.setAttribute("disabled",!0);let i=t.querySelector("span"),r=n?a:o;i?i.innerText=r:t.insertAdjacentHTML("beforeend","<span>".concat(r,"</span>"))},n=new CSSStyleSheet;n.replaceSync("\n    :host {\n      --bg-color: rgb(129 27 14);\n      --text-color: #fff0f0;\n      color-scheme: light dark;\n    }\n    .publish.plugin {\n      order: 100;\n    }\n    .publish.plugin button {\n      position: relative;\n    }\n    .publish.plugin button:not([disabled=true]) {\n      background: var(--bg-color);\n      border-color: #b46157;\n      color: var(--text-color);\n    }\n    .publish.plugin button:not([disabled=true]):hover {\n      background-color: var(--hlx-sk-button-hover-bg);\n      border-color: unset;\n      color: var(--hlx-sk-button-hover-color);\n    }\n    .publish.plugin button > span {\n      display: none;\n      background: #666;\n      border-radius: 4px;\n      line-height: 1.2rem;\n      padding: 8px 12px;\n      position: absolute;\n      top: 34px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 150px;\n      white-space: pre-wrap;\n    }\n    .publish.plugin button:not([disabled=true]) > span {\n      background: var(--bg-color);\n    }\n    .publish.plugin button:hover > span {\n      display: block;\n      color: var(--text-color);\n    }\n    .publish.plugin button > span:before {\n      content: '';\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-bottom: 6px solid #666;\n      position: absolute;\n      text-align: center;\n      top: -6px;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n    .publish.plugin button:not([disabled=true]) > span:before {\n      border-bottom: 6px solid var(--bg-color);\n    }\n  "),e.shadowRoot.adoptedStyleSheets=[n],e.addEventListener("statusfetched",(async e=>{var n,o;let l=null===e||void 0===e||null===(n=e.detail)||void 0===n?void 0:n.data,r=null===e||void 0===e||null===(o=e.target)||void 0===o||null===(o=o.shadowRoot)||void 0===o?void 0:o.querySelector(i);l&&r&&t(l,r)})),setTimeout((async()=>{let n=e.shadowRoot.querySelector(i);null===n||void 0===n||n.setAttribute("disabled",!0);let o=null===n||void 0===n?void 0:n.querySelector("span");if(n&&!o){var l;let o={webPath:window.location.pathname,profile:{email:null===(l=e.shadowRoot.querySelector(r))||void 0===l?void 0:l.innerText}};t(o,n)}}),500)}(e);let o=new CSSStyleSheet;o.replaceSync("\n    sk-action-button.publish {\n      position: relative;\n    }\n    sk-action-button.publish > span {\n      display: none;\n      background: #777;\n      border-radius: 4px;\n      line-height: 1.2rem;\n      padding: 8px 12px;\n      position: absolute;\n      bottom: 34px;\n      left: 50%;\n      transform: translateX(-50%);\n      width: 150px;\n      white-space: pre-wrap;\n      color: black;\n    }\n    sk-action-button.publish[disabled] > span {\n      display: block;\n    }\n    sk-action-button.publish > span:before {\n      content: '';\n      border-left: 6px solid transparent;\n      border-right: 6px solid transparent;\n      border-top: 6px solid #777;\n      position: absolute;\n      text-align: center;\n      bottom: -6px;\n      left: 50%;\n      transform: translateX(-50%);\n    }\n  ");let u=e.shadowRoot.querySelector("plugin-action-bar").shadowRoot;null!==(t=u.adoptedStyleSheets)&&void 0!==t||(u.adoptedStyleSheets=[]),u.adoptedStyleSheets.push(o);let c=u.querySelector("sk-action-button.publish");c||e.addEventListener("status-fetched",(e=>{let{target:t,detail:n}=e;setTimeout((async()=>{let e=t.shadowRoot.querySelector("plugin-action-bar").shadowRoot.querySelector("sk-action-button.publish");n&&e&&await d(n,e)}),0)}));let p={webPath:window.location.pathname,profile:{email:null===(n=u.querySelector("#user"))||void 0===n||null===(n=n.shadowRoot.querySelector('.user [slot="description"]'))||void 0===n?void 0:n.innerText}};p&&c&&await d(p,c)}},5092:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var o=n(3619),l=n(3718);n(722);function i(e){let{createTag:t,loadBlock:i,loadScript:r,loadStyle:a}=e,s=document.querySelector("aem-sidekick, helix-sidekick");s.addEventListener("custom:send-to-caas",(0,l.a)((async e=>{var t,o;let l=null!==(t=null===(o=e.detail.data)||void 0===o?void 0:o.config)&&void 0!==t?t:e.detail.config,{host:i,project:s,ref:d,repo:u,owner:c}=l,{sendToCaaS:p}=await Promise.resolve().then(n.bind(n,1009));p({host:i,project:s,branch:d,repo:u,owner:c},r,a)}),500)),s.addEventListener("custom:check-schema",(async()=>{null!==document.querySelector('script[type="application/ld+json"]')&&window.open("https://search.google.com/test/rich-results?url=".concat(encodeURIComponent(window.location.href)),"check-schema")})),s.addEventListener("custom:preflight",(0,l.a)((()=>(async()=>{let e=t("div",{class:"preflight"}),o=await i(e),{getModal:l}=await n.e(8257).then(n.bind(n,8257));l(null,{id:"preflight",content:o,closeEvent:"closeModal"})})()),500)),(0,o.a)(s)}}}]);
//# sourceMappingURL=5092.52a99fe4.chunk.js.map