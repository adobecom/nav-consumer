{"version":3,"file":"static/js/1103.a9ce15f1.chunk.js","mappings":"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","sources":["../node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","../node_modules/@babel/runtime/helpers/esm/toPrimitive.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@adobecom/features/webapp-prompt/webapp-prompt.js"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import {\n  getUserProfile,\n  icons,\n  lanaLog,\n  toFragment,\n} from '../../blocks/global-navigation/utilities/utilities.js';\nimport { getConfig, decorateSVG, getFedsPlaceholderConfig } from '../../utils/utils.js';\nimport { replaceKey, replaceText } from '../placeholders.js';\n\nexport const DISMISSAL_CONFIG = {\n  animationCount: 2,\n  animationDuration: 2500,\n  tooltipMessage: 'Use the App Switcher to quickly find apps.',\n  tooltipDuration: 5000,\n};\n\nconst CONFIG = {\n  selectors: { prompt: '.appPrompt' },\n  delay: 7000,\n  loaderColor: '#EB1000',\n  pauseOnHover: 'off',\n  ...DISMISSAL_CONFIG,\n};\n\nconst getElemText = (elem) => elem?.textContent?.trim();\n\nconst getMetadata = (el) => [...el.childNodes].reduce((acc, row) => {\n  if (row.children?.length === 2) {\n    const key = getElemText(row.children[0]);\n    const val = getElemText(row.children[1]);\n    if (key && val) acc[key] = val;\n  }\n  return acc;\n}, {});\n\nconst getIcon = (content) => {\n  const picture = content.querySelector('picture');\n  if (picture) return picture;\n\n  const svg = content.querySelector('a[href$=\".svg\"]');\n  if (svg) return decorateSVG(svg);\n\n  return icons.company;\n};\n\nconst showTooltip = (\n  element,\n  message = CONFIG.tooltipMessage,\n  time = CONFIG.tooltipDuration,\n) => {\n  element.setAttribute('data-pep-dismissal-tooltip', message);\n  const cleanup = () => element.removeAttribute('data-pep-dismissal-tooltip');\n  const timeoutID = setTimeout(cleanup, time);\n  element.addEventListener('click', () => {\n    cleanup();\n    clearTimeout(timeoutID);\n  }, { once: true });\n};\n\nconst playFocusAnimation = (\n  element,\n  iterationCount = CONFIG.animationCount,\n  animationDuration = CONFIG.animationDuration,\n) => {\n  element.classList.add('coach-indicator');\n  element.style.setProperty('--animation-duration', `${animationDuration}ms`);\n  const rings = [];\n  const createRing = () => toFragment`\n    <div\n      class=\"coach-indicator-ring\"\n      style=\"animation-iteration-count: ${iterationCount};\">\n    </div>`;\n  for (let i = 0; i < 3; i += 1) {\n    const ring = createRing();\n    element.insertAdjacentElement('afterbegin', ring);\n    rings.push(ring);\n  }\n  // The cleanup function is added to the event queue\n  // some time after the end of the animation because\n  // the cleanup isn't high priority but it should be done\n  // eventually. (Animation truly ends slightly after\n  // animationDuration * iterationCount due to animation-delay)\n  const cleanup = () => {\n    rings.forEach((ring) => ring.remove());\n    element.classList.remove('coach-indicator');\n  };\n  const timeoutID = setTimeout(cleanup, (iterationCount + 1) * animationDuration);\n  element.addEventListener('click', () => {\n    cleanup();\n    clearTimeout(timeoutID);\n  }, { once: true });\n};\n\nconst modalsActive = () => !!document.querySelector('.dialog-modal');\n\nconst waitForClosedModalsThen = (loadPEP) => {\n  if (modalsActive()) {\n    setTimeout(() => waitForClosedModalsThen(loadPEP), 200);\n    return;\n  }\n  loadPEP();\n};\n\nexport class AppPrompt {\n  constructor({ promptPath, entName, parent, getAnchorState } = {}) {\n    this.promptPath = promptPath;\n    this.entName = entName;\n    this.parent = parent;\n    this.getAnchorState = getAnchorState;\n    this.id = this.promptPath.split('/').pop();\n    this.elements = {};\n    if (modalsActive()) {\n      window.addEventListener(\n        'milo:modal:closed',\n        () => waitForClosedModalsThen(this.init),\n        { once: true },\n      );\n      this.initializationQueued = true;\n      return;\n    }\n    this.initializationQueued = false;\n  }\n\n  init = async () => {\n    if (this.isDismissedPrompt() || !this.parent) return;\n\n    const skipEntitlements = new URLSearchParams(window.location.search).get('skipPepEntitlements');\n    const entMatch = skipEntitlements || await this.doesEntitlementMatch();\n    if (!entMatch) return;\n\n    const content = await this.fetchContent();\n    if (!content) return;\n\n    await this.getData(content);\n    if (!this.options['redirect-url'] || !this.options['product-name']) return;\n\n    ({ id: this.anchorId, isOpen: this.isAnchorExpanded } = await this.getAnchorState()\n      .catch((e) => {\n        lanaLog({\n          message: 'Error on getting anchor state',\n          e,\n          tags: 'pep',\n          errorType: 'error',\n        });\n        return {};\n      }));\n    if (this.isAnchorExpanded) return;\n\n    if (this.anchorId) this.anchor = document.querySelector(`#${this.anchorId}`);\n    this.offset = this.anchor\n      ? this.parent.offsetWidth - (this.anchor.offsetWidth + this.anchor.offsetLeft) : 0;\n    this.template = this.decorate();\n\n    this.addEventListeners();\n\n    this.parent.prepend(this.template);\n    this.elements.closeIcon.focus();\n\n    this.cleanupFn = this.initRedirect(this.options['pause-on-hover'] === 'on');\n  };\n\n  doesEntitlementMatch = async () => {\n    const config = getConfig();\n    const entitlements = await config.entitlements();\n    const extraEnts = new URLSearchParams(window.location.search).get('mockPepEnts');\n    extraEnts?.split(',').forEach((ent) => entitlements.push(ent.trim()));\n    return entitlements?.length && entitlements.includes(this.entName);\n  };\n\n  fetchContent = async () => {\n    const res = await fetch(`${this.promptPath}.plain.html`);\n\n    if (!res.ok) {\n      lanaLog({\n        message: `Error fetching content for prompt: ${this.promptPath}.plain.html`,\n        e: `Status ${res.status} when trying to fetch content for prompt`,\n        tags: 'pep',\n        errorType: 'error',\n      });\n      return '';\n    }\n\n    const text = await res.text();\n    const content = await replaceText(text, getFedsPlaceholderConfig());\n    const html = new DOMParser().parseFromString(content, 'text/html');\n\n    return html;\n  };\n\n  getData = async (content) => {\n    this.icon = getIcon(content);\n\n    const selectors = {\n      title: 'h2',\n      subtitle: 'h3',\n      cancel: 'em > a',\n    };\n\n    await Promise.all(Object.keys(selectors).map(async (key) => {\n      const element = content.querySelector(selectors[key]);\n      if (element?.innerText) this[key] = element.innerText;\n      else {\n        const label = await replaceKey(`pep-prompt-${key}`, getFedsPlaceholderConfig());\n        this[key] = label === `pep prompt ${key}` ? '' : label;\n      }\n    }));\n\n    await getUserProfile()\n      .then((data) => {\n        const requiredFields = ['display_name', 'email', 'avatar'];\n        const hasRequiredFields = requiredFields.every((field) => !!data[field]);\n        if (!hasRequiredFields) return;\n\n        this.profile = data;\n      }).catch((e) => {\n        lanaLog({\n          message: 'Error fetching user profile',\n          e,\n          tags: 'pep',\n          errorType: 'error',\n        });\n      });\n\n    const metadata = getMetadata(content.querySelector('.section-metadata'));\n    metadata['loader-duration'] = parseInt(metadata['loader-duration'] || CONFIG.delay, 10);\n    metadata['loader-color'] = metadata['loader-color'] || CONFIG.loaderColor;\n    metadata['dismissal-animation-count'] = parseInt(metadata['dismissal-animation-count'] ?? CONFIG.animationCount, 10);\n    metadata['dismissal-animation-duration'] = parseInt(metadata['dismissal-animation-duration'] ?? CONFIG.animationDuration, 10);\n    metadata['dismissal-tooltip-message'] ??= CONFIG.tooltipMessage;\n    metadata['dismissal-tooltip-duration'] = parseInt(metadata['dismissal-tooltip-duration'] ?? CONFIG.tooltipDuration, 10);\n    metadata['pause-on-hover'] ??= CONFIG.pauseOnHover;\n    this.options = metadata;\n  };\n\n  decorate = () => {\n    const animationPauseOnHover = this.options['pause-on-hover'] === 'on';\n    this.elements.closeIcon = toFragment`<button daa-ll=\"Close Modal\" aria-label=\"${this.cancel}\" class=\"appPrompt-close\"></button>`;\n    this.elements.cta = toFragment`<button daa-ll=\"Stay on this page\" class=\"appPrompt-cta appPrompt-cta--close\">${this.cancel}</button>`;\n    this.elements.profile = this.profile\n      ? toFragment`<div class=\"appPrompt-profile\">\n        <div class=\"appPrompt-avatar\">\n          <img class=\"appPrompt-avatar-image\" src=\"${this.profile.avatar}\" />\n        </div>\n        <div class=\"appPrompt-user\">\n          <div class=\"appPrompt-name\">${this.profile.display_name}</div>\n          <div class=\"appPrompt-email\">${this.profile.email}</div>\n        </div>\n      </div>`\n      : '';\n\n    return toFragment`<div\n      daa-state=\"true\" daa-im=\"true\" daa-lh=\"PEP Modal_${this.options['product-name']?.toLowerCase()}\"\n      class=\"appPrompt\" style=\"margin: 0 ${this.offset}px\">\n      ${this.elements.closeIcon}\n      <div class=\"appPrompt-icon\">\n        ${this.icon}\n      </div>\n      <div class=\"appPrompt-title\">${this.title}</div>\n      ${this.elements.profile}\n      <div class=\"appPrompt-footer\">\n        <div class=\"appPrompt-text\">${this.subtitle}</div>\n        ${this.elements.cta}\n      </div>\n      <div class=\"appPrompt-progressWrapper\">\n        <div class=\"appPrompt-progress ${animationPauseOnHover && 'appPrompt-progressPauseOnHover'}\" style=\"background-color: ${this.options['loader-color']}; animation-duration: ${this.options['loader-duration']}ms;\"></div>\n      </div>\n    </div>`;\n  };\n\n  addEventListeners = () => {\n    this.anchor?.addEventListener('click', () => this.close({ dismissalActions: false }));\n    document.addEventListener('keydown', this.handleKeyDown);\n\n    [this.elements.closeIcon, this.elements.cta]\n      .forEach((elem) => elem.addEventListener('click', this.close));\n  };\n\n  handleKeyDown = (event) => {\n    if (event.key === 'Escape') this.close();\n  };\n\n  static redirectTo(url) {\n    window.location.assign(url);\n  }\n\n  initRedirect = (withPause = false) => {\n    let timeoutId;\n    let remainingTime = this.options['loader-duration'];\n    let startTime;\n\n    const startTimeout = () => {\n      startTime = performance.now();\n      timeoutId = setTimeout(() => {\n        this.close({ saveDismissal: false, dismissalActions: false });\n        AppPrompt.redirectTo(this.options['redirect-url']);\n      }, remainingTime);\n    };\n\n    const stopTimeout = () => {\n      clearTimeout(timeoutId);\n      remainingTime -= performance.now() - startTime;\n    };\n\n    if (withPause) {\n      const appPromptElem = document.querySelector(CONFIG.selectors.prompt);\n      if (appPromptElem) {\n        appPromptElem.addEventListener('mouseenter', stopTimeout);\n        appPromptElem.addEventListener('mouseleave', startTimeout);\n      }\n    }\n\n    // Start the timeout initially\n    startTimeout();\n\n    return () => {\n      clearTimeout(timeoutId);\n      if (withPause) {\n        const appPromptElem = document.querySelector(CONFIG.selectors.prompt);\n        if (appPromptElem) {\n          appPromptElem.removeEventListener('mouseenter', stopTimeout);\n          appPromptElem.removeEventListener('mouseleave', startTimeout);\n        }\n      }\n    };\n  };\n\n  isDismissedPrompt = () => AppPrompt.getDismissedPrompts().includes(this.id);\n\n  setDismissedPrompt = () => {\n    const dismissedPrompts = new Set(AppPrompt.getDismissedPrompts());\n    dismissedPrompts.add(this.id);\n    document.cookie = `dismissedAppPrompts=${JSON.stringify([...dismissedPrompts])};path=/`;\n  };\n\n  close = ({ saveDismissal = true, dismissalActions = true } = {}) => {\n    const appPromptElem = document.querySelector(CONFIG.selectors.prompt);\n    this.cleanupFn();\n    appPromptElem?.remove();\n    if (saveDismissal) this.setDismissedPrompt();\n    document.removeEventListener('keydown', this.handleKeyDown);\n    this.anchor?.focus();\n    this.anchor?.removeEventListener('click', this.close);\n\n    if (dismissalActions) {\n      playFocusAnimation(\n        this.anchor,\n        this.options['dismissal-animation-count'],\n        this.options['dismissal-animation-duration'],\n      );\n      showTooltip(\n        this.anchor,\n        this.options['dismissal-tooltip-message'],\n        this.options['dismissal-tooltip-duration'],\n      );\n    }\n  };\n\n  static getDismissedPrompts = () => {\n    const cookie = document.cookie\n      .split(';')\n      .find((item) => item.trim().startsWith('dismissedAppPrompts='))\n      ?.split('=')[1];\n\n    return cookie ? JSON.parse(cookie) : [];\n  };\n}\n\nexport default async function init(config) {\n  try {\n    const appPrompt = new AppPrompt(config);\n    if (!appPrompt.initializationQueued) await appPrompt.init();\n    return appPrompt;\n  } catch (e) {\n    lanaLog({ message: 'Could not initialize PEP', e, tags: 'pep', errorType: 'error' });\n    return null;\n  }\n}\n"],"names":["_typeof","o","Symbol","iterator","constructor","prototype","toPropertyKey","t","i","r","e","toPrimitive","call","TypeError","String","Number","_defineProperty","Object","defineProperty","value","enumerable","configurable","writable","DISMISSAL_CONFIG","animationCount","animationDuration","tooltipMessage","tooltipDuration","CONFIG","selectors","prompt","delay","loaderColor","pauseOnHover","getElemText","elem","_elem$textContent","textContent","trim","modalsActive","document","querySelector","waitForClosedModalsThen","loadPEP","setTimeout","AppPrompt","_AppPrompt2","_AppPrompt","_this","promptPath","entName","parent","getAnchorState","arguments","length","undefined","async","this","isDismissedPrompt","URLSearchParams","window","location","search","get","doesEntitlementMatch","content","fetchContent","getData","options","id","anchorId","isOpen","isAnchorExpanded","catch","lanaLog","message","tags","errorType","anchor","concat","offset","offsetWidth","offsetLeft","template","decorate","addEventListeners","prepend","elements","closeIcon","focus","cleanupFn","initRedirect","config","getConfig","entitlements","extraEnts","split","forEach","ent","push","includes","res","fetch","ok","status","text","replaceText","getFedsPlaceholderConfig","DOMParser","parseFromString","_metadata$dismissalA","_metadata$dismissalA2","_metadata$_dismissalT","_metadata$dismissalT","_metadata$_pauseOnHov","icon","picture","svg","decorateSVG","icons","company","getIcon","title","subtitle","cancel","Promise","all","keys","map","element","key","innerText","label","replaceKey","getUserProfile","then","data","every","field","profile","metadata","childNodes","reduce","acc","row","_row$children","children","val","parseInt","_this$options$product","animationPauseOnHover","toFragment","_templateObject2","_taggedTemplateLiteral","cta","_templateObject3","_templateObject4","avatar","display_name","email","_templateObject5","toLowerCase","_this$anchor","addEventListener","close","dismissalActions","handleKeyDown","event","timeoutId","startTime","withPause","remainingTime","startTimeout","performance","now","saveDismissal","redirectTo","stopTimeout","clearTimeout","appPromptElem","removeEventListener","getDismissedPrompts","dismissedPrompts","Set","add","cookie","JSON","stringify","_this$anchor2","_this$anchor3","remove","setDismissedPrompt","iterationCount","classList","style","setProperty","rings","ring","_templateObject","insertAdjacentElement","cleanup","timeoutID","once","playFocusAnimation","time","setAttribute","removeAttribute","showTooltip","pop","init","initializationQueued","url","assign","_document$cookie$spli","find","item","startsWith","parse","appPrompt"],"sourceRoot":""}