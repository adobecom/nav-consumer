{"version":3,"file":"static/js/8778.ba22cb01.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/blocks/merch/merch.js"],"sourcesContent":["import {\n  createTag, getConfig, loadArea, loadScript, loadStyle, localizeLink, SLD, getMetadata,\n  shouldAllowKrTrial,\n} from '../../utils/utils.js';\nimport { replaceKey } from '../../features/placeholders.js';\n\n// MAS Component Names\nexport const MAS_COMMERCE_SERVICE = 'commerce';\nexport const MAS_MERCH_CARD = 'merch-card';\nexport const MAS_MERCH_CARD_COLLECTION = 'merch-card-collection';\nexport const MAS_MERCH_MNEMONIC_LIST = 'merch-mnemonic-list';\nexport const MAS_MERCH_OFFER_SELECT = 'merch-offer-select';\nexport const MAS_MERCH_QUANTITY_SELECT = 'merch-quantity-select';\nexport const MAS_MERCH_SECURE_TRANSACTION = 'merch-secure-transaction';\nexport const MAS_MERCH_SIDENAV = 'merch-sidenav';\nexport const MAS_MERCH_WHATS_INCLUDED = 'merch-whats-included';\n\nexport const CHECKOUT_LINK_CONFIG_PATH = '/commerce/checkout-link.json'; // relative to libs.\nexport const CHECKOUT_LINK_SANDBOX_CONFIG_PATH = '/commerce/checkout-link-sandbox.json'; // relative to libs.\n\nexport const PRICE_TEMPLATE_DISCOUNT = 'discount';\nexport const PRICE_TEMPLATE_OPTICAL = 'optical';\nexport const PRICE_TEMPLATE_REGULAR = 'price';\nexport const PRICE_TEMPLATE_STRIKETHROUGH = 'strikethrough';\nexport const PRICE_TEMPLATE_ANNUAL = 'annual';\nexport const PRICE_TEMPLATE_LEGAL = 'legal';\n\nconst PRICE_TEMPLATE_MAPPING = new Map([\n  ['priceDiscount', PRICE_TEMPLATE_DISCOUNT],\n  [PRICE_TEMPLATE_DISCOUNT, PRICE_TEMPLATE_DISCOUNT],\n  ['priceOptical', PRICE_TEMPLATE_OPTICAL],\n  [PRICE_TEMPLATE_OPTICAL, PRICE_TEMPLATE_OPTICAL],\n  ['priceStrikethrough', PRICE_TEMPLATE_STRIKETHROUGH],\n  [PRICE_TEMPLATE_STRIKETHROUGH, PRICE_TEMPLATE_STRIKETHROUGH],\n  ['priceAnnual', PRICE_TEMPLATE_ANNUAL],\n  [PRICE_TEMPLATE_ANNUAL, PRICE_TEMPLATE_ANNUAL],\n  [PRICE_TEMPLATE_LEGAL, PRICE_TEMPLATE_LEGAL],\n]);\n\nexport const PLACEHOLDER_KEY_DOWNLOAD = 'download';\n\nexport const CC_SINGLE_APPS = [\n  ['3D_TEXTURING'],\n  ['3DI'],\n  ['ACROBAT', 'ACROBAT_STOCK_BUNDLE'],\n  ['AFTEREFFECTS', 'AFTER_EFFECTS_STOCK_BUNDLE'],\n  ['AUDITION', 'AUDITION_STOCK_BUNDLE'],\n  ['CC_EXPRESS'],\n  ['FLASH', 'FLASH_STOCK_BUNDLE'],\n  ['DREAMWEAVER', 'DREAMWEAVER_STOCK_BUNDLE'],\n  ['EDGE_ANIMATE'],\n  ['ILLUSTRATOR', 'ILLUSTRATOR_STOCK_BUNDLE'],\n  ['INCOPY', 'INCOPY_STOCK_BUNDLE'],\n  ['INDESIGN', 'INDESIGN_STOCK_BUNDLE'],\n  ['PHOTOGRAPHY', 'PHOTOGRAPHY_STOCK_BUNDLE'],\n  ['PHOTOSHOP_LIGHTROOM'],\n  ['PHOTOSHOP', 'PHOTOSHOP_STOCK_BUNDLE'],\n  ['PREMIERE', 'PREMIERE_STOCK_BUNDLE'],\n  ['RUSH'],\n  ['XD'], ['FIREFLY'],\n  ['CC_PRO_APPS'], ['NIMBUS_LIGHTROOM'], ['NIMBUS_LIGHTROOM_PHOTOSHOP'],\n];\n\nconst LanguageMap = {\n  en: 'US',\n  'en-gb': 'GB',\n  'es-mx': 'MX',\n  'fr-ca': 'CA',\n  da: 'DK',\n  et: 'EE',\n  ar: 'DZ',\n  el: 'GR',\n  iw: 'IL',\n  he: 'IL',\n  id: 'ID',\n  ms: 'MY',\n  nb: 'NO',\n  sl: 'SI',\n  sv: 'SE',\n  cs: 'CZ',\n  uk: 'UA',\n  hi: 'IN',\n  'zh-hans': 'CN',\n  'zh-hant': 'TW',\n  ja: 'JP',\n  ko: 'KR',\n  fil: 'PH',\n  th: 'TH',\n  vi: 'VN',\n};\n\nconst GeoMap = {\n  ar: 'AR_es',\n  be_en: 'BE_en',\n  be_fr: 'BE_fr',\n  be_nl: 'BE_nl',\n  br: 'BR_pt',\n  ca: 'CA_en',\n  ch_de: 'CH_de',\n  ch_fr: 'CH_fr',\n  ch_it: 'CH_it',\n  cl: 'CL_es',\n  co: 'CO_es',\n  la: 'DO_es',\n  mx: 'MX_es',\n  pe: 'PE_es',\n  africa: 'MU_en',\n  dk: 'DK_da',\n  de: 'DE_de',\n  ee: 'EE_et',\n  eg_ar: 'EG_ar',\n  eg_en: 'EG_en',\n  es: 'ES_es',\n  fr: 'FR_fr',\n  gr_el: 'GR_el',\n  gr_en: 'GR_en',\n  ie: 'IE_en',\n  il_he: 'IL_iw',\n  it: 'IT_it',\n  lv: 'LV_lv',\n  lt: 'LT_lt',\n  lu_de: 'LU_de',\n  lu_en: 'LU_en',\n  lu_fr: 'LU_fr',\n  my_en: 'MY_en',\n  my_ms: 'MY_ms',\n  hu: 'HU_hu',\n  mt: 'MT_en',\n  mena_en: 'DZ_en',\n  mena_ar: 'DZ_ar',\n  nl: 'NL_nl',\n  no: 'NO_nb',\n  pl: 'PL_pl',\n  pt: 'PT_pt',\n  ro: 'RO_ro',\n  si: 'SI_sl',\n  sk: 'SK_sk',\n  fi: 'FI_fi',\n  se: 'SE_sv',\n  tr: 'TR_tr',\n  uk: 'GB_en',\n  at: 'AT_de',\n  cz: 'CZ_cs',\n  bg: 'BG_bg',\n  ru: 'RU_ru',\n  ua: 'UA_uk',\n  au: 'AU_en',\n  in_en: 'IN_en',\n  in_hi: 'IN_hi',\n  id_en: 'ID_en',\n  id_id: 'ID_id',\n  nz: 'NZ_en',\n  sa_ar: 'SA_ar',\n  sa_en: 'SA_en',\n  sg: 'SG_en',\n  cn: 'CN_zh-Hans',\n  tw: 'TW_zh-Hant',\n  hk_zh: 'HK_zh-hant',\n  jp: 'JP_ja',\n  kr: 'KR_ko',\n  za: 'ZA_en',\n  ng: 'NG_en',\n  cr: 'CR_es',\n  ec: 'EC_es',\n  pr: 'US_es', // not a typo, should be US\n  gt: 'GT_es',\n  cis_en: 'TM_en',\n  cis_ru: 'TM_ru',\n  sea: 'SG_en',\n  th_en: 'TH_en',\n  th_th: 'TH_th',\n};\n\n/**\n * Used when 3in1 modals are configured with ms=e or cs=t extra parameter, but 3in1 is disabled.\n * Dexter modals should deeplink to plan=edu or plan=team tabs.\n * @type {Record<string, string>}\n */\nconst TAB_DEEPLINK_MAPPING = {\n  ms: 'plan',\n  cs: 'plan',\n  e: 'edu',\n  t: 'team',\n};\n\nconst LANG_STORE_PREFIX = 'langstore/';\n\nfunction getDefaultLangstoreCountry(language) {\n  let country = LanguageMap[language];\n  if (!country && GeoMap[language]) {\n    country = language; // es, fr, pt, de\n  }\n  if (!country && language.includes('-')) {\n    [country] = language.split('-'); // variations like es-419, pt-PT\n  }\n\n  return country || 'US';\n}\n\nexport function getMiloLocaleSettings(miloLocale) {\n  const localePrefix = miloLocale?.prefix || 'US_en';\n  const geo = localePrefix.replace('/', '') ?? '';\n  let [country = 'US', language = 'en'] = (GeoMap[geo] ?? geo).split('_', 2);\n\n  if (\n    geo.startsWith(LANG_STORE_PREFIX)\n    || window.location.pathname.startsWith(`/${LANG_STORE_PREFIX}`)\n  ) {\n    const localeLang = geo.replace(LANG_STORE_PREFIX, '').toLowerCase();\n    country = getDefaultLangstoreCountry(localeLang);\n    language = localeLang;\n  }\n\n  country = country.toUpperCase();\n  language = language.toLowerCase();\n\n  return {\n    language,\n    country,\n    locale: `${language}_${country}`,\n  };\n}\n\nexport async function getGeoLocaleSettings(miloLocale) {\n  const settings = getMiloLocaleSettings(miloLocale);\n  let country = (new URLSearchParams(window.location.search)).get('akamaiLocale')?.toLowerCase()\n    || sessionStorage.getItem('akamai');\n  if (!country) {\n    try {\n      const { getAkamaiCode } = await import('../../features/georoutingv2/georoutingv2.js');\n      country = await getAkamaiCode(true);\n    } catch (error) {\n      window.lana?.log(`Error getting Akamai code (will go with default country): ${error}`);\n    }\n  }\n  if (country) {\n    country = country.toUpperCase();\n    settings.country = country;\n  }\n  return settings;\n}\n\nexport async function getLocaleSettings(miloLocale) {\n  const geoDetection = getMetadata('mas-geo-detection');\n  if (!geoDetection || !['on', 'true'].includes(geoDetection)) {\n    return Promise.resolve(getMiloLocaleSettings(miloLocale));\n  }\n  return getGeoLocaleSettings(miloLocale);\n}\n\n/* Optional checkout link params that are appended to checkout urls as is */\nexport const CHECKOUT_ALLOWED_KEYS = [\n  'af',\n  'ai',\n  'apc',\n  'appctxid',\n  'cli',\n  'co',\n  'csm',\n  'ctx',\n  'ctxRtUrl',\n  'DCWATC',\n  'dp', // Enable digital payments for iframe context\n  'fr', // represents the commerce app redirecting to UC\n  'gsp',\n  'ijt',\n  'lang',\n  'lo',\n  'mal',\n  'ms',\n  'cs',\n  'mv',\n  'mv2',\n  'nglwfdata',\n  'ot',\n  'otac',\n  'pa',\n  'pcid', // Unified Paywall configuration ID for analytics\n  'promoid',\n  'q',\n  'rf',\n  'sc',\n  'scl',\n  'sdid',\n  'sid', // x-adobe-clientsession\n  'spint',\n  'svar',\n  'th',\n  'thm',\n  'trackingid',\n  'usid',\n  'workflowid',\n  'context.guid',\n  'so.ca',\n  'so.su',\n  'so.tr',\n  'so.va',\n  // below keys are mapped to shorted versions.\n  'quantity',\n  'authCode',\n  'checkoutPromoCode',\n  'rurl',\n  'curl',\n  'ctxrturl',\n  'country',\n  'language',\n  'clientId',\n  'context',\n  'productArrangementCode',\n  'offerType',\n  'marketSegment',\n];\n\nexport const CC_SINGLE_APPS_ALL = CC_SINGLE_APPS.flatMap((item) => item);\n\nexport const CC_ALL_APPS = [\n  'CC_ALL_APPS',\n  'CC_ALL_APPS_STOCK_BUNDLE',\n  'CC_PRO',\n];\n\nconst NAME_LOCALE = 'LOCALE';\nconst NAME_PRODUCT_FAMILY = 'PRODUCT_FAMILY';\nconst FREE_TRIAL_PATH = 'FREE_TRIAL_PATH';\nconst BUY_NOW_PATH = 'BUY_NOW_PATH';\nconst FREE_TRIAL_HASH = 'FREE_TRIAL_HASH';\nconst BUY_NOW_HASH = 'BUY_NOW_HASH';\nconst OFFER_TYPE_TRIAL = 'TRIAL';\nconst LOADING_ENTITLEMENTS = 'loading-entitlements';\n\nlet log;\nlet upgradeOffer = null;\n\n/**\n * Given a url, calculates the hostname of MAS platform.\n * Supports, www prod, stage, local and feature branches.\n * if params are missing, it will return the latest calculated or default value.\n * @param {string} hostname optional\n * @param {string} maslibs optional\n * @returns base url for mas platform\n */\nexport function getMasBase(hostname, maslibs) {\n  let { baseUrl } = getMasBase;\n  if (!baseUrl) {\n    if (maslibs === 'stage') {\n      baseUrl = 'https://www.stage.adobe.com/mas';\n    } else if (maslibs === 'local') {\n      baseUrl = 'http://localhost:9001';\n    } else if (maslibs) {\n      // Extract SLD (Second Level Domain) from hostname\n      const hostnameParts = hostname.split('.');\n      let sld = 'hlx'; // default\n      if (hostnameParts.length >= 2) {\n        // Get the second-to-last part (before .page or .live)\n        const extensionIndex = hostname.endsWith('.page') ? hostnameParts.length - 1 : hostnameParts.length;\n        if (extensionIndex >= 2) {\n          sld = hostnameParts[extensionIndex - 2];\n        }\n      }\n      const extension = /.page$/.test(hostname) ? 'page' : 'live';\n      baseUrl = `https://${maslibs}.${sld}.${extension}`;\n    } else {\n      baseUrl = 'https://www.adobe.com/mas';\n    }\n    getMasBase.baseUrl = baseUrl;\n  }\n  return baseUrl;\n}\n\n/**\n * Gets the base URL for loading web components based on maslibs parameter\n * @returns {string|null} Base URL for web components or null if maslibs not present\n */\nexport function getMasLibs() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const masLibs = urlParams.get('maslibs');\n\n  if (!masLibs || masLibs.trim() === '') return null;\n\n  const sanitizedMasLibs = masLibs.trim().toLowerCase();\n\n  if (sanitizedMasLibs === 'local') {\n    return 'http://localhost:3030/web-components/dist';\n  }\n  if (sanitizedMasLibs === 'main') {\n    return 'https://mas.adobe.com/web-components/dist';\n  }\n\n  // Detect current domain extension (.page or .live)\n  const { hostname } = window.location;\n  const extension = hostname.endsWith('.page') ? 'page' : 'live';\n\n  if (sanitizedMasLibs.includes('--mas--')) {\n    return `https://${sanitizedMasLibs}.aem.${extension}/web-components/dist`;\n  }\n  if (sanitizedMasLibs.includes('--')) {\n    return `https://${sanitizedMasLibs}.aem.${extension}/web-components/dist`;\n  }\n  return `https://${sanitizedMasLibs}--mas--adobecom.aem.${extension}/web-components/dist`;\n}\n\n/**\n * Gets the URL for loading fragment-client.js based on maslibs parameter\n * @returns {string|null} URL for fragment-client.js or null if maslibs not present\n */\nfunction getFragmentClientUrl() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const masLibs = urlParams.get('maslibs');\n\n  if (!masLibs || masLibs.trim() === '') return null;\n\n  const sanitizedMasLibs = masLibs.trim().toLowerCase();\n\n  if (sanitizedMasLibs === 'local') {\n    return 'http://localhost:3030/studio/libs/fragment-client.js';\n  }\n  if (sanitizedMasLibs === 'main') {\n    return 'https://mas.adobe.com/studio/libs/fragment-client.js';\n  }\n\n  // Detect current domain extension (.page or .live)\n  const { hostname } = window.location;\n  const extension = hostname.endsWith('.page') ? 'page' : 'live';\n\n  if (sanitizedMasLibs.includes('--mas--')) {\n    return `https://${sanitizedMasLibs}.aem.${extension}/studio/libs/fragment-client.js`;\n  }\n  if (sanitizedMasLibs.includes('--')) {\n    return `https://${sanitizedMasLibs}.aem.${extension}/studio/libs/fragment-client.js`;\n  }\n  return `https://${sanitizedMasLibs}--mas--adobecom.aem.${extension}/studio/libs/fragment-client.js`;\n}\n\n/**\n * Cache for failed external loads to avoid repeated attempts\n */\nconst failedExternalLoads = new Set();\n\nconst loadingPromises = new Map();\n\n/**\n * Loads a MAS component either from external URL (if masLibs present) or local deps\n * @param {string} componentName - Name of the component to load (e.g., 'commerce', 'merch-card')\n * @returns {Promise} Promise that resolves when component is loaded\n */\nexport async function loadMasComponent(componentName) {\n  if (loadingPromises.has(componentName)) {\n    return loadingPromises.get(componentName);\n  }\n\n  if (customElements.get(componentName)) {\n    return Promise.resolve();\n  }\n\n  const loadPromise = (async () => {\n    const masLibsBase = getMasLibs();\n\n    if (masLibsBase) {\n      const externalUrl = `${masLibsBase}/${componentName}.js`;\n\n      if (failedExternalLoads.has(externalUrl)) {\n        throw new Error(`Failed to load component from ${externalUrl}`);\n      }\n\n      try {\n        return await import(externalUrl);\n      } catch (error) {\n        failedExternalLoads.add(externalUrl);\n        throw error;\n      }\n    } else {\n      return import(`../../deps/mas/${componentName}.js`);\n    }\n  })();\n\n  loadingPromises.set(componentName, loadPromise);\n  loadPromise.finally(() => loadingPromises.delete(componentName));\n\n  return loadPromise;\n}\n\nfunction getCommercePreloadUrl() {\n  const { env } = getConfig();\n  if (env.name === 'prod') {\n    return 'https://commerce.adobe.com/store/iframe/preload.js';\n  }\n  return 'https://commerce-stg.adobe.com/store/iframe/preload.js';\n}\n\nexport async function polyfills() {\n  if (polyfills.promise) return polyfills.promise;\n  let isSupported = false;\n  document.createElement('div', {\n    // eslint-disable-next-line getter-return\n    get is() {\n      isSupported = true;\n    },\n  });\n\n  if (isSupported) {\n    polyfills.promise = Promise.resolve();\n  } else {\n    const { base } = getConfig();\n    polyfills.promise = await loadScript(`${base}/deps/custom-elements.js`);\n  }\n  return polyfills.promise;\n}\n\nexport async function fetchEntitlements() {\n  fetchEntitlements.promise = fetchEntitlements.promise\n    ?? import('../global-navigation/utilities/getUserEntitlements.js').then(\n      ({ default: getUserEntitlements }) => getUserEntitlements({\n        params: [{ name: 'include', value: 'OFFER.PRODUCT_ARRANGEMENT_V2' }],\n        format: 'raw',\n      }),\n    );\n  return fetchEntitlements.promise;\n}\n\nexport async function fetchCheckoutLinkConfigs(base = '', env = '') {\n  const params = new URLSearchParams(window.location.search);\n  const path = params.get('checkout-link-sandbox') === 'on' && env !== 'prod'\n    ? `${base}${CHECKOUT_LINK_SANDBOX_CONFIG_PATH}`\n    : `${base}${CHECKOUT_LINK_CONFIG_PATH}`;\n  fetchCheckoutLinkConfigs.promise = fetchCheckoutLinkConfigs.promise\n    ?? fetch(path)\n      .catch((e) => {\n        log?.error('Failed to fetch checkout link configs', e);\n      })\n      .then((mappings) => {\n        if (!mappings?.ok) return { data: [] };\n        return mappings.json();\n      });\n  return fetchCheckoutLinkConfigs.promise;\n}\n\nfunction getSvar(extraOptions) {\n  if (!extraOptions) return undefined;\n\n  const extraOptionsObj = JSON.parse(extraOptions);\n  return extraOptionsObj.svar;\n}\n\nfunction addToConfigsForMatchingProduct(config, productCode, svar, targetConfigs) {\n  const match = config[NAME_PRODUCT_FAMILY] === productCode || (svar && config[NAME_PRODUCT_FAMILY] === `${productCode}+${svar}`);\n  const alreadyThere = targetConfigs.some((item) => item[NAME_PRODUCT_FAMILY] === `${productCode}+${svar}`);\n  if (match && !alreadyThere) {\n    targetConfigs.push(config);\n  }\n}\n\nfunction addToConfigs(config, svar, configs, paCode, productCode, productFamily) {\n  addToConfigsForMatchingProduct(config, paCode, svar, configs.paCodeConfigs);\n  addToConfigsForMatchingProduct(config, productCode, svar, configs.productCodeConfigs);\n  addToConfigsForMatchingProduct(config, productFamily, svar, configs.productFamilyConfigs);\n}\n\nexport async function getCheckoutLinkConfig(\n  productFamily,\n  productCode,\n  paCode,\n  options,\n) {\n  const extraOptions = options?.extraOptions;\n  const svar = getSvar(extraOptions);\n  if (svar) {\n    const extraOptionsObj = JSON.parse(extraOptions);\n    delete extraOptionsObj.svar;\n    options.extraOptions = JSON.stringify(extraOptionsObj);\n  }\n  let { base } = getConfig();\n  const { env } = getConfig();\n  if (/\\.page$/.test(document.location.origin)) {\n    /* c8 ignore next 2 */\n    base = base.replace('.live', '.page');\n  }\n  const checkoutLinkConfigs = await fetchCheckoutLinkConfigs(base, env);\n  if (!checkoutLinkConfigs.data.length) return undefined;\n  const { locale: { region } } = getConfig();\n\n  // place items with extra options first\n  checkoutLinkConfigs.data.sort((itema, itemb) => {\n    const apf = itema[NAME_PRODUCT_FAMILY];\n    const bpf = itemb[NAME_PRODUCT_FAMILY];\n    return apf.includes('+') && !bpf.includes('+') ? -1 : 1;\n  });\n\n  const { paCodeConfigs, productCodeConfigs, productFamilyConfigs } = checkoutLinkConfigs\n    .data.reduce(\n      (acc, config) => {\n        addToConfigs(config, svar, acc, paCode, productCode, productFamily);\n        return acc;\n      },\n      { paCodeConfigs: [], productCodeConfigs: [], productFamilyConfigs: [] },\n    );\n\n  // helps to fallback to product family config\n  // if no locale specific config is found below.\n  const productCheckoutLinkConfigs = [\n    ...paCodeConfigs,\n    ...productCodeConfigs,\n    ...productFamilyConfigs,\n  ];\n\n  if (!productCheckoutLinkConfigs.length) return undefined;\n  const checkoutLinkConfig = productCheckoutLinkConfigs.find(\n    ({ [NAME_LOCALE]: locale }) => locale === '',\n  );\n  const checkoutLinkConfigOverride = productCheckoutLinkConfigs.find(\n    ({ [NAME_LOCALE]: locale }) => locale === region,\n  ) ?? {};\n  const overrides = Object.fromEntries(\n    Object.entries(checkoutLinkConfigOverride).filter(([, value]) => value),\n  );\n  const finalConfig = { ...checkoutLinkConfig, ...overrides };\n  Object.entries(finalConfig).forEach(([key, value]) => {\n    if (value === 'X' || value === 'âŒ') {\n      finalConfig[key] = '';\n    }\n  });\n  return finalConfig;\n}\n\n/**\n * If user has entitlement :\n * for Acrobat Studio, the download CTA should be displayed for both Acrobat Studio and Pro,\n * for all other Acrobat cards the download CTA will be displayed only for cards with\n * matching product code.\n */\nconst DOWNLOAD_FAMILY_CODE = { ACROBAT: { ARCH: ['ARCH', 'APCC'] } };\n\nfunction showDownloadForCode(familySubscr, codeSubscr, codeCta) {\n  const family = DOWNLOAD_FAMILY_CODE[familySubscr];\n  if (!family) return true;\n\n  return family[codeSubscr]?.includes(codeCta) || codeSubscr === codeCta;\n}\n\nexport async function getDownloadAction(\n  options,\n  imsSignedInPromise,\n  [\n    {\n      offerType,\n      productArrangementCode,\n      productArrangement: { productCode, productFamily: offerFamily } = {},\n    },\n  ],\n) {\n  if (options.entitlement !== true) return undefined;\n  const loggedIn = await imsSignedInPromise;\n  if (!loggedIn) return undefined;\n  const entitlements = await fetchEntitlements();\n  if (!entitlements?.length) return undefined;\n  const checkoutLinkConfig = await getCheckoutLinkConfig(\n    offerFamily,\n    productCode,\n    productArrangementCode,\n    options,\n  );\n  if (!checkoutLinkConfig?.DOWNLOAD_URL) return undefined;\n  const offer = entitlements.find(\n    // eslint-disable-next-line max-len\n    ({ offer: { product_code: subscrCode, product_arrangement_v2: { family: subscriptionFamily } } }) => {\n      if (CC_ALL_APPS.includes(subscriptionFamily)) return true; // has all apps\n      if (CC_ALL_APPS.includes(offerFamily)) return false; // hasn't all apps and cta is all apps\n      const singleAppFamily = CC_SINGLE_APPS.find(\n        (\n          singleAppFamilies, // has single and and cta is single app\n        ) => singleAppFamilies.includes(offerFamily),\n      );\n      return singleAppFamily?.includes(subscriptionFamily)\n      && showDownloadForCode(subscriptionFamily, subscrCode, productCode);\n    },\n  );\n  if (!offer) return undefined;\n  const config = getConfig();\n  const text = await replaceKey(\n    checkoutLinkConfig.DOWNLOAD_TEXT || PLACEHOLDER_KEY_DOWNLOAD,\n    config,\n  );\n  const url = localizeLink(checkoutLinkConfig.DOWNLOAD_URL);\n  const type = offerType?.toLowerCase() ?? '';\n  return { text, className: `download ${type}`, url };\n}\n\nexport async function getUpgradeAction(\n  options,\n  imsSignedInPromise,\n  [{ productArrangement: { productFamily: offerFamily } = {} }],\n  el,\n) {\n  if (!options.upgrade) return undefined;\n  const loggedIn = await imsSignedInPromise;\n  if (!loggedIn) return undefined;\n  const entitlements = await fetchEntitlements();\n  if (upgradeOffer === null) {\n    upgradeOffer = undefined;\n    // will enter only once\n    upgradeOffer = await document.querySelector(\n      '.merch-offers.upgrade [data-wcs-osi]',\n    );\n  }\n  await upgradeOffer?.onceSettled();\n  if (upgradeOffer && entitlements?.length && offerFamily) {\n    const { default: handleUpgradeOffer } = await import('./upgrade.js');\n    const upgradeAction = await handleUpgradeOffer(\n      offerFamily,\n      upgradeOffer,\n      entitlements,\n      CC_SINGLE_APPS_ALL,\n      CC_ALL_APPS,\n    );\n    el?.closest('merch-card')?.querySelector('merch-addon')?.remove();\n    return upgradeAction;\n  }\n  return undefined;\n}\n\nasync function openFragmentModal(path, getModal) {\n  const root = createTag('div');\n  root.style.visibility = 'hidden';\n  createTag('a', { href: `${path}` }, '', { parent: root });\n  const modal = await getModal(null, {\n    id: 'checkout-link-modal',\n    content: root,\n    closeEvent: 'closeModal',\n    class: 'commerce-frame',\n  });\n  await loadArea(modal);\n  root.style.visibility = '';\n  return modal;\n}\n\nfunction appendTabName(url, el) {\n  if (el?.is3in1Modal) {\n    if (el.marketSegment === 'EDU') {\n      url.searchParams.set('plan', 'edu');\n    } else if (el.customerSegment === 'TEAM') {\n      url.searchParams.set('plan', 'team');\n    }\n  }\n  const metaPreselectPlan = document.querySelector(\n    'meta[name=\"preselect-plan\"]',\n  );\n  if (!metaPreselectPlan?.content) return url;\n  url.searchParams.set('plan', metaPreselectPlan.content);\n  return url;\n}\n\nfunction appendExtraOptions(url, extraOptions) {\n  if (!extraOptions) return url;\n  const extraOptionsObj = JSON.parse(extraOptions);\n  Object.keys(extraOptionsObj).forEach((key) => {\n    if (CHECKOUT_ALLOWED_KEYS.includes(key)) {\n      const value = extraOptionsObj[key];\n      url.searchParams.set(\n        TAB_DEEPLINK_MAPPING[key] ?? key,\n        TAB_DEEPLINK_MAPPING[value] ?? value,\n      );\n    }\n  });\n  return url;\n}\n\nexport function applyPromo(url) {\n  const { mep } = getConfig();\n  const promoModal = mep?.inBlock?.merch?.fragments?.[url.pathname];\n  try {\n    const promoUrl = new URL(promoModal?.content);\n    return promoUrl;\n  } catch (e) {\n    log?.error('Failed to apply promo to external modal', e);\n  }\n  return url;\n}\n\n// TODO this should migrate to checkout.js buildCheckoutURL\nexport function appendDexterParameters(url, extraOptions, el) {\n  const isRelativePath = url.startsWith('/');\n  let absoluteUrl;\n  try {\n    absoluteUrl = new URL(\n      isRelativePath ? `${window.location.origin}${url}` : url,\n    );\n  } catch (err) {\n    window.lana?.log(`Invalid URL ${url} : ${err}`);\n    return url;\n  }\n  absoluteUrl = applyPromo(absoluteUrl);\n  absoluteUrl = appendExtraOptions(absoluteUrl, extraOptions);\n  absoluteUrl = appendTabName(absoluteUrl, el);\n  return isRelativePath\n    ? absoluteUrl.href.replace(window.location.origin, '')\n    : absoluteUrl.href;\n}\n\nasync function openExternalModal(url, getModal, extraOptions, el) {\n  loadStyle(`${getConfig().base}/blocks/iframe/iframe.css`);\n  const root = createTag('div', { class: 'milo-iframe' });\n  const absoluteUrl = appendDexterParameters(url, extraOptions, el);\n  createTag(\n    'iframe',\n    {\n      src: absoluteUrl,\n      frameborder: '0',\n      marginwidth: '0',\n      marginheight: '0',\n      allowfullscreen: 'true',\n      loading: 'lazy',\n    },\n    '',\n    { parent: root },\n  );\n  return getModal(null, {\n    id: 'checkout-link-modal',\n    content: root,\n    closeEvent: 'closeModal',\n    class: 'commerce-frame',\n  });\n}\n\nconst isInternalModal = (url) => /\\/fragments\\//.test(url);\n\nconst closeModalWithoutEvent = (modalId) => {\n  if (!modalId) return;\n  document.querySelectorAll(`#${modalId}`).forEach((mod) => {\n    if (mod.classList.contains('dialog-modal')) {\n      const modalCurtain = document.querySelector(`#${modalId}~.modal-curtain`);\n      if (modalCurtain) {\n        modalCurtain.remove();\n      }\n      mod.remove();\n    }\n    document.querySelector(`[data-modal-hash=\"#${mod.id}\"]`)?.focus();\n  });\n\n  if (!document.querySelectorAll('.modal-curtain').length) {\n    document.body.classList.remove('disable-scroll');\n  }\n\n  [...document.querySelectorAll('header, main, footer')]\n    .forEach((element) => element.removeAttribute('aria-disabled'));\n};\n\n// Modal state handling: see merch-modal.md\nexport const modalState = { isOpen: false };\n\nexport async function updateModalState({ cta, closedByUser } = {}) {\n  const { hash } = window.location;\n\n  if (hash?.includes('=')) {\n    const modal = document.querySelector('.dialog-modal');\n    if (!modal) return modalState.isOpen;\n    modalState.isOpen = false;\n    closeModalWithoutEvent(modal.id);\n    return modalState.isOpen;\n  }\n\n  const openedDialog = document.querySelector(`.dialog-modal${hash}`) || document.querySelector('.dialog-modal#checkout-link-modal');\n  const isLocaleModal = openedDialog?.id?.includes('locale-modal');\n  const modal = isLocaleModal ? null : openedDialog;\n\n  if (hash && !cta && modalState.isOpen && !modal) {\n    const dialog = document.querySelector('.dialog-modal');\n    if (!dialog) return modalState.isOpen;\n    closeModalWithoutEvent(dialog.id);\n    modalState.isOpen = false;\n    return modalState.isOpen;\n  }\n\n  if (hash && !cta && !modalState.isOpen && !modal) {\n    const ctaToClick = document.querySelector(`[is=checkout-link][data-modal-id=${hash.replace('#', '')}]`);\n    if (ctaToClick && !ctaToClick.dataset.clickDisabled) {\n      ctaToClick.dataset.clickDisabled = 'true';\n      ctaToClick.click();\n      modalState.isOpen = true;\n      setTimeout(() => {\n        delete ctaToClick.dataset.clickDisabled;\n      }, 1000);\n    }\n    return modalState.isOpen;\n  }\n\n  if (hash && hash === `#${cta?.getAttribute('data-modal-id')}` && !modalState.isOpen && !modal) {\n    cta.click();\n    modalState.isOpen = true;\n    return modalState.isOpen;\n  }\n\n  if (closedByUser && document.querySelector('#checkout-link-modal')) {\n    modalState.isOpen = false;\n    return modalState.isOpen;\n  }\n\n  if (closedByUser && modal) {\n    modalState.isOpen = false;\n    return modalState.isOpen;\n  }\n\n  if (!hash && modal) {\n    modalState.isOpen = false;\n    const { closeModal } = await import('../modal/modal.js');\n    closeModal(modal);\n  }\n\n  return modalState.isOpen;\n}\n\nexport async function openModal(e, url, offerType, hash, extraOptions, el) {\n  e.preventDefault();\n  e.stopImmediatePropagation();\n  if (modalState.isOpen) return;\n  modalState.isOpen = true;\n  const { getModal } = await import('../modal/modal.js');\n  await import('../modal/modal.merch.js');\n  const offerTypeClass = offerType === OFFER_TYPE_TRIAL ? 'twp' : 'crm';\n  let modal;\n\n  if (hash) window.location.hash = hash;\n\n  if (el?.isOpen3in1Modal) {\n    const { default: openThreeInOneModal, handle3in1IFrameEvents } = await import('./three-in-one.js');\n    window.addEventListener('message', handle3in1IFrameEvents);\n    if (!document.querySelector('.dialog-modal.three-in-one')) {\n      modal = await openThreeInOneModal(el);\n    }\n    return;\n  }\n  if (isInternalModal(url)) {\n    const fragmentPath = url.split(/(hlx|aem).(page|live)/).pop();\n    modal = await openFragmentModal(fragmentPath, getModal);\n  } else {\n    modal = await openExternalModal(url, getModal, extraOptions, el);\n  }\n  modal.classList.add(offerTypeClass);\n}\n\nexport function setCtaHash(el, checkoutLinkConfig, offerType) {\n  if (!(el && checkoutLinkConfig && offerType)) return undefined;\n  const hash = checkoutLinkConfig[\n    `${offerType === OFFER_TYPE_TRIAL ? FREE_TRIAL_HASH : BUY_NOW_HASH}`\n  ];\n  if (hash) {\n    el.setAttribute('data-modal-id', hash);\n  }\n  return hash;\n}\n\nconst isProdModal = (url) => {\n  try {\n    return new URL(url).hostname.endsWith('.adobe.com');\n  } catch (e) {\n    return false;\n  }\n};\n\nexport async function getModalAction(offers, options, el) {\n  if (!options.modal) return undefined;\n\n  const preload = new URLSearchParams(window.location.search).get('commerce.preload') !== 'off';\n  if (el?.isOpen3in1Modal && preload) {\n    const baseUrl = getCommercePreloadUrl();\n    // The script can preload more, based on clientId, but for the ones in use\n    // ('mini-plans', 'creative') there is no difference, so we can just use either one.\n    const client = 'creative';\n    window.milo.deferredPromise.then(() => {\n      setTimeout(() => {\n        loadScript(`${baseUrl}?cli=${client}`, 'text/javascript', { mode: 'defer', id: 'ucv3-preload-script' });\n      }, 1000);\n    });\n  }\n\n  const [\n    {\n      offerType,\n      productArrangementCode,\n      productArrangement: { productCode, productFamily: offerFamily } = {},\n    },\n  ] = offers ?? [{}];\n  const checkoutLinkConfig = await getCheckoutLinkConfig(\n    offerFamily,\n    productCode,\n    productArrangementCode,\n    options,\n  );\n  if (!checkoutLinkConfig) return undefined;\n  const columnName = offerType === OFFER_TYPE_TRIAL ? FREE_TRIAL_PATH : BUY_NOW_PATH;\n  const hash = setCtaHash(el, checkoutLinkConfig, offerType);\n  let url = checkoutLinkConfig[columnName];\n  if (!url && !el?.isOpen3in1Modal) return undefined;\n  url = isInternalModal(url) || isProdModal(url)\n    ? localizeLink(checkoutLinkConfig[columnName])\n    : checkoutLinkConfig[columnName];\n  return {\n    url,\n    handler: (e) => openModal(e, url, offerType, hash, options.extraOptions, el),\n  };\n}\n\nexport async function getCheckoutAction(\n  offers,\n  options,\n  imsSignedInPromise,\n  el,\n) {\n  try {\n    await imsSignedInPromise;\n    const [downloadAction, upgradeAction, modalAction] = await Promise.all([\n      getDownloadAction(options, imsSignedInPromise, offers),\n      getUpgradeAction(options, imsSignedInPromise, offers, el),\n      getModalAction(offers, options, el),\n    ]);\n    return downloadAction || upgradeAction || modalAction;\n  } catch (e) {\n    log?.error('Failed to resolve checkout action', e);\n    return [];\n  }\n}\n\nexport function setPreview(attributes) {\n  const { host } = window.location;\n  if (host.includes(`${SLD}.page`) || host === 'www.stage.adobe.com') {\n    attributes.preview = 'on';\n  }\n}\n/**\n * Activates commerce service and returns a promise resolving to its ready-to-use instance.\n */\nexport async function initService(force = false, attributes = {}) {\n  if (force) {\n    initService.promise = undefined;\n    document.head.querySelector('mas-commerce-service')?.remove();\n    fetchEntitlements.promise = undefined;\n    fetchCheckoutLinkConfigs.promise = undefined;\n  }\n  const { commerce, env: miloEnv, locale: miloLocale } = getConfig();\n\n  const extraAttrs = [\n    'checkout-workflow-step',\n    'force-tax-exclusive',\n    'checkout-client-id',\n    'allow-override',\n  ];\n\n  extraAttrs.forEach((attr) => {\n    const camelCaseAttr = attr.replace(/-([a-z])/g, (g) => g[1].toUpperCase());\n    // eslint-disable-next-line no-prototype-builtins\n    if (commerce?.hasOwnProperty(camelCaseAttr)) {\n      const value = commerce[camelCaseAttr];\n      delete commerce[camelCaseAttr];\n      commerce[attr] = value;\n    }\n  });\n  initService.promise = initService.promise\n    ?? polyfills().then(async () => {\n      await loadMasComponent(MAS_COMMERCE_SERVICE);\n\n      // Load fragment-client.js when maslibs is present\n      const fragmentClientUrl = getFragmentClientUrl();\n      if (fragmentClientUrl) {\n        const { loadScript: loadScriptUtil } = await import('../../utils/utils.js');\n        try {\n          await loadScriptUtil(fragmentClientUrl, 'module');\n        } catch (e) {\n          log?.error('Failed to load fragment-client.js:', e);\n        }\n      }\n\n      const { language, locale, country } = await getLocaleSettings(miloLocale);\n      let service = document.head.querySelector('mas-commerce-service');\n      if (!service) {\n        setPreview(attributes);\n        service = createTag('mas-commerce-service', {\n          locale,\n          language,\n          country,\n          ...attributes,\n          ...commerce,\n        });\n        if (miloEnv?.name !== 'prod') {\n          service.setAttribute('allow-override', '');\n        }\n        // Register checkout action if method exists (for backward compatibility)\n        if (typeof service.registerCheckoutAction === 'function') {\n          service.registerCheckoutAction(getCheckoutAction);\n        }\n        document.head.append(service);\n\n        // Polyfill for older commerce service versions that don't have prefillWcsCache\n        if (typeof service.prefillWcsCache !== 'function') {\n          service.prefillWcsCache = () => {\n            log?.warn(\n              'prefillWcsCache not available in this version of commerce service',\n            );\n          };\n        }\n\n        service.imsSignedInPromise?.then((isSignedIn) => {\n          if (isSignedIn) fetchEntitlements();\n        });\n      }\n      if (country === 'AU') {\n        loadStyle(`${getConfig().base}/blocks/merch/au-merch.css`);\n      }\n      return service;\n    });\n  return initService.promise;\n}\n\nexport async function getCommerceContext(el, params) {\n  const wcsOsi = params.get('osi');\n  if (!wcsOsi) return null;\n  const perpetual = params.get('perp') === 'true' || undefined;\n  const promotionCode = (params.get('promo')\n      ?? params.get('promotionCode')\n      ?? el.closest('[data-promotion-code]')?.dataset.promotionCode)\n    || undefined;\n  return { promotionCode, perpetual, wcsOsi };\n}\n\n// TODO: remove this function once fallbackStep for DC is fully authored\nfunction getHardcodedFallbackStep(wcsOsi, checkoutClientId) {\n  if (checkoutClientId !== 'doc_cloud') return undefined;\n  const osiToStepMap = {\n    'vQmS1H18A6_kPd0tYBgKnp-TQIF0GbT6p8SH8rWcLMs': 'commitment',\n    'ZZQMV2cU-SWQoDxuznonUFMRdxSyTr4J3fB77YBNakY': 'commitment',\n    'vV01ci-KLH6hYdRfUKMBFx009hdpxZcIRG1-BY_PutE': 'email',\n    'nTbB50pS4lLGv_x1l_UKggd-lxxo2zAJ7WYDa2mW19s': 'email',\n    'QgYu51CVY2wKyFEqMuvec4N1tc1OaCypeKJjT5n2-Fc': 'commitment',\n    'AW-jV275GNYtPao6Q7XWENqyv_Stkc1BbzF7ak2u1dk': 'email',\n    'nIy-IPGnALw3KNncaqMjOJsMUrqElWi8sdGnBFBAgTw': 'commitment',\n    WRe4gUHuyqJgCCr3ZywwU9CDP0ezBaCKoMk4xryVQhs: 'commitment',\n    Hnk2P6L5wYhnpZLFYTW5upuk2Y3AJXlso8VGWQ0l2TI: 'commitment',\n    '-lYm-YaTSZoUgv1gzqCgybgFotLqRsLwf8CgYdvdnsQ': 'commitment',\n    WJLr3TF4T4qyJIGZTsDf9KPbTfxA7qAgStpaF2IgYao: 'commitment',\n    '8Lr09qx_PHqAJUwvUNiof4FFFEKjsR1TTbvBUncV2b0': 'email',\n    lI5NvdLBWJUJEHkP9CAx787kt0uCc3WnoCFVVIjECiA: 'email',\n    'OQ1oCm1tZG35Gj7LCrkGeOOdUMfVlC7xx-7ml-CTWIE': 'commitment',\n  };\n  return osiToStepMap[wcsOsi];\n}\n\nexport function isFallbackStepUsed({ modal, fallbackStep, wcsOsi, checkoutClientId }) {\n  const is3in1Modal = ['twp', 'd2p', 'crm'].includes(modal);\n  const masFF3in1 = document.querySelector('meta[name=mas-ff-3in1]');\n  const is3in1Enabled = !masFF3in1 || masFF3in1.content !== 'off';\n  return is3in1Modal && !is3in1Enabled && !!(fallbackStep\n  ?? getHardcodedFallbackStep(wcsOsi, checkoutClientId));\n}\n\nexport function getWorkflowStep({\n  wcsOsi,\n  modal,\n  fallbackStep,\n  checkoutWorkflowStep,\n  checkoutClientId,\n}) {\n  if (!isFallbackStepUsed({\n    modal,\n    fallbackStep,\n    wcsOsi,\n    checkoutClientId,\n  })) return checkoutWorkflowStep;\n  return fallbackStep\n    ?? getHardcodedFallbackStep(wcsOsi, checkoutClientId)\n    ?? checkoutWorkflowStep;\n}\n\n/**\n * Checkout parameter can be set on the merch link,\n * code config (scripts.js) or be a default from tacocat.\n * To get the default, 'undefined' should be passed, empty string will trigger an error!\n *\n * clientId - code config -> default (adobe_com)\n * workflow - merch link -> metadata -> default (UCv3)\n * workflowStep - merch link -> default (email)\n * marketSegment - merch link -> default (COM)\n * @param {{params: URLSearchParams, service: {settings: object}}} context\n * @returns checkout context object required to build a checkout url\n */\nexport async function getCheckoutContext(el, params) {\n  const context = await getCommerceContext(el, params);\n  if (!context) return null;\n  const { settings } = await initService();\n  const { checkoutClientId } = settings;\n  const checkoutMarketSegment = params.get('marketSegment');\n  const checkoutWorkflowStep = params?.get('workflowStep') ?? settings.checkoutWorkflowStep;\n  const entitlement = params?.get('entitlement');\n  const upgrade = params?.get('upgrade');\n  const modal = params?.get('modal');\n  const fallbackStep = params?.get('fallbackStep');\n\n  const extraOptions = {};\n  params.forEach((value, key) => {\n    if (CHECKOUT_ALLOWED_KEYS.includes(key)) {\n      extraOptions[key] = value;\n    }\n  });\n\n  return {\n    ...context,\n    checkoutClientId,\n    checkoutWorkflowStep: getWorkflowStep({\n      wcsOsi: context.wcsOsi,\n      modal,\n      fallbackStep,\n      checkoutWorkflowStep,\n      checkoutClientId,\n    }),\n    checkoutMarketSegment,\n    entitlement,\n    upgrade,\n    modal: isFallbackStepUsed({\n      modal,\n      fallbackStep,\n      wcsOsi: context.wcsOsi,\n      checkoutClientId,\n    }) ? undefined : modal,\n    fallbackStep,\n    extraOptions: JSON.stringify(extraOptions),\n  };\n}\n\nexport async function getPriceContext(el, params) {\n  const context = await getCommerceContext(el, params);\n  if (!context) return null;\n  const annualEnabled = getMetadata('mas-ff-annual-price');\n  const displayOldPrice = context.promotionCode ? params.get('old') : undefined;\n  const displayPerUnit = params.get('seat');\n  const displayRecurrence = params.get('term');\n  const displayTax = params.get('tax');\n  const displayPlanType = params.get('planType');\n  const displayAnnual = (annualEnabled && params.get('annual') !== 'false') || undefined;\n  const forceTaxExclusive = params.get('exclusive');\n  const alternativePrice = params.get('alt');\n  const quantity = params.get('quantity');\n  // The PRICE_TEMPLATE_MAPPING supports legacy OST links\n  const template = PRICE_TEMPLATE_MAPPING.get(params.get('type')) ?? PRICE_TEMPLATE_REGULAR;\n  return {\n    ...context,\n    displayOldPrice,\n    displayPerUnit,\n    displayRecurrence,\n    displayTax,\n    displayPlanType,\n    displayAnnual,\n    forceTaxExclusive,\n    alternativePrice,\n    template,\n    quantity,\n  };\n}\n\nexport async function addAriaLabelToCta(cta) {\n  const productCode = cta.value[0]?.productArrangement?.productCode;\n  const { marketSegment, customerSegment } = cta;\n  const segment = marketSegment === 'EDU' ? marketSegment : customerSegment;\n  let ariaLabel = cta.textContent;\n  ariaLabel = productCode\n    ? `${ariaLabel} - ${await replaceKey(productCode, getConfig())}`\n    : ariaLabel;\n  ariaLabel = segment\n    ? `${ariaLabel} - ${await replaceKey(segment, getConfig())}`\n    : ariaLabel;\n  cta.setAttribute('aria-label', ariaLabel);\n}\n\nexport async function buildCta(el, params) {\n  const large = !!el.closest('.marquee');\n  const strong = el.firstElementChild?.tagName === 'STRONG'\n    || el.parentElement?.tagName === 'STRONG';\n  if (el.closest('.merch-offers.upgrade')) {\n    params.append('entitlement', 'false');\n  }\n  const context = await getCheckoutContext(el, params);\n  if (!context) return null;\n  const service = await initService();\n  const text = el.textContent?.replace(/^CTA +/, '');\n  const cta = service.createCheckoutLink(context, text);\n  if (el.href.includes('#_tcl')) {\n    el.href = el.href.replace('#_tcl', '');\n  } else {\n    cta.classList.add('con-button');\n    cta.classList.toggle('button-l', large);\n    cta.classList.toggle('blue', strong);\n  }\n\n  const customClasses = el.href.matchAll(/#_button-([a-zA-Z-]+)/g);\n  for (const match of customClasses) {\n    cta.classList.add(match[1]);\n  }\n\n  if (context.entitlement !== 'false') {\n    cta.classList.add(LOADING_ENTITLEMENTS);\n    cta.onceSettled().finally(() => {\n      cta.classList.remove(LOADING_ENTITLEMENTS);\n      updateModalState({ cta });\n    });\n  }\n\n  // Adding aria-label for checkout-link using productCode and customerSegment as placeholder key.\n  if (el.ariaLabel) {\n    // If Milo aria-label available from sharepoint doc, just use it.\n    cta.setAttribute('aria-label', el.ariaLabel);\n  } else if (!cta.ariaLabel) {\n    cta.onceSettled().then(async () => {\n      await addAriaLabelToCta(cta);\n    });\n  }\n\n  if (getMetadata('mas-ff-copy-cta') === 'on') {\n    const { default: addCopyToClipboard } = await import(\n      './copy-to-clipboard.js'\n    );\n    return addCopyToClipboard(el, cta);\n  }\n\n  /**\n   * TODO: This code block will be deprecated and removed in a future version.\n   * @see https://jira.corp.adobe.com/browse/MWPW-173470\n   * @see https://jira.corp.adobe.com/browse/MWPW-174411\n   */\n  cta.onceSettled().then(() => {\n    const prefix = getConfig()?.locale?.prefix;\n    if (!(prefix === '/kr' && cta.value[0]?.offerType === OFFER_TYPE_TRIAL)) return;\n    if (shouldAllowKrTrial(el, prefix)) {\n      cta.classList.remove('hidden-osi-trial-link');\n      return;\n    }\n    cta.remove();\n  });\n\n  return cta;\n}\n\nasync function buildPrice(el, params) {\n  const context = await getPriceContext(el, params);\n  if (!context) return null;\n  const service = await initService();\n  const price = service.createInlinePrice(context);\n  return price;\n}\n\nexport const MEP_SELECTOR = 'mas';\n\nexport function overrideOptions(fragment, options) {\n  const { mep } = getConfig();\n  const fragments = mep?.inBlock?.[MEP_SELECTOR]?.fragments;\n  if (fragments) {\n    const command = fragments[fragment];\n    if (command && command.action === 'replace') {\n      return { ...options, fragment: command.content };\n    }\n  }\n  return options;\n}\n\nexport function getOptions(el) {\n  const { hash } = new URL(el.href);\n  const hashValue = hash.startsWith('#') ? hash.substring(1) : hash;\n  const searchParams = new URLSearchParams(hashValue);\n  const options = {};\n  for (const [key, value] of searchParams.entries()) {\n    if (key === 'sidenav') options.sidenav = value === 'true';\n    else if (key === 'fragment' || key === 'query') options.fragment = value;\n  }\n  return options;\n}\n\nexport default async function init(el) {\n  if (!el?.classList?.contains('merch')) return undefined;\n  const { searchParams } = new URL(el.href);\n  const isCta = searchParams.get('type') === 'checkoutUrl';\n  const merch = await (isCta ? buildCta : buildPrice)(el, searchParams);\n  const service = await initService();\n  log = service.Log.module('merch');\n  if (merch) {\n    log.debug('Rendering:', { options: { ...merch.dataset }, merch, el });\n    el.replaceWith(merch);\n    return merch;\n  }\n  log.warn('Failed to get context:', { el });\n  return null;\n}\n\nwindow.addEventListener('hashchange', updateModalState);\n\nwindow.addEventListener('popstate', updateModalState);\n\nwindow.addEventListener('milo:modal:closed', () => {\n  updateModalState({ closedByUser: true });\n});\n"],"names":["MAS_COMMERCE_SERVICE","MAS_MERCH_CARD","MAS_MERCH_CARD_COLLECTION","MAS_MERCH_MNEMONIC_LIST","MAS_MERCH_OFFER_SELECT","MAS_MERCH_QUANTITY_SELECT","MAS_MERCH_SECURE_TRANSACTION","MAS_MERCH_SIDENAV","MAS_MERCH_WHATS_INCLUDED","CHECKOUT_LINK_CONFIG_PATH","CHECKOUT_LINK_SANDBOX_CONFIG_PATH","PRICE_TEMPLATE_DISCOUNT","PRICE_TEMPLATE_OPTICAL","PRICE_TEMPLATE_REGULAR","PRICE_TEMPLATE_STRIKETHROUGH","PRICE_TEMPLATE_ANNUAL","PRICE_TEMPLATE_LEGAL","PRICE_TEMPLATE_MAPPING","Map","PLACEHOLDER_KEY_DOWNLOAD","CC_SINGLE_APPS","LanguageMap","en","da","et","ar","el","iw","he","id","ms","nb","sl","sv","cs","uk","hi","ja","ko","fil","th","vi","GeoMap","be_en","be_fr","be_nl","br","ca","ch_de","ch_fr","ch_it","cl","co","la","mx","pe","africa","dk","de","ee","eg_ar","eg_en","es","fr","gr_el","gr_en","ie","il_he","it","lv","lt","lu_de","lu_en","lu_fr","my_en","my_ms","hu","mt","mena_en","mena_ar","nl","no","pl","pt","ro","si","sk","fi","se","tr","at","cz","bg","ru","ua","au","in_en","in_hi","id_en","id_id","nz","sa_ar","sa_en","sg","cn","tw","hk_zh","jp","kr","za","ng","cr","ec","pr","gt","cis_en","cis_ru","sea","th_en","th_th","TAB_DEEPLINK_MAPPING","e","t","LANG_STORE_PREFIX","getMiloLocaleSettings","miloLocale","_localePrefix$replace","_GeoMap$geo","geo","prefix","replace","country","language","split","startsWith","window","location","pathname","concat","localeLang","toLowerCase","includes","getDefaultLangstoreCountry","toUpperCase","locale","getGeoLocaleSettings","_URLSearchParams$get","settings","URLSearchParams","search","get","sessionStorage","getItem","getAkamaiCode","error","_window$lana","lana","log","getLocaleSettings","geoDetection","getMetadata","Promise","resolve","CHECKOUT_ALLOWED_KEYS","CC_SINGLE_APPS_ALL","flatMap","item","CC_ALL_APPS","NAME_LOCALE","NAME_PRODUCT_FAMILY","FREE_TRIAL_PATH","BUY_NOW_PATH","FREE_TRIAL_HASH","BUY_NOW_HASH","OFFER_TYPE_TRIAL","LOADING_ENTITLEMENTS","upgradeOffer","getMasBase","hostname","maslibs","baseUrl","hostnameParts","sld","length","extensionIndex","endsWith","extension","test","getMasLibs","masLibs","trim","sanitizedMasLibs","failedExternalLoads","Set","loadingPromises","loadMasComponent","componentName","has","customElements","loadPromise","masLibsBase","globImport_deps_mas_js","externalUrl","Error","add","set","finally","delete","polyfills","promise","isSupported","document","createElement","is","base","getConfig","loadScript","fetchEntitlements","_fetchEntitlements$pr","then","_ref","default","getUserEntitlements","params","name","value","format","fetchCheckoutLinkConfigs","_fetchCheckoutLinkCon","arguments","undefined","env","path","fetch","catch","_log","mappings","ok","json","data","addToConfigsForMatchingProduct","config","productCode","svar","targetConfigs","match","alreadyThere","some","push","getCheckoutLinkConfig","productFamily","paCode","options","_productCheckoutLinkC","extraOptions","JSON","parse","getSvar","extraOptionsObj","stringify","origin","checkoutLinkConfigs","region","sort","itema","itemb","apf","bpf","paCodeConfigs","productCodeConfigs","productFamilyConfigs","reduce","acc","configs","addToConfigs","productCheckoutLinkConfigs","checkoutLinkConfig","find","_ref2","checkoutLinkConfigOverride","_ref3","finalConfig","Object","fromEntries","entries","filter","_ref4","forEach","_ref5","key","DOWNLOAD_FAMILY_CODE","ACROBAT","ARCH","getDownloadAction","imsSignedInPromise","_ref6","_offerType$toLowerCas","offerType","productArrangementCode","productArrangement","offerFamily","entitlement","entitlements","DOWNLOAD_URL","_ref7","offer","product_code","subscrCode","product_arrangement_v2","family","subscriptionFamily","singleAppFamily","singleAppFamilies","familySubscr","codeSubscr","codeCta","_family$codeSubscr","showDownloadForCode","text","replaceKey","DOWNLOAD_TEXT","url","localizeLink","type","className","getUpgradeAction","_ref8","_upgradeOffer","upgrade","querySelector","onceSettled","_el$closest","handleUpgradeOffer","upgradeAction","closest","remove","applyPromo","_mep$inBlock","mep","promoModal","inBlock","merch","fragments","URL","content","_log2","appendDexterParameters","isRelativePath","absoluteUrl","err","_window$lana2","keys","_TAB_DEEPLINK_MAPPING","_TAB_DEEPLINK_MAPPING2","searchParams","appendExtraOptions","is3in1Modal","marketSegment","customerSegment","metaPreselectPlan","appendTabName","href","isInternalModal","closeModalWithoutEvent","modalId","querySelectorAll","mod","_document$querySelect","classList","contains","modalCurtain","focus","body","element","removeAttribute","modalState","isOpen","updateModalState","_openedDialog$id","cta","closedByUser","hash","modal2","openedDialog","modal","dialog","ctaToClick","dataset","clickDisabled","click","setTimeout","getAttribute","closeModal","openModal","preventDefault","stopImmediatePropagation","getModal","offerTypeClass","isOpen3in1Modal","openThreeInOneModal","handle3in1IFrameEvents","addEventListener","fragmentPath","pop","async","root","createTag","style","visibility","parent","closeEvent","class","loadArea","openFragmentModal","loadStyle","src","frameborder","marginwidth","marginheight","allowfullscreen","loading","openExternalModal","setCtaHash","setAttribute","isProdModal","getModalAction","offers","preload","getCommercePreloadUrl","client","milo","deferredPromise","mode","columnName","handler","getCheckoutAction","downloadAction","modalAction","all","_log3","setPreview","attributes","host","SLD","preview","initService","_initService$promise","_document$head$queryS","head","commerce","miloEnv","attr","camelCaseAttr","g","hasOwnProperty","fragmentClientUrl","getFragmentClientUrl","loadScriptUtil","_log4","service","_service$imsSignedInP","registerCheckoutAction","append","prefillWcsCache","_log5","warn","isSignedIn","getCommerceContext","_ref9","_params$get","_el$closest2","wcsOsi","perpetual","promotionCode","getHardcodedFallbackStep","checkoutClientId","WRe4gUHuyqJgCCr3ZywwU9CDP0ezBaCKoMk4xryVQhs","Hnk2P6L5wYhnpZLFYTW5upuk2Y3AJXlso8VGWQ0l2TI","WJLr3TF4T4qyJIGZTsDf9KPbTfxA7qAgStpaF2IgYao","lI5NvdLBWJUJEHkP9CAx787kt0uCc3WnoCFVVIjECiA","isFallbackStepUsed","_ref10","fallbackStep","masFF3in1","is3in1Enabled","getWorkflowStep","_ref11","_ref12","checkoutWorkflowStep","getCheckoutContext","_params$get2","context","checkoutMarketSegment","getPriceContext","_PRICE_TEMPLATE_MAPPI","annualEnabled","displayOldPrice","displayPerUnit","displayRecurrence","displayTax","displayPlanType","displayAnnual","forceTaxExclusive","alternativePrice","quantity","template","addAriaLabelToCta","_cta$value$","segment","ariaLabel","textContent","buildCta","_el$firstElementChild","_el$parentElement","_el$textContent","large","strong","firstElementChild","tagName","parentElement","createCheckoutLink","toggle","customClasses","matchAll","addCopyToClipboard","_getConfig","_cta$value$2","shouldAllowKrTrial","buildPrice","createInlinePrice","MEP_SELECTOR","overrideOptions","fragment","_mep$inBlock2","command","action","getOptions","hashValue","substring","sidenav","init","_el$classList","isCta","Log","module","debug","replaceWith"],"sourceRoot":""}