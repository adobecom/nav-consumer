"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[1279],{1279:(e,t,r)=>{r.r(t),r.d(t,{addAriaLabelToCTA:()=>m,default:()=>p,findBlockContainers:()=>s,getHeaders:()=>h,getProduct:()=>i,getTextBeforeHeader:()=>o});var a=r(4112),n=(r(6483),/^h[1-2]$/i),l=(e,t)=>{if(t.test(e.tagName))return{text:"",foundHeader:!0};if(e.nodeType===Node.TEXT_NODE)return{text:e.nodeValue,foundHeader:!1};let r="",a=!1;for(let n of e.childNodes){let e=l(n,t);if(r+=e.text,e.foundHeader){a=!0;break}}return{text:r,foundHeader:a}},o=e=>{if(!e)return"";let{text:t,foundHeader:r}=l(e,n);return r?t.trim():""},i=(e,t)=>{var r;return e&&(null===(r=t.find((t=>{let{us:r}=t;return e.toLowerCase().includes(r.toLowerCase())})))||void 0===r?void 0:r.us)||""};function u(e,t,r){let a=e.split("-");if(a.length>1){let e=r?0:a.length-1;t.add(a[e])}}var c=(e,t)=>{let r=new Map;return e.forEach(((e,a)=>{let n=((e,t)=>{let r=Array.from(e.classList),a=new Set;for(let n of r)u(n,a,t);return a})(e,t);!function(e,t,r){e.forEach((e=>{t.has(e)||t.set(e,new Set),t.get(e).add(r)}))}(n,r,a)})),r},f=function(e){let{extractPrefix:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length<2)return!1;let r=c(e,t);return Array.from(r.values()).some((e=>e.size>1))};function d(e,t,r){let a=t(e);if(!a.length)return;let n=[];a.length>1?n=[...a,e]:1===a.length&&a[0]===e&&(n=[e]),r.push(...n)}var s=e=>{let t=Array.from(e.children).filter((e=>"DIV"===e.tagName));if(!t.length)return[e];let r=(e=>e.filter((t=>e.some((e=>t!==e&&(f([t,e],{extractPrefix:!0})||f([t,e],{extractPrefix:!1})))))))(t);if(r.length>1){let t=((e,t)=>{let r=[];for(let a of e)d(a,t,r);return r})(r,s);return t.length>1?t:[e]}let a=t.map((e=>s(e))).filter((e=>e.length>1));return 1===a.length&&a[0].length>1?a[0]:[e]},h=e=>Array.from(e.querySelectorAll("h1, h2, h3, h4, h5, h6")),g=(e,t,r,a,n,l)=>{var o;let u=t.filter((e=>{let r=e.tagName.toLowerCase();return 1===t.filter((e=>e.tagName.toLowerCase()===r)).length})),c=e.textContent.trim().toLowerCase(),f=!e.classList.contains("modal")&&i(null===(o=e.href)||void 0===o?void 0:o.replace("-"," "),r)||"",d=[...u,l].filter(Boolean);if(a.includes(c)){let t=d.find((e=>{let t="string"==typeof e?e:e.textContent.trim(),a=i(t,r);return a&&(a.includes(f)||f.includes(a)||!f)}));if(t){var s;let a=i((null===(s=t.textContent)||void 0===s?void 0:s.trim())||t,r);return e.setAttribute("aria-label","".concat(e.textContent," ").concat(a)),!0}}if(n.includes(c)&&d.length){var h;let t=(null===(h=d[0].textContent)||void 0===h?void 0:h.trim())||d[0];return e.setAttribute("aria-label","".concat(e.textContent," - ").concat(t)),!0}return!1},m=(e,t,r,a)=>{let n=e.closest(".section > div");if(!n)return;let l=s(n),i=l.filter((t=>t.contains(e)))||[n],u=i[0]!==n;for(let d of i)if(u&&g(e,h(d),t,r,a,o(d)))return;let c=((e,t)=>{let r=h(e),a=t.flatMap((e=>h(e)));return r.filter((e=>!a.includes(e)))})(n,l);if(c.length&&g(e,c,t,r,a))return;let f=o(n);g(e,h(n),t,r,a,f)};async function p(){var e,t;let r=(0,a.i)().ariaLabelCTASelector||".con-button:not([aria-label])",n=[...document.body.querySelectorAll(r)].filter((e=>""!==e.getAttribute("aria-label")));if(!n.length)return;let l=(e,t)=>window.lana.log("".concat(e,": ").concat(t),{tags:"aria"}),[o,i]=await Promise.all([fetch("".concat((0,a.j)(),"/federal/assets/data/cta-aria-label-config.json")).catch((e=>l("Could not fetch cta-aria-label-config.json",e))),fetch("".concat((0,a.j)(),"/federal/assets/data/product-names.json")).catch((e=>l("Could not fetch product-names.json",e)))]);if(!o||!i)return;let u=await o.json().catch((e=>l("Could not parse cta-aria-label-config.json",e))),c=await i.json().catch((e=>l("Could not parse product-names.json",e)));if(!u||!c)return;let{prefix:f}=(0,a.i)().locale,d=(null===f||void 0===f?void 0:f.replace("/",""))||"us";if(null===(e=u.data)||void 0===e||!e.length||null===(t=c.data)||void 0===t||!t.length)return void window.lana.log("No cta aria label config or product names found for locale ".concat(d),{tags:"aria"});let s=u.data.find((e=>e.prefixes.split(",").map((e=>e.trim())).includes(d)));if(!s)return;let h=s.addProductName.split(/[\n,]+/).map((e=>e.trim().toLowerCase())).filter(Boolean),g=s.addHeader.split(/[\n,]+/).map((e=>e.trim().toLowerCase())).filter(Boolean),p=[];n.forEach((e=>{m(e,c.data,h,g),e.hasAttribute("aria-label")&&p.push(e)}))}}}]);
//# sourceMappingURL=1279.a4bdd271.chunk.js.map