{"version":3,"file":"static/js/2522.d3c2c593.chunk.js","mappings":"0KAWAA,eAAeC,EAAmBC,GAAS,IAAAC,EAAAC,EACzC,MAAMC,QATRL,iBACE,IAAIM,EAAAA,EAAAA,kBAAkBC,EAAAA,EAAAA,kBAAiB,YAAa,OAAO,EAC3D,GAAmC,eAA/BA,EAAAA,EAAAA,kBAAiB,UAA2B,OAAOA,EAAAA,EAAAA,kBAAiB,gBAElEC,EAAAA,EAAAA,WACN,MAAM,OAAEH,SAAiBI,OAAOC,SAASC,aACzC,OAAON,CACT,CAEuBO,GACrB,IAAKP,EAAQ,MAAO,CAAC,EAErB,MAAMQ,EAA6C,QAA7CV,EAAcM,OAAOC,SAASI,wBAAe,IAAAX,OAAA,EAA/BA,EAAkCY,MACtD,IAAKF,EAAa,MAAO,CAAC,EAE1B,MAAMG,EAA0C,UAAjB,QAAVZ,GAAAa,EAAAA,EAAAA,oBAAU,IAAAb,GAAG,QAAHA,EAAVA,EAAac,WAAA,IAAAd,OAAA,EAAbA,EAAkBe,MAAkB,GAAK,SACxDC,EAAA,cAAAC,OAAoBL,EAAY,8CAAAK,OAA6CnB,EAAO,aAAAmB,OAAYC,mBAAmBjB,IACzH,IAAI,IAAAkB,EACF,MAAMC,QAAiBC,MAAML,EAAK,CAChCM,OAAQ,MACRC,QAAS,CAAEC,cAAA,UAAAP,OAAyBR,IACpCgB,YAAa,gBAEf,OAAIL,EAASM,GAAWN,EAASO,QAC1B,QAAPR,EAAAd,OAAOuB,YAAA,IAAAT,GAAPA,EAAaU,IAAA,mCAAAZ,OAAuCG,EAASU,aACtD,CAAC,EACV,CAAE,MAAOC,GAAG,IAAAC,EAEV,OADO,QAAPA,EAAA3B,OAAOuB,YAAA,IAAAI,GAAPA,EAAaH,IAAA,mCAAAZ,OAAuCc,EAAEE,aAC/C,CAAC,CACV,CACF,CACA,eAAOC,EAA4BpC,GACjC,IAAgB,IAAZA,EAAkB,OAAOA,EAE7B,MAAMqC,GAAqBC,EAAAA,EAAAA,WAAU,kBACrC,GAAI,OAAAD,QAAA,IAAAA,GAAAA,EAAoBE,SAAS,WAAY,OAAO,EAEpD,MAAMC,QAAqBzC,EAAmBC,GAC9C,OAAsC,KAA/B,OAAAwC,QAAA,IAAAA,OAAA,EAAAA,EAAcC,aACvB,C","sources":["../node_modules/@adobecom/features/mep/addons/event.js"],"sourcesContent":["import { isSignedOut, getConfig, getMepEnablement, loadIms } from '../../../utils/utils.js';\nimport { getCookie } from '../../../martech/helpers.js';\n\nasync function getUserId() {\n  if (isSignedOut() && !getMepEnablement('signedIn')) return false;\n  if (getMepEnablement('userId') !== 'undefined') return getMepEnablement('userId');\n  /* c8 ignore next 3 */\n  await loadIms();\n  const { userId } = await window.adobeIMS.getProfile();\n  return userId;\n}\nasync function fetchFromRainfocus(eventId) {\n  const userId = await getUserId();\n  if (!userId) return {};\n\n  const accessToken = window.adobeIMS.getAccessToken()?.token;\n  if (!accessToken) return {};\n\n  const domainSuffix = getConfig()?.env?.name === 'prod' ? '' : '.stage';\n  const url = `https://www${domainSuffix}.adobe.com/events/api/rf-auth-seq-generic/${eventId}?user_id=${encodeURIComponent(userId)}`;\n  try {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: { Authorization: `Bearer ${accessToken}` },\n      credentials: 'same-origin',\n    });\n    if (response.ok) return response.json();\n    window.lana?.log(`Unable to fetch from Rainfocus: ${response.statusText}`);\n    return {};\n  } catch (e) {\n    window.lana?.log(`Unable to fetch from Rainfocus: ${e.toString()}`);\n    return {};\n  }\n}\nexport default async function init(eventId) {\n  if (eventId === true) return eventId;\n\n  const consentCookieValue = getCookie('OptanonConsent');\n  if (consentCookieValue?.includes('C0002:0')) return false;\n\n  const eventDetails = await fetchFromRainfocus(eventId);\n  return eventDetails?.isRegistered === true;\n}\n"],"names":["async","fetchFromRainfocus","eventId","_window$adobeIMS$getA","_getConfig","userId","isSignedOut","getMepEnablement","loadIms","window","adobeIMS","getProfile","getUserId","accessToken","getAccessToken","token","domainSuffix","getConfig","env","name","url","concat","encodeURIComponent","_window$lana","response","fetch","method","headers","Authorization","credentials","ok","json","lana","log","statusText","e","_window$lana2","toString","init","consentCookieValue","getCookie","includes","eventDetails","isRegistered"],"sourceRoot":""}