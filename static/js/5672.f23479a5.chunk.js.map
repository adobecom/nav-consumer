{"version":3,"file":"static/js/5672.f23479a5.chunk.js","mappings":"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","sources":["../../milo/libs/utils/samplerum.js"],"sourcesContent":["// code from https://github.com/adobe/helix-rum-js/blob/main/src/index.js\n// eslint-disable-next-line import/prefer-default-export\nexport function sampleRUM(checkpoint, data) {\n  // eslint-disable-next-line max-len\n  const timeShift = () => (window.performance ? window.performance.now() : Date.now() - window.hlx.rum.firstReadTime);\n  try {\n    window.hlx = window.hlx || {};\n    sampleRUM.enhance = () => {};\n    if (!window.hlx.rum) {\n      const param = new URLSearchParams(window.location.search).get('rum');\n      const weight = (window.SAMPLE_PAGEVIEWS_AT_RATE === 'high' && 10)\n        || (window.SAMPLE_PAGEVIEWS_AT_RATE === 'low' && 1000)\n        || (param === 'on' && 1)\n        || 100;\n      const id = Math.random().toString(36).slice(-4);\n      const isSelected = (param !== 'off') && (Math.random() * weight < 1);\n      // eslint-disable-next-line object-curly-newline, max-len\n      window.hlx.rum = { weight, id, isSelected, firstReadTime: window.performance ? window.performance.timeOrigin : Date.now(), sampleRUM, queue: [], collector: (...args) => window.hlx.rum.queue.push(args) };\n      if (isSelected) {\n        const dataFromErrorObj = (error) => {\n          const errData = { source: 'undefined error' };\n          try {\n            errData.target = error.toString();\n            errData.source = error.stack.split('\\n')\n              .filter((line) => line.match(/https?:\\/\\//)).shift()\n              .replace(/at ([^ ]+) \\((.+)\\)/, '$1@$2')\n              .replace(/ at /, '@')\n              .trim();\n          } catch (err) { /* error structure was not as expected */ }\n          return errData;\n        };\n\n        window.addEventListener('error', ({ error }) => {\n          const errData = dataFromErrorObj(error);\n          sampleRUM('error', errData);\n        });\n\n        window.addEventListener('unhandledrejection', ({ reason }) => {\n          let errData = {\n            source: 'Unhandled Rejection',\n            target: reason || 'Unknown',\n          };\n          if (reason instanceof Error) {\n            errData = dataFromErrorObj(reason);\n          }\n          sampleRUM('error', errData);\n        });\n\n        sampleRUM.baseURL = sampleRUM.baseURL || new URL(window.RUM_BASE || '/', new URL('https://rum.hlx.page'));\n        sampleRUM.collectBaseURL = sampleRUM.collectBaseURL || sampleRUM.baseURL;\n        sampleRUM.sendPing = (ck, time, pingData = {}) => {\n          // eslint-disable-next-line max-len, object-curly-newline\n          const rumData = JSON.stringify({ weight, id, referer: window.location.href, checkpoint: ck, t: time, ...pingData });\n          const urlParams = window.RUM_PARAMS ? `?${new URLSearchParams(window.RUM_PARAMS).toString()}` : '';\n          const { href: url, origin } = new URL(`.rum/${weight}${urlParams}`, sampleRUM.collectBaseURL);\n          const body = origin === window.location.origin ? new Blob([rumData], { type: 'application/json' }) : rumData;\n          navigator.sendBeacon(url, body);\n          // eslint-disable-next-line no-console\n          console.debug(`ping:${ck}`, pingData);\n        };\n        sampleRUM.sendPing('top', timeShift());\n\n        sampleRUM.enhance = () => {\n          // only enhance once\n          if (document.querySelector('script[src*=\"rum-enhancer\"]')) return;\n\n          const script = document.createElement('script');\n          script.src = new URL('.rum/@adobe/helix-rum-enhancer@^2/src/index.js', sampleRUM.baseURL).href;\n          document.head.appendChild(script);\n        };\n        if (!window.hlx.RUM_MANUAL_ENHANCE) {\n          sampleRUM.enhance();\n        }\n      }\n    }\n    if (window.hlx.rum && window.hlx.rum.isSelected && checkpoint) {\n      window.hlx.rum.collector(checkpoint, data, timeShift());\n    }\n    document.dispatchEvent(new CustomEvent('rum', { detail: { checkpoint, data } }));\n  } catch (error) {\n    // something went awry\n  }\n}\n"],"names":["e","a","w","d","timeShift","window","performance","now","Date","hlx","rum","firstReadTime","enhance","c","URLSearchParams","location","search","get","t","SAMPLE_PAGEVIEWS_AT_RATE","s","Math","random","toString","slice","l","weight","id","isSelected","timeOrigin","sampleRUM","queue","collector","_len","arguments","length","i","Array","_key","push","n","r","source","target","stack","split","filter","o","match","shift","replace","trim","addEventListener","_ref","error","_ref2","reason","Error","baseURL","URL","RUM_BASE","collectBaseURL","sendPing","undefined","h","JSON","stringify","referer","href","checkpoint","m","RUM_PARAMS","concat","u","origin","f","R","Blob","type","navigator","sendBeacon","console","debug","document","querySelector","createElement","src","head","appendChild","RUM_MANUAL_ENHANCE","dispatchEvent","CustomEvent","detail","data"],"sourceRoot":""}