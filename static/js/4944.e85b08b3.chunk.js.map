{"version":3,"file":"static/js/4944.e85b08b3.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/personalization/personalization.js"],"sourcesContent":["/* eslint-disable default-param-last */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-console */\n\nimport {\n  createTag,\n  getConfig,\n  loadLink,\n  loadScript,\n  localizeLink,\n  getFederatedUrl,\n  isSignedOut,\n} from '../../utils/utils.js';\n\n/* c8 ignore start */\nconst PHONE_SIZE = window.screen.width < 550 || window.screen.height < 550;\nconst safariIpad = navigator.userAgent.includes('Macintosh') && navigator.maxTouchPoints > 1;\nconst isGalaxyTab = navigator.userAgent.includes('Linux') && navigator.maxTouchPoints > 1;\nexport const US_GEO = 'en-us';\nexport const PERSONALIZATION_TAGS = {\n  all: () => true,\n  chrome: () => navigator.userAgent.includes('Chrome') && !navigator.userAgent.includes('Edg'),\n  firefox: () => navigator.userAgent.includes('Firefox'),\n  safari: () => navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome'),\n  edge: () => navigator.userAgent.includes('Edg'),\n  android: () => navigator.userAgent.includes('Android') || isGalaxyTab,\n  ios: () => /iPad|iPhone|iPod/.test(navigator.userAgent) || safariIpad,\n  windows: () => navigator.userAgent.includes('Windows'),\n  mac: () => navigator.userAgent.includes('Macintosh') && !safariIpad,\n  'mobile-device': () => safariIpad\n    || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Touch/i\n      .test(navigator.userAgent) || isGalaxyTab,\n  phone: () => PERSONALIZATION_TAGS['mobile-device']() && PHONE_SIZE,\n  tablet: () => PERSONALIZATION_TAGS['mobile-device']() && !PHONE_SIZE,\n  desktop: () => !PERSONALIZATION_TAGS['mobile-device'](),\n  loggedout: () => isSignedOut(),\n  loggedin: () => !isSignedOut(),\n};\nconst PERSONALIZATION_KEYS = Object.keys(PERSONALIZATION_TAGS);\n/* c8 ignore stop */\n\nconst CLASS_EL_DELETE = 'p13n-deleted';\nconst CLASS_EL_REPLACE = 'p13n-replaced';\nconst COLUMN_NOT_OPERATOR = 'not ';\nconst TARGET_EXP_PREFIX = 'target-';\nconst INLINE_HASH = '_inline';\nconst MARTECH_RETURNED_EVENT = 'martechReturned';\nconst PAGE_URL = new URL(window.location.href);\nconst FLAGS = {\n  all: 'all',\n  includeFragments: 'include-fragments',\n};\nlet isPostLCP = false;\n\nexport const TRACKED_MANIFEST_TYPE = 'personalization';\n\n// Replace any non-alpha chars except comma, space, ampersand, colon, and hyphen\nconst RE_KEY_REPLACE = /[^a-z0-9\\- _,&=:]/g;\n\nconst MANIFEST_KEYS = [\n  'action',\n  'selector',\n  'pagefilter',\n  'page filter',\n  'page filter optional',\n];\n\nexport const DATA_TYPE = {\n  JSON: 'json',\n  TEXT: 'text',\n};\n\nconst IN_BLOCK_SELECTOR_PREFIX = 'in-block:';\n\nconst isDamContent = (path) => path?.includes('/content/dam/');\n\nexport const normalizePath = (p, localize = true) => {\n  let path = p;\n\n  if (isDamContent(path) || !path?.includes('/')) return path;\n\n  if (path.includes('/federal/')) return getFederatedUrl(path);\n\n  const config = getConfig();\n  if (!path.startsWith(config.codeRoot) && !path.startsWith('http') && !path.startsWith('/')) {\n    path = `/${path}`;\n  }\n\n  try {\n    const url = new URL(path);\n    const { hash, pathname } = url;\n    const firstFolder = pathname.split('/')[1];\n    const mepHash = '#_dnt';\n\n    if (path.startsWith(config.codeRoot)\n      || path.includes('.hlx.')\n      || path.includes('.aem.')\n      || path.includes('.adobe.')\n      || path.includes('localhost:')) {\n      if (!localize\n        || config.locale.ietf === 'en-US'\n        || hash.includes(mepHash)\n        || firstFolder in config.locales\n        || path.includes('.json')) {\n        path = pathname;\n      } else {\n        path = `${config.locale.prefix}${pathname}`;\n      }\n    }\n    return `${path}${hash.replace(mepHash, '')}`;\n  } catch (e) {\n    return path;\n  }\n};\n\nexport const getFileName = (path) => path?.split('/').pop();\n\nconst isInLcpSection = (el) => {\n  const lcpSection = document.querySelector('body > main > div');\n  return lcpSection === el || lcpSection?.contains(el);\n};\n\nconst GLOBAL_CMDS = [\n  'insertscript',\n  'replacepage',\n  'updatemetadata',\n  'useblockcode',\n];\n\nconst CREATE_CMDS = {\n  insertafter: 'afterend',\n  insertbefore: 'beforebegin',\n  prepend: 'afterbegin',\n  append: 'beforeend',\n};\n\nconst COMMANDS_KEYS = {\n  remove: 'remove',\n  replace: 'replace',\n  updateAttribute: 'updateattribute',\n};\n\nfunction addIds(el, manifestId, targetManifestId) {\n  if (manifestId) el.dataset.manifestId = manifestId;\n  if (targetManifestId) el.dataset.adobeTargetTestid = targetManifestId;\n}\n\nfunction getSelectorType(selector) {\n  const sel = selector.toLowerCase().trim();\n  if (sel.startsWith('/') || sel.startsWith('http')) return 'fragment';\n  return 'other';\n}\n\nexport function replacePlaceholders(value, ph) {\n  const placeholders = ph || getConfig().placeholders;\n  if (!placeholders) return value;\n  let val = value;\n  const matches = val.match(/{{(.*?)}}/g);\n  if (!matches) return val;\n  matches.forEach((match) => {\n    const key = match.replace(/{{|}}/g, '').trim();\n    if (placeholders[key]) val = val.replace(match, placeholders[key]);\n  });\n  return val;\n}\n\nconst getUpdatedHref = (el, content, action) => {\n  const href = el.getAttribute('href');\n  const newContent = replacePlaceholders(content);\n  if (action === 'insertafter' || action === 'append') return `${href}${newContent}`;\n  if (action === 'insertbefore' || action === 'prepend') return `${newContent}${href}`;\n  return newContent;\n};\n\nconst createFrag = (el, action, content, manifestId, targetManifestId) => {\n  if (action === 'replace') el.classList.add(CLASS_EL_DELETE, CLASS_EL_REPLACE);\n  let href = content;\n  try {\n    const { pathname, search, hash } = new URL(content);\n    href = `${pathname}${search}${hash}`;\n  } catch {\n    // ignore\n  }\n  const a = createTag('a', { href }, content);\n  addIds(a, manifestId, targetManifestId);\n  const noParagraphWrap = !!el?.parentElement?.closest('p')\n    || (el.nodeName === 'P' && action.includes('pend'));\n  const frag = noParagraphWrap ? a : createTag('p', undefined, a);\n  const isDelayedModalAnchor = /#.*delay=/.test(href);\n  if (isDelayedModalAnchor) frag.classList.add('hide-block');\n  if (isInLcpSection(el)) {\n    loadLink(`${localizeLink(a.href)}.plain.html`, { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n  }\n  return frag;\n};\n\nexport const createContent = (el, { content, manifestId, targetManifestId, action, modifiers }) => {\n  if (action === 'replace') {\n    addIds(el, manifestId, targetManifestId);\n  }\n  if (el?.nodeName === 'A' && modifiers?.includes('href')) {\n    el.setAttribute('href', getUpdatedHref(el, content, action));\n    addIds(el, manifestId, targetManifestId);\n    return el;\n  }\n  if (getSelectorType(content) !== 'fragment') {\n    const newContent = replacePlaceholders(content);\n\n    if (action === 'replace') {\n      el.innerHTML = newContent;\n\n      return el;\n    }\n\n    const container = createTag('div', {}, newContent);\n    addIds(container, manifestId, targetManifestId);\n    return container;\n  }\n\n  const frag = createFrag(el, action, content, manifestId, targetManifestId);\n  addIds(frag, manifestId, targetManifestId);\n  if (el?.parentElement.nodeName !== 'MAIN') return frag;\n  return createTag('div', undefined, frag);\n};\n\nconst COMMANDS = {\n  [COMMANDS_KEYS.remove]: (el, { content }) => {\n    if (content !== 'false') el.classList.add(CLASS_EL_DELETE);\n  },\n  [COMMANDS_KEYS.replace]: (el, cmd) => {\n    if (!el || el.classList.contains(CLASS_EL_REPLACE)) return;\n    el.insertAdjacentElement(\n      'beforebegin',\n      createContent(el, cmd),\n    );\n  },\n  [COMMANDS_KEYS.updateAttribute]: (el, cmd) => {\n    const { manifestId, targetManifestId } = cmd;\n    if (!cmd.attribute || !cmd.content) return;\n    const [attribute, parameter] = cmd.attribute.split('_');\n    cmd.content = replacePlaceholders(cmd.content);\n\n    let value;\n    if (attribute === 'href' && parameter) {\n      const href = el.getAttribute('href');\n      switch (parameter) {\n        case '#': el.href += el.href.includes(cmd.content) ? '' : cmd.content; break;\n        default:\n          try {\n            const url = new URL(href);\n            const parameters = new URLSearchParams(url.search);\n            parameters.set(parameter, cmd.content);\n            url.search = parameters.toString();\n            value = url.toString();\n          } catch (error) {\n            /* c8 ignore next 2 */\n            console.log(`Invalid updateAttribute URL: ${href}`, error.message || error);\n          }\n      }\n    } else {\n      value = cmd.content;\n    }\n\n    if (value) {\n      el.setAttribute(attribute, value);\n      addIds(el, manifestId, targetManifestId);\n    }\n  },\n};\n\nconst log = (...msg) => {\n  const config = getConfig();\n  if (config.mep?.preview) console.log(...msg);\n};\n\nexport const fetchData = async (url, type = DATA_TYPE.JSON, config) => {\n  try {\n    const resp = await fetch(normalizePath(url), config);\n    if (!resp.ok) {\n      /* c8 ignore next 5 */\n      if (resp.status === 404) {\n        throw new Error('File not found');\n      }\n      throw new Error(`Invalid response: ${resp.status} ${resp.statusText}`);\n    }\n    return await resp[type]();\n  } catch (e) {\n    /* c8 ignore next 3 */\n    log(`Error loading content: ${url}`, e.message || e);\n  }\n  return null;\n};\n\nconst getBlockProps = (fVal, config, origin) => {\n  let val = fVal;\n  if (val?.includes('\\\\')) val = val?.split('\\\\').join('/');\n  if (!val?.startsWith('/')) val = `/${val}`;\n  const blockSelector = val?.split('/').pop();\n\n  if (val.startsWith('/libs/')) {\n    /* c8 ignore next 1 */\n    val = `${config.miloLibs || config.codeRoot}${val.replace('/libs', '')}`;\n  } else {\n    val = `${origin}${val}`;\n  }\n\n  return { blockSelector, blockTarget: val };\n};\n\nconst consolidateArray = (arr, prop, existing = []) => arr\n  .reduce((results, i) => [...results, ...i[prop] || []], existing);\n\nconst consolidateObjects = (arr, prop, existing = {}) => arr.reduce((propMap, item) => {\n  item[prop]?.forEach((i) => {\n    const { selector, val } = i;\n    if (prop === 'blocks') {\n      propMap[selector] = val;\n      return;\n    }\n\n    if (selector in propMap) return;\n    const action = {\n      action: i.action,\n      fragment: val,\n      selector,\n      manifestPath: item.manifestPath,\n      manifestId: i.manifestId,\n      targetManifestId: i.targetManifestId,\n    };\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in propMap) {\n      if (propMap[key].fragment === selector) propMap[key] = action;\n    }\n    propMap[selector] = action;\n  });\n  return { ...existing, ...propMap };\n}, {});\n\nexport const matchGlob = (searchStr, inputStr) => {\n  const pattern = searchStr.replace(/\\*\\*/g, '.*');\n  const reg = new RegExp(`^${pattern}(\\\\.html)?$`, 'i'); // devtool bug needs this backtick: `\n  return reg.test(inputStr);\n};\n\nexport async function replaceInner(path, element) {\n  if (!path || !element) return false;\n  let plainPath = path.endsWith('/') ? `${path}index` : path;\n  plainPath = plainPath.endsWith('.plain.html') ? plainPath : `${plainPath}.plain.html`;\n  const html = await fetchData(plainPath, DATA_TYPE.TEXT);\n  if (!html) return false;\n\n  element.innerHTML = html;\n  const { decorateArea } = getConfig();\n  if (decorateArea) decorateArea(element);\n  return true;\n}\n/* c8 ignore stop */\n\nconst setMetadata = (metadata) => {\n  const { selector, val } = metadata;\n  if (!selector || !val) return;\n  const propName = selector.startsWith('og:') ? 'property' : 'name';\n  let metaEl = document.querySelector(`meta[${propName}=\"${selector}\"]`);\n  if (!metaEl) {\n    metaEl = createTag('meta', { [propName]: selector });\n    document.head.append(metaEl);\n  }\n  metaEl.setAttribute('content', val);\n};\n\nfunction toLowerAlpha(str) {\n  const modifiedStr = str.toLowerCase();\n  if (!modifiedStr.includes('countryip') && !modifiedStr.includes('countrychoice') && !modifiedStr.includes('previouspage')) {\n    return modifiedStr.replace(RE_KEY_REPLACE, '');\n  }\n  return modifiedStr.replace(RE_KEY_REPLACE, (char) => (['(', ')', '/', '*'].includes(char) ? char : ''));\n}\n\nfunction normalizeKeys(obj) {\n  return Object.keys(obj).reduce((newObj, key) => {\n    newObj[toLowerAlpha(key)] = obj[key];\n    return newObj;\n  }, {});\n}\n\nfunction registerInBlockActions(command) {\n  const blockAndSelector = command.selector.substring(IN_BLOCK_SELECTOR_PREFIX.length)\n    .trim().split(/\\s+/);\n  const [blockName] = blockAndSelector;\n\n  const config = getConfig();\n  config.mep.inBlock ??= {};\n  config.mep.inBlock[blockName] ??= {};\n\n  let blockSelector;\n  if (blockAndSelector.length === 1) delete command.selector;\n  if (blockAndSelector.length > 1) {\n    blockSelector = blockAndSelector.slice(1).join(' ');\n    command.selector = blockSelector;\n    if (blockSelector.startsWith('https://mas.adobe.com/')) {\n      const getFragmentId = (masUrl) => {\n        const { hash } = new URL(masUrl);\n        const hashValue = hash.startsWith('#') ? hash.substring(1) : hash;\n        const searchParams = new URLSearchParams(hashValue);\n        return searchParams.get('fragment') || searchParams.get('query');\n      };\n      blockSelector = getFragmentId(blockSelector);\n      if (blockSelector) {\n        config.mep.inBlock[blockName].fragments ??= {};\n        const { fragments } = config.mep.inBlock[blockName];\n        command.content = getFragmentId(command.content);\n        fragments[blockSelector] = command;\n      }\n      return;\n    }\n    if (getSelectorType(blockSelector) === 'fragment') {\n      if (blockSelector.includes('/federal/')) blockSelector = getFederatedUrl(blockSelector);\n      if (command.content.includes('/federal/')) command.content = getFederatedUrl(command.content);\n      config.mep.inBlock[blockName].fragments ??= {};\n      const { fragments } = config.mep.inBlock[blockName];\n      delete command.selector;\n      if (blockSelector in fragments) return;\n\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in fragments) {\n        if (fragments[key].content === blockSelector) fragments[key] = command;\n      }\n      fragments[blockSelector] = command;\n\n      blockSelector = normalizePath(blockSelector);\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in fragments) {\n        if (fragments[key].content === blockSelector) fragments[key] = command;\n      }\n      fragments[blockSelector] = command;\n      return;\n    }\n  }\n  config.mep.inBlock[blockName].commands ??= [];\n  config.mep.inBlock[blockName].commands.push(command);\n}\n\nconst updateEndNumber = (endNumber, term) => (endNumber\n  ? term.replace(endNumber, `:nth-child(${endNumber})`)\n  : term);\nfunction modifySelectorTerm(termParam) {\n  let term = termParam;\n  const specificSelectors = {\n    section: 'main > div',\n    'primary-cta': 'strong a',\n    'secondary-cta': 'em a',\n    'action-area': '*:has(> em a, > strong a)',\n    'any-marquee-section': 'main > div:has([class*=\"marquee\"])',\n    'any-marquee': '[class*=\"marquee\"]',\n    'any-header': ':is(h1, h2, h3, h4, h5, h6)',\n  };\n  const otherSelectors = ['row', 'col'];\n  const htmlEls = [\n    'html', 'body', 'header', 'footer', 'main',\n    'div', 'a', 'p', 'strong', 'em', 'picture', 'source', 'img', 'h',\n    'ul', 'ol', 'li',\n  ];\n  const startTextMatch = term.match(/^[a-zA-Z/./-]*/);\n  const startText = startTextMatch ? startTextMatch[0].toLowerCase() : '';\n  const startTextPart1 = startText.split(/\\.|:/)[0];\n  const endNumberMatch = term.match(/[0-9]*$/);\n  const endNumber = endNumberMatch && startText.match(/^[a-zA-Z]/) ? endNumberMatch[0] : '';\n  if (!startText || htmlEls.includes(startText)) return term;\n  if (otherSelectors.includes(startText)) {\n    term = term.replace(startText, '> div');\n    term = updateEndNumber(endNumber, term);\n    return term;\n  }\n  if (Object.keys(specificSelectors).includes(startTextPart1)) {\n    term = term.replace(startTextPart1, specificSelectors[startTextPart1]);\n    term = updateEndNumber(endNumber, term);\n    return term;\n  }\n\n  if (!startText.startsWith('.')) term = `.${term}`;\n  if (endNumber) {\n    term = term.replace(endNumber, '');\n    term = `${term}:nth-child(${endNumber} of ${term})`;\n  }\n  return term;\n}\nfunction getModifiers(selector) {\n  let sel = selector;\n  const modifiers = [];\n  const flags = sel.split(/\\s+#_/);\n  if (flags.length) {\n    sel = flags.shift();\n    flags.forEach((flag) => {\n      flag.split(/_|#_/).forEach((mod) => modifiers.push(mod.toLowerCase().trim()));\n    });\n  }\n  return { sel, modifiers };\n}\nexport function modifyNonFragmentSelector(selector, action) {\n  const { sel, modifiers } = getModifiers(selector);\n\n  let modifiedSelector = sel\n    .split('>').join(' > ')\n    .split(',').join(' , ')\n    .replaceAll(/main\\s*>?\\s*(section\\d*)/gi, '$1')\n    .split(/\\s+/)\n    .map(modifySelectorTerm)\n    .join(' ')\n    .trim();\n\n  let attribute;\n\n  if (action === COMMANDS_KEYS.updateAttribute) {\n    const string = modifiedSelector.split(' ').pop();\n    attribute = string.replace('.', '');\n    modifiedSelector = modifiedSelector.replace(string, '').trim();\n  }\n\n  return {\n    modifiedSelector,\n    modifiers,\n    attribute,\n  };\n}\n\nfunction getSelectedElements(sel, rootEl, forceRootEl, action) {\n  const root = forceRootEl ? rootEl : document;\n  const selector = sel.trim();\n  if (!selector) return {};\n\n  if (getSelectorType(selector) === 'fragment') {\n    try {\n      const fragments = root.querySelectorAll(\n        `a[href*=\"${normalizePath(selector, false)}\"], a[href*=\"${normalizePath(selector, true)}\"]`,\n      );\n      return { els: fragments, modifiers: [FLAGS.all, FLAGS.includeFragments] };\n    } catch (e) {\n      /* c8 ignore next 2 */\n      return { els: [], modifiers: [] };\n    }\n  }\n  const {\n    modifiedSelector,\n    modifiers,\n    attribute,\n  } = modifyNonFragmentSelector(selector, action);\n\n  let els;\n  try {\n    els = root.querySelectorAll(modifiedSelector);\n  } catch (e) {\n    /* eslint-disable-next-line no-console */\n    log('Invalid selector: ', selector);\n    return {};\n  }\n  if (modifiers.includes(FLAGS.all) || !els.length) return { els, modifiers, attribute };\n  els = [els[0]];\n  return { els, modifiers, attribute };\n}\n\nconst addHash = (url, newHash) => {\n  if (!newHash) return url;\n  try {\n    const { origin, pathname, search } = new URL(url);\n    return `${origin}${pathname}${search}#${newHash}`;\n  } catch (e) {\n    return `${url}#${newHash}`;\n  }\n};\n\nconst setDataIdOnChildren = (sections, id, value) => {\n  [...sections[0].children].forEach(\n    (child) => (child.dataset[id] = value),\n  );\n};\n\nexport const updateFragDataProps = (a, inline, sections, fragment) => {\n  const { manifestId, adobeTargetTestid } = a.dataset;\n  if (inline) {\n    if (manifestId) setDataIdOnChildren(sections, 'manifestId', manifestId);\n    if (adobeTargetTestid) setDataIdOnChildren(sections, 'adobeTargetTestid', adobeTargetTestid);\n  } else {\n    addIds(fragment, manifestId, adobeTargetTestid);\n  }\n};\n\nexport const deleteMarkedEls = (rootEl = document) => {\n  [...rootEl.querySelectorAll(`.${CLASS_EL_DELETE}`)]\n    .forEach((el) => el.remove());\n};\n\nexport function addSectionAnchors(rootEl = document) {\n  rootEl.querySelectorAll('.section-metadata').forEach((block) => {\n    [...block.children].forEach((row) => {\n      const col1 = row.children[0]?.textContent.toLowerCase().trim();\n      const col2 = row.children[1]?.textContent.toLowerCase().trim().replaceAll(/\\s+/g, '-');\n      if (!col1 || !col2 || col1 !== 'anchor') return;\n      block.parentElement.setAttribute('id', col2);\n    });\n  });\n}\n\nexport function handleCommands(\n  commands,\n  rootEl = document,\n  forceInline = false,\n  forceRootEl = false,\n) {\n  const section1 = document.querySelector('main > div');\n  addSectionAnchors(rootEl);\n  commands.forEach((cmd) => {\n    const { action, content, selector } = cmd;\n    cmd.content = forceInline && getSelectorType(content) === 'fragment' ? addHash(content, INLINE_HASH) : content;\n    if (selector.startsWith(IN_BLOCK_SELECTOR_PREFIX)) {\n      registerInBlockActions(cmd);\n      cmd.selectorType = IN_BLOCK_SELECTOR_PREFIX;\n      return;\n    }\n    const {\n      els,\n      modifiers,\n      attribute,\n    } = getSelectedElements(selector, rootEl, forceRootEl, action);\n\n    Object.assign(cmd, { modifiers, attribute });\n\n    els?.forEach((el) => {\n      if (!el\n        || (!(action in COMMANDS) && !(action in CREATE_CMDS))\n        || (rootEl && !rootEl.contains(el))\n        || (isPostLCP && section1?.contains(el))) return;\n\n      if (action in COMMANDS) {\n        COMMANDS[action](el, cmd);\n        return;\n      }\n      const insertAnchor = getSelectorType(selector) === 'fragment' ? el.parentElement : el;\n      insertAnchor?.insertAdjacentElement(\n        CREATE_CMDS[action],\n        createContent(insertAnchor, cmd),\n      );\n    });\n    if ((els.length && !cmd.modifiers.includes(FLAGS.all))\n      || !cmd.modifiers.includes(FLAGS.includeFragments)) {\n      cmd.completed = true;\n    }\n  });\n  deleteMarkedEls(rootEl);\n  return commands.filter((cmd) => !cmd.completed\n    && cmd.selectorType !== IN_BLOCK_SELECTOR_PREFIX);\n}\n\nconst getVariantInfo = (line, variantNames, variants, manifestPath, fTargetId) => {\n  const config = getConfig();\n  let manifestId = getFileName(manifestPath);\n  let targetId = manifestId.replace('.json', '');\n  if (fTargetId) targetId = fTargetId;\n  if (!config.mep?.preview) manifestId = false;\n  // retro support\n  const action = line.action?.toLowerCase()\n    .replace('content', '').replace('fragment', '').replace('tosection', '');\n  if (!action) {\n    log('Row found with empty action field: ', line);\n    return;\n  }\n  const pageFilter = line['page filter'] || line['page filter optional'];\n  const { selector } = line;\n\n  if (pageFilter && !matchGlob(pageFilter, new URL(window.location).pathname)) return;\n\n  if (!config.mep?.preview) manifestId = false;\n  const { origin } = PAGE_URL;\n  variantNames.forEach((vn) => {\n    const targetManifestId = vn.includes(TARGET_EXP_PREFIX) ? targetId : false;\n    if (!line[vn] || line[vn].toLowerCase() === 'false') return;\n\n    const variantInfo = {\n      action,\n      selector,\n      pageFilter,\n      content: line[vn],\n      selectorType: getSelectorType(selector),\n      manifestId,\n      targetManifestId,\n    };\n\n    if (action in COMMANDS && variantInfo.selectorType === 'fragment') {\n      variants[vn].fragments.push({\n        selector: normalizePath(variantInfo.selector.split(' #_')[0]),\n        val: normalizePath(line[vn]),\n        action,\n        manifestId,\n        targetManifestId,\n      });\n    } else if (GLOBAL_CMDS.includes(action)) {\n      variants[vn][action] = variants[vn][action] || [];\n\n      if (action === 'useblockcode') {\n        const { blockSelector, blockTarget } = getBlockProps(line[vn], config, origin);\n        variants[vn][action].push({\n          selector: blockSelector,\n          val: blockTarget,\n          pageFilter,\n          manifestId,\n          targetManifestId,\n        });\n      } else {\n        variants[vn][action].push({\n          selector: normalizePath(selector),\n          val: normalizePath(line[vn]),\n          pageFilter,\n          manifestId,\n          targetManifestId,\n        });\n      }\n    } else if (action in COMMANDS || action in CREATE_CMDS) {\n      variants[vn].commands.push(variantInfo);\n    }\n  });\n};\n\nexport function parseManifestVariants(data, manifestPath, targetId) {\n  if (!data?.length) return null;\n\n  const manifestConfig = {};\n  const experiences = data.map((d) => normalizeKeys(d));\n\n  try {\n    const variants = {};\n    const variantNames = Object.keys(experiences[0])\n      .filter((vn) => !MANIFEST_KEYS.includes(vn));\n\n    variantNames.forEach((vn) => {\n      variants[vn] = { commands: [], fragments: [] };\n    });\n\n    experiences.forEach((line) => {\n      getVariantInfo(line, variantNames, variants, manifestPath, targetId);\n    });\n\n    manifestConfig.variants = variants;\n    manifestConfig.variantNames = variantNames;\n    const config = getConfig();\n    if (!config.mep?.preview) manifestConfig.manifestId = false;\n\n    return manifestConfig;\n  } catch (e) {\n    /* c8 ignore next 3 */\n    log('error parsing personalization manifestConfig:', e, experiences);\n  }\n  return null;\n}\n\nexport async function createMartechMetadata(placeholders, config, column) {\n  if (config.locale.ietf === 'en-US') return;\n\n  await import('../../martech/attributes.js').then(({ processTrackingLabels }) => {\n    config.mep.analyticLocalization ??= {};\n\n    placeholders.forEach((item, i) => {\n      const firstRow = placeholders[i];\n      let usValue = firstRow[US_GEO] || firstRow.us || firstRow.en || firstRow.key;\n\n      if (!usValue) return;\n\n      usValue = processTrackingLabels(usValue);\n      const translatedValue = processTrackingLabels(item[column]);\n      config.mep.analyticLocalization[translatedValue] = usValue;\n    });\n  });\n}\nconst matchesCountryChoiceOrIP = (name, config) => {\n  if (!name.includes('countrychoice') && !name.includes('countryip')) return false;\n  const countryList = name.match(/\\(([^)]+)\\)/)?.[1]?.split(',').map((c) => (c).trim());\n  if (!countryList?.length) return false;\n  const { countryChoice, countryIP } = config.mep;\n  const testCountry = name.includes('countrychoice') ? countryChoice : countryIP;\n  return countryList.includes(testCountry);\n};\n\nfunction hasCountryMatch(str, config) {\n  if (str.includes('countrychoice') || str.includes('countryip')) {\n    const modifiedStr = str.replace('uk', 'gb');\n    return matchesCountryChoiceOrIP(modifiedStr, config);\n  }\n  return false;\n}\n/* c8 ignore start */\nexport function parsePlaceholders(placeholders, config, selectedVariantName = '') {\n  if (!placeholders?.length || selectedVariantName === 'default') return config;\n  const { countryIP, countryChoice } = config.mep || {};\n  const valueNames = [\n    selectedVariantName.toLowerCase(),\n    config.mep?.prefix,\n    config.locale.region.toLowerCase(),\n    ...(countryIP ? [`countryip(${countryIP})`] : []),\n    ...(countryChoice ? [`countrychoice(${countryChoice})`] : []),\n    config.locale.ietf.toLowerCase(),\n    ...config.locale.ietf.toLowerCase().split('-'),\n    'value',\n    'other',\n  ];\n  const keys = placeholders?.length ? Object.entries(placeholders[0]) : [];\n  const keyVal = keys.find(([key]) => {\n    const modifiedStr = key.toLowerCase();\n    return valueNames.includes(modifiedStr) || hasCountryMatch(modifiedStr, config);\n  });\n  const key = keyVal?.[0];\n\n  if (key) {\n    const results = placeholders.reduce((res, item) => {\n      res[item.key] = item[key];\n      return res;\n    }, {});\n    config.placeholders = { ...(config.placeholders || {}), ...results };\n  }\n\n  createMartechMetadata(placeholders, config, key);\n\n  return config;\n}\n\nconst checkForParamMatch = (paramStr) => {\n  const [name, val] = paramStr.split('param-')[1].split('=');\n  if (!name) return false;\n  const params = new URLSearchParams(\n    Array.from(PAGE_URL.searchParams, ([key, value]) => [key.toLowerCase(), value?.toLowerCase()]),\n  );\n  const searchParamVal = params.get(name.toLowerCase());\n  if (searchParamVal !== null) {\n    if (val) return val === searchParamVal;\n    return true; // if no val is set, just check for existence of param\n  }\n  return false;\n};\n\nexport const checkForPreviousPageMatch = (previousPageStr, lastVisitedPage = document.referrer) => {\n  if (!lastVisitedPage) return false;\n  const previousPageString = previousPageStr.toLowerCase().split('previouspage-')[1];\n  return matchGlob(previousPageString, new URL(lastVisitedPage).pathname);\n};\n\nfunction trimNames(arr) {\n  return arr.map((v) => v.trim()).filter(Boolean);\n}\nexport function buildVariantInfo(variantNames) {\n  return variantNames.reduce((acc, name) => {\n    let nameArr = [name];\n    if (!name.startsWith(TARGET_EXP_PREFIX)) nameArr = name.split(/,(?![^(]*\\))/);\n    acc[name] = trimNames(nameArr);\n    acc.allNames = [...acc.allNames, ...trimNames(name.split(/(?:\\([^)]*\\))?,|&|\\bnot\\b/))];\n    return acc;\n  }, { allNames: [] });\n}\n\nconst getXLGListURL = (config) => {\n  const sheet = config.env?.name === 'prod' ? 'prod' : 'stage';\n  return `https://www.adobe.com/federal/assets/data/mep-xlg-tags.json?sheet=${sheet}`;\n};\n\nexport const getEntitlementMap = async () => {\n  const config = getConfig();\n  if (config.mep?.entitlementMap) return config.mep.entitlementMap;\n  const entitlementUrl = getXLGListURL(config);\n  const fetchedData = await fetchData(entitlementUrl, DATA_TYPE.JSON);\n  if (!fetchedData) return config.consumerEntitlements || {};\n  const entitlements = {};\n  fetchedData?.data?.forEach((ent) => {\n    const { id, tagname } = ent;\n    entitlements[id] = tagname;\n  });\n  config.mep ??= {};\n  config.mep.entitlementMap = { ...config.consumerEntitlements, ...entitlements };\n  return config.mep.entitlementMap;\n};\n\nexport const getEntitlements = async (data) => {\n  const entitlementMap = await getEntitlementMap();\n\n  return data.flatMap((destination) => {\n    const ents = destination.segments?.flatMap((segment) => {\n      const entMatch = entitlementMap[segment.id];\n      return entMatch ? [entMatch] : [];\n    });\n\n    return ents || [];\n  });\n};\n\nfunction normCountry(country) {\n  return (country.toLowerCase() === 'uk' ? 'gb' : country.toLowerCase()).split('_')[0];\n}\nasync function setMepCountry(config) {\n  const urlParams = new URLSearchParams(window.location.search);\n  const country = urlParams.get('country') || (document.cookie.split('; ').find((row) => row.startsWith('international='))?.split('=')[1]);\n  const akamaiCode = urlParams.get('akamaiLocale')?.toLowerCase() || sessionStorage.getItem('akamai');\n  config.mep = config.mep || {};\n  if (country) {\n    config.mep.countryChoice = normCountry(country);\n  }\n  if (akamaiCode) {\n    config.mep.countryIP = normCountry(akamaiCode);\n  }\n  if (!config.mep.countryChoice && config.mep.countryIP) {\n    config.mep.countryChoice = config.mep.countryIP;\n  } else if (!config.mep.countryIP && config.mep.countryIPPromise) {\n    try {\n      let countryIP = await config.mep.countryIPPromise;\n      if (countryIP) {\n        countryIP = countryIP === 'uk' ? 'gb' : countryIP.split('_')[0];\n        config.mep.countryIP = countryIP;\n        if (!config.mep.countryChoice) config.mep.countryChoice = countryIP;\n      }\n    } catch (e) {\n      log('MEP Error: Unable to get user country');\n    }\n  }\n}\n\nasync function getPersonalizationVariant(\n  manifestPath,\n  variantNames = [],\n  variantLabel = null,\n) {\n  const config = getConfig();\n  if (config.mep?.variantOverride?.[manifestPath]) {\n    return config.mep.variantOverride[manifestPath];\n  }\n\n  const variantInfo = buildVariantInfo(variantNames);\n\n  const entitlementKeys = Object.values(await getEntitlementMap());\n  const hasEntitlementTag = entitlementKeys.some((tag) => variantInfo.allNames.includes(tag));\n\n  let userEntitlements = [];\n  if (hasEntitlementTag) {\n    if (config?.mep?.enablePersV2) {\n      userEntitlements = [];\n    } else {\n      userEntitlements = await config.entitlements();\n    }\n  }\n\n  const hasMatch = (name) => {\n    if (!name) return true;\n    if (name === variantLabel?.toLowerCase()) return true;\n    if (name.startsWith('param-')) return checkForParamMatch(name);\n    if (name.toLowerCase().startsWith('previouspage-')) return checkForPreviousPageMatch(name);\n    if (hasCountryMatch(name, config)) return true;\n    if (userEntitlements?.includes(name)) return true;\n    return PERSONALIZATION_KEYS.includes(name) && PERSONALIZATION_TAGS[name]();\n  };\n\n  const matchVariant = (n) => {\n    // split before checks\n    const name = n.includes(':') ? n.split(':')[1] : n;\n    if (name.startsWith(TARGET_EXP_PREFIX)) return hasMatch(name);\n    const processedList = name.split('&').map((condition) => {\n      const reverse = condition.trim().startsWith(COLUMN_NOT_OPERATOR);\n      const match = hasMatch(condition.replace(COLUMN_NOT_OPERATOR, '').trim());\n      return reverse ? !match : match;\n    });\n    return !processedList.includes(false);\n  };\n\n  if (config.mep?.geoLocation) {\n    await setMepCountry(config);\n  }\n\n  const matchingVariant = variantNames.find((variant) => variantInfo[variant].some(matchVariant));\n  return matchingVariant;\n}\n\nconst createDefaultExperiment = (manifest) => ({\n  disabled: manifest.disabled,\n  event: manifest.event,\n  manifest: manifest.manifestPath,\n  executionOrder: '1-1',\n  selectedVariant: { commands: [], fragments: [] },\n  selectedVariantName: 'default',\n  variantNames: ['all'],\n  variants: {},\n  source: ['promo'],\n});\n\nexport const addMepAnalytics = (config, header) => {\n  config.mep?.experiments?.forEach((experiment) => {\n    experiment?.selectedVariant?.useblockcode?.forEach(({ selector, targetManifestId }) => {\n      if (selector && targetManifestId) {\n        document.querySelectorAll(`.${selector}`)\n          .forEach((el) => (el.dataset.adobeTargetTestid = targetManifestId));\n      }\n    });\n    if (header) {\n      experiment?.selectedVariant?.updatemetadata?.forEach((updateMetaData) => {\n        if (updateMetaData?.selector === 'gnav-source' && updateMetaData.targetManifestId) {\n          header.dataset.adobeTargetTestid = updateMetaData.targetManifestId;\n        }\n      });\n    }\n  });\n};\nexport async function getManifestConfig(info = {}, variantOverride = false) {\n  const {\n    name,\n    manifestData,\n    manifestPath,\n    manifestUrl,\n    manifestPlaceholders,\n    manifestInfo,\n    variantLabel,\n    disabled,\n    event,\n    source,\n  } = info;\n  if (disabled && (!variantOverride || !Object.keys(variantOverride).length)) {\n    return createDefaultExperiment(info);\n  }\n  let data = manifestData;\n  if (!data) {\n    const fetchedData = await fetchData(manifestPath, DATA_TYPE.JSON);\n    if (fetchData) data = fetchedData;\n  }\n\n  const persData = data?.experiences?.data || data?.data || data;\n  if (!persData) return null;\n  const infoTab = manifestInfo || data?.info?.data;\n  const infoObj = infoTab?.reduce((acc, item) => {\n    acc[item.key] = item.value;\n    return acc;\n  }, {});\n  const manifestOverrideName = infoObj?.['manifest-override-name']?.toLowerCase();\n  const targetId = name || manifestOverrideName;\n  const manifestConfig = parseManifestVariants(persData, manifestPath, targetId);\n\n  if (!manifestConfig) {\n    /* c8 ignore next 3 */\n    log('Error loading personalization manifestConfig: ', name || manifestPath);\n    return null;\n  }\n  const infoKeyMap = {\n    'manifest-type': ['Personalization', 'Promo', 'Test'],\n    'manifest-execution-order': ['First', 'Normal', 'Last'],\n  };\n  if (infoTab) {\n    manifestConfig.manifestType = infoObj?.['manifest-type']?.toLowerCase();\n    if (manifestConfig.manifestType === TRACKED_MANIFEST_TYPE) {\n      manifestConfig.manifestOverrideName = manifestOverrideName;\n      const analytics = manifestOverrideName || getFileName(manifestPath).replace('.json', '');\n      manifestConfig.analyticsTitle = analytics.trim().slice(0, 15);\n    }\n    const executionOrder = {\n      'manifest-type': 1,\n      'manifest-execution-order': 1,\n    };\n    Object.keys(infoObj).forEach((key) => {\n      if (!infoKeyMap[key]) return;\n      const index = infoKeyMap[key].indexOf(infoObj[key]);\n      executionOrder[key] = index > -1 ? index : 1;\n    });\n    manifestConfig.executionOrder = `${executionOrder['manifest-execution-order']}-${executionOrder['manifest-type']}`;\n  } else {\n    // eslint-disable-next-line prefer-destructuring\n    manifestConfig.manifestType = infoKeyMap['manifest-type'][1];\n    manifestConfig.executionOrder = '1-1';\n  }\n\n  manifestConfig.manifestPath = normalizePath(manifestPath);\n  manifestConfig.selectedVariantName = await getPersonalizationVariant(\n    manifestConfig.manifestPath,\n    manifestConfig.variantNames,\n    variantLabel,\n  );\n\n  manifestConfig.placeholderData = manifestPlaceholders || data?.placeholders?.data;\n  manifestConfig.name = name;\n  manifestConfig.manifest = manifestPath;\n  manifestConfig.manifestUrl = manifestUrl;\n  manifestConfig.disabled = disabled;\n  manifestConfig.event = event;\n  if (source?.length) manifestConfig.source = source;\n  return manifestConfig;\n}\n\nconst normalizeFragPaths = ({ selector, val, action, manifestId, targetManifestId }) => ({\n  selector: normalizePath(selector),\n  val: normalizePath(val),\n  action,\n  manifestId,\n  targetManifestId,\n});\nexport async function categorizeActions(experiment, config) {\n  if (!experiment) return null;\n  const { manifestPath, selectedVariant } = experiment;\n  if (!selectedVariant || selectedVariant === 'default') return { experiment };\n\n  // only one replacepage can be defined\n  const { replacepage } = selectedVariant;\n  // eslint-disable-next-line prefer-destructuring\n  if (selectedVariant.replacepage?.length) config.mep.replacepage = replacepage[0];\n\n  selectedVariant.insertscript?.map((script) => loadScript(script.val));\n  selectedVariant.updatemetadata?.map((metadata) => setMetadata(metadata));\n\n  selectedVariant.fragments &&= selectedVariant.fragments.map(normalizeFragPaths);\n\n  return {\n    manifestPath,\n    experiment,\n    blocks: selectedVariant.useblockcode,\n    fragments: selectedVariant.fragments,\n    commands: selectedVariant.commands,\n  };\n}\n\nfunction parseMepParam(mepParam) {\n  if (!mepParam) return false;\n  const mepObject = Object.create(null);\n  const decodedParam = decodeURIComponent(mepParam);\n  decodedParam.split('---').forEach((item) => {\n    const pair = item.trim().split('--');\n    if (pair.length > 1) {\n      const [manifestPath, selectedVariant] = pair;\n      mepObject[manifestPath] = selectedVariant;\n    }\n  });\n\n  return mepObject;\n}\n\nfunction compareExecutionOrder(a, b) {\n  if (a.executionOrder === b.executionOrder) return 0;\n  return a.executionOrder > b.executionOrder ? 1 : -1;\n}\n\nexport function cleanAndSortManifestList(manifests, config = getConfig()) {\n  const manifestObj = {};\n  let allManifests = manifests;\n  let targetManifestWinsOverServerManifest = false;\n  if (config.mep?.experiments) allManifests = [...manifests, ...config.mep.experiments];\n  allManifests.forEach((manifest) => {\n    try {\n      if (!manifest?.manifest) return;\n      if (!manifest.manifestPath) manifest.manifestPath = normalizePath(manifest.manifest);\n      if (manifest.source && !manifest.source.includes('target')) manifest.manifest = normalizePath(manifest.manifest);\n      if (manifest.manifestPath in manifestObj) {\n        let fullManifest = manifestObj[manifest.manifestPath];\n        let freshManifest = manifest;\n        if (manifest.name) {\n          fullManifest = manifest;\n          freshManifest = manifestObj[manifest.manifestPath];\n        }\n        freshManifest.source = freshManifest.source.concat(fullManifest.source);\n        freshManifest.name = fullManifest.name;\n        freshManifest.selectedVariantName = fullManifest.selectedVariantName;\n        targetManifestWinsOverServerManifest = config?.env?.name === 'prod' && fullManifest.selectedVariantName.startsWith('target-');\n\n        if (targetManifestWinsOverServerManifest) {\n          freshManifest.variants = fullManifest.variants;\n          freshManifest.placeholderData = fullManifest.placeholderData;\n        }\n\n        freshManifest.selectedVariant = freshManifest.variants[freshManifest.selectedVariantName];\n        manifestObj[manifest.manifestPath] = freshManifest;\n      } else {\n        manifestObj[manifest.manifestPath] = manifest;\n      }\n\n      const manifestConfig = manifestObj[manifest.manifestPath];\n      const { selectedVariantName, variantNames, placeholderData } = manifestConfig;\n\n      if (selectedVariantName && variantNames.includes(selectedVariantName)) {\n        manifestConfig.selectedVariant = manifestConfig.variants[selectedVariantName];\n      } else {\n        /* c8 ignore next 2 */\n        manifestConfig.selectedVariantName = 'default';\n        manifestConfig.selectedVariant = 'default';\n      }\n      parsePlaceholders(placeholderData, getConfig(), manifestConfig.selectedVariantName);\n    } catch (e) {\n      log(`MEP Error parsing manifests: ${e.toString()}`);\n      window.lana?.log(`MEP Error parsing manifests: ${e.toString()}`);\n    }\n  });\n  Object.keys(manifestObj).forEach((key) => {\n    delete manifestObj[key].variants;\n  });\n  return Object.values(manifestObj).sort(compareExecutionOrder);\n}\n\nexport function handleFragmentCommand(command, a) {\n  const { action, fragment, manifestId, targetManifestId } = command;\n  const addInline = (a.href.includes(INLINE_HASH) && !fragment.includes(INLINE_HASH));\n  if (action === COMMANDS_KEYS.replace) {\n    a.href = fragment;\n    if (addInline) a.href += `#${INLINE_HASH}`;\n    addIds(a, manifestId, targetManifestId);\n    return fragment;\n  }\n  if (action === COMMANDS_KEYS.remove) {\n    a.parentElement.remove();\n  }\n  return false;\n}\n\nexport function parseNestedPlaceholders({ placeholders }) {\n  if (!placeholders) return;\n  Object.entries(placeholders).forEach(([key, value]) => {\n    placeholders[key] = replacePlaceholders(value, placeholders);\n  });\n}\n\nexport async function applyPers({ manifests }) {\n  if (!manifests?.length) return;\n  let experiments = manifests;\n  const config = getConfig();\n  for (let i = 0; i < experiments.length; i += 1) {\n    experiments[i] = await getManifestConfig(\n      experiments[i],\n      config.mep?.variantOverride,\n    );\n  }\n  experiments = cleanAndSortManifestList(experiments, config);\n  parseNestedPlaceholders(config);\n\n  let results = [];\n\n  for (const experiment of experiments) {\n    const result = await categorizeActions(experiment, config);\n    if (result) results.push(result);\n  }\n  results = results.filter(Boolean);\n\n  config.mep.experiments = [...config.mep.experiments, ...experiments];\n  config.mep.blocks = consolidateObjects(results, 'blocks', config.mep.blocks);\n  config.mep.fragments = consolidateObjects(results, 'fragments', config.mep.fragments);\n  config.mep.commands = consolidateArray(results, 'commands', config.mep.commands);\n\n  const main = document.querySelector('main');\n  if (config.mep.replacepage && !isPostLCP && main) {\n    await replaceInner(config.mep.replacepage.val, main);\n    const { manifestId, targetManifestId } = config.mep.replacepage;\n    addIds(main, manifestId, targetManifestId);\n  }\n\n  config.mep.commands = handleCommands(config.mep.commands);\n\n  const pznList = results.filter((r) => (r.experiment?.manifestType === TRACKED_MANIFEST_TYPE));\n  if (!pznList.length) return;\n\n  const pznVariants = pznList.map((r) => {\n    const val = r.experiment.selectedVariantName.replace(TARGET_EXP_PREFIX, '').trim().slice(0, 15);\n    const arr = val.split(':');\n    if (arr.length > 2 || arr[0]?.trim() === '' || arr[1]?.trim() === '') {\n      log('MEP Error: When using (optional) column nicknames, please use the following syntax: \"<nickname>: <original audience>\"');\n    }\n    if (!val.includes(':') || val.startsWith(':')) return val === 'default' ? 'nopzn' : val;\n    return arr[0].trim();\n  });\n  const pznManifests = pznList.map((r) => r.experiment.analyticsTitle);\n  config.mep.martech = `|${pznVariants.join('--')}|${pznManifests.join('--')}`;\n}\n\nfunction parseManifestUrlAndAddSource(manifestString, source) {\n  if (!manifestString) return [];\n  return manifestString.toLowerCase()\n    .split(/,|(\\s+)|(\\\\n)/g)\n    .filter((path) => path?.trim())\n    .map((manifestPath) => ({ manifestPath, source: [source] }));\n}\n\nexport const combineMepSources = async (\n  persEnabled,\n  rocPersEnabled,\n  promoEnabled,\n  mepParam,\n) => {\n  let persManifests = [];\n\n  if (persEnabled) {\n    persManifests = parseManifestUrlAndAddSource(persEnabled, 'pzn');\n  }\n\n  if (rocPersEnabled) {\n    const rocPersManifest = parseManifestUrlAndAddSource(rocPersEnabled, 'pzn-roc');\n    persManifests = persManifests.concat(rocPersManifest);\n  }\n\n  if (promoEnabled) {\n    const { default: getPromoManifests } = await import('./promo-utils.js');\n    persManifests = persManifests.concat(getPromoManifests(promoEnabled, PAGE_URL.searchParams));\n  }\n\n  if (mepParam && mepParam !== 'off') {\n    const persManifestPaths = persManifests.map((manifest) => {\n      const { manifestPath } = manifest;\n      if (manifestPath?.startsWith('/')) return manifestPath;\n      try {\n        const url = new URL(manifestPath);\n        return url.pathname;\n      } catch (e) {\n        return manifestPath;\n      }\n    });\n\n    mepParam.split('---').forEach((manifestPair) => {\n      const manifestPath = manifestPair.trim().toLowerCase().split('--')[0];\n      if (!persManifestPaths.includes(manifestPath)) {\n        persManifests.push({ manifestPath, source: ['mep param'] });\n      }\n    });\n  }\n  return persManifests;\n};\n\nasync function updateManifestsAndPropositions(\n  { config, targetAjoManifests, targetAjoPropositions },\n) {\n  targetAjoManifests.forEach((manifest) => {\n    manifest.source = [config.mep.ajoEnabled ? 'ajo' : 'target'];\n  });\n  config.mep.targetAjoManifests = targetAjoManifests;\n  if (config.mep.enablePersV2) {\n    window.addEventListener('alloy_sendEvent', () => {\n      if (targetAjoPropositions?.length && window._satellite) {\n        window._satellite.track('propositionDisplay', targetAjoPropositions);\n      }\n    }, { once: true });\n  } else if (targetAjoPropositions?.length && window._satellite) {\n    window._satellite.track('propositionDisplay', targetAjoPropositions);\n  }\n  if (config.mep.targetEnabled === 'postlcp') {\n    const event = new CustomEvent(MARTECH_RETURNED_EVENT, { detail: 'Martech returned' });\n    window.dispatchEvent(event);\n  }\n  return targetAjoManifests;\n}\n\nfunction roundToQuarter(num) {\n  return Math.ceil(num / 250) / 4;\n}\n\nfunction calculateResponseTime(responseStart) {\n  const responseTime = Date.now() - responseStart;\n  return roundToQuarter(responseTime);\n}\n\nfunction sendTargetResponseAnalytics(failure, responseStart, timeoutLocal, message) {\n  // temporary solution until we can decide on a better timeout value\n  const responseTime = calculateResponseTime(responseStart);\n  const timeoutTime = roundToQuarter(timeoutLocal);\n  let val = `target response time ${responseTime}:timed out ${failure}:timeout ${timeoutTime}`;\n  if (message) val += `:${message}`;\n  // eslint-disable-next-line no-underscore-dangle\n  window.addEventListener('alloy_sendEvent', () => {\n    window._satellite?.track?.('event', {\n      documentUnloading: true,\n      xdm: {\n        eventType: 'web.webinteraction.linkClicks',\n        web: {\n          webInteraction: {\n            linkClicks: { value: 1 },\n            type: 'other',\n            name: val,\n          },\n        },\n      },\n      data:\n        { _adobe_corpnew: { digitalData: { primaryEvent: { eventInfo: { eventName: val } } } } },\n    });\n  }, { once: true });\n}\n\nconst handleAlloyResponse = (response) => ((response.propositions || response.decisions))\n  ?.map((i) => {\n    const { id } = i;\n    return i.items.map((item) => ({ ...item, id }));\n  })\n  ?.flat()\n  ?.map((item) => {\n    const content = item?.data?.content;\n    if (!content || !(content.manifestLocation || content.manifestContent)) return null;\n    return {\n      manifestPath: content.manifestLocation || content.manifestPath,\n      manifestUrl: content.manifestLocation,\n      manifestData: content.manifestContent?.experiences?.data || content.manifestContent?.data,\n      manifestPlaceholders: content.manifestContent?.placeholders?.data,\n      manifestInfo: content.manifestContent?.info.data,\n      name: item.meta?.['activity.name'] || item.id,\n      variantLabel: (item.meta?.['experience.name'] && `target-${item.meta['experience.name']}`)\n        || content.experienceName,\n      meta: item.meta,\n    };\n  })\n  ?.filter(Boolean) ?? [];\n\nasync function handleMartechTargetInteraction(\n  { config, targetInteractionPromise, calculatedTimeout },\n) {\n  const targetAjo = config.mep.ajoEnabled ? 'ajo' : 'target';\n  let targetAjoManifests = [];\n  let targetAjoPropositions = [];\n  if (config?.mep?.enablePersV2 && targetInteractionPromise) {\n    const { targetInteractionData, respTime, respStartTime } = await targetInteractionPromise;\n    sendTargetResponseAnalytics(false, respStartTime, calculatedTimeout);\n    if (targetInteractionData.result) {\n      const roundedResponseTime = roundToQuarter(respTime);\n      performance.clearMarks();\n      performance.clearMeasures();\n      try {\n        window.lana.log(`${targetAjo} response time: ${roundedResponseTime}`, {\n          tags: 'martech',\n          errorType: 'e',\n          sampleRate: 0.5,\n        });\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(`Error logging ${targetAjo} response time:`, e);\n      }\n      targetAjoManifests = handleAlloyResponse(targetInteractionData.result);\n      targetAjoPropositions = targetInteractionData.result?.propositions || [];\n    }\n  }\n\n  return updateManifestsAndPropositions(\n    { config, targetAjoManifests, targetAjoPropositions },\n  );\n}\n\nasync function callMartech(config) {\n  const { getTargetAjoPersonalization } = await import('../../martech/martech.js');\n  const {\n    targetAjoManifests,\n    targetAjoPropositions,\n  } = await getTargetAjoPersonalization(\n    { handleAlloyResponse, config, sendTargetResponseAnalytics },\n  );\n  return updateManifestsAndPropositions(\n    { config, targetAjoManifests, targetAjoPropositions },\n  );\n}\n\nconst awaitMartech = () => new Promise((resolve) => {\n  const listener = (event) => resolve(event.detail);\n  window.addEventListener(MARTECH_RETURNED_EVENT, listener, { once: true });\n});\n\nexport async function init(enablements = {}) {\n  let manifests = [];\n  const {\n    mepParam, mepHighlight, mepButton, pzn, pznroc, promo, enablePersV2,\n    target, ajo, countryIPPromise, mepgeolocation, targetInteractionPromise, calculatedTimeout,\n    postLCP,\n  } = enablements;\n  const config = getConfig();\n  if (postLCP) {\n    isPostLCP = true;\n  } else {\n    config.mep = {\n      updateFragDataProps,\n      preview: (mepButton !== 'off'\n        && (config.env?.name !== 'prod' || mepParam || mepParam === '' || mepButton)),\n      variantOverride: parseMepParam(mepParam),\n      highlight: (mepHighlight !== undefined && mepHighlight !== 'false'),\n      targetEnabled: target,\n      ajoEnabled: ajo,\n      experiments: [],\n      prefix: config.locale?.prefix.split('/')[1]?.toLowerCase() || US_GEO,\n      enablePersV2,\n      countryIPPromise,\n      geoLocation: mepgeolocation,\n      targetInteractionPromise,\n    };\n\n    manifests = manifests.concat(await combineMepSources(pzn, pznroc, promo, mepParam));\n    manifests?.forEach((manifest) => {\n      if (manifest.disabled) return;\n      const normalizedURL = normalizePath(manifest.manifestPath);\n      loadLink(normalizedURL, { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n    });\n    if (pzn || pznroc) loadLink(getXLGListURL(config), { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n  }\n\n  if (enablePersV2 && target === true) {\n    manifests = manifests.concat(await handleMartechTargetInteraction(\n      { config, targetInteractionPromise, calculatedTimeout },\n    ));\n  } else {\n    if (target === true || ajo === true) manifests = manifests.concat(await callMartech(config));\n    if (target === 'postlcp' || ajo === 'postlcp') callMartech(config);\n  }\n  if (postLCP) {\n    if (!config.mep.targetAjoManifests) await awaitMartech();\n    manifests = config.mep.targetAjoManifests;\n  }\n  try {\n    if (manifests?.length) await applyPers({ manifests });\n    if (config.mep?.preview) await import('./preview.js').then(({ saveToMmm }) => saveToMmm());\n  } catch (e) {\n    log(`MEP Error: ${e.toString()}`);\n    window.lana?.log(`MEP Error: ${e.toString()}`);\n  }\n}\n"],"names":["Y","window","screen","width","height","D","navigator","userAgent","includes","maxTouchPoints","Z","ie","T","all","chrome","firefox","safari","edge","android","ios","test","windows","mac","mobile-device","phone","tablet","desktop","loggedout","W","loggedin","be","Object","keys","F","ce","J","R","O","le","B","URL","location","href","M","includeFragments","q","ue","Q","Pe","j","JSON","TEXT","N","y","e","_n","t","arguments","length","undefined","n","ve","$","r","g","startsWith","codeRoot","concat","a","hash","s","pathname","o","c","split","i","locale","ietf","locales","prefix","replace","fe","pop","Ae","z","insertafter","insertbefore","prepend","append","x","remove","updateAttribute","P","dataset","manifestId","adobeTargetTestid","S","toLowerCase","trim","V","placeholders","match","forEach","xe","createFrag","_e$parentElement","classList","add","f","search","u","p","C","parentElement","closest","nodeName","document","querySelector","contains","Le","I","H","as","crossorigin","rel","pe","createContent","_ref","content","targetManifestId","action","modifiers","setAttribute","getUpdatedHref","getAttribute","Ce","innerHTML","k","_ref2","insertAdjacentElement","attribute","l","URLSearchParams","set","toString","console","log","message","v","_g$mep","mep","preview","_","async","fetch","ok","status","Error","statusText","Te","reduce","ee","_a$t","selector","val","fragment","manifestPath","de","matchGlob","RegExp","Me","endsWith","decorateArea","ke","head","Ie","$e","te","updateEndNumber","Ne","section","Re","sel","shift","push","_e","join","replaceAll","map","modifiedSelector","Ve","addHash","origin","ne","setDataIdOnChildren","children","Ue","updateFragDataProps","We","querySelectorAll","De","_n$children$","_n$children$2","textContent","ze","_r$mep","_r$mep$inBlock","_r$mep$inBlock2","_r$mep$inBlock2$n","_r$mep$inBlock$n3","_r$mep$inBlock$n3$com","substring","inBlock","slice","get","_r$mep$inBlock$n","_r$mep$inBlock$n$frag","fragments","_r$mep$inBlock$n2","_r$mep$inBlock$n2$fra","commands","Oe","selectorType","els","je","assign","h","completed","filter","Fe","getVariantInfo","_s$mep","_e$action","_s$mep2","w","pageFilter","blockSelector","E","blockTarget","m","getBlockProps","_r","_r2","_r3","_r4","miloLibs","Se","Be","_g$mep2","variants","variantNames","qe","then","_ref3","_t$mep","_t$mep$analyticLocali","processTrackingLabels","analyticLocalization","us","en","key","Ke","matchesCountryChoiceOrIP","_e$match","countryChoice","countryIP","me","Ge","_t$mep2","_find","region","entries","find","_ref4","He","Array","from","searchParams","_ref5","Xe","referrer","re","Boolean","Ye","allNames","he","_e$env","env","name","ge","_e$mep","_n$data","_e$mep2","entitlementMap","consumerEntitlements","data","id","tagname","dt","flatMap","_n$segments","segments","ae","Je","_r$mep2","_r$mep3","_r$mep4","variantOverride","values","some","enablePersV2","entitlements","_c","geoLocation","_document$cookie$spli","_t$get","cookie","sessionStorage","getItem","countryIPPromise","Ze","Qe","disabled","event","manifest","executionOrder","selectedVariant","selectedVariantName","source","mt","addMepAnalytics","_e$mep3","experiments","_n$selectedVariant","_n$selectedVariant2","useblockcode","_ref6","updatemetadata","et","_p","_p2","_p3","_E$manifestOverride","_p4","manifestData","manifestUrl","manifestPlaceholders","manifestInfo","variantLabel","A","experiences","info","b","value","d","U","_E$manifestType","manifestType","manifestOverrideName","analyticsTitle","G","indexOf","placeholderData","tt","_ref7","nt","_r$replacepage","_r$insertscript","_r$updatemetadata","experiment","replacepage","insertscript","X","blocks","rt","create","decodeURIComponent","at","st","_t$mep3","_t$env","_window$lana","lana","sort","ht","ot","_ref8","_ref9","it","_ref10","manifests","_n$mep","_i$experiment","_f$","_f$2","martech","se","ct","default","ye","_ref11","config","targetAjoManifests","targetAjoPropositions","ajoEnabled","addEventListener","_satellite","track","once","targetEnabled","CustomEvent","detail","dispatchEvent","K","Math","ceil","we","Date","now","lt","_window$_satellite","_window$_satellite$tr","call","documentUnloading","xdm","eventType","web","webInteraction","linkClicks","type","_adobe_corpnew","digitalData","primaryEvent","eventInfo","eventName","Ee","_map$flat$map$filter","_ref12","propositions","decisions","items","flat","_t$data","_n$manifestContent","_n$manifestContent2","_n$manifestContent3","_n$manifestContent4","_t$meta","_t$meta2","manifestLocation","manifestContent","meta","experienceName","oe","getTargetAjoPersonalization","handleAlloyResponse","sendTargetResponseAnalytics","ft","awaitMartech","Promise","gt","_m$env","_m$locale","_t","mepParam","mepHighlight","mepButton","pzn","pznroc","promo","target","ajo","mepgeolocation","targetInteractionPromise","calculatedTimeout","postLCP","highlight","L","_ref13","_e$mep4","targetInteractionData","respTime","respStartTime","result","_o$result","performance","clearMarks","clearMeasures","tags","errorType","sampleRate","error","ut","_t2","_m$mep","_ref14","saveToMmm","_window$lana2"],"sourceRoot":""}