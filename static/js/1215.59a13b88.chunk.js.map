{"version":3,"file":"static/js/1215.59a13b88.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/blocks/global-navigation/utilities/menu/menu.js"],"sourcesContent":["import {\n  decorateCta,\n  fetchAndProcessPlainHtml,\n  getActiveLink,\n  getAnalyticsValue,\n  icons,\n  isDesktop,\n  logErrorFor,\n  selectors,\n  setActiveDropdown,\n  toFragment,\n  trigger,\n  yieldToMain,\n  addMepHighlightAndTargetId,\n  getAsyncDropdownCount,\n  setActiveLink,\n  getDisableAEDState,\n  hasActiveLink,\n} from '../utilities.js';\n\nconst decorateHeadline = (elem, index) => {\n  if (!(elem instanceof HTMLElement)) return null;\n\n  const headline = toFragment`<div class=\"feds-menu-headline\">\n      ${elem.textContent.trim()}\n    </div>`;\n\n  const setHeadlineAttributes = () => {\n    if (isDesktop.matches) {\n      headline.setAttribute('role', 'heading');\n      headline.removeAttribute('tabindex');\n      headline.setAttribute('aria-level', 2);\n      headline.removeAttribute('aria-haspopup', true);\n      headline.removeAttribute('aria-expanded', false);\n      headline.removeAttribute('daa-ll');\n    } else {\n      headline.setAttribute('role', 'button');\n      headline.setAttribute('tabindex', 0);\n      headline.removeAttribute('aria-level');\n      headline.setAttribute('aria-haspopup', true);\n      headline.setAttribute('aria-expanded', false);\n      headline.setAttribute('daa-ll', getAnalyticsValue(headline.textContent, index));\n    }\n  };\n\n  setHeadlineAttributes();\n  isDesktop.addEventListener('change', setHeadlineAttributes);\n\n  headline.addEventListener('click', (e) => {\n    if (isDesktop.matches) return;\n\n    trigger({ element: headline, event: e, type: 'headline' });\n    setActiveDropdown(headline);\n  });\n\n  // Since heading is turned into a div, it can be safely removed\n  elem.remove();\n\n  return headline;\n};\n\nconst decorateLinkGroup = (elem, index) => {\n  if (!(elem instanceof HTMLElement) || !elem.querySelector('a')) return '';\n\n  // TODO: allow links with image and no label\n  const image = elem.querySelector('picture');\n  const link = elem.querySelector('a');\n  const description = elem.querySelector('p:nth-child(2)');\n  const modifierClasses = [...elem.classList]\n    .filter((className) => className !== 'link-group')\n    .map((className) => `feds-navLink--${className}`);\n  const imageElem = image ? toFragment`<div class=\"feds-navLink-image\">${image}</div>` : '';\n  const descriptionElem = description ? toFragment`<div class=\"feds-navLink-description\">${description.textContent}</div>` : '';\n  const contentElem = link ? toFragment`<div class=\"feds-navLink-content\">\n      <div class=\"feds-navLink-title\">${link.textContent}</div>\n      ${descriptionElem}\n    </div>` : '';\n  const linkGroup = toFragment`<a\n    href=\"${link.href}\"\n    class=\"feds-navLink${modifierClasses.length ? ` ${modifierClasses.join(' ')}` : ''}\"\n    daa-ll=\"${getAnalyticsValue(link.textContent, index)}\">\n      ${imageElem}\n      ${contentElem}\n    </a>`;\n  if (link?.target) linkGroup.target = link.target;\n\n  return linkGroup;\n};\n\nconst decorateElements = ({ elem, className = 'feds-navLink', itemIndex = { position: 0 } } = {}) => {\n  const decorateLink = (link) => {\n    // Increase analytics index every time a link is decorated\n    itemIndex.position += 1;\n\n    // Decorate link group\n    if (link.matches('.link-group')) {\n      return decorateLinkGroup(link, itemIndex.position);\n    }\n\n    // If the link is wrapped in a 'strong' or 'em' tag, make it a CTA\n    if (link.parentElement.tagName === 'STRONG' || link.parentElement.tagName === 'EM') {\n      const type = link.parentElement.tagName === 'EM' ? 'secondaryCta' : 'primaryCta';\n      // Remove its 'em' or 'strong' wrapper\n      link.parentElement.replaceWith(link);\n\n      return decorateCta({ elem: link, type, index: itemIndex.position });\n    }\n\n    // Simple links get analytics attributes and appropriate class name\n    link.setAttribute('daa-ll', getAnalyticsValue(link.textContent, itemIndex.position));\n    link.classList.add(className);\n\n    return link;\n  };\n\n  const linkSelector = 'a, .link-group';\n\n  // If the element is a link, decorate it and return it directly\n  if (elem.matches(linkSelector)) {\n    return decorateLink(elem);\n  }\n\n  // Otherwise, this might be a collection of elements;\n  // decorate all links in the collection and return it\n  elem.querySelectorAll(linkSelector).forEach((link) => {\n    link.replaceWith(decorateLink(link));\n  });\n\n  return elem;\n};\n\nconst decorateGnavImage = (elem) => {\n  const linkElem = elem.querySelector('a');\n  const imageElem = elem.querySelector('picture');\n  const promoImageElem = linkElem instanceof HTMLElement\n    ? toFragment`<a class=\"feds-image\" href=\"${linkElem.href}\" daa-ll=\"gnav-image\">${imageElem}</a>`\n    : toFragment`<div class=\"feds-image\">${imageElem}</div>`;\n\n  elem.replaceChildren(promoImageElem);\n  return toFragment`<div class=\"feds-image-wrapper\">${elem}</div>`;\n};\n\n// Current limitation: we can only add one link\nconst decoratePromo = (elem, index) => {\n  const isDarkTheme = elem.matches('.dark');\n  const isImageOnly = elem.matches('.image-only');\n  const imageElem = elem.querySelector('picture');\n\n  if (!isImageOnly) {\n    const content = [...elem.querySelectorAll(':scope > div')]\n      .find((section) => !(section.querySelector('picture') instanceof HTMLElement));\n    content?.classList.add('feds-promo-content');\n  }\n\n  decorateElements({ elem, className: 'feds-promo-link', index });\n\n  const decorateImage = () => {\n    const linkElem = elem.querySelector('a');\n    const imageWrapper = imageElem.closest(`${selectors.gnavPromo} > div`);\n    let promoImageElem;\n\n    if (linkElem instanceof HTMLElement) {\n      promoImageElem = toFragment`<a class=\"feds-promo-image\" href=\"${linkElem.href}\" daa-ll=\"promo-image\">\n          ${imageElem}\n        </a>`;\n    } else {\n      // TODO: is there really any use-case where a promo doesn't have a link?\n      promoImageElem = toFragment`<div class=\"feds-promo-image\">\n          ${imageElem}\n        </div>`;\n    }\n\n    // If the promo is set to 'image-only',\n    // replace the whole promo content with the decorated image\n    if (isImageOnly) {\n      elem.replaceChildren(promoImageElem);\n    } else {\n    // Otherwise, just replace the image container with the decorated image\n      imageWrapper?.replaceWith(promoImageElem);\n    }\n  };\n\n  // Wrap the image in an anchor tag\n  if (imageElem instanceof HTMLElement) {\n    decorateImage();\n  }\n\n  elem.classList = 'feds-promo';\n\n  if (isDarkTheme) {\n    elem.classList.add('feds-promo--dark');\n  }\n\n  return toFragment`<div class=\"feds-promo-wrapper\" daa-lh=\"promo-card\">\n      ${elem}\n    </div>`;\n};\n\nconst decorateColumns = async ({ content, separatorTagName = 'H5' } = {}) => {\n  const hasMultipleColumns = content.children.length > 1;\n  // Headline index is defined in the context of a whole menu\n  let headlineIndex = 0;\n\n  // The resulting template structure should follow these rules:\n  // * a menu can have multiple columns;\n  // * a column can have multiple sections;\n  // * a section can have a headline and a collection of item(s)\n  for await (const column of [...content.children]) {\n    await yieldToMain();\n    const wrapperClass = hasMultipleColumns ? 'feds-menu-column' : 'feds-menu-content';\n    const itemDestinationClass = hasMultipleColumns ? 'feds-menu-section' : 'feds-menu-column';\n    const wrapper = toFragment`<div class=\"${wrapperClass}\"></div>`;\n    let itemDestination = toFragment`<div class=\"${itemDestinationClass}\"></div>`;\n    let menuItems;\n    // Item index is defined in the context of a particular column\n    const itemIndex = { position: 0 };\n\n    const resetDestination = () => {\n      // First, if the previous destination has children,\n      // append it to the wrapper\n      if (itemDestination.childElementCount) {\n        wrapper.append(itemDestination);\n      }\n\n      // Create a new destination\n      itemDestination = toFragment`<div class=\"${itemDestinationClass}\"></div>`;\n    };\n\n    while (column.children.length) {\n      await yieldToMain();\n      const columnElem = column.firstElementChild;\n\n      if (columnElem.matches(selectors.columnBreak)) {\n        resetDestination();\n        columnElem.remove();\n      } else if (columnElem.tagName === separatorTagName) {\n        headlineIndex += 1;\n        // When encountering a separator (h5 for header, h2 for footer),\n        // add the previous section to the column\n        resetDestination();\n        // If the separator splits content into columns, reset the analytics index\n        if (!hasMultipleColumns) itemIndex.position = 0;\n\n        // Analysts requested no headings in the dropdowns,\n        // turning it into a simple div\n        const sectionHeadline = decorateHeadline(columnElem, headlineIndex);\n        menuItems = toFragment`<div class=\"feds-menu-items\" daa-lh=\"${getAnalyticsValue(sectionHeadline.textContent.trim())}\"></div>`;\n\n        itemDestination.append(sectionHeadline, menuItems);\n\n        if (column.querySelector(selectors.columnBreak)) {\n          wrapper.classList.add(`${wrapperClass}--group`);\n          if (column.querySelectorAll(selectors.columnBreak).length > 1) wrapper.classList.add(`${wrapperClass}--wide`);\n\n          const wideColumn = document.createElement('div');\n          wideColumn.append(...column.childNodes);\n          menuItems.append(wideColumn);\n          await decorateColumns({ content: menuItems });\n        }\n      } else if (columnElem.matches(selectors.gnavPromo)) {\n        // When encountering a promo, add the previous section to the column\n        resetDestination();\n        // Since the promo is alone on a column, reset the analytics index\n        itemIndex.position = 0;\n\n        const promoElem = decoratePromo(columnElem, itemIndex);\n\n        itemDestination.append(promoElem);\n      } else if (columnElem.matches('.gnav-image')) {\n        resetDestination();\n        itemIndex.position = 0;\n        const imageElem = decorateGnavImage(columnElem, itemIndex);\n\n        itemDestination.append(imageElem);\n      } else {\n        const decoratedElem = decorateElements({ elem: columnElem, itemIndex });\n        columnElem.remove();\n\n        // If an items template has been previously created,\n        // add the current element to it;\n        // otherwise append the element to the section\n        const elemDestination = menuItems || itemDestination;\n        elemDestination.append(decoratedElem);\n      }\n    }\n\n    // Append the last column section to the column\n    wrapper.append(itemDestination);\n    // Replace column with parsed template\n    column.replaceWith(wrapper);\n  }\n};\n\nconst decorateCrossCloudMenu = (content) => {\n  const crossCloudMenuEl = content.querySelector('.cross-cloud-menu');\n  if (!crossCloudMenuEl) return;\n\n  decorateElements({ elem: crossCloudMenuEl });\n  crossCloudMenuEl.className = 'feds-crossCloudMenu-wrapper';\n  crossCloudMenuEl.querySelector('div').className = 'feds-crossCloudMenu';\n  crossCloudMenuEl.querySelectorAll('ul li').forEach((el, index) => {\n    if (index === 0) el.querySelector('a')?.prepend(toFragment`${icons.home}`);\n    el.className = 'feds-crossCloudMenu-item';\n  });\n\n  content.append(crossCloudMenuEl);\n};\n\n// Current limitation: after an h5 (or h2 in the case of the footer)\n// is found in a menu column, no new sections can be created without a heading\nlet asyncDropDownCount = 0;\nconst decorateMenu = (config) => logErrorFor(async () => {\n  let menuTemplate;\n  if (config.type === 'syncDropdownTrigger') {\n    const itemTopParent = config.item.closest('div');\n    // The initial heading is already part of the item template,\n    // it can be safely removed\n    const initialHeadingElem = itemTopParent.querySelector('h2');\n    itemTopParent.removeChild(initialHeadingElem);\n\n    menuTemplate = toFragment`<div class=\"feds-popup\">\n        ${itemTopParent}\n      </div>`;\n\n    await decorateColumns({ content: menuTemplate });\n  }\n\n  if (config.type === 'asyncDropdownTrigger') {\n    const pathElement = config.item.querySelector('a');\n    if (!(pathElement instanceof HTMLElement)) return;\n\n    const content = await fetchAndProcessPlainHtml({ url: pathElement.href });\n\n    if (!content) return;\n    const menuContent = toFragment`<div class=\"feds-menu-content\">${content.innerHTML}</div>`;\n    menuTemplate = toFragment`<div class=\"feds-popup\">\n        <div class=\"feds-menu-container\">\n          ${menuContent}\n        </div>\n      </div>`;\n    addMepHighlightAndTargetId(menuTemplate, content);\n\n    decorateCrossCloudMenu(menuTemplate);\n\n    await decorateColumns({ content: menuContent });\n\n    if (getActiveLink(menuTemplate) instanceof HTMLElement) {\n      // Special handling on desktop, as content is loaded async;\n      // bolding the item text would normally push the content\n      // to the right, potentially causing CLS\n      const resetActiveState = () => {\n        config.template.style.width = '';\n        config.template.classList.remove(selectors.deferredActiveNavItem.slice(1));\n      };\n\n      if (isDesktop.matches) {\n        config.template.style.width = `${config.template.offsetWidth}px`;\n        config.template.classList.add(selectors.deferredActiveNavItem.slice(1));\n        isDesktop.addEventListener('change', resetActiveState, { once: true });\n        window.addEventListener('feds:navOverflow', resetActiveState, { once: true });\n      }\n\n      config.template.classList.add(selectors.activeNavItem.slice(1));\n    }\n\n    asyncDropDownCount += 1;\n    config.template.classList.add('feds-navItem--megaMenu');\n    if (getAsyncDropdownCount() === asyncDropDownCount) {\n      if (!hasActiveLink()) {\n        const sections = document.querySelectorAll('.feds-nav .feds-navItem--megaMenu');\n        const disableAED = getDisableAEDState();\n        if (!disableAED && sections.length === 1) {\n          sections[0].classList.add(selectors.activeNavItem.slice(1));\n          setActiveLink(true);\n        }\n      }\n    }\n  }\n\n  if (config.type === 'footerMenu') {\n    await decorateColumns({ content: config.item, separatorTagName: 'H2' });\n  }\n\n  config.template?.append(menuTemplate);\n}, 'Decorate menu failed', 'errorType=info,module=gnav-menu');\n\nexport default { decorateMenu, decorateLinkGroup };\n"],"names":["decorateHeadline","elem","index","HTMLElement","headline","toFragment","_templateObject","_taggedTemplateLiteral","textContent","trim","setHeadlineAttributes","isDesktop","matches","setAttribute","removeAttribute","getAnalyticsValue","addEventListener","e","trigger","element","event","type","setActiveDropdown","remove","decorateLinkGroup","querySelector","image","link","description","modifierClasses","classList","filter","className","map","concat","imageElem","_templateObject2","descriptionElem","_templateObject3","contentElem","_templateObject4","linkGroup","_templateObject5","href","length","join","target","decorateElements","itemIndex","position","arguments","undefined","decorateLink","parentElement","tagName","replaceWith","decorateCta","add","linkSelector","querySelectorAll","forEach","decorateGnavImage","linkElem","promoImageElem","_templateObject6","_templateObject7","replaceChildren","_templateObject8","decoratePromo","isDarkTheme","isImageOnly","content","find","section","decorateImage","imageWrapper","closest","selectors","gnavPromo","_templateObject9","_templateObject10","_templateObject11","decorateColumns","async","separatorTagName","hasMultipleColumns","children","headlineIndex","column","yieldToMain","wrapperClass","itemDestinationClass","wrapper","_templateObject12","menuItems","itemDestination","_templateObject13","resetDestination","childElementCount","append","_templateObject14","columnElem","firstElementChild","columnBreak","sectionHeadline","_templateObject15","wideColumn","document","createElement","childNodes","promoElem","decoratedElem","asyncDropDownCount","menu_default","decorateMenu","config","logErrorFor","_config$template","menuTemplate","itemTopParent","item","initialHeadingElem","removeChild","_templateObject17","pathElement","fetchAndProcessPlainHtml","url","menuContent","_templateObject18","innerHTML","_templateObject19","addMepHighlightAndTargetId","crossCloudMenuEl","el","_el$querySelector","prepend","_templateObject16","icons","home","decorateCrossCloudMenu","getActiveLink","resetActiveState","template","style","width","deferredActiveNavItem","slice","offsetWidth","once","window","activeNavItem","getAsyncDropdownCount","hasActiveLink","sections","getDisableAEDState","setActiveLink"],"sourceRoot":""}