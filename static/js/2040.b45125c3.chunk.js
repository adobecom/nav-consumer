"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[2040],{2040:(e,t,n)=>{n.r(t),n.d(t,{checkAndAddMatch:()=>r,default:()=>o});n(6850);function r(e,t,n){0===e.filter((e=>!(t.end<e.start||t.start>e.end))).length&&e.length<n&&e.push(t)}async function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;const o=["zh","ko","ja","th","he"].includes(t),a=document.querySelector("main"),c=await fetch("".concat(e,"?limit=").concat(n));if(!a||!c.ok)return;const l=await c.json(),i=a.textContent.toLowerCase(),s=a.querySelectorAll("a").length,d=i.split(/\s/).length;if(Math.floor(d/100)-s<=0)return;const u=o?"":"\\b",h=(Array.isArray(l)?l:l.data).filter((e=>{let{Keyword:t}=e;return-1!==i.indexOf(t.toLowerCase())})).sort(((e,t)=>t.Keyword.length-e.Keyword.length)).map((e=>({regexp:new RegExp("".concat(u,"(").concat(e.Keyword.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),")").concat(u),"iu"),...e})));0!==h.length&&a.querySelectorAll("div > p:not([class])").forEach((e=>{const t=e.querySelectorAll("a").length,n=e.textContent.split(/\s/).length,a=Math.floor(n/40)-t;(o||a>0)&&Array.from(e.childNodes).filter((e=>e.nodeType===Node.TEXT_NODE)).forEach((t=>{const n=[];h.forEach((e=>{const o=e.regexp.exec(t.nodeValue);o&&r(n,{item:e,start:o.index,end:o.index+e.Keyword.length},a)})),n.sort(((e,t)=>t.start-e.start)).forEach((n=>{let{item:r,start:o,end:a}=n;const c=t.nodeValue,l=document.createElement("a");l.title=r.Keyword,l.href=r.URL,l.setAttribute("data-origin","interlink"),l.setAttribute("daa-ll","".concat(l.title,"--interlinks_p_").concat(r.Keyword)),l.appendChild(document.createTextNode(c.substring(o,a))),e.insertBefore(l,t.nextSibling),e.insertBefore(document.createTextNode(c.substring(a)),l.nextSibling),t.nodeValue=c.substring(0,o),h.splice(h.indexOf(r),1)}))}))}))}}}]);
//# sourceMappingURL=2040.b45125c3.chunk.js.map