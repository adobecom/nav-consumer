"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[9187],{9187:(e,t,o)=>{o.r(t),o.d(t,{PROD_BASE_URL:()=>a,REGEX_ADOBETV:()=>r,REGEX_YOUTUBE:()=>c,VIDEO_OBJECT_PROVIDERS:()=>n,appendScriptTag:()=>p,default:()=>v,getRepoByImsClientId:()=>s,getStructuredData:()=>h,getVideoObject:()=>l,logError:()=>i,parseVideoUrl:()=>d,sha256:()=>u});o(2560);var a="https://www.adobe.com/seotech/api",r=/(?:https?:\/\/)?(?:stage-)?video.tv.adobe.com\/v\/([\d]+)/,c=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([a-zA-Z0-9_-]+)/,n=[{provider:"adobe",regex:r},{provider:"youtube",regex:c}];function i(e){var t;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=[];o.bucket&&a.push("bucket:".concat(o.bucket)),o.id&&a.push("id:".concat(o.id)),o.videoUrl&&a.push("videoUrl:".concat(o.videoUrl)),o.pathname&&a.push("pathname:".concat(o.pathname));let r=a.length>0?"".concat(e," \xb6 ").concat(a.join(" \xb6 ")):e;null===(t=window.lana)||void 0===t||t.log("SEOTECH: ".concat(r),{debug:!1,sampleRate:100,tags:"seotech",severity:"error"})}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;for(let{regex:o,provider:a}of t){let t=e.match(o);if(t)return{provider:a,id:t[1]}}return null}async function l(e){let{baseUrl:t=a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=d(e);if(!o)throw new Error("Invalid video url: ".concat(e));let{provider:r,id:c}=o,n="".concat(t,"/json-ld/types/video-object/providers/").concat(r,"/").concat(c),i=await fetch(n,{headers:{"Content-Type":"application/json"}}),l=await(null===i||void 0===i?void 0:i.json());if(!i.ok)throw new Error("Failed to fetch video: ".concat((null===l||void 0===l?void 0:l.error)||i.statusText," (Status: ").concat(i.status,")"));return l.videoObject}function s(e){return{"adobedotcom-cc":"cc",acrobatmilo:"dc",bacom:"bacom",homepage_milo:"homepage",milo:"milo"}[e]}async function u(e){let t=(new TextEncoder).encode(e),o=await window.crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(o)).map((e=>e.toString(16).padStart(2,"0"))).join("")}async function h(e,t){let{baseUrl:o=a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)throw new Error("bucket and id are required. Received: bucket=".concat(e,", id=").concat(t));let r="".concat(o,"/structured-data/").concat(e,"/").concat(t),c=await fetch(r);if(!c)throw new Error("Network error: No response received");if(!c.ok)throw new Error("HTTP ".concat(c.status,": ").concat(c.statusText));return await c.json()}async function p(e){let{locationUrl:t,getMetadata:o,createTag:a,getConfig:r}=e,c=new URL(t),n=new URLSearchParams(c.search).get("seotech-api-base-url")||void 0,d=(e,t)=>{if(!e)return;let o={type:"application/ld+json"};t&&(o.class=t);let r=a("script",o,JSON.stringify(e));document.head.append(r)},p=[];if("on"===o("seotech-structured-data")){var v,w;let e=s(null===(v=r())||void 0===v?void 0:v.imsClientId),t=await u(null===(w=c.pathname)||void 0===w?void 0:w.replace(".html",""));p.push(h(e,t,{baseUrl:n}).then((e=>d(e,"seotech-structured-data"))).catch((()=>i("Structured data operation failed",{bucket:e,id:t,pathname:c.pathname}))))}let m=o("seotech-video-url");return m&&p.push(l(m,{baseUrl:n}).then((e=>d(e,"seotech-video-url"))).catch((()=>i("Video object operation failed",{videoUrl:m})))),Promise.all(p)}var v=p}}]);
//# sourceMappingURL=9187.1b64b76e.chunk.js.map