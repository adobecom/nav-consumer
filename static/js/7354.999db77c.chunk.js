"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[7354],{7354:(t,e,a)=>{a.r(e),a.d(e,{loadTingleModalFiles:()=>A,sendToCaaS:()=>J,showAlert:()=>q,showConfirm:()=>z});var n=a(9818),o=a(775),i=(a(6850),"0123456789abcdef".split("")),r=t=>{const e=t>>4,a=t-(e<<4);return i[e]+i[a]},c=t=>[...t].map((t=>r(t))).join(""),l=async t=>{const e=await(async t=>{const e=(new TextEncoder).encode(t);return await crypto.subtle.digest("SHA-1",e)})(t);return(t=>[c(t.slice(0,4)),"-",c(t.slice(4,6)),"-",r(15&t[6]|parseInt(50,16)),r(t[7]),"-",r(63&t[8]|128),r(t[9]),"-",c(t.slice(10,16))].join(""))(new Uint8Array(e))},s={en:"en",de:"de",fr:"fr","fr-ca":"fr-ca",ja:"ja",ar:"ar",bg:"bg",cs:"cs",da:"da",es:"es",et:"et",fi:"fi",he:"he",hu:"hu",it:"it",ko:"ko",lt:"lt",lv:"lv",nl:"nl",no:"no",pl:"pl",pt:"pt",ro:"ro",ru:"ru",sk:"sk",sl:"sl",sv:"sv",tr:"tr",uk:"uk","zh-hant":"zh-hant",th:"th",fil:"fil",id:"id",ms:"ms",vi:"vi",hi:"hi",el:"el","":"en"},d={ar:{ietf:"es-AR"},br:{ietf:"pt-BR"},ca:{ietf:"en-CA"},ca_fr:{ietf:"fr-CA"},cl:{ietf:"es-CL"},co:{ietf:"es-CO"},cr:{ietf:"es-CR"},ec:{ietf:"es-EC"},el:{ietf:"es-EL"},gt:{ietf:"es-GT"},la:{ietf:"es-LA"},mx:{ietf:"es-MX"},pe:{ietf:"es-PE"},pr:{ietf:"es-PR"},"":{ietf:"en-US"},langstore:{ietf:"en-US"},africa:{ietf:"en-africa"},gb:{ietf:"xx-gb"},be_fr:{ietf:"fr-BE"},be_en:{ietf:"en-BE"},be_nl:{ietf:"nl-BE"},be:{ietf:"xx-be"},cy_en:{ietf:"en-CY"},cy:{ietf:"xx-cy"},dk:{ietf:"da-DK"},de:{ietf:"de-DE"},ee:{ietf:"et-EE"},eg_ar:{ietf:"ar-EG"},eg_en:{ietf:"en-GB"},eg:{ietf:"xx-eg"},es:{ietf:"es-ES"},fr:{ietf:"fr-FR"},gr_en:{ietf:"en-GR"},gr_el:{ietf:"el-GR"},gr:{ietf:"xx-gr"},ie:{ietf:"en-IE"},il_en:{ietf:"en-IL"},il_he:{ietf:"he-il"},il:{ietf:"xx-il"},it:{ietf:"it-IT"},kw_ar:{ietf:"ar-KW"},kw_en:{ietf:"en-GB"},kw:{ietf:"xx-kw"},lv:{ietf:"lv-LV"},lt:{ietf:"lt-LT"},lu_de:{ietf:"de-LU"},lu_en:{ietf:"en-LU"},lu_fr:{ietf:"fr-LU"},lu:{ietf:"xx-lu"},hu:{ietf:"hu-HU"},mt:{ietf:"en-MT"},mena_en:{ietf:"en-mena"},mena_ar:{ietf:"ar-mena"},mena:{ietf:"xx-mena"},ng:{ietf:"en-NG"},nl:{ietf:"nl-NL"},no:{ietf:"no-NO"},pl:{ietf:"pl-PL"},pt:{ietf:"pt-PT"},qa_ar:{ietf:"ar-QA"},qa_en:{ietf:"en-GB"},qa:{ietf:"xx-qa"},ro:{ietf:"ro-RO"},sa_en:{ietf:"en-sa"},ch_fr:{ietf:"fr-CH"},ch_de:{ietf:"de-CH"},ch_it:{ietf:"it-CH"},ch:{ietf:"xx-ch"},si:{ietf:"sl-SI"},sk:{ietf:"sk-SK"},fi:{ietf:"fi-FI"},se:{ietf:"sv-SE"},tr:{ietf:"tr-TR"},ae_en:{ietf:"en-ae"},uk:{ietf:"en-GB"},at:{ietf:"de-AT"},cz:{ietf:"cs-CZ"},bg:{ietf:"bg-BG"},ru:{ietf:"ru-RU"},cis:{ietf:"xx-cis"},ua:{ietf:"uk-UA"},ae_ar:{ietf:"ar-ae"},ae:{ietf:"xx-ae"},sa_ar:{ietf:"ar-sa"},sa:{ietf:"xx-sa"},za:{ietf:"en-ZA"},apac:{ietf:"xx-apac"},hk:{ietf:"xx-hk"},au:{ietf:"en-AU"},hk_en:{ietf:"en-HK"},in:{ietf:"en-in"},id_id:{ietf:"id-id"},id_en:{ietf:"en-id"},id:{ietf:"xx-id"},my_ms:{ietf:"ms-my"},my_en:{ietf:"en-my"},my:{ietf:"xx-my"},nz:{ietf:"en-nz"},ph_en:{ietf:"en-ph"},ph_fil:{ietf:"fil-PH"},ph:{ietf:"xx-ph"},sg:{ietf:"en-SG"},th_en:{ietf:"en-th"},in_hi:{ietf:"hi-in"},th_th:{ietf:"th-th"},th:{ietf:"xx-th"},cn:{ietf:"zh-CN"},hk_zh:{ietf:"zh-HK"},tw:{ietf:"zh-TW"},jp:{ietf:"ja-JP"},kr:{ietf:"ko-KR"},vn_en:{ietf:"en-vn"},vn_vi:{ietf:"vi-VN"},vn:{ietf:"xx-vn"},sea:{ietf:"xx-sea"}},f=(0,o.getConfig)(),u=(Object.keys(f.locales||{}),/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/),p=/fragments(.*)#[a-zA-Z0-9_-]+$/,g=/(\s*\S+\s*:\s*\S+\s*)/,h=t=>p.test(t),[v,m]=(()=>{let t={isInjectedDoc:()=>(void 0).doc!==document,doc:document};return[e=>(t={...t,...e},t),()=>t]})(),w=t=>{if(t.startsWith("http"))return t;const{host:e}=m();return"https://".concat(e).concat(t.startsWith("/")?"":"/").concat(t)},y=(t,e)=>{const a=m().doc.querySelector("meta[".concat(t,"='").concat(e,"']"));if(a)return a.content},b=(t,e)=>{if(void 0===t||h(t))return t;const a=t.includes("href=")?(t=>{const e=document.createElement("div");return e.innerHTML=t,e.querySelector("a").getAttribute("href")})(t):t;return h(a)?a:(n=a,u.test(n)?(t=>null!==t&&void 0!==t&&t.startsWith("https://")||null!==t&&void 0!==t&&t.startsWith("http://")?t:"https://".concat(t))(a):{error:e});var n},C=function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=[];let o=Object.values(t).find((t=>{if(a.includes(t.title)||a.includes(t.name)||a.includes(t.path)||a.includes(t.tagID))return!1;t.tags&&Object.keys(t.tags).length&&n.push(t.tags);return!![t.title.toLowerCase(),t.name,t.path,t.path.replace("/content/cq:tags/",""),t.tagID.toLowerCase()].includes(e.toLowerCase())}));return o||n.some((t=>(o=C(t,e,a),o))),o},[x,k]=(()=>{let t;return[()=>t,async()=>{try{const e=await fetch("https://www.adobe.com/chimera-api/tags");if(e.ok){const a=await e.json();return void(t=a.namespaces.caas.tags)}}catch(n){}const{default:e}=await a.e(8689).then(a.bind(a,8689));t=e.namespaces.caas.tags}]})(),S=(t,e)=>{if(!t)return;const a=x(),n=C(a,t,["Events"])||C(a.events.tags,t,[]);return n||e.push(t),n},T=(t,e)=>{if(t)try{const a=new Date(t);return a.getFullYear()<2e3?{error:"".concat(e," - Date is before the year 2000")}:a.toISOString()}catch(a){return{error:e}}},E=(t,e)=>t&&e&&"default"!==e?t.slice(0,t.lastIndexOf("-".concat(e))):t,I=t=>{const e=m().doc.querySelector(".card-metadata");if(!e)return null;let a="";return[...e.children].some((e=>{var n;if((null===(n=e.firstElementChild.textContent)||void 0===n?void 0:n.trim().toLowerCase())!==t)return!1;const o=e.lastElementChild.querySelector("img");if(o){var i;let t=o.src;if(m().bulkPublish){const e=o.attributes.src.value;if(e.startsWith("./")){const a=(t=>"".concat(t.split("/").slice(0,-1).join("/"),"/"))(m().pageUrl);t="".concat(a).concat(e)}else t=e.startsWith("/")?"".concat(new URL(m.pageUrl.origin)).concat(e):e}a=null===(i=new URL(t))||void 0===i?void 0:i.pathname}else{var r;a=null===(r=e.lastElementChild.textContent)||void 0===r?void 0:r.trim()}return!0})),a},_=()=>{var t,e;const{doc:a}=m(),n=I("image")||I("cardimage")||I("cardimagepath")||(null===(t=a.querySelector("main"))||void 0===t||null===(t=t.querySelector("img"))||void 0===t?void 0:t.src.replace(/\?.*/,""))||(null===(e=a.querySelector('meta[property="og:image"]'))||void 0===e?void 0:e.content);return n?w(n):null},L=t=>{const e=[];return t.badgeimage&&e.push({type:"image",value:w(t.badgeimage)}),t.badgetext&&e.push({type:"text",value:t.badgetext}),e},M=async t=>{if((0,o.getMetadata)("langfirst")){const t=window.location.pathname.split("/"),e=t.length>1?s[t[1]]||s[""]:"en";let a=t.length>2&&d[t[2]]||"xx";if("object"===typeof a){const{ietf:t}=a,e=null===t||void 0===t?void 0:t.split("-"),[,n="xx"]=e;a=n}return{country:a,lang:e}}const e=window.location.pathname.includes("/tools/send-to-caas/bulkpublisher")?await(async t=>{let{getLocale:e}=m();if(!e){const{getLocale:t}=await a.e(4305).then(a.bind(a,4305));e=t,v({getLocale:e})}return e(d,t.prodUrl).ietf})(t):(d[window.location.pathname.split("/")[1]]||d[""]).ietf,n=(null===e||void 0===e?void 0:e.toLowerCase().split("-"))||[],[i="en",r="us"]=n;return{country:r,lang:i}},B=()=>{const t={},e=m().doc.querySelector(".caas-marquee-metadata"),a=m().doc.querySelector(".card-metadata")||e,n=["description"];return a&&a.childNodes.forEach((a=>{var o,i;const r=null===(o=a.children)||void 0===o||null===(o=o[0])||void 0===o||null===(o=o.textContent)||void 0===o?void 0:o.toLowerCase();let c=null===(i=a.children)||void 0===i||null===(i=i[1])||void 0===i?void 0:i.textContent;var l;e&&n.includes(r)&&(c=null===(l=a.children)||void 0===l||null===(l=l[1])||void 0===l?void 0:l.innerHTML);r&&(t[r]=c)})),t};function U(t,e,a){if(""===(null===t||void 0===t?void 0:t.trim()))return"";const n=t||e.prodUrl||window.location.origin+window.location.pathname;return b(n,"Invalid Cta".concat(a,"Url: ").concat(n))}var j={arbitrary:t=>(t=>t?t.split(",").filter((t=>t.length)).filter((t=>g.test(t))).map((t=>{const[e,...a]=t.split(":");return{[e.trim()]:a.join(":").trim()}})):[])(t).map((t=>t)),badgeimage:()=>I("badgeimage"),badgetext:0,bookmarkaction:0,bookmarkenabled:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(t){const e=t.toLowerCase();if("true"===e||"on"===e||"yes"===e)return!0}},bookmarkicon:0,carddescription:0,cardtitle:0,cardimage:()=>_(),cardimagealttext:t=>t||(()=>{if(B().cardimage)return"";const t=_(),e=new URL(t).pathname.split("/").pop(),a=m().doc.querySelector('img[src*="'.concat(e,'"]'));return null===a||void 0===a?void 0:a.alt})(),contentid:(t,e)=>l(e.prodUrl),contenttype:t=>t||y("property","og:type")||m().contentType,country:async(t,e)=>{if(t)return t;const{country:a}=await M(e);return a},created:t=>{var e;if(t)return T(t,"Invalid Created Date: ".concat(t));const a=null===(e=B())||void 0===e?void 0:e.carddate;if(a)return T(a,"Invalid Date: ".concat(a));const n=y("name","publishdate")||y("name","publication-date"),{doc:o,lastModified:i}=m();return n?T(n,"publication-date metadata is not a valid date: ".concat(n)):T(i||o.lastModified,"document.lastModified is not a valid date: ".concat(o.lastModified))},cta1icon:t=>b(t,"Invalid Cta1Icon url: ".concat(t)),cta1style:0,cta1target:0,cta1text:0,cta1url:(t,e)=>U(t,e,1),cta2icon:t=>b(t,"Invalid Cta2Icon url: ".concat(t)),cta2style:0,cta2target:0,cta2text:0,cta2url:t=>U(t,{},2),description:t=>t||y("name","description")||"",details:0,entityid:(t,e)=>{const a=e.floodgatecolor||(0,o.getMetadata)("floodgatecolor")||"",n="default"===a||""===a?"":a;return l("".concat(e.prodUrl).concat(n))},env:t=>t||"",eventduration:0,eventend:t=>T(t,"Invalid Event End Date: ".concat(t)),eventstart:t=>T(t,"Invalid Event Start Date: ".concat(t)),floodgatecolor:(t,e)=>t||e.floodgatecolor||(0,o.getMetadata)("floodgatecolor")||"default",lang:async(t,e)=>{if(t)return t;const{lang:a}=await M(e);return a},modified:t=>{const{doc:e,lastModified:a}=m();return t?T(t,"Invalid Modified Date: ".concat(t)):T(a||e.lastModified,"document.lastModified is not a valid date: ".concat(e.lastModified))},origin:(t,e)=>{if(t)return t;return(t=>{const{project:e,repo:a}=m(),n=e||E(a,t),o={cc:"hawks",dc:"doccloud"}[n.toLowerCase()]||n;if(o)return o;if(window.location.hostname.endsWith(".page")){const[,e]=window.location.hostname.split(".")[0].split("--");return E(e,t)}throw new Error("No Project or Repo defined in config")})(e.floodgatecolor||(0,o.getMetadata)("floodgatecolor"))},playurl:t=>b(t,"Invalid PlayURL: ".concat(t)),primarytag:t=>{const e=S(t);return e?{id:e.tagID}:{}},style:t=>t||"default",tags:t=>(t=>{let e=[];t&&(e=t.toLowerCase().split(/,|(\s+)|(\\n)|;/g).filter((t=>t&&t.trim()&&"\n"!==t)));const a=[],n=e.map((t=>S(t,a))).filter((t=>void 0!==t)).map((t=>t.tagID)),o=[...new Set(n)].map((t=>({id:t})));return{tagErrors:a,tags:o}})(t),title:t=>t||y("property","og:title")||"",uci:(t,e)=>t||e.prodUrl||window.location.pathname,url:(t,e)=>{const a=t||e.prodUrl||window.location.origin+window.location.pathname;return b(a,"Invalid URL: ".concat(a))}},P=async t=>(async(t,e)=>{const a={},n=[];let o=[],i=[];for(const[r,c]of Object.entries(j)){const l=c?await c(t[r],e):t[r];null!==l&&void 0!==l&&l.error?n.push(l.error):void 0!==(null===l||void 0===l?void 0:l.tagErrors)?(o=l.tagErrors,a[r]=l.tags,i=l.tags.map((t=>t.id))):void 0!==l&&(a[r]=l)}return!a.contenttype&&i.length&&(a.contenttype=i.find((t=>t.startsWith("caas:content-type")))),{caasMetadata:a,errors:n,tags:i,tagErrors:o}})(B(),t),[O,D,R]=(()=>{let t=!1;return[()=>{t=!0},()=>{t=!1},()=>t]})(),A=async(t,e)=>{var a;null!==(a=window.tingle)&&void 0!==a&&a.modal||await Promise.all([t("https://milo.adobe.com/libs/deps/tingle.js"),e("https://milo.adobe.com/libs/deps/tingle.css")])},q=function(t){let{error:e=!1,onClose:a,showBtn:n=!0,btnText:o="OK"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=new tingle.modal({footer:!0,closeMethods:["overlay","escape"],onClose(){a&&a(),this.destroy()}});let r=t;return e&&(r='<div class="modal-error"><div class="modal-alert"></div><div>'.concat(t,"</div></div>")),i.setContent(r),n&&i.addFooterBtn(o,"tingle-btn tingle-btn--primary tingle-btn--pull-right",(()=>i.close())),i.open(),i},z=function(t){let{onClose:e,cssClass:a=[],ctaBtnType:n="primary",ctaText:o="OK",cancelBtnType:i="default",cancelText:r="Cancel",footerContent:c="",initCode:l,leftButton:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((d=>{let f=!1;const u=new tingle.modal({cssClass:a,footer:!0,closeMethods:["escape"],onClose(){e&&e(this),this.destroy(),d(f)}});u.setContent(t),c&&u.setFooterContent(c),o&&u.addFooterBtn(o,"tingle-btn tingle-btn--".concat(n," tingle-btn--pull-right"),(()=>{f=!0,u.close()})),u.addFooterBtn(r,"tingle-btn tingle-btn--".concat(i," tingle-btn--pull-right"),(()=>{f=!1,u.close()})),s&&u.addFooterBtn(s.text,"tingle-btn tingle-btn--default tingle-btn--pull-left",(()=>{var t;null===(t=s.callback)||void 0===t||t.call(s)})),l&&l(u.modal),u.open()}))},N=()=>{const t=new tingle.modal({closeMethods:[],cssClass:["modal-text-align-center"],onClose(){this.destroy()}});return t.setContent("Publishing to CaaS..."),t.open(),t},G=()=>{var t;return null===(t=document.getElementById("usehtml"))||void 0===t?void 0:t.checked},H=async(t,e)=>{const{caasMetadata:a,errors:n,tags:o,tagErrors:i}=await P({prodUrl:"".concat(t).concat(window.location.pathname)}),{draftOnly:r,caasEnv:c,okToContinue:l,useHtml:s}=await(async(t,e,a)=>{let n,o=!1,i=!1,r=!1;const c={text:"See all properties",callback:a},l='\n    <div class="verify-info-footer">\n      <div class="caas-env">\n        <label for="caas-env-select">CaaS Env</label>\n        <select name="1A" id="caas-env-select">\n          <option>Prod</option>\n          <option>Stage</option>\n          <option>Dev</option>\n        </select>\n      </div>\n      <div id="caas-draft-cb">\n        <input type="checkbox" id="draftcb" name="draftcb">\n        <label for="draftcb">Publish to Draft only</label>\n      </div>\n      <div id="caas-use-html-cb" class="field checkbox">\n        <input type="checkbox" id="usehtml" name="usehtml">\n        <label for="usehtml">Use .html extension</label>\n      </div>\n    </div>',s=()=>{var t,e,a;n=null===(t=document.getElementById("caas-env-select"))||void 0===t||null===(t=t.value)||void 0===t?void 0:t.toLowerCase(),i=null===(e=document.getElementById("draftcb"))||void 0===e?void 0:e.checked,r=null===(a=document.getElementById("usehtml"))||void 0===a?void 0:a.checked},d=t=>{var e;const a=t.querySelector("#caas-env-select"),n=null===(e=a.value)||void 0===e?void 0:e.toLowerCase(),o=t.querySelector("#usehtml");"prod"===n&&(o.checked=!0),a.addEventListener("change",(t=>{var e;o.checked="prod"===(null===(e=t.target.value)||void 0===e?void 0:e.toLowerCase())}))};if(t.length)if(e.length){const a=['<div class="">',"<p><b>The following tags were not found:</b></p>",e.join("<br>"),"<p><b>Ok to publish without those tags defined?</b></p>","<p>The following tags will be used:</p>",t.join("<br>"),"</div>"].join("");o=await z(a,{cssClass:["verify-info-modal"],ctaText:"Publish with missing tags",cancelBtnType:"grey",cancelText:"Cancel Registration",ctaBtnType:"danger",footerContent:l,initCode:d,leftButton:c,onClose:s})}else{const e=["<div><p><b>The following tags will be used:</b></p>",t.join("<br>"),"<p><b>Please verify that these are correct.</b></p></div>"].join("");o=await z(e,{cssClass:["verify-info-modal"],cancelBtnType:"grey",cancelText:"Cancel Registration",ctaText:"Continue with these tags",footerContent:l,initCode:d,leftButton:c,onClose:s})}else{const t="<div><p><b>No Tags found on page</b></p><p>Please add at least one tag to the Card Metadata</p></div>";o=await z(t,{cssClass:["verify-info-modal"],ctaText:"",cancelBtnType:"danger",cancelText:"Cancel Registration",footerContent:l,leftButton:c,onClose:s})}return{caasEnv:n,draftOnly:i,okToContinue:o,useHtml:r}})(o,i,(async()=>{const{caasMetadata:e}=await P({prodUrl:"".concat(t).concat(window.location.pathname).concat(G()?".html":"")}),a=JSON.stringify((n=e,Object.keys(n).sort().reduce(((t,e)=>(t[e]=n[e],t)),{})),void 0,4);var n;q('<h3>All CaaS Properties</h3><pre id="json" style="white-space:pre-wrap;font-size:14px;">'.concat(a,"</pre>"))}));if(!l)return D(),e.close(),!1;if(n.length){e.close();const t=["<p>There were problems with the following:</p>",n.join("<br>"),"<p>Publishing to CaaS aborted, please fix errors and try again.</p>"].join("");return q(t,{error:!0,onClose:D}),!1}let d;return s&&({caasMetadata:d}=await P({prodUrl:"".concat(t).concat(window.location.pathname,".html")})),{caasEnv:c,caasMetadata:d||a,draftOnly:r}},W=async t=>!!await(async()=>{let{branch:t,repo:e,owner:a}=m();if(t||e||a||!window.location.hostname.endsWith(".page")||([t,e,a]=window.location.hostname.split(".")[0].split("--")),!(t||e||a))throw new Error("Branch, Repo or Owner is not set - branch: ".concat(t,", repo: ").concat(e,", owner: ").concat(a));const n=await fetch("".concat("https://admin.hlx.page/status","/").concat(a,"/").concat(e,"/").concat(t).concat(window.location.pathname));if(n.ok)return 200===(await n.json()).live.status;return!1})()||(t.close(),q("Page must be published before it can be registered with CaaS.<br>Please publish the page and try again.",{error:!0}),D(),!1),F=async t=>{let{accessToken:e,caasEnv:a,caasProps:n,draftOnly:o,publishingModal:i}=t;try{var r;const t=await(async t=>{let{accessToken:e,caasEnv:a,caasProps:n,draftOnly:o}=t;const i={method:"POST",body:JSON.stringify(n),headers:{Authorization:"Bearer ".concat(e),draft:!!o,"caas-env":a}};let r;const c=await fetch("https://14257-milocaasproxy.adobeio-static.net/api/v1/web/milocaas/postXDM",i);if(void 0!==c){const t=await c.text();try{r=JSON.parse(t)}catch{r=t}}return r})({accessToken:e,caasEnv:a,caasProps:n,draftOnly:o});if(i.close(),t.success)q("<p>Successfully published page to CaaS!<p><p>Card ID: ".concat(n.entityId,"</p>"),{onClose:D});else if(null!==(r=t.error)&&void 0!==r&&r.startsWith("Invalid User: Not an Adobe employee")){const t="Please login with your Adobe company account.  Do you want to try logging in again?",e=await z(t,{cancelBtnType:"grey",cancelText:"Cancel",ctaText:"Login"});if(D(),e){const{signInContext:t}=m();window.adobeIMS.signIn(t)}}else q(t.message||t.error||JSON.stringify(t),{error:!0,onClose:D})}catch(c){i.close(),D(),q("Error posting to CaaS:<br>".concat(c.message),{error:!0})}},K=()=>{},J=async function(){var t;let{host:e="",project:a="",branch:o="",repo:i="",owner:r=""}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:K,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:K;if(R())return;if(await A(c,l),"prod"!==(null===(t=window.adobeid)||void 0===t?void 0:t.environment))return void q("Send to CaaS needs to reload the page with prod IMS setup.  Please try again after reload.",{onClose:()=>{const t=new URL(window.location);t.searchParams.append("env","prod"),window.location.assign(t)}});v({host:e||window.location.host,project:a,branch:o,repo:i,owner:r,doc:document}),l("https://milo.adobe.com/tools/send-to-caas/send-to-caas.css"),O();const s=N();try{if(!e)throw new Error("host must be specified");await k();const{caasEnv:t,caasMetadata:a,draftOnly:o}=await H(e,s);if(!a)return;if(!await W(s))return;const i=await(async(t,e)=>{const a=await(0,n.getImsToken)(e);if(!a){if(t.close(),await z("You must be logged in with an Adobe ID in order to publish to CaaS.\nDo you want to log in?")){const{signInContext:t}=m();window.adobeIMS.signIn(t)}return D(),!1}return a})(s,c);if(!i)return;const r=(t=>{var e;return{entityId:t.entityid,contentId:t.contentid,contentType:t.contenttype,environment:t.env,url:t.url,floodGateColor:t.floodgatecolor,universalContentIdentifier:t.uci,title:t.cardtitle||t.title,description:t.carddescription||t.description,createdDate:t.created,modifiedDate:t.modified,tags:t.tags,primaryTag:t.primarytag,...t.cardimage&&{thumbnail:{altText:t.cardimagealttext,url:t.cardimage}},country:t.country,language:t.lang,cardData:{style:t.style,headline:t.cardtitle||t.title,...t.details&&{details:t.details},...(t.bookmarkenabled||t.bookmarkicon||t.bookmarkaction)&&{bookmark:{enabled:t.bookmarkenabled,bookmarkIcon:t.bookmarkicon,action:t.bookmarkaction}},badges:L(t),...t.playurl&&{playUrl:t.playurl},...(t.cta1url||t.cta2url)&&{cta:{...t.cta1url&&{primaryCta:{text:t.cta1text,url:t.cta1url,style:t.cta1style,icon:t.cta1icon,target:t.cta1target}},...t.cta2url&&{secondaryCta:{text:t.cta2text,url:t.cta2url,style:t.cta2style,icon:t.cta2icon,target:t.cta2target}}}},...(t.eventduration||t.eventstart||t.eventend)&&{event:{duration:t.eventduration,startDate:t.eventstart,endDate:t.eventend}}},origin:t.origin,...(null===(e=t.arbitrary)||void 0===e?void 0:e.length)&&{arbitrary:t.arbitrary}}})(a);F({accessToken:i,caasEnv:t,caasProps:r,draftOnly:o,publishingModal:s})}catch(d){D(),s.close(),q("ERROR: ".concat(d.message),{error:!0})}}}}]);
//# sourceMappingURL=7354.999db77c.chunk.js.map