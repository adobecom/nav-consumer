{"version":3,"file":"static/js/4500.d7ef1c8e.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/seotech/seotech.js"],"sourcesContent":["export const PROD_BASE_URL = 'https://www.adobe.com/seotech/api';\n\nexport const REGEX_ADOBETV = /(?:https?:\\/\\/)?(?:stage-)?video.tv.adobe.com\\/v\\/([\\d]+)/;\nexport const REGEX_YOUTUBE = /(?:https?:\\/\\/)?(?:www\\.)?(?:youtube\\.com|youtu\\.be)\\/(?:watch\\?v=)?([a-zA-Z0-9_-]+)/;\nexport const VIDEO_OBJECT_PROVIDERS = [\n  { provider: 'adobe', regex: REGEX_ADOBETV },\n  { provider: 'youtube', regex: REGEX_YOUTUBE },\n];\n\nexport function logError(msg, context = {}) {\n  // Build additional context string with pilcrow delineation\n  const additionalInfo = [];\n\n  if (context.bucket) {\n    additionalInfo.push(`bucket:${context.bucket}`);\n  }\n\n  if (context.id) {\n    additionalInfo.push(`id:${context.id}`);\n  }\n\n  if (context.videoUrl) {\n    additionalInfo.push(`videoUrl:${context.videoUrl}`);\n  }\n\n  if (context.pathname) {\n    additionalInfo.push(`pathname:${context.pathname}`);\n  }\n\n  // Combine message with additional context using pilcrow\n  const fullMessage = additionalInfo.length > 0\n    ? `${msg} ¶ ${additionalInfo.join(' ¶ ')}`\n    : msg;\n\n  window.lana?.log(`SEOTECH: ${fullMessage}`, {\n    debug: false,\n    sampleRate: 100,\n    tags: 'seotech',\n    severity: 'error',\n  });\n}\n\nexport function parseVideoUrl(url, providers = VIDEO_OBJECT_PROVIDERS) {\n  for (const { regex, provider } of providers) {\n    const match = url.match(regex);\n    if (match) {\n      return { provider, id: match[1] };\n    }\n  }\n  return null;\n}\n\nexport async function getVideoObject(url, { baseUrl = PROD_BASE_URL } = {}) {\n  const parsedUrl = parseVideoUrl(url);\n  if (!parsedUrl) {\n    throw new Error(`Invalid video url: ${url}`);\n  }\n  const { provider, id } = parsedUrl;\n  const videoObjectUrl = `${baseUrl}/json-ld/types/video-object/providers/${provider}/${id}`;\n\n  const resp = await fetch(videoObjectUrl, { headers: { 'Content-Type': 'application/json' } });\n  const body = await resp?.json();\n\n  if (!resp.ok) {\n    throw new Error(`Failed to fetch video: ${body?.error || resp.statusText} (Status: ${resp.status})`);\n  }\n\n  return body.videoObject;\n}\n\n// https://github.com/orgs/adobecom/discussions/2633\nexport function getRepoByImsClientId(imsClientId) {\n  return {\n    'adobedotcom-cc': 'cc',\n    acrobatmilo: 'dc',\n    bacom: 'bacom',\n    homepage_milo: 'homepage',\n    milo: 'milo',\n  }[imsClientId];\n}\n\nexport async function sha256(message) {\n  const msgUint8 = new TextEncoder().encode(message);\n  const hashBuffer = await window.crypto.subtle.digest('SHA-256', msgUint8);\n  const hashArray = Array.from(new Uint8Array(hashBuffer));\n  const hashHex = hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n  return hashHex;\n}\n\nexport async function getStructuredData(bucket, id, { baseUrl = PROD_BASE_URL } = {}) {\n  if (!bucket || !id) {\n    throw new Error(`bucket and id are required. Received: bucket=${bucket}, id=${id}`);\n  }\n\n  const url = `${baseUrl}/structured-data/${bucket}/${id}`;\n  const resp = await fetch(url);\n\n  if (!resp) {\n    throw new Error('Network error: No response received');\n  }\n\n  if (!resp.ok) {\n    throw new Error(`HTTP ${resp.status}: ${resp.statusText}`);\n  }\n\n  const body = await resp.json();\n  return body;\n}\n\nexport async function appendScriptTag({ locationUrl, getMetadata, createTag, getConfig }) {\n  const url = new URL(locationUrl);\n  const params = new URLSearchParams(url.search);\n  const baseUrl = params.get('seotech-api-base-url') || undefined;\n  const append = (obj, className) => {\n    if (!obj) return;\n    const attributes = { type: 'application/ld+json' };\n    if (className) attributes.class = className;\n    const script = createTag('script', attributes, JSON.stringify(obj));\n    document.head.append(script);\n  };\n\n  const promises = [];\n  if (getMetadata('seotech-structured-data') === 'on') {\n    const bucket = getRepoByImsClientId(getConfig()?.imsClientId);\n    const id = await sha256(url.pathname?.replace('.html', ''));\n    promises.push(getStructuredData(bucket, id, { baseUrl })\n      .then((obj) => append(obj, 'seotech-structured-data'))\n      .catch(() => logError('Structured data operation failed', {\n        bucket,\n        id,\n        pathname: url.pathname,\n      })));\n  }\n  const videoUrl = getMetadata('seotech-video-url');\n  if (videoUrl) {\n    promises.push(getVideoObject(videoUrl, { baseUrl })\n      .then((videoObject) => append(videoObject, 'seotech-video-url'))\n      .catch(() => logError('Video object operation failed', { videoUrl })));\n  }\n  return Promise.all(promises);\n}\n\nexport default appendScriptTag;\n"],"names":["PROD_BASE_URL","REGEX_ADOBETV","REGEX_YOUTUBE","VIDEO_OBJECT_PROVIDERS","provider","regex","logError","msg","_window$lana","context","arguments","length","undefined","additionalInfo","bucket","push","concat","id","videoUrl","pathname","fullMessage","join","window","lana","log","debug","sampleRate","tags","severity","parseVideoUrl","url","providers","match","getVideoObject","baseUrl","parsedUrl","Error","videoObjectUrl","resp","fetch","headers","body","json","ok","error","statusText","status","videoObject","getRepoByImsClientId","imsClientId","acrobatmilo","bacom","homepage_milo","milo","sha256","message","msgUint8","TextEncoder","encode","hashBuffer","crypto","subtle","digest","Array","from","Uint8Array","map","b","toString","padStart","getStructuredData","appendScriptTag","_ref","locationUrl","getMetadata","createTag","getConfig","URL","URLSearchParams","search","get","append","obj","className","attributes","type","class","script","JSON","stringify","document","head","promises","_getConfig","_url$pathname","replace","then","catch","Promise","all","seotech_default"],"sourceRoot":""}