{"version":3,"file":"static/js/5638.d7197382.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/utils/block-notifications.js","../node_modules/@adobecom/utils/service-config.js"],"sourcesContent":["import getServiceConfig from './service-config.js';\n\nconst INFO_ICON = `<svg id=\"info\" viewBox=\"0 0 18 18\" class=\"icon-milo icon-milo-info\">\n    <path fill=\"currentcolor\" d=\"M10.075,6A1.075,1.075,0,1,1,9,4.925H9A1.075,1.075,0,0,1,10.075,6Zm.09173,6H10V8.2A.20005.20005,0,0,0,9.8,8H7.83324S7.25,8.01612,7.25,8.5c0,.48365.58325.5.58325.5H8v3H7.83325s-.58325.01612-.58325.5c0,.48365.58325.5.58325.5h2.3335s.58325-.01635.58325-.5C10.75,12.01612,10.16673,12,10.16673,12ZM9,.5A8.5,8.5,0,1,0,17.5,9,8.5,8.5,0,0,0,9,.5ZM9,15.6748A6.67481,6.67481,0,1,1,15.67484,9,6.67481,6.67481,0,0,1,9,15.6748Z\"></path>\n  </svg>`;\nconst CONSONANT_SHEET_FALLBACK = 'consonant.json';\n\nasync function getJson(url) {\n  try {\n    const resp = await fetch(url);\n    if (!resp.ok) {\n      throw new Error(`Response status: ${resp.status}`);\n    }\n    return await resp.json();\n  } catch (error) {\n    window.lana?.log(error.message);\n    return null;\n  }\n}\n\nfunction transformKeysToLowercase(obj) {\n  if (Array.isArray(obj)) {\n    return obj.map((item) => transformKeysToLowercase(item));\n  }\n\n  if (obj !== null && typeof obj === 'object') {\n    return Object.keys(obj).reduce((acc, key) => {\n      const value = obj[key];\n      acc[key.toLowerCase()] = transformKeysToLowercase(value);\n      return acc;\n    }, {});\n  }\n  return obj;\n}\n\nfunction decorateNotificationControls(element) {\n  const notificationControlsContainer = document.createElement('div');\n  const toggle = document.createElement('a');\n  toggle.classList.add('toggle-notifications');\n  toggle.textContent = 'Hide notifications';\n  let isVisible = true;\n  notificationControlsContainer.appendChild(toggle);\n  notificationControlsContainer.classList.add('notification-controls-container');\n  element.appendChild(notificationControlsContainer);\n\n  toggle.addEventListener('click', () => {\n    if (isVisible === false) {\n      isVisible = true;\n      toggle.textContent = 'Hide notifications';\n    } else {\n      isVisible = false;\n      toggle.textContent = 'Show notifications';\n    }\n    element.classList.toggle('block-notifications');\n    element.classList.toggle('hide-labels');\n  });\n}\n\nexport default async function blockNotifications(base) {\n  const { blocknotifications } = await getServiceConfig(window.location.origin);\n  const conSheet = blocknotifications?.url || CONSONANT_SHEET_FALLBACK;\n  const json = await getJson(`${base}/${conSheet}`);\n  if (!json) return;\n\n  const { blocks: rawBlocks } = json;\n  const blocksKeyToLowercase = transformKeysToLowercase(rawBlocks);\n\n  const blockQueries = blocksKeyToLowercase.data.reduce((acc, row) => {\n    const notConsonant = row.consonant === 'false';\n    const decision = row.decision !== '' ? row.decision?.toLowerCase() : undefined;\n    if (row.block && (notConsonant || decision)) {\n      const variation = row.variant && row.variant.replaceAll(',', '.').replaceAll(' ', '-').toLowerCase();\n      const blockName = row.block.toLowerCase();\n      const name = variation ? `${blockName} ${variation}` : `${blockName}`;\n      const queryProps = { selector: variation ? `.${blockName}.${variation}` : `.${blockName}` };\n      if (decision) queryProps.decision = decision;\n      if (notConsonant) queryProps.notConsonant = 'Not Consonant';\n      if (row.documentation) queryProps.documentation = row.documentation;\n      if (name) queryProps.name = name;\n      acc.push(queryProps);\n    }\n    return acc;\n  }, []);\n\n  blockQueries.forEach((query) => {\n    const blocks = document.querySelectorAll(query.selector);\n    if (blocks.length === 0) return;\n\n    const { body } = document;\n    body.classList.add('block-notifications');\n\n    decorateNotificationControls(body);\n\n    blocks.forEach((foundBlock) => {\n      const labelContainer = foundBlock.querySelector('.block-label-container');\n      const delistNotificationLabel = foundBlock.querySelector('.notification-label');\n      const conNotificationLabel = foundBlock.querySelector('.con-label');\n      let blockLabelContainer;\n\n      // Stop duplicate labels\n      // Add a label container to the block\n      if (!labelContainer) {\n        blockLabelContainer = document.createElement('div');\n        blockLabelContainer.classList.add('block-label-container');\n        foundBlock.appendChild(blockLabelContainer);\n      }\n      if (query.decision && !delistNotificationLabel) {\n        const notificationLabel = document.createElement('div');\n\n        foundBlock.dataset.decision = query.decision.toLowerCase();\n        foundBlock.dataset.blockNotification = 'true';\n        notificationLabel.classList.add('notification-label');\n        notificationLabel.textContent = query.decision;\n        notificationLabel.title = `${query.name} has been marked ${query.decision}`;\n        if (query.documentation) {\n          const notificationLink = document.createElement('a');\n\n          notificationLink.href = query.documentation;\n          notificationLink.target = '_blank';\n          notificationLink.title = `view ${query.name} ${notificationLabel.textContent} documentation`;\n          notificationLink.innerHTML = INFO_ICON;\n          notificationLabel.appendChild(notificationLink);\n        }\n        blockLabelContainer.appendChild(notificationLabel);\n      }\n      if (query.notConsonant && !conNotificationLabel) {\n        const conLabel = document.createElement('div');\n\n        foundBlock.dataset.conStatus = query.notConsonant;\n        conLabel.classList.add('con-label');\n        conLabel.textContent = 'Not consonant';\n        conLabel.title = `${query.name} is not a consonant block`;\n        blockLabelContainer?.appendChild(conLabel);\n      }\n    });\n  });\n}\n","/**\n * Get author-facing config options.\n */\n\nimport { getConfig, SLD } from './utils.js';\n\nconst DOT_MILO = '/.milo/config.json';\n\nlet config;\n\n/* c8 ignore next 6 */\nfunction getSiteOrigin() {\n  const search = new URLSearchParams(window.location.search);\n  const repo = search.get('repo');\n  const owner = search.get('owner');\n  return repo && owner ? `https://main--${repo}--${owner}.${SLD}.live` : window.location.origin;\n}\n\n/**\n * Get Service Config\n * @param {*} origin The origin of the site to pull the config from.\n * @param {*} envName The name of the environment to pull configs for.\n * @returns the config\n */\nexport default async function getServiceConfig(suppliedOrigin, envName) {\n  if (config) return config;\n  const origin = suppliedOrigin || getSiteOrigin();\n  const utilsConfig = getConfig();\n  const queryEnv = new URLSearchParams(window.location.search).get('env');\n  const env = queryEnv || envName || utilsConfig.env.name;\n  const resp = await fetch(`${origin}${DOT_MILO}`);\n  if (!resp.ok) return { error: 'Could not fetch .milo/config.' };\n  const json = await resp.json();\n  const configs = {};\n  json.configs.data.forEach((conf) => {\n    const [confEnv, confService, confType] = conf.key.split('.');\n    configs[confEnv] ??= {};\n    configs[confEnv][confService] ??= {};\n    configs[confEnv][confService][confType] = conf.value;\n  });\n  config = configs.prod;\n  if (env === 'prod') return config;\n\n  // Stage inheritance\n  Object.keys(config).forEach((key) => {\n    if (configs.stage && configs.stage[key]) {\n      config[key] = { ...config[key], ...configs.stage[key] };\n    }\n  });\n  if (env === 'stage') return config;\n\n  // Local inheritance\n  Object.keys(config).forEach((key) => {\n    if (configs.local && configs.local[key]) {\n      config[key] = { ...config[key], ...configs.local[key] };\n    }\n  });\n  return config;\n}\n"],"names":["INFO_ICON","CONSONANT_SHEET_FALLBACK","transformKeysToLowercase","obj","Array","isArray","map","item","Object","keys","reduce","acc","key","value","toLowerCase","blockNotifications","base","blocknotifications","getServiceConfig","window","location","origin","conSheet","url","json","async","resp","fetch","ok","Error","concat","status","error","_window$lana","lana","log","message","getJson","blocks","rawBlocks","data","row","_row$decision","notConsonant","consonant","decision","block","variation","variant","replaceAll","blockName","name","queryProps","selector","documentation","push","forEach","query","document","querySelectorAll","length","body","classList","add","element","notificationControlsContainer","createElement","toggle","textContent","isVisible","appendChild","addEventListener","decorateNotificationControls","foundBlock","labelContainer","querySelector","delistNotificationLabel","conNotificationLabel","blockLabelContainer","notificationLabel","dataset","blockNotification","title","notificationLink","href","target","innerHTML","_blockLabelContainer","conLabel","conStatus","config","DOT_MILO","suppliedOrigin","envName","search","URLSearchParams","repo","get","owner","SLD","getSiteOrigin","utilsConfig","getConfig","env","configs","conf","_configs$confEnv","_configs$confEnv2","_configs$confEnv2$con","confEnv","confService","confType","split","prod","stage","local"],"sourceRoot":""}