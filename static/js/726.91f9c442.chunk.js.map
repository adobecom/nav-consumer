{"version":3,"file":"static/js/726.91f9c442.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/utils/action.js","../node_modules/@adobecom/blocks/global-navigation/features/search/gnav-search.js"],"sourcesContent":["export function debounce(callback, time = 300) {\n  if (typeof callback !== 'function') return undefined;\n\n  let timer = null;\n\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => callback(...args), time);\n  };\n}\n\nexport default { debounce };\n","import {\n  toFragment,\n  isDesktop,\n  setCurtainState,\n  trigger,\n  closeAllDropdowns,\n  logErrorFor,\n} from '../../utilities/utilities.js';\nimport { replaceKeyArray } from '../../../../features/placeholders.js';\nimport { getConfig } from '../../../../utils/utils.js';\nimport { debounce } from '../../../../utils/action.js';\nimport { getFedsPlaceholderConfig } from '../../../../utils/federated.js';\n\nconst CONFIG = {\n  suggestions: {\n    scope: 'adobecom',\n    apiKey: 'adobedotcom2',\n  },\n  selectors: {\n    hasResults: 'has-results',\n    inputIsPopulated: 'feds-search-input--isPopulated',\n  },\n};\n\nconst { locale } = getConfig();\nconst [, country = 'US'] = locale.ietf.split('-');\n\nclass Search {\n  constructor(config) {\n    this.icon = config.icon;\n    this.trigger = config.trigger;\n    this.parent = this.trigger.closest('.feds-nav-wrapper');\n    const observer = new MutationObserver(() => {\n      this.clearSearchForm();\n    });\n    observer.observe(this.trigger, { attributeFilter: ['aria-expanded'] });\n    logErrorFor(this.init.bind(this), 'Search init has failed', 'errorType=error,module=gnav-search');\n  }\n\n  async init() {\n    await this.getLabels();\n    this.decorate();\n    this.addEventListeners();\n    this.toggleDropdown();\n  }\n\n  async getLabels() {\n    this.labels = {};\n    [this.labels.search, this.labels.clearResults, this.labels.tryAdvancedSearch] = await replaceKeyArray(['search', 'clear-results', 'try-advanced-search'], getFedsPlaceholderConfig());\n  }\n\n  decorate() {\n    this.input = toFragment`<input placeholder=\"${this.labels.search}\" aria-label=\"${this.labels.search}\" class=\"feds-search-input\" autocomplete=\"off\" aria-autocomplete=\"list\" aria-controls=\"feds-search-results\" daa-ll=\"search-results:standard search\" />`;\n    this.resultsList = toFragment`<ul class=\"feds-search-results\" id=\"feds-search-results\" role=\"region\" daa-ll=\"search-results:suggested-search:click\"></ul>`;\n    this.clearButton = toFragment`<button tabindex=\"0\" class=\"feds-search-clear\" aria-label=\"${this.labels.clearResults}\"></button>`;\n    this.searchBar = toFragment`\n      <aside class=\"feds-search-dropdown\">\n        <div class=\"feds-search-bar\">\n          <div class=\"feds-search-field\">\n            ${this.input}\n            <div class=\"feds-search-icons\">\n              ${this.icon}\n              ${this.clearButton}\n            </div>\n          </div>\n          ${this.resultsList}\n        </div>\n      </aside>`;\n\n    this.trigger.after(this.searchBar);\n  }\n\n  clearSearchForm() {\n    this.input.value = '';\n    this.onSearchInput();\n  }\n\n  addEventListeners() {\n    // Toggle the dropdown when the trigger is clicked\n    this.trigger.addEventListener('click', () => {\n      this.toggleDropdown();\n    });\n\n    this.input.addEventListener('input', () => {\n      this.onSearchInput();\n    });\n\n    this.input.addEventListener('keydown', (e) => {\n      if (e.code === 'Escape') {\n        // Pressing ESC when input has value resets the results\n        if (this.input.value.length) {\n          this.clearSearchForm();\n        } else if (isDesktop.matches) {\n          closeAllDropdowns();\n          this.trigger.focus();\n        }\n      }\n\n      if (e.code === 'Enter') {\n        if (!this.query) return;\n        window.location.href = Search.getHelpxLink(this.query);\n      }\n    });\n\n    // If a search result is focused, return focus to input when ESC is pressed\n    this.resultsList.addEventListener('keydown', (e) => {\n      if (e.code === 'Escape') {\n        this.input.focus();\n      }\n    });\n\n    // Clicking the clear button resets the results\n    this.clearButton.addEventListener('click', () => {\n      this.clearSearchForm();\n      this.input.focus();\n    });\n\n    // Switching between a mobile and a desktop view\n    // should close the search dropdown\n    isDesktop.addEventListener('change', () => {\n      closeAllDropdowns();\n    });\n  }\n\n  getSuggestions(query = this.query) {\n    const { env } = getConfig();\n    const subdomain = env === 'prod' ? 'adobesearch' : 'adobesearch-stage';\n    const api = `https://${subdomain}.adobe.io/autocomplete/completions?q[locale]=${locale.ietf}&scope=${CONFIG.suggestions.scope}&q[text]=${encodeURIComponent(query)}`;\n\n    return fetch(api, { headers: { 'x-api-key': CONFIG.suggestions.apiKey } })\n      .then((data) => data.json())\n      .catch(() => {\n        // do nothing\n      });\n  }\n\n  onSearchInput = debounce(() => {\n    const query = this.getQuery();\n\n    if (!query.length) {\n      this.resultsList.replaceChildren();\n      delete this.query;\n      return;\n    }\n\n    // Avoid successive calls for the same input value\n    if (query === this.query) {\n      return;\n    }\n\n    this.query = query;\n\n    this.getSuggestions()\n      .then((data) => {\n        const suggestions = data?.suggested_completions;\n\n        if (!Array.isArray(suggestions)\n          || !suggestions.length) {\n          this.resultsList.replaceChildren(this.getNoResultsTemplate());\n          if (this.parent instanceof HTMLElement) {\n            this.parent.classList.remove(CONFIG.selectors.hasResults);\n          }\n          return;\n        }\n\n        this.resultsList.replaceChildren(this.getResultsTemplate(suggestions));\n        if (this.parent instanceof HTMLElement) {\n          this.parent.classList.add(CONFIG.selectors.hasResults);\n        }\n      })\n      .catch(() => {\n        this.resultsList.replaceChildren(this.getNoResultsTemplate());\n        if (this.parent instanceof HTMLElement) {\n          this.parent.classList.remove(CONFIG.selectors.hasResults);\n        }\n      });\n  }, 150);\n\n  getQuery() {\n    const query = this.input.value.trim();\n\n    if (!query.length) {\n      this.input.classList.remove(CONFIG.selectors.inputIsPopulated);\n      this.resultsList.replaceChildren();\n      if (this.parent instanceof HTMLElement) {\n        this.parent.classList.remove(CONFIG.selectors.hasResults);\n      }\n      return '';\n    }\n\n    this.input.classList.add(CONFIG.selectors.inputIsPopulated);\n\n    return query;\n  }\n\n  getResultsTemplate(results) {\n    const resultsTemplate = document.createDocumentFragment();\n\n    // eslint-disable-next-line array-callback-return\n    results.map((result) => {\n      const resultLabel = result.name;\n\n      if (!resultLabel.length) {\n        return;\n      }\n\n      // A longest common substring match between the original prefix and suggestion must be made\n      // for cases when special characters are used. Say the user searches for 'pho-',\n      // then the prefix will be 'pho-', while the suggestion will be 'photoshop'.\n      // The generated suggestion markup should look like `<b>pho</b>toshop`,\n      // so we need to extract the part of the prefix that matches the current suggestion\n      const matchPrefixToSuggestion = () => {\n        let i = 0;\n        const prefixLength = this.query.length;\n\n        while (i < prefixLength && this.query[i].toLowerCase() === resultLabel[i].toLowerCase()) {\n          i += 1;\n        }\n\n        return this.query.substring(0, i).trim();\n      };\n\n      // The matched prefix can't be cached to be used for all of the suggestions in the set\n      // because there are edge cases when there are significant differences between suggestions.\n      // For example, the query 'max 20' will yield the suggestions 'max 2016' and 'maximize',\n      // thus the common part between the query and the suggestion differs:\n      // * 'max 20' for the first suggestion\n      // * 'max' for the second suggestion\n      const matchedPrefix = matchPrefixToSuggestion();\n\n      // Say the user searched for 'PhOtOsHoP' and the suggested result is 'Photoshop Trial';\n      // We don't want the suggestion to be rendered as '<b>PhOtOsHoP</b> Trial',\n      // rather '<b>Photoshop</b> Trial', like the original suggestion formatting.\n      // First, define a capturing group Regexp;\n      // in the example above this will be '/(PhOtOsHoP)/i'\n      const prefixPattern = new RegExp(`(${matchedPrefix})`, 'i');\n      let suggestionPrefix;\n      // Remove the query from the suggestion and\n      // save the matched prefix in its original formatting from the API\n      const suggestionWithoutPrefix = resultLabel.replace(prefixPattern, (match) => {\n        // Save the matched string (with the formatting suggested by the API) into a variable\n        suggestionPrefix = match;\n        // Remove the matched string\n        return '';\n      });\n\n      const resultTemplate = toFragment`<li>\n          <a href=\"${Search.getHelpxLink(resultLabel)}\" class=\"feds-search-result\" aria-label=\"${resultLabel}\">\n            <span>${suggestionPrefix}</span>${suggestionWithoutPrefix}\n          </a>\n        </li>`;\n\n      resultsTemplate.appendChild(resultTemplate);\n    });\n\n    return resultsTemplate;\n  }\n\n  getNoResultsTemplate(query = this.query) {\n    return toFragment`<li>\n      <a href=\"${Search.getHelpxLink(query)}\" class=\"feds-search-result\"><span>${this.labels.tryAdvancedSearch}</span></a>\n    </li>`;\n  }\n\n  focusInput() {\n    if (isDesktop.matches) {\n      this.input.focus();\n    }\n  }\n\n  toggleDropdown() {\n    if (!isDesktop.matches) return;\n\n    const hasBeenOpened = trigger({ element: this.trigger });\n    if (hasBeenOpened) {\n      setCurtainState(true);\n      this.focusInput();\n    } else {\n      this.clearSearchForm();\n    }\n  }\n\n  static getHelpxLink(query) {\n    return `https://helpx.adobe.com${locale.prefix}/globalsearch.html?q=${encodeURIComponent((query || '').trim())}&start_index=0&country=${country}`;\n  }\n}\n\nexport default Search;\n"],"names":["debounce","callback","time","arguments","length","undefined","timer","_len","args","Array","_key","clearTimeout","setTimeout","CONFIG","scope","apiKey","hasResults","inputIsPopulated","locale","getConfig","country","ietf","split","gnav_search_default","_Search","constructor","config","_defineProperty","query","this","getQuery","resultsList","replaceChildren","getSuggestions","then","data","suggestions","suggested_completions","isArray","getNoResultsTemplate","parent","HTMLElement","classList","remove","getResultsTemplate","add","catch","icon","trigger","closest","MutationObserver","clearSearchForm","observe","attributeFilter","logErrorFor","init","bind","getLabels","decorate","addEventListeners","toggleDropdown","labels","search","clearResults","tryAdvancedSearch","replaceKeyArray","getFedsPlaceholderConfig","input","toFragment","_templateObject","_taggedTemplateLiteral","_templateObject2","clearButton","_templateObject3","searchBar","_templateObject4","after","value","onSearchInput","addEventListener","e","code","isDesktop","matches","closeAllDropdowns","focus","window","location","href","getHelpxLink","env","api","concat","encodeURIComponent","fetch","headers","json","trim","results","resultsTemplate","document","createDocumentFragment","map","result","resultLabel","name","matchedPrefix","matchPrefixToSuggestion","i","prefixLength","toLowerCase","substring","prefixPattern","RegExp","suggestionPrefix","suggestionWithoutPrefix","replace","match","resultTemplate","_templateObject5","appendChild","_templateObject6","focusInput","element","setCurtainState","prefix"],"sourceRoot":""}