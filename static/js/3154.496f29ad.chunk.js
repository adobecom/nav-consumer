"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[3154],{3154:(e,t,a)=>{a.r(t),a.d(t,{initJarvisChat:()=>g,openChat:()=>s});a(6483);var n,i,o,r=!1,d=null,v=e=>({chatConversationId:e["event.context_guid"],chatConversationSessionId:e["event.session_guid"],chatWorkflow:e["event.workflow"],chatCategory:e["event.category"],chatSubcategory:e["event.subcategory"],chatType:e["event.type"],chatSubtype:e["event.subtype"],chatUserguid:e["event.user_guid"],chatLanguage:e["event.language"],chatPagename:e["event.pagename"],chatVisitorguid:e["event.visitor_guid"],chatUrl:e["event.url"],chatOrgguid:e["event.org_guid"],chatReferrer:e["event.referrer"],chatClientId:e["source.client_id"],chatSourceName:e["source.name"],chatPlatform:e["source.platform"],chatContentName:e["content.name"],chatEnv:e["env.com.name"]}),c=e=>{var t,a;(e=>{var t,a;let n={variationId:e["exp.variation_id"],actionBlockId:e["exp.action_block_id"],campaignId:e["exp.campaign_id"],containerId:e["exp.container_id"],controlGroupId:e["exp.control_group_id"],treatmentId:e["exp.treatment_id"],surfaceId:e["exp.surface_id"]};Object.keys(n).forEach((e=>{n[e]||delete n[e]})),Object.keys(n).length&&!((e,t)=>{let a=!1;if(!e)return a;let n=null===(t=window.digitalData.sophiaResponse)||void 0===t?void 0:t.fromPage;return a=Array.isArray(n)?n.some((t=>(null===t||void 0===t?void 0:t.campaignId)===e)):(null===n||void 0===n?void 0:n.campaignId)===e,a})(n.campaignId)&&((t=window.digitalData).sophiaResponse||(t.sophiaResponse={}),(a=window.digitalData.sophiaResponse).fromPage||(a.fromPage=[]),Array.isArray(window.digitalData.sophiaResponse.fromPage)?window.digitalData.sophiaResponse.fromPage.push(n):window.digitalData.sophiaResponse.fromPage=n)})(e),null===(t=window._satellite)||void 0===t||t.track("event",{xdm:{},data:{web:{webInteraction:{name:null===(a=window.digitalData.primaryEvent)||void 0===a||null===(a=a.eventInfo)||void 0===a?void 0:a.eventName}},_adobe_corpnew:{digitalData:{primaryEvent:window.digitalData.primaryEvent,chat:window.digitalData.chat,sophiaResponse:window.digitalData.sophiaResponse}}}})},l=function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(((t,a)=>{let n=t;return n+="".concat(n&&":").concat(e[a]||""),n}),"")},s=e=>{var t;r||window.location.assign("https://helpx.adobe.com");let a=null===(t=window.AdobeMessagingExperienceClient)||void 0===t?void 0:t.openMessagingWindow;if("function"==typeof a&&!(()=>{var e;let t=window.AdobeMessagingExperienceClient;return(null===t||void 0===t?void 0:t.isAdobeMessagingClientInitialized())&&"hidden"!==(null===t||void 0===t||null===(e=t.getMessagingExperienceState())||void 0===e?void 0:e.windowState)})())if(e){var n,i,o;let t=null===(n=e.target.tagName)||void 0===n?void 0:n.toLowerCase();a({sourceType:t,sourceText:"img"===t?null===(i=e.target.alt)||void 0===i?void 0:i.trim():null===(o=e.target.innerText)||void 0===o?void 0:o.trim()})}else a({})},u=async(e,t,a)=>{var u,w,p,g,h,y;let m,f,b="https://".concat("prod"!==e.env.name?"stage-":"","client.messaging.adobe.com/latest/AdobeMessagingClient");await Promise.all([i("".concat(b,".css")),n("".concat(b,".js"))]),e.locale.ietf.includes("-")?[m,f]=e.locale.ietf.split("-"):([f,m]=e.locale.prefix.replace("/","").split("_"),"africa"===f&&(f="ZA")),window.AdobeMessagingExperienceClient.initialize({appid:o("jarvis-surface-id")||e.jarvis.id||(null===(u=d)||void 0===u?void 0:u["jarvis-surface-id"]),appver:o("jarvis-surface-version")||e.jarvis.version||(null===(w=d)||void 0===w?void 0:w["jarvis-surface-version"]),env:"prod"!==e.env.name?"stage":"prod",clientId:null===(p=window.adobeid)||void 0===p?void 0:p.client_id,accessToken:null!==(g=window.adobeIMS)&&void 0!==g&&g.isSignedInUser()?"Bearer ".concat(null===(h=window.adobeIMS.getAccessToken())||void 0===h?void 0:h.token):void 0,lazyLoad:!0,loadedVia:"milo",language:m||"en",region:f,cookiesEnabled:(null===(y=window.adobePrivacy)||void 0===y||null===(y=y.activeCookieGroups())||void 0===y?void 0:y.length)>1,cookies:{mcid:window.alloy?await window.alloy("getIdentity").then((e=>{var t;return null===e||void 0===e||null===(t=e.identity)||void 0===t?void 0:t.ECID})).catch((()=>{})):void 0},callbacks:{initCallback:e=>{var t;r=!(null===e||void 0===e||null===(t=e.releaseControl)||void 0===t||!t.showAdobeMessaging)},onReadyCallback:()=>{a&&s(t)},initErrorCallback:()=>{},chatStateCallback:()=>{},getContextCallback:()=>{let t,a;return d&&(t=d["jarvis-surface-id"],a=d["jarvis-surface-version"],d=null),{appid:t||o("jarvis-surface-id")||e.jarvis.id,appver:a||o("jarvis-surface-version")||e.jarvis.version}},signInProvider:()=>{var t;return null===(t=window.adobeIMS)||void 0===t?void 0:t.signIn(e.signInContext)},analyticsCallback:e=>{var t;if(!window.alloy_all||!window.digitalData)return;let a=null===e||void 0===e||null===(t=e.events)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.data;if(a&&!(e=>"init"===e["event.workflow"]&&"request"===e["event.type"]||"Chat"===e["event.workflow"]&&"load"===e["event.type"]&&"window"===e["event.subtype"])(a)){var n,i,o,r;if("launch"===(null===(n=a["event.subcategory"])||void 0===n?void 0:n.toLowerCase())&&"init"===(null===(i=a["event.workflow"])||void 0===i?void 0:i.toLowerCase())){var d,s;if("render"===(null===(d=a["event.type"])||void 0===d?void 0:d.toLowerCase()))return void(e=>{window.digitalData.primaryEvent={eventInfo:{eventName:"chat:".concat(l(e,["event.workflow","event.subcategory","event.subtype","content.name","event.type"])),eventAction:l(e,["event.subcategory","content.name","event.type"])}},window.digitalData.chat={},window.digitalData.chat.chatInfo=v(e),window.digitalData.chat.chatInfo.chatConversationUnread=e["content.name"],c(e)})(a);if("click"===(null===(s=a["event.type"])||void 0===s?void 0:s.toLowerCase()))return void(e=>{window.digitalData.primaryEvent={eventInfo:{eventName:"chat:".concat(l(e,["event.workflow","event.subcategory","event.subtype","content.name","event.type"])),eventAction:l(e,["event.subcategory","event.subtype","content.name","event.type"])}},window.digitalData.chat={},window.digitalData.chat.chatInfo=v(e),window.digitalData.chat.chatInfo.chatConversationUnread=e["content.name"],c(e)})(a)}if("auth-subproduct"===(null===(o=a["content.name"])||void 0===o?void 0:o.toLowerCase()))return void(e=>{window.digitalData.primaryEvent={eventInfo:{eventName:"chat:".concat(l(e,["event.workflow","content.name","event.subtype","event.type"])),eventAction:l(e,["event.subcategory","content.name","event.subtype","event.type"])}},window.digitalData.chat={chatInfo:{primaryProduct:{productName:e["event.subtype"]}}},c(e)})(a);if("5-star-survey"===(null===(r=a["content.name"])||void 0===r?void 0:r.toLowerCase()))return void(e=>{window.digitalData.primaryEvent={eventInfo:{eventName:"chat:".concat(l(e,["event.workflow","content.name","event.subtype","event.type","content.id"])),eventAction:l(e,["event.subcategory","content.name","event.subtype","event.type"])}},c(e)})(a);if(a["event.error_code"]&&a["event.error_type"])return void(e=>{window.digitalData.primaryEvent={eventInfo:{eventName:"chat:".concat(l(e,["event.workflow","event.subtype","event.type"]),":error"),eventAction:"".concat(l(e,["event.subcategory","event.subtype","event.type"]),":error")}},window.digitalData.chat={},window.digitalData.chat.chatInfo=v(e),window.digitalData.chat.chatInfo.chatErrorCode=e["event.error_code"],window.digitalData.chat.chatInfo.chatErrorType=e["event.error_type"],window.digitalData.chat.chatInfo.chatErrorDescription=e["event.error_desc"],c(e)})(a);(e=>{window.digitalData.primaryEvent={eventInfo:{eventName:"chat:".concat(l(e,["event.workflow","content.name","event.subtype","event.type"])),eventAction:l(e,["event.subcategory","content.name","event.subtype","event.type"])}},window.digitalData.chat={},window.digitalData.chat.chatInfo=v(e),c(e)})(a)}}}})},w=!1,p=()=>{w||(document.addEventListener("keydown",(e=>{if("Escape"===e.key){let e=document.querySelector(".adbmsg-tooltip");e&&"none"!==e.style.display&&(e.style.display="none")}})),w=!0)},g=async(e,t,a,v)=>{var c;if(null===e||void 0===e||!e.jarvis)return;n=t,i=a;let l=null===(c=(o=v)("jarvis-on-demand"))||void 0===c?void 0:c.toLowerCase(),w=l?"on"===l:e.jarvis.onDemand;document.addEventListener("click",(async t=>{let a=t.target.closest('[href*="#open-jarvis-chat"]');if(a){if(t.target.closest(".global-footer"))try{let e=a.getAttribute("data-jarvis-config");d=e?JSON.parse(e):null}catch{}t.preventDefault(),w&&!r?(await u(e,t,w),p()):s(t)}})),w||(await u(e),p())}}}]);
//# sourceMappingURL=3154.496f29ad.chunk.js.map