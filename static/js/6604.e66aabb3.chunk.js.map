{"version":3,"file":"static/js/6604.e66aabb3.chunk.js","mappings":"uJAQIA,E,UAFEC,EAAW,qBAkBjB,eAAOC,EAAwCC,EAAgBC,GAC7D,GAAIJ,EAAQ,OAAOA,EACnB,MAAMK,EAASF,GAfjB,WACE,MAAMG,EAAS,IAAIC,gBAAgBC,OAAOC,SAASH,QAC7CI,EAAOJ,EAAOK,IAAI,QAClBC,EAAQN,EAAOK,IAAI,SACzB,OAAOD,GAAQE,EAAA,iBAAAC,OAAyBH,EAAI,MAAAG,OAAKD,EAAK,KAAAC,OAAIC,EAAAA,IAAG,SAAUN,OAAOC,SAASJ,MACzF,CAUmCU,GAC3BC,GAAcC,EAAAA,EAAAA,aAEdC,EADW,IAAIX,gBAAgBC,OAAOC,SAASH,QAAQK,IAAI,QACzCP,GAAWY,EAAYE,IAAIC,KAC7CC,QAAaC,MAAA,GAAAR,OAASR,GAAMQ,OAAGZ,IACrC,IAAKmB,EAAKE,GAAI,MAAO,CAAEC,MAAO,iCAC9B,MAAMC,QAAaJ,EAAKI,OAClBC,EAAU,CAAC,EAQjB,OAPAD,EAAKC,QAAQC,KAAKC,SAASC,IAAS,IAAAC,EAAAC,EAAAC,EAClC,MAAOC,EAASC,EAAaC,GAAYN,EAAKO,IAAIC,MAAM,KACzC,QAAfP,EAAAJ,EAAQO,UAAO,IAAAH,IAAfJ,EAAQO,GAAa,CAAC,GACM,QAA5BD,GAAAD,EAAAL,EAAQO,IAASC,UAAW,IAAAF,IAA5BD,EAAiBG,GAAiB,CAAC,GACnCR,EAAQO,GAASC,GAAaC,GAAYN,EAAKS,KAAA,IAEjDrC,EAASyB,EAAQa,KACL,SAARpB,EAAuBlB,GAG3BuC,OAAOC,KAAKxC,GAAQ2B,SAASQ,IACvBV,EAAQgB,OAAShB,EAAQgB,MAAMN,KACjCnC,EAAOmC,GAAO,IAAKnC,EAAOmC,MAASV,EAAQgB,MAAMN,IACnD,IAEU,UAARjB,GAGJqB,OAAOC,KAAKxC,GAAQ2B,SAASQ,IACvBV,EAAQiB,OAASjB,EAAQiB,MAAMP,KACjCnC,EAAOmC,GAAO,IAAKnC,EAAOmC,MAASV,EAAQiB,MAAMP,IACnD,IAN0BnC,EAS9B,C","sources":["../node_modules/@adobecom/utils/service-config.js"],"sourcesContent":["/**\n * Get author-facing config options.\n */\n\nimport { getConfig, SLD } from './utils.js';\n\nconst DOT_MILO = '/.milo/config.json';\n\nlet config;\n\n/* c8 ignore next 6 */\nfunction getSiteOrigin() {\n  const search = new URLSearchParams(window.location.search);\n  const repo = search.get('repo');\n  const owner = search.get('owner');\n  return repo && owner ? `https://main--${repo}--${owner}.${SLD}.live` : window.location.origin;\n}\n\n/**\n * Get Service Config\n * @param {*} origin The origin of the site to pull the config from.\n * @param {*} envName The name of the environment to pull configs for.\n * @returns the config\n */\nexport default async function getServiceConfig(suppliedOrigin, envName) {\n  if (config) return config;\n  const origin = suppliedOrigin || getSiteOrigin();\n  const utilsConfig = getConfig();\n  const queryEnv = new URLSearchParams(window.location.search).get('env');\n  const env = queryEnv || envName || utilsConfig.env.name;\n  const resp = await fetch(`${origin}${DOT_MILO}`);\n  if (!resp.ok) return { error: 'Could not fetch .milo/config.' };\n  const json = await resp.json();\n  const configs = {};\n  json.configs.data.forEach((conf) => {\n    const [confEnv, confService, confType] = conf.key.split('.');\n    configs[confEnv] ??= {};\n    configs[confEnv][confService] ??= {};\n    configs[confEnv][confService][confType] = conf.value;\n  });\n  config = configs.prod;\n  if (env === 'prod') return config;\n\n  // Stage inheritance\n  Object.keys(config).forEach((key) => {\n    if (configs.stage && configs.stage[key]) {\n      config[key] = { ...config[key], ...configs.stage[key] };\n    }\n  });\n  if (env === 'stage') return config;\n\n  // Local inheritance\n  Object.keys(config).forEach((key) => {\n    if (configs.local && configs.local[key]) {\n      config[key] = { ...config[key], ...configs.local[key] };\n    }\n  });\n  return config;\n}\n"],"names":["config","DOT_MILO","getServiceConfig","suppliedOrigin","envName","origin","search","URLSearchParams","window","location","repo","get","owner","concat","SLD","getSiteOrigin","utilsConfig","getConfig","env","name","resp","fetch","ok","error","json","configs","data","forEach","conf","_configs$confEnv","_configs$confEnv2","_configs$confEnv2$con","confEnv","confService","confType","key","split","value","prod","Object","keys","stage","local"],"sourceRoot":""}