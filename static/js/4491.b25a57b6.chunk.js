"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[4491,6604],{6604:(e,t,n)=>{n.r(t),n.d(t,{getServiceConfig:()=>a});var o,i=n(1608),s="/.milo/config.json";async function a(e,t){if(o)return o;const n=e||function(){const e=new URLSearchParams(window.location.search),t=e.get("repo"),n=e.get("owner");return t&&n?"https://main--".concat(t,"--").concat(n,".").concat(i.SLD,".live"):window.location.origin}(),a=(0,i.getConfig)(),r=new URLSearchParams(window.location.search).get("env")||t||a.env.name,c=await fetch("".concat(n).concat(s));if(!c.ok)return{error:"Could not fetch .milo/config."};const l=await c.json(),u={};return l.configs.data.forEach((e=>{var t,n,o;const[i,s,a]=e.key.split(".");null!==(t=u[i])&&void 0!==t||(u[i]={}),null!==(o=(n=u[i])[s])&&void 0!==o||(n[s]={}),u[i][s][a]=e.value})),o=u.prod,"prod"===r?o:(Object.keys(o).forEach((e=>{u.stage&&u.stage[e]&&(o[e]={...o[e],...u.stage[e]})})),"stage"===r||Object.keys(o).forEach((e=>{u.local&&u.local[e]&&(o[e]={...o[e],...u.local[e]})})),o)}},4491:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ne,getChecksSuite:()=>oe,getPreflightResults:()=>ae});var o=n(6604),i=n(1608),s=(n(3658),{PASS:"pass",FAIL:"fail",LIMBO:"limbo",EMPTY:"empty"}),a={h1Count:"H1 count",title:"Title size",canonical:"Canonical",description:"Meta description",bodySize:"Body size",loremIpsum:"Lorem Ipsum",links:"Links"},r={title:"title",description:"description",h1Count:"h1-count",canonical:"canonical",bodySize:"body-size",loremIpsum:"lorem-ipsum",links:"links"},c={title:"Title size is appropriate.",description:"Meta description is present and within the recommended character limit.",h1Count:"Found exactly one H1 heading.",canonical:"Canonical reference is valid.",bodySize:"Body content has a good length.",loremIpsum:"No Lorem ipsum is used on the page.",links:"Links are valid."},l={Performance:"Performance",LcpEl:"LCP",SingleBlock:"Single Block",ImageSize:"Images Size",VideoPoster:"Videos",Fragments:"Fragments",Personalization:"Personalization",Placeholders:"Placeholders",Icons:"Icons"},u={AssetDimensions:"Asset Dimensions"},d=6e4,h=2e3,f=Math.ceil(d/h),m="https://spacecat.experiencecloud.live/api/v1",p={identify:null,identifyFinished:!1,suggest:null,suggestFinished:!1,sessionToken:null},g=e=>{window.lana.log(e,{sampleRate:100,tags:"preflight",errorType:"e"})};function v(e,t){var n;if(null===e||void 0===e||null===(n=e.result)||void 0===n||null===(n=n[0])||void 0===n||!n.audits)return null;const o=function(e){const t=[],n=n=>{let{seoId:o,seoTitle:i,passDescription:a}=n;const r=e.find((e=>"metatags"===e.name));if(!r)return;const c=null===r||void 0===r?void 0:r.opportunities.find((e=>e.tagName===o));t.push({id:o,title:i,status:c?s.FAIL:s.PASS,description:c?"".concat(c.issue," ").concat(c.issueDetails):a,aiSuggestion:null===c||void 0===c?void 0:c.aiSuggestion})},o=n=>{let{seoId:o,seoTitle:i,passDescription:a}=n;const r=e.find((e=>e.name===o));if(!r)return;const[c]=r.opportunities;t.push({id:o,title:i,status:c?s.FAIL:s.PASS,description:c?c.issue:a,aiSuggestion:(null===c||void 0===c?void 0:c.aiSuggestion)||(null===c||void 0===c?void 0:c.seoRecommendation)})};return n({seoId:r.title,seoTitle:a.title,passDescription:c.title}),n({seoId:r.description,seoTitle:a.description,passDescription:c.description}),o({seoId:r.h1Count,seoTitle:a.h1Count,passDescription:c.h1Count}),o({seoId:r.canonical,seoTitle:a.canonical,passDescription:c.canonical}),o({seoId:r.bodySize,seoTitle:a.bodySize,passDescription:c.bodySize}),o({seoId:r.loremIpsum,seoTitle:a.loremIpsum,passDescription:c.loremIpsum}),(()=>{const[n]=e.filter((e=>e.name===r.links));if(n){const[e]=n.opportunities.filter((e=>"bad-links"===e.check)),[o]=n.opportunities.filter((e=>"broken-internal-links"===e.check)),[i]=n.opportunities.filter((e=>"broken-external-links"===e.check)),l=[...(null===e||void 0===e?void 0:e.issue)||[],...(null===o||void 0===o?void 0:o.issue)||[],...(null===i||void 0===i?void 0:i.issue)||[]],u=l.length>0;t.push({id:r.links,title:a.links,status:u?s.FAIL:s.PASS,description:u?"Reason: ".concat(l.length," problem ").concat(l.length>1?"links":"link",". Use the list below to fix them."):c.links,details:{badLinks:u?l.map((e=>({liveHref:e.url,status:e.issue,parent:"main"}))):[]}})}})(),t}(e.result[0].audits);return"IDENTIFY"===t&&(p.identify=o),"SUGGEST"===t&&(p.suggest=o),{results:o,status:e.status}}async function S(e,t){try{const n=await async function(e){try{const t=await fetch("".concat(m,"/preflight/jobs/").concat(e),{headers:{Authorization:"Bearer ".concat(p.sessionToken)}});return t.ok?t:(g("ASO: Error fetching job status | status: ".concat(t.status," | url: ").concat(m,"/preflight/jobs/").concat(e)),null)}catch(t){return g("ASO: Error fetching job status | error: ".concat(t.reason||t.error||t.message||t," | url: ").concat(m,"/preflight/jobs/").concat(e)),null}}(e);if(!n||!n.ok)return g("ASO: Error fetching job results | step:".concat(t," | status: ").concat(null===n||void 0===n?void 0:n.status," | url: ").concat(m,"/preflight/jobs/").concat(e)),null;return v(await n.json(),t)}catch(n){return g("ASO: Error fetching job results | step:".concat(t," | error: ").concat(n.reason||n.error||n.message||n," | url: ").concat(m,"/preflight/jobs/").concat(e)),null}}function w(e){return new Promise((t=>{setTimeout(t,e)}))}async function y(e){const t=await async function(e){try{const t=await fetch("".concat(m,"/preflight/jobs"),{method:"POST",headers:{Authorization:"Bearer ".concat(p.sessionToken),"Content-Type":"application/json"},body:JSON.stringify({step:e,urls:[window.location.href]})});return t.ok?(await t.json()).jobId:(g("ASO: Error creating preflight job | step: ".concat(e," | status: ").concat(t.status," | url: ").concat(m,"/preflight/jobs")),null)}catch(t){return g("ASO: Error creating preflight job | step: ".concat(e," | error: ").concat(t.reason||t.error||t.message||t," | url: ").concat(m,"/preflight/jobs")),null}}(e);if(!t)return null;"IDENTIFY"===e&&(p.identifyJobId=t);const n=await async function(e,t){let n=0;for(;n<f;){const o=await S(e,t);if("COMPLETED"===(null===o||void 0===o?void 0:o.status))return p["IDENTIFY"===t?"identifyFinished":"suggestFinished"]=!0,o.results;await w(h),n+=1}return g("ASO: Max retries exceeded for job results | error: Failed to fetch job results after ".concat(f," retries for step: ").concat(t,", jobId: ").concat(e," | url: ").concat(m,"/preflight/jobs/").concat(e)),null}(t,e);return n||null}async function k(){if(await async function(){var e;if(window.asoIMS||(window.adobeImsFactory.createIMSLib({client_id:"milo-tools",scope:"AdobeID,openid,gnav,read_organizations,additional_info.projectedProductContext,additional_info.roles",environment:"prod",autoValidateToken:!0,useLocalStorage:!1,modalMode:!0},"asoIMS"),await window.asoIMS.initialize()),null===(e=window.asoIMS.getAccessToken())||void 0===e||!e.token)return null;try{const e=await fetch("".concat(m,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({accessToken:window.asoIMS.getAccessToken().token})});if(!e.ok)return g("ASO: Error fetching token | status: ".concat(e.status," | url: ").concat(m,"/auth/login")),null;const t=await e.json();return p.sessionToken=t.sessionToken,p.sessionToken}catch(t){return g("ASO: Error fetching token | error: ".concat(t.reason||t.error||t.message||t," | url: ").concat(m,"/auth/login")),null}}(),!p.sessionToken)return null;p.identify||(p.identify=y("IDENTIFY")),p.suggest||(p.suggest=y("SUGGEST"));const e=await Promise.race([p.identify,new Promise(((e,t)=>{setTimeout((()=>{g("ASO: identify results not available within ".concat(60," seconds | jobId: ").concat(p.identifyJobId||"unknown")),t(new Error("ASO: identify results not available within ".concat(60," seconds")))}),d)}))]);return e||null}var P=1920,b=new Map;async function A(e){const t=e.map((e=>"IMG"===e.tagName?function(e){return e.complete?Promise.resolve():(e.setAttribute("loading","eager"),new Promise((t=>{["load","error"].forEach((n=>e.addEventListener(n,t,{once:!0})))})))}(e):"VIDEO"===e.tagName?function(e){return e.querySelector("source")&&e.readyState>1&&e.videoWidth>0?Promise.resolve():new Promise((t=>{e.appendChild((0,i.createTag)("source",{src:e.getAttribute("data-video-source"),type:"video/mp4"})),["loadedmetadata","error"].forEach((n=>e.addEventListener(n,t,{once:!0}))),e.load()}))}(e):"IFRAME"===e.tagName?function(e){return new Promise((t=>{const n=e.src.match(/\/v\/(\d+)/),o=n?n[1]:null;o||t(),window.fetch("https://video.tv.adobe.com/v/".concat(o,"?format=json")).then((e=>e.json())).then((n=>{const o=n.sources.find((e=>e.active));e.setAttribute("data-video-width",o.width),e.setAttribute("data-video-height",o.height),t()}))}))}(e):Promise.resolve()));return await Promise.all(t),e.filter((e=>e.checkVisibility()&&!e.closest(".icon-area")&&!e.src.includes(".svg")))}function I(e){var t,n;const o=("VIDEO"===e.tagName?"video":"IFRAME"===e.tagName&&"mpc")||"image",{naturalWidth:i,naturalHeight:s}=function(e,t){let n,o;switch(t){case"video":n=e.videoWidth,o=e.videoHeight;break;case"mpc":n=e.getAttribute("data-video-width"),o=e.getAttribute("data-video-height");break;default:n=e.getAttribute("width")?parseInt(e.getAttribute("width"),10):e.naturalWidth,o=e.getAttribute("height")?parseInt(e.getAttribute("height"),10):e.naturalHeight}return{naturalWidth:n,naturalHeight:o}}(e,o),{offsetWidth:a,offsetHeight:r}=e,c=a>=document.documentElement.clientWidth;let l=c?1.5:2;["video","mpc"].includes(o)&&(l=1);const u=c?P:a,d=Math.round(i/u*100)/100,h=Math.ceil(20*d)/20;let f=h<l;f&&"image"===o&&function(e){var t;const n=null===(t=e.closest)||void 0===t?void 0:t.call(e,"picture");if(!n)return!1;const o=n.offsetWidth;let i=n.parentElement,s=0;for(;i&&s<5;){const e=i.offsetWidth;if(e===o)return!1;if(e>0&&e!==o)return!0;i=i.parentElement,s+=1}return!1}(e)&&(f=!1);const m=c?"".concat(P*l,"x").concat(Math.ceil(P*l*s/i)):"".concat(Math.ceil(a*l),"x").concat(Math.ceil(r*l)),p=null===(t=e.querySelector)||void 0===t?void 0:t.call(e,"source"),g=(null===p||void 0===p?void 0:p.src)&&"images-tv.adobe.com"===new URL(p.src).hostname,v=("mpc"===o?"Video (MPC)":g&&"Video (MPC source)")||"video"===o&&"Video (Sharepoint)"||"Image";let S;return"video"!==o||!e.webkitAudioDecodedByteCount||!e.controls&&e.muted||(S="Has audio, MPC should be used instead."),"video"===o&&e.closest(".background")&&g&&(S="MPC MP4 used as background, Sharepoint MP4 should be used instead."),{type:o,src:e.getAttribute("video"===o?"data-video-source":"src"),fragmentPath:null===e||void 0===e||null===(n=e.closest(".fragment"))||void 0===n||null===(n=n.dataset)||void 0===n?void 0:n.path,naturalDimensions:"".concat(i,"x").concat(s),displayDimensions:"".concat(a,"x").concat(r),recommendedDimensions:m,roundedFactor:h,hasMismatch:f,typeLabel:v,notes:S}}function L(e,t){let n;switch(t.type){case"video":if(e.closest(".video-holder"))n=".video-holder";else{const t=e.parentElement;t.style.position="relative",n=t.tagName}break;case"mpc":n=".milo-video";break;default:n="picture"}let o=e.closest(n).querySelector(".asset-meta");o||(o=(0,i.createTag)("div",{class:"asset-meta"}),e.closest(n).insertBefore(o,e.nextSibling));const s=(0,i.createTag)("div",{class:"asset-meta-entry preflight-decoration ".concat(t.hasMismatch?"is-invalid":"is-valid")},t.hasMismatch?"Size: too small, use > ".concat(t.recommendedDimensions):"Size: correct");if(o.append(s),"mpc"===t.type){const{title:t}=e,n=(0,i.createTag)("div",{class:"asset-meta-entry preflight-decoration ".concat(t.length?"is-valid":"is-invalid")},t.length?"Title: ".concat(t):"Title: no title");o.append(n)}}function C(){return!window.matchMedia("(min-width: 1200px)").matches}async function T(e,t,n){if(C())return{title:u.AssetDimensions,status:s.EMPTY,description:"Viewport is too small to run asset checks (minimum width: 1200px)."};if(b.has(e)){const t=b.get(e);return JSON.parse(JSON.stringify(t))}const o=[...t.querySelectorAll("main picture img, main video, :is(main, .dialog-modal:not(#preflight)) .adobetv")];if(!o.length)return{title:u.AssetDimensions,status:s.EMPTY,description:"No assets found in the main content."};const i=await A(o);if(!i.length)return{title:u.AssetDimensions,status:s.EMPTY,description:"No eligible assets found (visible, non-icon, non-SVG)."};const a=[],r=[];n&&t.body.classList.add("preflight-assets-analysis");for(const s of i){const e=I(s);n&&L(s,e),e.hasMismatch?a.push(e):r.push(e)}n&&t.body.classList.remove("preflight-assets-analysis");const c={title:u.AssetDimensions,status:a.length>0?s.FAIL:s.PASS,description:a.length>0?"".concat(a.length," asset(s) have dimension mismatches."):"All assets have matching dimensions.",details:{assetsWithMismatch:a,assetsWithMatch:r}};return c.status!==s.PASS&&c.status!==s.FAIL||b.set(e,JSON.parse(JSON.stringify(c))),c}function E(e,t,n){return[T(e,t,n)]}var F=new Map;function M(e){return e!==document?Promise.resolve(null):new Promise((e=>{new PerformanceObserver((t=>{const n=t.getEntries(),o=n[n.length-1];o&&e(o)})).observe({type:"largest-contentful-paint",buffered:!0})}))}async function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;if(F.has(e))return F.get(e);const o=n(t);return F.set(e,o),o}function j(e){const t=e.querySelector("main > div.section"),n=t&&t.childElementCount>1;return{title:l.SingleBlock,status:n?s.FAIL:s.PASS,description:n?"First section has more than one block.":"First section has exactly one block."}}function D(e){const t=(0,i.getMetadata)("personalization",e),n="on"===(0,i.getMetadata)("target",e),o=t||n;return{title:l.Personalization,status:o?s.FAIL:s.PASS,description:o?"MEP or Target enabled.":"Personalization is currently not enabled."}}async function O(e,t,n){const o=await N(e,t,n);if(!o)return{title:l.Performance,status:s.FAIL,description:"No LCP element found."};const i=t.querySelector("main > div.section"),a=(null===o||void 0===o?void 0:o.element)&&(null===o||void 0===o?void 0:o.url)&&(null===i||void 0===i?void 0:i.contains(o.element));return{title:l.LcpEl,status:a?s.PASS:s.FAIL,description:a?"Valid LCP in the first section detected.":"No LCP image or video in the first section detected. Please check the page and make sure the first section is your marquee and all the fragments are working properly. If everything is good, ignore the error."}}async function z(e,t,n){const o=await N(e,t,n);if(!o||!o.url||o.url.match("media_.*.mp4"))return{title:l.ImageSize,status:s.EMPTY,description:"No image as LCP element."};try{const e=(await fetch(o.url).then((e=>e.blob()))).size/1024<=100;return{title:l.ImageSize,status:e?s.PASS:s.FAIL,description:e?"LCP image is less than 100KB.":"LCP image is over 100KB."}}catch(i){return{title:l.ImageSize,status:s.EMPTY,description:"Could not fetch LCP image."}}}async function H(e,t,n){var o,i,a;const r=await N(e,t,n),c=null===r||void 0===r||null===(o=r.url)||void 0===o?void 0:o.match(/\.mp4/),u=(null===r||void 0===r||null===(i=r.element)||void 0===i?void 0:i.closest("video"))||(null===r||void 0===r||null===(a=r.element)||void 0===a?void 0:a.querySelector("video"));if(!c&&!u)return{title:l.VideoPoster,status:s.EMPTY,description:"No video as LCP element."};const d=!(null===u||void 0===u||!u.poster);return{title:l.VideoPoster,status:d?s.PASS:s.FAIL,description:d?"LCP video has a poster attribute.":"LCP video has no poster attribute."}}async function x(e,t,n){var o;const i=await N(e,t,n);if(null===i||void 0===i||!i.element)return{title:l.Performance,status:s.FAIL,description:"No LCP element found."};const a=i.element.closest(".fragment")||(null===(o=i.element.closest(".section"))||void 0===o?void 0:o.querySelector('[data-path*="fragment"]'));return{title:l.Fragments,status:a?s.FAIL:s.PASS,description:a?"Fragments used within the LCP section.":"No fragments used within the LCP section."}}async function R(e,t,n){const o=await N(e,t,n);if(null===o||void 0===o||!o.element)return{title:l.Performance,status:s.FAIL,description:"No LCP element found."};const i=o.element.closest(".section"),a="true"===(null===i||void 0===i?void 0:i.dataset.hasPlaceholders);return{title:l.Placeholders,status:a?s.FAIL:s.PASS,description:a?"Placeholders found within the LCP section":"No placeholders found within the LCP section."}}async function V(e,t,n){var o;const i=await N(e,t,n);if(null===i||void 0===i||!i.element)return{title:l.Icons,status:s.FAIL,description:"No LCP element found."};const a=null===(o=i.element.closest(".section"))||void 0===o?void 0:o.querySelector(".icon-milo");return{title:l.Icons,status:a?s.FAIL:s.PASS,description:a?"Icons found within the LCP section.":"No icons found within the LCP section."}}function B(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:M;return[O(e,t,n),j(t),z(e,t,n),H(e,t,n),x(e,t,n),D(t),R(e,t,n),V(e,t,n)]}var q=["news.adobe.com"],W="https://spidy.gwp.corp.adobe.com",Y=new Map;function J(e){const t=e.querySelectorAll("h1");let n,o;return 0===t.length?(n=s.FAIL,o="No H1 found on the page. Each page should have exactly one H1 heading."):t.length>1?(n=s.FAIL,o="Found ".concat(t.length," H1 headings. Each page should have exactly one H1 heading.")):(n=s.PASS,o=c.h1Count),{id:r.h1Count,title:a.h1Count,status:n,description:o}}function G(e){const t=e.title.replace(/\s/g,"").length;let n,o;return t<15?(n=s.FAIL,o="Title size is too short. A title should be at least 15 characters."):t>70?(n=s.FAIL,o="Title size is too long. A title should not exceed 70 characters."):(n=s.PASS,o=c.title),{id:r.title,title:a.title,status:n,description:o}}async function U(e){const t=e.querySelector("link[rel='canonical']");let n,o;if(t){const{href:e}=t;try{const t=await fetch(e,{method:"HEAD"});t.ok?t.status>=300&&t.status<=308?(n=s.FAIL,o="Reason: Canonical reference redirects"):(n=s.PASS,o=c.canonical):(n=s.FAIL,o="Reason: Error with canonical reference.")}catch(i){n=s.LIMBO,o="Canonical cannot be crawled."}}else n=s.PASS,o="Canonical is self-referencing.";return{id:r.canonical,title:a.canonical,status:n,description:o}}async function _(e){const t=e.querySelector('meta[name="description"]');let n,o;if(t){const e=t.content.replace(/\s/g,"").length;e<50?(n=s.FAIL,o="Reason: Meta description too short."):e>150?(n=s.FAIL,o="Reason: Meta description too long."):(n=s.PASS,o="Meta description is good.")}else n=s.FAIL,o="Reason: No meta description found.";return{id:r.description,title:a.description,status:n,description:o}}async function K(e){const{length:t}=e.documentElement.innerText.trim();let n,o;return t>100?(n=s.PASS,o=c.bodySize):(n=s.FAIL,o="Reason: Not enough content."),{id:r.bodySize,title:a.bodySize,status:n,description:o}}async function Q(e){var t;const{innerHTML:n}=e.documentElement;let o,i;return n.replace(null===(t=e.getElementById("preflight"))||void 0===t?void 0:t.outerHTML,"").toLowerCase().includes("lorem ipsum")?(o=s.FAIL,i="Reason: Lorem ipsum is used on the page."):(o=s.PASS,i=c.loremIpsum),{id:r.loremIpsum,title:a.loremIpsum,status:o,description:i}}function X(){return{id:r.links,title:a.links,status:s.LIMBO,description:"A VPN connection is required to use the link check service. Please turn on VPN and refresh the page.",details:{badLinks:[]}}}async function Z(e,t){try{const n=await fetch("".concat(e,"/api/url-http-status"),t);if(!n.ok)return[];const o=await n.json();return o.data&&0!==o.data.length?o.data.reduce(((e,t)=>{const n="ECONNREFUSED"===t.status?503:t.status;return n>=399&&(t.status=n,e.push(t)),e}),[]):[]}catch(n){return window.lana.log("There was a problem connecting to the link check API ".concat(e,"/api/url-http-status. ").concat(n),{tags:"preflight",errorType:"i"}),[]}}async function $(e){let{area:t,urlHash:n,envName:i}=e;if(n&&Y.has(n)){const e=Y.get(n);return{...e,details:{...e.details,linksChecked:!0}}}const{spidy:l}=await(0,o.getServiceConfig)(window.location.origin,i),u=(null===l||void 0===l?void 0:l.url)||W;if(!await async function(e){try{return!!(await fetch(e,{method:"HEAD"})).ok}catch(t){return window.lana.log("There was a problem connecting to the link check API ".concat(e,". ").concat(t),{tags:"preflight",errorType:"i"}),!1}}(u))return X();const d=await async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const{preflight:n}=await(0,o.getServiceConfig)(window.location.origin,t),i=null!==n&&void 0!==n&&n.ignoreDomains?null===n||void 0===n?void 0:n.ignoreDomains.split(",").map((e=>e.trim())):q;return[...e.querySelectorAll("a")].filter((e=>!(!e.href||e.href.includes("tel:")||e.href.includes("mailto:")||e.href.startsWith("#")||e.href.startsWith("https://#")||e.href.includes("bookmark://")||e.href.includes("local")||e.closest(".preflight")||i.some((t=>t===e.hostname)))&&(e.liveHref=e.href,e.href.includes("hlx.page")&&(e.liveHref=e.href.replace("hlx.page","hlx.live")),e.href.includes("aem.page")&&(e.liveHref=e.href.replace("aem.page","aem.live")),!0)))}(t,i),h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const n=Math.ceil(e.length/t),o=Math.ceil(e.length/n);return Array.from({length:n},((t,n)=>e.slice(n*o,n*o+o)))}(d),f={method:"POST",headers:{"Content-Type":"application/json"}},m=[];[...t.querySelectorAll("a")].forEach((e=>{var t;if(null!==(t=e.dataset)&&void 0!==t&&t.httpLink){const t={url:e.liveHref,status:"authored as http"};m.push(t)}}));for(const o of h){const e=o.map((e=>e.liveHref)),t={...f,body:JSON.stringify({urls:e})},n=await Z(u,t);m.push(...n)}const p=m.map((e=>d.find((t=>function(e,t){return t.liveHref===e.url&&(t.closest("header")&&(t.parent="gnav"),t.closest("main")&&(t.parent="main"),t.closest("footer")&&(t.parent="footer"),t.classList.add("problem-link"),t.status=e.status,t.dataset.status=t.status,!0)}(e,t))))).filter(Boolean),g=p.length,v=g>1||0===g?"links":"link",S=g>0?s.FAIL:s.PASS,w=S===s.FAIL?"Reason: ".concat(g," problem ").concat(v,". Use the list below to fix them."):c.links,y={id:r.links,title:a.links,status:S,description:w,details:{badLinks:p}};return n&&Y.set(n,y),y}function ee(e){let{url:t,area:n=document,envName:o}=e;return[J(n),G(n),U(n),_(n),K(n),Q(n),(async()=>(await new Promise((e=>{const t=(0,i.getConfig)();if(t.footerReady)return void e();const n=t.onFooterReady;t.onFooterReady=async()=>{var o;n&&await n(),await(null===(o=window.milo)||void 0===o?void 0:o.deferredPromise),t.footerReady=!0,e()},(0,i.updateConfig)(t)})),$({area:n,url:t,envName:o})))()]}var te=null,ne={assets:{isViewportTooSmall:C,checkImageDimensions:T,runChecks:E},performance:{getLcpEntry:N,checkSingleBlock:j,checkForPersonalization:D,checkLcpEl:O,checkImageSize:z,checkVideoPoster:H,checkFragments:x,checkPlaceholders:R,checkIcons:V,runChecks:B},seo:{checkH1s:J,checkTitle:G,checkCanon:U,checkDescription:_,checkBody:K,checkLorem:Q,connectionError:X,checkLinks:$,runChecks:ee}},oe=()=>te||new Promise((e=>{const t=(0,i.getConfig)();fetch("".concat((0,i.getFederatedContentRoot)(),"/federal/preflight/preflight-config.json")).then((e=>e.json())).then((n=>{var o;const i=(null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.find((e=>e.value===t.imsClientId)))?"ASO":"OG";te=i,e(i)})).catch((()=>{e(te="OG")}))})),ie=async(e,t)=>{const n="ASO"===await oe();return{assets:await Promise.all(E(e,t)),performance:await Promise.all(B(e,t)),seo:n?await k():ee({url:e,area:t})}},se=e=>{const t=[...e.assets||[],...e.performance||[],...e.seo||[]];return{isViewportTooSmall:C(),runChecks:e,hasFailures:t.some((e=>"fail"===e.status))}};async function ae(e,t){const n=await ie(e,t);return se(n)}}}]);
//# sourceMappingURL=4491.b25a57b6.chunk.js.map