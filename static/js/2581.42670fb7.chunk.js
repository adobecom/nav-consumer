"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[2581,3662],{3662:(e,t,s)=>{function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if("function"!==typeof e)return;let s=null;return function(){for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];clearTimeout(s),s=setTimeout((()=>e(...r)),t)}}s.r(t),s.d(t,{action_default:()=>r,debounce:()=>a});var r={debounce:a}},2581:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a,r,i,n,l,c,o=s(7528),h=s(4705),u=s(7587),d=(s(7797),s(3662)),p=s(5897),g=s(212),f=(s(6850),{scope:"adobecom",apiKey:"adobedotcom2"}),m={hasResults:"has-results",inputIsPopulated:"feds-search-input--isPopulated"},{locale:v}=(0,g.getConfig)(),[,b="US"]=v.ietf.split("-"),L=class e{constructor(e){(0,h.A)(this,"onSearchInput",(0,d.debounce)((()=>{const e=this.getQuery();if(!e.length)return this.resultsList.replaceChildren(),void delete this.query;e!==this.query&&(this.query=e,this.getSuggestions().then((e=>{const t=null===e||void 0===e?void 0:e.suggested_completions;if(!Array.isArray(t)||!t.length)return this.resultsList.replaceChildren(this.getNoResultsTemplate()),void(this.parent instanceof HTMLElement&&this.parent.classList.remove(m.hasResults));this.resultsList.replaceChildren(this.getResultsTemplate(t)),this.parent instanceof HTMLElement&&this.parent.classList.add(m.hasResults)})).catch((()=>{this.resultsList.replaceChildren(this.getNoResultsTemplate()),this.parent instanceof HTMLElement&&this.parent.classList.remove(m.hasResults)})))}),150)),this.icon=e.icon,this.trigger=e.trigger,this.parent=this.trigger.closest(".feds-nav-wrapper");new MutationObserver((()=>{this.clearSearchForm()})).observe(this.trigger,{attributeFilter:["aria-expanded"]}),(0,u.logErrorFor)(this.init.bind(this),"Search init has failed","errorType=e,module=gnav-search")}async init(){await this.getLabels(),this.decorate(),this.addEventListeners(),this.toggleDropdown()}async getLabels(){this.labels={},[this.labels.search,this.labels.clearResults,this.labels.tryAdvancedSearch]=await(0,p.replaceKeyArray)(["search","clear-results","try-advanced-search"],(0,g.getFedsPlaceholderConfig)())}decorate(){this.input=(0,u.toFragment)(a||(a=(0,o.A)(['<input placeholder="','" aria-label="','" class="feds-search-input" autocomplete="off" aria-autocomplete="list" aria-controls="feds-search-results" daa-ll="search-results:standard search" />'])),this.labels.search,this.labels.search),this.resultsList=(0,u.toFragment)(r||(r=(0,o.A)(['<ul class="feds-search-results" id="feds-search-results" role="region" daa-ll="search-results:suggested-search:click"></ul>']))),this.clearButton=(0,u.toFragment)(i||(i=(0,o.A)(['<button tabindex="0" class="feds-search-clear" aria-label="','"></button>'])),this.labels.clearResults),this.searchBar=(0,u.toFragment)(n||(n=(0,o.A)(['\n      <aside class="feds-search-dropdown">\n        <div class="feds-search-bar">\n          <div class="feds-search-field">\n            ','\n            <div class="feds-search-icons">\n              ',"\n              ","\n            </div>\n          </div>\n          ","\n        </div>\n      </aside>"])),this.input,this.icon,this.clearButton,this.resultsList),this.trigger.after(this.searchBar)}clearSearchForm(){this.input.value="",this.onSearchInput()}addEventListeners(){this.trigger.addEventListener("click",(()=>{this.toggleDropdown()})),this.input.addEventListener("input",(()=>{this.onSearchInput()})),this.input.addEventListener("keydown",(t=>{if("Escape"===t.code&&(this.input.value.length?this.clearSearchForm():u.isDesktop.matches&&((0,u.closeAllDropdowns)(),this.trigger.focus())),"Enter"===t.code){if(!this.query)return;window.location.href=e.getHelpxLink(this.query)}})),this.resultsList.addEventListener("keydown",(e=>{"Escape"===e.code&&this.input.focus()})),this.clearButton.addEventListener("click",(()=>{this.clearSearchForm(),this.input.focus()})),u.isDesktop.addEventListener("change",(()=>{(0,u.closeAllDropdowns)()}))}getSuggestions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.query;const{env:t}=(0,g.getConfig)(),s="https://".concat("prod"===t?"adobesearch":"adobesearch-stage",".adobe.io/autocomplete/completions?q[locale]=").concat(v.ietf,"&scope=").concat(f.scope,"&q[text]=").concat(encodeURIComponent(e));return fetch(s,{headers:{"x-api-key":f.apiKey}}).then((e=>e.json())).catch((()=>{}))}getQuery(){const e=this.input.value.trim();return e.length?(this.input.classList.add(m.inputIsPopulated),e):(this.input.classList.remove(m.inputIsPopulated),this.resultsList.replaceChildren(),this.parent instanceof HTMLElement&&this.parent.classList.remove(m.hasResults),"")}getResultsTemplate(t){const s=document.createDocumentFragment();return t.map((t=>{const a=t.name;if(!a.length)return;const r=(()=>{let e=0;const t=this.query.length;for(;e<t&&this.query[e].toLowerCase()===a[e].toLowerCase();)e+=1;return this.query.substring(0,e).trim()})(),i=new RegExp("(".concat(r,")"),"i");let n;const c=a.replace(i,(e=>(n=e,""))),h=(0,u.toFragment)(l||(l=(0,o.A)(['<li>\n          <a href="','" class="feds-search-result" aria-label="','">\n            <span>',"</span>","\n          </a>\n        </li>"])),e.getHelpxLink(a),a,n,c);s.appendChild(h)})),s}getNoResultsTemplate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.query;return(0,u.toFragment)(c||(c=(0,o.A)(['<li>\n      <a href="','" class="feds-search-result"><span>',"</span></a>\n    </li>"])),e.getHelpxLink(t),this.labels.tryAdvancedSearch)}focusInput(){u.isDesktop.matches&&this.input.focus()}toggleDropdown(){if(!u.isDesktop.matches)return;(0,u.trigger)({element:this.trigger})?((0,u.setCurtainState)(!0),this.focusInput()):this.clearSearchForm()}static getHelpxLink(e){return"https://helpx.adobe.com".concat(v.prefix,"/globalsearch.html?q=").concat(encodeURIComponent((e||"").trim()),"&start_index=0&country=").concat(b)}}}}]);
//# sourceMappingURL=2581.42670fb7.chunk.js.map