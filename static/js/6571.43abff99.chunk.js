(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[6571,3815,6196,8952],{6271:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=6271,e.exports=a},6184:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=6184,e.exports=a},3815:(e,a,t)=>{"use strict";t.r(a),t.d(a,{a:()=>d,b:()=>c,c:()=>s,d:()=>u});var n=t(5379),r={};window.mph={};var l=async(e,a)=>{try{var t;null===(t=(e.ok?await e.json():{data:[]}).data)||void 0===t||t.forEach((e=>{window.mph[e.key]=e.value,a[e.key]=e.value}))}catch(n){window.lana.log("Error parsing placeholder json: ".concat(n.message),{tags:"placeholders",errorType:"e"})}},o=async e=>{let{config:a,sheet:t,placeholderRequest:o,placeholderPath:i}=e,d=i||((e,a)=>{let t="".concat(e.locale.contentRoot,"/placeholders.json"),n="default"!==a&&"string"==typeof a&&a.length?"?sheet=".concat(a):"";return"".concat(t).concat(n)})(a,t);return r[d]||(r[d]=((e,a)=>new Promise((async t=>{let r=await a||await(0,n.K)({resource:e,withCacheRules:!0}).catch((()=>({}))),o={};if(Array.isArray(r))for(let e of r)await l(e,o);else await l(r,o);t(o)})))(d,o)),r[d]};async function i(e,a,t){var r,l;let i,d=!1,c="en-US",s=(0,n.f)("disable-geo-placeholders")||"off",u=()=>{let e=a.locale.contentRoot,t=a.locale.prefix;return t.length?e.endsWith(t)?e.replace(t,""):e.replace("".concat(t,"/"),"/"):e},p=async()=>{let e={locale:{ietf:c,contentRoot:u()}},a=await o({config:e,sheet:t}).catch((()=>({})));return d=!0,a};if(null!==(r=a.placeholders)&&void 0!==r&&r[e])return a.placeholders[e];if(i="on"===s?await p():await o({config:a,sheet:t}),"string"==typeof(null===(l=i)||void 0===l?void 0:l[e]))return i[e];if(!d&&a.locale.ietf!==c){let a=await p();if(null!==a&&void 0!==a&&a[e])return a[e]}return function(e){return e.replaceAll("-"," ")}(e)}async function d(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";return"string"==typeof e&&e.length?await i(e,a,t):""}async function c(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if(!Array.isArray(e)||!e.length)return[];let n=[];return e.forEach((e=>{n.push(i(e,a,t))})),await Promise.all(n)}async function s(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default";if("string"!=typeof e||!e.length)return"";let r=[...e.matchAll(new RegExp(t))];if(!r.length)return e;let l=Array.from(r,(e=>e[1]||e[2])),o=await c(l,a,n),i=0,d=e.replaceAll(t,(()=>o[i++]));return d=d.replace(/&nbsp;/g,"\xa0"),d}async function u(e){let{placeholderPath:a,placeholderRequest:t,nodes:r}=e;if(!r.length)return;let l=(0,n.i)();await o({placeholderPath:a,config:l,placeholderRequest:t});let i=r.map((async e=>{if(e.nodeType===Node.TEXT_NODE)e.nodeValue=await s(e.nodeValue,l);else if(e.nodeType===Node.ELEMENT_NODE){let a=[...e.attributes].map((async e=>{let a=await s(e.value,l);return{name:e.name,value:a}}));(await Promise.all(a)).forEach((a=>{let{name:t,value:n}=a;e.setAttribute(t,n)}))}}));await Promise.all(i)}},6571:(e,a,t)=>{"use strict";t.r(a),t.d(a,{LANA_OPTIONS:()=>f,default:()=>g,handleIFrameEvents:()=>w,lanaLog:()=>h});var n=t(3815),r=t(5379),l=(t(2560),"AppLoaded"),o="EXTERNAL",i="SWITCH",d="RETURN_BACK",c="OrderComplete",s="Error",u="Close",p=(e,a)=>{var t;let n=null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(t=t.product_arrangement)||void 0===t?void 0:t.family;return n&&a.includes(n)},f={clientId:"merch-at-scale",sampleRate:10,tags:"manage-plan"},h=async(e,a)=>{var t,n,r;let{userId:l}=null!==(t=await(null===(n=window.adobeIMS)||void 0===n?void 0:n.getProfile()))&&void 0!==t?t:{};null===(r=window.lana)||void 0===r||r.log("ManagePlan/".concat(a,"/").concat(l,": ").concat(e),f)},m=!1;var w=e=>{var a,t,n;let{data:p}=e,f=null;try{f=JSON.parse(p)}catch{return}let{app:w,subType:g,data:v}=f||{};if("ManagePlan"===w)switch(g){case l:null!==(a=document.querySelector(".upgrade-flow-content iframe"))&&void 0!==a&&null!==(a=a.classList)&&void 0!==a&&a.remove("loading"),null!==(t=document.querySelector(".upgrade-flow-content sp-theme"))&&void 0!==t&&t.remove(),h("Showing modal",g);break;case o:if(null===v||void 0===v||!v.externalUrl||!v.target)return;h("Opening external URL",g),window.open(v.externalUrl,v.target);break;case i:if(null===v||void 0===v||!v.externalUrl||!v.target)return;h("Opening external URL (SWITCH)",g),window.open(v.externalUrl,v.target);break;case d:if(null===v||void 0===v||!v.externalUrl||!v.target)return;v.returnUrl&&window.sessionStorage.setItem("upgradeModalReturnUrl",v.returnUrl),h("Opening external URL (RETURN_BACK)",g),window.open(v.externalUrl,v.target);break;case c:m=!0;break;case s:break;case u:m&&(h("Reloading page to update entitlements",g),(0,r.aa)()),h("Closing modal",g),null===(n=document.querySelector(".dialog-modal.upgrade-flow-modal"))||void 0===n||n.dispatchEvent(new Event("closeModal"))}};async function g(e,a,l,o,i){var d;if(!i.includes(e)||null!==l&&void 0!==l&&l.find((e=>p(e,i))))return;let c=null===l||void 0===l||null===(d=l.filter((e=>!0===e.change_plan_available)))||void 0===d?void 0:d.find((e=>p(e,o)));if(!c)return;let{env:s,base:u}=(0,r.i)(),f=function(e,a,t){var n,r;let l=null===e||void 0===e?void 0:e.value[0].offerId,o=null===a||void 0===a||null===(n=a.offer)||void 0===n?void 0:n.offer_id;if(!l||!o)return;let i=new URL("prod"===(null===t||void 0===t?void 0:t.name)?"https://plan.adobe.com":"https://stage.plan.adobe.com");return i.searchParams.append("intent","switch"),i.searchParams.append("toOfferId",l),i.searchParams.append("fromOffer",o),i.searchParams.append("language","en"),i.searchParams.append("surface","ADOBE_COM"),i.searchParams.append("ctx","if"),i.searchParams.append("ctxRtUrl",encodeURIComponent(window.location.href)),null!==(r=e.dataset)&&void 0!==r&&r.promotionCode&&i.searchParams.append("promoCode",e.dataset.promotionCode),i.toString()}(a,c,s);if(f){window.addEventListener("message",w);let{getModal:e}=await t.e(4554).then(t.bind(t,2173)),a=async(a,n)=>{a.preventDefault(),await Promise.all([t(6184)("".concat(u,"/features/spectrum-web-components/dist/theme.js")),t(6271)("".concat(u,"/features/spectrum-web-components/dist/progress-circle.js"))]);let l=(0,r.r)("div",{class:"upgrade-flow-content"}),o=(0,r.r)("iframe",{src:f,title:"Upgrade modal",frameborder:"0",marginwidth:"0",marginheight:"0",allowfullscreen:"true",loading:"lazy",class:"loading upgrade-flow-iframe"}),i=(0,r.r)("sp-progress-circle",{label:"progress circle",indeterminate:!0,size:"l"}),d=(0,r.r)("sp-theme",{theme:"spectrum",color:"light",scale:"medium",dir:"ltr"});if(d.append(i),l.append(d),l.append(o),n){let e=window.location.hash.replace("#","")===n?"":window.location.hash;window.location.hash=n,window.addEventListener("milo:modal:closed",(()=>{window.location.hash=e}),{once:!0})}return e(null,{id:"switch-modal",content:l,closeEvent:"closeModal",class:["upgrade-flow-modal"]})};return{text:await(0,n.a)("upgrade-now",(0,r.i)()),className:"upgrade",url:f,handler:a}}}}}]);
//# sourceMappingURL=6571.43abff99.chunk.js.map