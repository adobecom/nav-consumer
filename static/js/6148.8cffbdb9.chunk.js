"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[6148],{6148:(e,t,n)=>{n.r(t),n.d(t,{checkAndAddMatch:()=>r,default:()=>o});n(2560);function r(e,t,n){0===e.filter((e=>!(t.end<e.start||t.start>e.end))).length&&e.length<n&&e.push(t)}async function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=["zh","ko","ja","th","he"].includes(t),l=document.querySelector("main"),a=await fetch("".concat(e,"?limit=").concat(n));if(!l||!a.ok)return;let i=await a.json(),c=l.textContent.toLowerCase(),d=l.querySelectorAll("a").length,s=c.split(/\s/).length;if(Math.floor(s/100)-d<=0)return;let u=o?"":"\\b",h=(Array.isArray(i)?i:i.data).filter((e=>{let{Keyword:t}=e;return-1!==c.indexOf(t.toLowerCase())})).sort(((e,t)=>t.Keyword.length-e.Keyword.length)).map((e=>({regexp:new RegExp("".concat(u,"(").concat(e.Keyword.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&"),")").concat(u),"iu"),...e})));0!==h.length&&l.querySelectorAll("div > p:not([class])").forEach((e=>{let t=e.querySelectorAll("a").length,n=e.textContent.split(/\s/).length,l=Math.floor(n/40)-t;(o||l>0)&&Array.from(e.childNodes).filter((e=>e.nodeType===Node.TEXT_NODE)).forEach((t=>{let n=[];h.forEach((e=>{let o=e.regexp.exec(t.nodeValue);o&&r(n,{item:e,start:o.index,end:o.index+e.Keyword.length},l)})),n.sort(((e,t)=>t.start-e.start)).forEach((n=>{let{item:r,start:o,end:l}=n,a=t.nodeValue,i=document.createElement("a");i.title=r.Keyword,i.href=r.URL,i.setAttribute("data-origin","interlink"),i.setAttribute("daa-ll","".concat(i.title,"--interlinks_p_").concat(r.Keyword)),i.appendChild(document.createTextNode(a.substring(o,l))),e.insertBefore(i,t.nextSibling),e.insertBefore(document.createTextNode(a.substring(l)),i.nextSibling),t.nodeValue=a.substring(0,o),h.splice(h.indexOf(r),1)}))}))}))}}}]);
//# sourceMappingURL=6148.8cffbdb9.chunk.js.map