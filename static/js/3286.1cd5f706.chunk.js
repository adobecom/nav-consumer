(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[3286,4512],{3664:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=3664,e.exports=a},4417:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=4417,e.exports=a},4512:(e,a,t)=>{"use strict";t.r(a),t.d(a,{decoratePlaceholderArea:()=>d,replaceKey:()=>c,replaceKeyArray:()=>i,replaceText:()=>s});var n=t(2861),r={};window.mph={};var o=async e=>{let{config:a,sheet:t,placeholderRequest:o,placeholderPath:l}=e;const c=l||((e,a)=>{const t="".concat(e.locale.contentRoot,"/placeholders.json"),n="default"!==a&&"string"===typeof a&&a.length?"?sheet=".concat(a):"";return"".concat(t).concat(n)})(a,t);return r[c]=r[c]||new Promise((async e=>{const a=await o||await(0,n.customFetch)({resource:c,withCacheRules:!0}).catch((()=>({}))),t=a.ok?await a.json():{data:[]};if(0===t.data.length)return void e({});const r={};t.data.forEach((e=>{window.mph[e.key]=e.value,r[e.key]=e.value})),e(r)})),r[c]};async function l(e,a,t){var r,l;let c=!1;const i="en-US",s=(0,n.getMetadata)("disable-geo-placeholders")||"off",d=()=>{const e=a.locale.contentRoot,t=a.locale.prefix;return t.length?e.endsWith(t)?e.replace(t,""):e.replace("".concat(t,"/"),"/"):e},u=async()=>{const e={locale:{ietf:i,contentRoot:d()}},a=await o({config:e,sheet:t}).catch((()=>({})));return c=!0,a};if(null!==(r=a.placeholders)&&void 0!==r&&r[e])return a.placeholders[e];let p;if(p="on"===s?await u():await o({config:a,sheet:t}),"string"===typeof(null===(l=p)||void 0===l?void 0:l[e]))return p[e];if(!c&&a.locale.ietf!==i){const a=await u();if(null!==a&&void 0!==a&&a[e])return a[e]}return function(e){return e.replaceAll("-"," ")}(e)}async function c(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if("string"!==typeof e||!e.length)return"";return await l(e,a,t)}async function i(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if(!Array.isArray(e)||!e.length)return[];const n=[];e.forEach((e=>{n.push(l(e,a,t))}));return await Promise.all(n)}async function s(e,a){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default";if("string"!==typeof e||!e.length)return"";const r=[...e.matchAll(new RegExp(t))];if(!r.length)return e;const o=Array.from(r,(e=>e[1]||e[2])),l=await i(o,a,n);let c=0,s=e.replaceAll(t,(()=>l[c++]));return s=s.replace(/&nbsp;/g,"\xa0"),s}async function d(e){let{placeholderPath:a,placeholderRequest:t,nodes:r}=e;if(!r.length)return;const l=(0,n.getConfig)();await o({placeholderPath:a,config:l,placeholderRequest:t});const c=r.map((async e=>{if(e.nodeType===Node.TEXT_NODE)e.nodeValue=await s(e.nodeValue,l);else if(e.nodeType===Node.ELEMENT_NODE){const a=[...e.attributes].map((async e=>{const a=await s(e.value,l);return{name:e.name,value:a}}));(await Promise.all(a)).forEach((a=>{let{name:t,value:n}=a;e.setAttribute(t,n)}))}}));await Promise.all(c)}},3286:(e,a,t)=>{"use strict";t.r(a),t.d(a,{LANA_OPTIONS:()=>f,default:()=>w,handleIFrameEvents:()=>m,lanaLog:()=>h});var n=t(4512),r=t(2861),o=(t(6850),"AppLoaded"),l="EXTERNAL",c="SWITCH",i="RETURN_BACK",s="OrderComplete",d="Error",u="Close",p=(e,a)=>{var t;const n=null===e||void 0===e||null===(t=e.offer)||void 0===t||null===(t=t.product_arrangement)||void 0===t?void 0:t.family;return n&&a.includes(n)},f={clientId:"merch-at-scale",sampleRate:10,tags:"manage-plan"},h=async(e,a)=>{var t,n,r;const{userId:o}=null!==(t=await(null===(n=window.adobeIMS)||void 0===n?void 0:n.getProfile()))&&void 0!==t?t:{};null===(r=window.lana)||void 0===r||r.log("ManagePlan/".concat(a,"/").concat(o,": ").concat(e),f)},g=!1;var m=e=>{var a,t,n;let{data:p}=e,f=null;try{f=JSON.parse(p)}catch(y){return}const{app:m,subType:w,data:v}=f||{};if("ManagePlan"===m)switch(w){case o:null===(a=document.querySelector(".upgrade-flow-content iframe"))||void 0===a||null===(a=a.classList)||void 0===a||a.remove("loading"),null===(t=document.querySelector(".upgrade-flow-content sp-theme"))||void 0===t||t.remove(),h("Showing modal",w);break;case l:if(null===v||void 0===v||!v.externalUrl||!v.target)return;h("Opening external URL",w),window.open(v.externalUrl,v.target);break;case c:if(null===v||void 0===v||!v.externalUrl||!v.target)return;h("Opening external URL (SWITCH)",w),window.open(v.externalUrl,v.target);break;case i:if(null===v||void 0===v||!v.externalUrl||!v.target)return;v.returnUrl&&window.sessionStorage.setItem("upgradeModalReturnUrl",v.returnUrl),h("Opening external URL (RETURN_BACK)",w),window.open(v.externalUrl,v.target);break;case s:g=!0;break;case d:break;case u:g&&(h("Reloading page to update entitlements",w),(0,r.reloadPage)()),h("Closing modal",w),null===(n=document.querySelector(".dialog-modal.upgrade-flow-modal"))||void 0===n||n.dispatchEvent(new Event("closeModal"))}};async function w(e,a,o,l,c){if(!c.includes(e))return;if(null===o||void 0===o?void 0:o.find((e=>p(e,c))))return;const i=null===o||void 0===o?void 0:o.filter((e=>!0===e.change_plan_available)),s=null===i||void 0===i?void 0:i.find((e=>p(e,l)));if(!s)return;const{env:d,base:u}=(0,r.getConfig)(),f=function(e,a,t){var n,r;const o=null===e||void 0===e?void 0:e.value[0].offerId,l=null===a||void 0===a||null===(n=a.offer)||void 0===n?void 0:n.offer_id;if(!o||!l)return;const c=new URL("prod"===(null===t||void 0===t?void 0:t.name)?"https://plan.adobe.com":"https://stage.plan.adobe.com");return c.searchParams.append("intent","switch"),c.searchParams.append("toOfferId",o),c.searchParams.append("fromOffer",l),c.searchParams.append("language","en"),c.searchParams.append("surface","ADOBE_COM"),c.searchParams.append("ctx","if"),c.searchParams.append("ctxRtUrl",encodeURIComponent(window.location.href)),null!==(r=e.dataset)&&void 0!==r&&r.promotionCode&&c.searchParams.append("promoCode",e.dataset.promotionCode),c.toString()}(a,s,d);if(f){window.addEventListener("message",m);const{getModal:e}=await t.e(9139).then(t.bind(t,1520)),a=async(a,n)=>{a.preventDefault(),await Promise.all([t(4417)("".concat(u,"/features/spectrum-web-components/dist/theme.js")),t(3664)("".concat(u,"/features/spectrum-web-components/dist/progress-circle.js"))]);const o=(0,r.createTag)("div",{class:"upgrade-flow-content"}),l=(0,r.createTag)("iframe",{src:f,title:"Upgrade modal",frameborder:"0",marginwidth:"0",marginheight:"0",allowfullscreen:"true",loading:"lazy",class:"loading upgrade-flow-iframe"}),c=(0,r.createTag)("sp-progress-circle",{label:"progress circle",indeterminate:!0,size:"l"}),i=(0,r.createTag)("sp-theme",{theme:"spectrum",color:"light",scale:"medium",dir:"ltr"});if(i.append(c),o.append(i),o.append(l),n){const e=window.location.hash.replace("#","")===n?"":window.location.hash;window.location.hash=n,window.addEventListener("milo:modal:closed",(()=>{window.location.hash=e}),{once:!0})}return e(null,{id:"switch-modal",content:o,closeEvent:"closeModal",class:["upgrade-flow-modal"]})};return{text:await(0,n.replaceKey)("upgrade-now",(0,r.getConfig)()),className:"upgrade",url:f,handler:a}}}}}]);
//# sourceMappingURL=3286.1cd5f706.chunk.js.map