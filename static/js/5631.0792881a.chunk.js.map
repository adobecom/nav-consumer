{"version":3,"file":"static/js/5631.0792881a.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/cdt/cdt.js","../node_modules/@adobecom/features/placeholders.js","../node_modules/@adobecom/features/personalization/promo-utils.js"],"sourcesContent":["import { getMetadata, getConfig, createTag, getMepEnablement } from '../../utils/utils.js';\nimport getPromoManifests from '../personalization/promo-utils.js';\nimport { replaceKey } from '../placeholders.js';\n\nfunction loadCountdownTimer(\n  container,\n  cdtLabel,\n  cdtDays,\n  cdtHours,\n  cdtMins,\n  timeRangesEpoch,\n) {\n  let isVisible = false;\n  let interval;\n  const oneMinuteinMs = 60000;\n\n  const instant = new URL(window.location.href)?.searchParams?.get('instant');\n  let currentTime = instant ? Date.parse(instant) : Date.now();\n\n  function appendTimerBox(parent, value, label) {\n    const fragment = createTag('div', { class: 'timer-fragment' }, null, { parent });\n    const unitContainer = createTag('div', { class: 'timer-unit-container' }, null, { parent: fragment });\n    createTag('div', { class: 'timer-unit-label' }, label, { parent: fragment });\n\n    createTag('div', { class: 'timer-box' }, Math.floor(value / 10).toString(), { parent: unitContainer });\n    createTag('div', { class: 'timer-box' }, (value % 10).toString(), { parent: unitContainer });\n  }\n\n  function appendSeparator(parent) {\n    createTag('div', { class: 'timer-separator' }, ':', { parent });\n  }\n\n  function appendTimerBlock(parent, daysLeft, hoursLeft, minutesLeft) {\n    const timerBlock = createTag('div', { class: 'timer-block' }, null, { parent });\n    appendTimerBox(timerBlock, daysLeft, cdtDays);\n    appendSeparator(timerBlock);\n    appendTimerBox(timerBlock, hoursLeft, cdtHours);\n    appendSeparator(timerBlock);\n    appendTimerBox(timerBlock, minutesLeft, cdtMins);\n  }\n\n  function appendTimerLabel(parent, label) {\n    createTag('div', { class: 'timer-label' }, label, { parent });\n  }\n\n  function removeCountdown() {\n    container.replaceChildren();\n  }\n\n  function render(daysLeft, hoursLeft, minutesLeft) {\n    if (!isVisible) return;\n\n    removeCountdown();\n\n    appendTimerLabel(container, cdtLabel);\n    appendTimerBlock(container, daysLeft, hoursLeft, minutesLeft);\n  }\n\n  function updateCountdown() {\n    for (let i = 0; i < timeRangesEpoch.length; i += 2) {\n      const startTime = timeRangesEpoch[i];\n      const endTime = timeRangesEpoch[i + 1];\n\n      if (currentTime >= startTime && currentTime <= endTime) {\n        isVisible = true;\n        const diffTime = endTime - currentTime;\n        const daysLeft = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n        const hoursLeft = Math.floor((diffTime % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));\n        const minutesLeft = Math.floor((diffTime % (1000 * 60 * 60)) / (1000 * 60));\n        render(daysLeft, hoursLeft, minutesLeft);\n        currentTime += oneMinuteinMs;\n        return;\n      }\n    }\n\n    isVisible = false;\n    clearInterval(interval);\n    removeCountdown();\n  }\n\n  function startCountdown() {\n    updateCountdown();\n    interval = setInterval(updateCountdown, oneMinuteinMs);\n  }\n\n  startCountdown();\n}\n\nfunction isMobile() {\n  return window.matchMedia('(max-width: 767px)').matches;\n}\n\nfunction getCDTTimeRange() {\n  const promoEnabled = getMepEnablement('manifestnames', 'promo');\n  const PAGE_URL = new URL(window.location.href);\n  const persManifests = getPromoManifests(promoEnabled, PAGE_URL.searchParams);\n  let cdtMetadata = null;\n  persManifests?.forEach((manifest) => {\n    if (manifest.disabled) return;\n    if (!manifest.event.cdtStart || !manifest.event.cdtEnd) return;\n\n    cdtMetadata = `${manifest.event.cdtStart},${manifest.event.cdtEnd}`;\n  });\n\n  if (!cdtMetadata) {\n    cdtMetadata = getMetadata('countdown-timer');\n    if (cdtMetadata === null) {\n      throw new Error('Metadata for countdown-timer is not available');\n    }\n  }\n\n  const cdtRange = cdtMetadata.split(',');\n  if (cdtRange.length % 2 !== 0) {\n    throw new Error('Invalid countdown timer range');\n  }\n\n  const timeRangesEpoch = cdtRange.map((time) => {\n    const parsedTime = Date.parse(time?.trim());\n    return Number.isNaN(parsedTime) ? null : parsedTime;\n  });\n\n  if (timeRangesEpoch.includes(null)) {\n    throw new Error('Invalid format for countdown timer range');\n  }\n\n  return timeRangesEpoch;\n}\n\nexport default async function initCDT(el, classList) {\n  const placeholders = ['cdt-ends-in', 'cdt-days', 'cdt-hours', 'cdt-mins'];\n  const [cdtLabel, cdtDays, cdtHours, cdtMins] = await Promise.all(\n    placeholders.map((placeholder) => replaceKey(placeholder, getConfig())),\n  );\n\n  const timeRangesEpoch = getCDTTimeRange();\n  const cdtDiv = createTag('div', { class: 'countdown-timer' }, null, { parent: el });\n  cdtDiv.classList.add(isMobile() ? 'vertical' : 'horizontal');\n  if (classList.contains('dark')) cdtDiv.classList.add('dark');\n  if (classList.contains('center')) cdtDiv.classList.add('center');\n\n  loadCountdownTimer(cdtDiv, cdtLabel, cdtDays, cdtHours, cdtMins, timeRangesEpoch);\n}\n","import { customFetch, getConfig, getMetadata } from '../utils/utils.js';\n\nconst fetchedPlaceholders = {};\nwindow.mph = {};\n\nconst getPlaceholdersPath = (config, sheet) => {\n  const path = `${config.locale.contentRoot}/placeholders.json`;\n  const query = sheet !== 'default' && typeof sheet === 'string' && sheet.length ? `?sheet=${sheet}` : '';\n  return `${path}${query}`;\n};\n\nconst parsePlaceholderJson = async (resp, placeholders) => {\n  try {\n    const json = resp.ok ? await resp.json() : { data: [] };\n    json.data?.forEach((item) => {\n      window.mph[item.key] = item.value;\n      placeholders[item.key] = item.value;\n    });\n  } catch (e) {\n    window.lana.log(`Error parsing placeholder json: ${e.message}`, { tags: 'placeholders', errorType: 'e' });\n  }\n};\n\nconst fetchPlaceholder = (path, placeholderRequest) => new Promise(\n  // eslint-disable-next-line no-async-promise-executor\n  async (resolve) => {\n    const resp = await placeholderRequest || await customFetch(\n      { resource: path, withCacheRules: true },\n    ).catch(() => ({}));\n    const placeholders = {};\n\n    if (Array.isArray(resp)) {\n      // Overlay placeholders\n      for (const r of resp) await parsePlaceholderJson(r, placeholders);\n    } else {\n      await parsePlaceholderJson(resp, placeholders);\n    }\n\n    resolve(placeholders);\n  },\n);\n\nconst fetchPlaceholders = async ({\n  config,\n  sheet,\n  placeholderRequest,\n  placeholderPath,\n}) => {\n  const path = placeholderPath || getPlaceholdersPath(config, sheet);\n\n  fetchedPlaceholders[path] ||= fetchPlaceholder(path, placeholderRequest);\n\n  return fetchedPlaceholders[path];\n};\n\nfunction keyToStr(key) {\n  return key.replaceAll('-', ' ');\n}\n\nasync function getPlaceholder(key, config, sheet) {\n  let defaultFetched = false;\n  const defaultLocale = 'en-US';\n  const geoLocDisabled = getMetadata('disable-geo-placeholders') || 'off';\n\n  const getDefaultContentRoot = () => {\n    const defaultContentRoot = config.locale.contentRoot;\n    const localePrefix = config.locale.prefix;\n\n    if (!localePrefix.length) return defaultContentRoot;\n\n    // Certain locale prefixes are common beginnings of words, such as /es\n    // This could also be part of a page path, such as '/esign'\n    if (defaultContentRoot.endsWith(localePrefix)) {\n      return defaultContentRoot.replace(localePrefix, '');\n    }\n\n    return defaultContentRoot.replace(`${localePrefix}/`, '/');\n  };\n\n  const getDefaultPlaceholders = async () => {\n    const defaultConfig = {\n      locale: {\n        ietf: defaultLocale,\n        contentRoot: getDefaultContentRoot(),\n      },\n    };\n\n    const defaultPlaceholders = await fetchPlaceholders({ config: defaultConfig, sheet })\n      .catch(() => ({}));\n    defaultFetched = true;\n    return defaultPlaceholders;\n  };\n\n  if (config.placeholders?.[key]) return config.placeholders[key];\n  let placeholders;\n\n  if (geoLocDisabled === 'on') {\n    placeholders = await getDefaultPlaceholders();\n  } else {\n    placeholders = await fetchPlaceholders({ config, sheet });\n  }\n\n  if (typeof placeholders?.[key] === 'string') return placeholders[key];\n\n  if (!defaultFetched && config.locale.ietf !== defaultLocale) {\n    const defaultPlaceholders = await getDefaultPlaceholders();\n    if (defaultPlaceholders?.[key]) return defaultPlaceholders[key];\n  }\n\n  return keyToStr(key);\n}\n\nexport async function replaceKey(key, config, sheet = 'default') {\n  if (typeof key !== 'string' || !key.length) return '';\n\n  const label = await getPlaceholder(key, config, sheet);\n  return label;\n}\n\nexport async function replaceKeyArray(keys, config, sheet = 'default') {\n  if (!Array.isArray(keys) || !keys.length) return [];\n\n  const promiseArr = [];\n  keys.forEach((key) => {\n    promiseArr.push(getPlaceholder(key, config, sheet));\n  });\n\n  const placeholders = await Promise.all(promiseArr);\n  return placeholders;\n}\n\nexport async function replaceText(\n  text,\n  config,\n  regex = /{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,\n  sheet = 'default',\n) {\n  if (typeof text !== 'string' || !text.length) return '';\n\n  const matches = [...text.matchAll(new RegExp(regex))];\n  if (!matches.length) {\n    return text;\n  }\n  const keys = Array.from(matches, (match) => match[1] || match[2]);\n  const placeholders = await replaceKeyArray(keys, config, sheet);\n  // The .shift method is very slow, thus using normal iterator\n  let i = 0;\n  // eslint-disable-next-line no-plusplus\n  let finalText = text.replaceAll(regex, () => placeholders[i++]);\n  finalText = finalText.replace(/&nbsp;/g, '\\u00A0');\n  return finalText;\n}\n\nexport async function decoratePlaceholderArea({\n  placeholderPath,\n  placeholderRequest,\n  nodes,\n}) {\n  if (!nodes.length) return;\n  const config = getConfig();\n  await fetchPlaceholders({ placeholderPath, config, placeholderRequest });\n  const replaceNodes = nodes.map(async (nodeEl) => {\n    if (nodeEl.nodeType === Node.TEXT_NODE) {\n      nodeEl.nodeValue = await replaceText(nodeEl.nodeValue, config);\n    } else if (nodeEl.nodeType === Node.ELEMENT_NODE) {\n      const attrPromises = [...nodeEl.attributes].map(async (attr) => {\n        const attrVal = await replaceText(attr.value, config);\n        return { name: attr.name, value: attrVal };\n      });\n      const results = await Promise.all(attrPromises);\n      results.forEach(({ name, value }) => {\n        nodeEl.setAttribute(name, value);\n      });\n    }\n  });\n  await Promise.all(replaceNodes);\n}\n","import { getMetadata, getConfig } from '../../utils/utils.js';\n\nconst GMTStringToLocalDate = (gmtString) => new Date(`${gmtString}+00:00`);\n\nconst APAC = ['au', 'cn', 'hk_en', 'hk_zh', 'id_en', 'id_id', 'in', 'in_hi', 'kr', 'my_en', 'my_ms', 'nz', 'ph_en', 'ph_fil', 'sg', 'th_en', 'th_th', 'tw', 'vn_en', 'vn_vi'];\nconst EMEA = ['ae_en', 'ae_ar', 'africa', 'at', 'be_en', 'be_fr', 'be_nl', 'bg', 'ch_de', 'ch_fr', 'ch_it', 'cis_en', 'cis_ru', 'cz', 'de', 'dk', 'ee', 'eg_ar', 'eg_en', 'es', 'fi', 'fr', 'gr_el', 'gr_en', 'hu', 'ie', 'il_en', 'il_he', 'iq', 'is', 'it', 'kw_ar', 'kw_en', 'lt', 'lu_de', 'lu_en', 'lu_fr', 'lv', 'mena_ar', 'mena_en', 'ng', 'nl', 'no', 'pl', 'pt', 'qa_ar', 'qa_en', 'ro', 'ru', 'sa_en', 'sa_ar', 'se', 'si', 'sk', 'tr', 'ua', 'uk', 'za'];\nconst AMERICAS = ['us', 'ar', 'br', 'ca', 'ca_fr', 'cl', 'co', 'cr', 'ec', 'gt', 'la', 'mx', 'pe', 'pr'];\nconst JP = ['jp'];\nconst REGIONS = { APAC, EMEA, AMERICAS, JP };\nconst localeCode = getConfig()?.locale?.prefix?.substring(1) || 'us';\nconst regionCode = Object.keys(REGIONS)\n  .find((r) => REGIONS[r]?.includes(localeCode))?.toLowerCase() || null;\n\nexport const isDisabled = (event, searchParams) => {\n  if (!event) return false;\n  if (event.locales && !event.locales.includes(localeCode)) return true;\n  const currentDate = searchParams?.get('instant') ? new Date(searchParams.get('instant')) : new Date();\n  if ((!event.start && event.end) || (!event.end && event.start)) return true;\n  return Boolean(event.start && event.end\n    && (currentDate < event.start || currentDate > event.end));\n};\n\nconst isManifestWithinLocale = (locales) => {\n  if (!locales) return true;\n  return locales.split(';').map((locale) => locale.trim()).includes(localeCode);\n};\n\nconst getRegionalPromoManifests = (manifestNames, region, searchParams) => {\n  const attachedManifests = manifestNames\n    ? manifestNames.split(',')?.map((manifest) => manifest?.trim())\n    : [];\n\n  const schedule = getMetadata(region ? `${region}_schedule` : 'schedule');\n  if (!schedule) {\n    return [];\n  }\n  return schedule.split(',')\n    .map((manifest) => {\n      const [name, start, end, manifestPath, locales, cdtStart, cdtEnd] = manifest.trim().split('|').map((s) => s.trim());\n      if (attachedManifests.includes(name) && isManifestWithinLocale(locales)) {\n        const event = {\n          name,\n          start: GMTStringToLocalDate(start),\n          end: GMTStringToLocalDate(end),\n          cdtStart,\n          cdtEnd,\n        };\n        const disabled = isDisabled(event, searchParams);\n        return { manifestPath, disabled, event, source: ['promo'] };\n      }\n      return null;\n    })\n    .filter((manifest) => manifest != null);\n};\n\nexport default function getPromoManifests(manifestNames, searchParams) {\n  const promoManifests = regionCode != null ? getRegionalPromoManifests(\n    manifestNames[`${regionCode}_manifestnames`],\n    regionCode,\n    searchParams,\n  ) : [];\n  const globalPromoManifests = getRegionalPromoManifests(\n    manifestNames.manifestnames,\n    null,\n    searchParams,\n  );\n  return [...promoManifests, ...globalPromoManifests];\n}\n"],"names":["I","l","m","p","a","f","i","_URL","d","n","u","w","URL","window","location","href","searchParams","get","h","Date","parse","now","v","t","e","s","c","o","class","parent","r","Math","floor","toString","g","M","replaceChildren","y","k","x","b","length","clearInterval","setInterval","U","Promise","all","map","T","E","D","L","forEach","disabled","event","cdtStart","cdtEnd","concat","C","Error","split","trim","Number","isNaN","includes","N","classList","add","matchMedia","matches","contains","mph","async","_data","ok","json","data","key","value","lana","log","message","tags","errorType","config","sheet","placeholderRequest","placeholderPath","_ref","getPlaceholdersPath","locale","contentRoot","fetchPlaceholder","resource","withCacheRules","catch","Array","isArray","A","P","_t$placeholders","_c","getDefaultContentRoot","prefix","endsWith","replace","ietf","placeholders","replaceAll","R","arguments","undefined","push","matchAll","RegExp","from","_ref2","nodes","nodeType","Node","TEXT_NODE","nodeValue","ELEMENT_NODE","attributes","name","_ref3","setAttribute","APAC","EMEA","AMERICAS","JP","_u","substring","_Object$keys$find","Object","keys","find","_f$t","toLowerCase","isDisabled","locales","start","end","getRegionalPromoManifests","_t$split","_","z","manifestPath","source","filter","manifestnames"],"sourceRoot":""}