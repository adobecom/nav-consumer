"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[5289],{5289:(t,e,n)=>{n.r(e),n.d(e,{addAriaLabelToCTA:()=>m,default:()=>p,findBlockContainers:()=>d,getHeaders:()=>h,getProduct:()=>i,getTextBeforeHeader:()=>c});var o=n(212),r=(n(6850),/^h[1-2]$/i),a=(t,e)=>{if(e.test(t.tagName))return{text:"",foundHeader:!0};if(t.nodeType===Node.TEXT_NODE)return{text:t.nodeValue,foundHeader:!1};let n="",o=!1;for(const r of t.childNodes){const t=a(r,e);if(n+=t.text,t.foundHeader){o=!0;break}}return{text:n,foundHeader:o}},c=t=>{if(!t)return"";const{text:e,foundHeader:n}=a(t,r);return n?e.trim():""},i=(t,e)=>{var n;return t&&(null===(n=e.find((e=>{let{us:n}=e;return t.toLowerCase().includes(n.toLowerCase())})))||void 0===n?void 0:n.us)||""};function l(t,e,n){const o=t.split("-");if(o.length>1){const t=n?0:o.length-1;e.add(o[t])}}var s=(t,e)=>{const n=new Map;return t.forEach(((t,o)=>{const r=((t,e)=>{const n=Array.from(t.classList),o=new Set;for(const r of n)l(r,o,e);return o})(t,e);!function(t,e,n){t.forEach((t=>{e.has(t)||e.set(t,new Set),e.get(t).add(n)}))}(r,n,o)})),n},u=function(t){let{extractPrefix:e=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.length<2)return!1;const n=s(t,e);return Array.from(n.values()).some((t=>t.size>1))};function f(t,e,n){const o=e(t);if(!o.length)return;let r=[];o.length>1?r=[...o,t]:1===o.length&&o[0]===t&&(r=[t]),n.push(...r)}var d=t=>{const e=Array.from(t.children).filter((t=>"DIV"===t.tagName));if(!e.length)return[t];const n=(o=e).filter((t=>o.some((e=>t!==e&&(u([t,e],{extractPrefix:!0})||u([t,e],{extractPrefix:!1}))))));var o;if(n.length>1){const e=((t,e)=>{const n=[];for(const o of t)f(o,e,n);return n})(n,d);return e.length>1?e:[t]}const r=e.map((t=>d(t))).filter((t=>t.length>1));return 1===r.length&&r[0].length>1?r[0]:[t]},h=t=>Array.from(t.querySelectorAll("h1, h2, h3, h4, h5, h6")),g=(t,e,n,o,r,a)=>{var c;const l=e.filter((t=>{const n=t.tagName.toLowerCase();return 1===e.filter((t=>t.tagName.toLowerCase()===n)).length})),s=t.textContent.trim().toLowerCase(),u=!t.classList.contains("modal")&&i(null===(c=t.href)||void 0===c?void 0:c.replace("-"," "),n)||"",f=[...l,a].filter(Boolean);if(o.includes(s)){const e=f.find((t=>{const e="string"===typeof t?t:t.textContent.trim(),o=i(e,n);return o&&(o.includes(u)||u.includes(o)||!u)}));if(e){var d;const o=i((null===(d=e.textContent)||void 0===d?void 0:d.trim())||e,n);return t.setAttribute("aria-label","".concat(t.textContent," ").concat(o)),!0}}if(r.includes(s)&&f.length){var h;const e=(null===(h=f[0].textContent)||void 0===h?void 0:h.trim())||f[0];return t.setAttribute("aria-label","".concat(t.textContent," - ").concat(e)),!0}return!1},m=(t,e,n,o)=>{const r=t.closest(".section > div");if(!r)return;const a=d(r),i=a.filter((e=>e.contains(t)))||[r],l=i[0]!==r;for(const f of i)if(l&&g(t,h(f),e,n,o,c(f)))return;const s=((t,e)=>{const n=h(t),o=e.flatMap((t=>h(t)));return n.filter((t=>!o.includes(t)))})(r,a);if(s.length&&g(t,s,e,n,o))return;const u=c(r);g(t,h(r),e,n,o,u)};async function p(){var t,e;const n=(0,o.getConfig)().ariaLabelCTASelector||".con-button:not([aria-label])",r=[...document.body.querySelectorAll(n)].filter((t=>""!==t.getAttribute("aria-label")));if(!r.length)return;const a=(t,e)=>window.lana.log("".concat(t,": ").concat(e),{tags:"aria"}),[c,i]=await Promise.all([fetch("".concat((0,o.getFederatedContentRoot)(),"/federal/assets/data/cta-aria-label-config.json")).catch((t=>a("Could not fetch cta-aria-label-config.json",t))),fetch("".concat((0,o.getFederatedContentRoot)(),"/federal/assets/data/product-names.json")).catch((t=>a("Could not fetch product-names.json",t)))]);if(!c||!i)return;const l=await c.json().catch((t=>a("Could not parse cta-aria-label-config.json",t))),s=await i.json().catch((t=>a("Could not parse product-names.json",t)));if(!l||!s)return;const{prefix:u}=(0,o.getConfig)().locale,f=(null===u||void 0===u?void 0:u.replace("/",""))||"us";if(null===(t=l.data)||void 0===t||!t.length||null===(e=s.data)||void 0===e||!e.length)return void window.lana.log("No cta aria label config or product names found for locale ".concat(f),{tags:"aria"});const d=l.data.find((t=>t.prefixes.split(",").map((t=>t.trim())).includes(f)));if(!d)return;const h=d.addProductName.split(/[\n,]+/).map((t=>t.trim().toLowerCase())).filter(Boolean),g=d.addHeader.split(/[\n,]+/).map((t=>t.trim().toLowerCase())).filter(Boolean),p=[];r.forEach((t=>{m(t,s.data,h,g),t.hasAttribute("aria-label")&&p.push(t)}))}}}]);
//# sourceMappingURL=5289.e8b11412.chunk.js.map