{"version":3,"file":"static/js/3803.21a0245d.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/webapp-prompt/webapp-prompt.js"],"sourcesContent":["import {\n  getUserProfile,\n  icons,\n  lanaLog,\n  toFragment,\n} from '../../blocks/global-navigation/utilities/utilities.js';\nimport { getConfig, decorateSVG, getFedsPlaceholderConfig } from '../../utils/utils.js';\nimport { replaceKey, replaceText } from '../placeholders.js';\n\nexport const DISMISSAL_CONFIG = {\n  animationCount: 2,\n  animationDuration: 2500,\n  tooltipMessage: 'Use the App Switcher to quickly find apps.',\n  tooltipDuration: 5000,\n};\n\nconst CONFIG = {\n  selectors: { prompt: '.appPrompt' },\n  delay: 7000,\n  loaderColor: '#EB1000',\n  pauseOnHover: 'off',\n  ...DISMISSAL_CONFIG,\n};\n\nconst getElemText = (elem) => elem?.textContent?.trim();\n\nconst getMetadata = (el) => [...el.childNodes].reduce((acc, row) => {\n  if (row.children?.length === 2) {\n    const key = getElemText(row.children[0]);\n    const val = getElemText(row.children[1]);\n    if (key && val) acc[key] = val;\n  }\n  return acc;\n}, {});\n\nconst getIcon = (content) => {\n  const picture = content.querySelector('picture');\n  if (picture) return picture;\n\n  const svg = content.querySelector('a[href$=\".svg\"]');\n  if (svg) return decorateSVG(svg);\n\n  return icons.company;\n};\n\nconst showTooltip = (\n  element,\n  message = CONFIG.tooltipMessage,\n  time = CONFIG.tooltipDuration,\n) => {\n  element.setAttribute('data-pep-dismissal-tooltip', message);\n  const cleanup = () => element.removeAttribute('data-pep-dismissal-tooltip');\n  const timeoutID = setTimeout(cleanup, time);\n  element.addEventListener('click', () => {\n    cleanup();\n    clearTimeout(timeoutID);\n  }, { once: true });\n};\n\nconst playFocusAnimation = (\n  element,\n  iterationCount = CONFIG.animationCount,\n  animationDuration = CONFIG.animationDuration,\n) => {\n  element.classList.add('coach-indicator');\n  element.style.setProperty('--animation-duration', `${animationDuration}ms`);\n  const rings = [];\n  const createRing = () => toFragment`\n    <div\n      class=\"coach-indicator-ring\"\n      style=\"animation-iteration-count: ${iterationCount};\">\n    </div>`;\n  for (let i = 0; i < 3; i += 1) {\n    const ring = createRing();\n    element.insertAdjacentElement('afterbegin', ring);\n    rings.push(ring);\n  }\n  // The cleanup function is added to the event queue\n  // some time after the end of the animation because\n  // the cleanup isn't high priority but it should be done\n  // eventually. (Animation truly ends slightly after\n  // animationDuration * iterationCount due to animation-delay)\n  const cleanup = () => {\n    rings.forEach((ring) => ring.remove());\n    element.classList.remove('coach-indicator');\n  };\n  const timeoutID = setTimeout(cleanup, (iterationCount + 1) * animationDuration);\n  element.addEventListener('click', () => {\n    cleanup();\n    clearTimeout(timeoutID);\n  }, { once: true });\n};\n\nconst modalsActive = () => !!document.querySelector('.dialog-modal');\n\nconst waitForClosedModalsThen = (loadPEP) => {\n  if (modalsActive()) {\n    setTimeout(() => waitForClosedModalsThen(loadPEP), 200);\n    return;\n  }\n  loadPEP();\n};\n\nexport class AppPrompt {\n  constructor({ promptPath, entName, parent, getAnchorState } = {}) {\n    this.promptPath = promptPath;\n    this.entName = entName;\n    this.parent = parent;\n    this.getAnchorState = getAnchorState;\n    this.id = this.promptPath.split('/').pop();\n    this.elements = {};\n    if (modalsActive()) {\n      window.addEventListener(\n        'milo:modal:closed',\n        () => waitForClosedModalsThen(this.init),\n        { once: true },\n      );\n      this.initializationQueued = true;\n      return;\n    }\n    this.initializationQueued = false;\n  }\n\n  init = async () => {\n    if (this.isDismissedPrompt() || !this.parent) return;\n\n    const skipEntitlements = new URLSearchParams(window.location.search).get('skipPepEntitlements');\n    const entMatch = skipEntitlements || await this.doesEntitlementMatch();\n    if (!entMatch) return;\n\n    const content = await this.fetchContent();\n    if (!content) return;\n\n    await this.getData(content);\n    if (!this.options['redirect-url'] || !this.options['product-name']) return;\n\n    ({ id: this.anchorId, isOpen: this.isAnchorExpanded } = await this.getAnchorState()\n      .catch((e) => {\n        lanaLog({\n          message: 'Error on getting anchor state',\n          e,\n          tags: 'pep',\n          errorType: 'e',\n        });\n        return {};\n      }));\n    if (this.isAnchorExpanded) return;\n\n    if (this.anchorId) this.anchor = document.querySelector(`#${this.anchorId}`);\n    this.offset = this.anchor\n      ? this.parent.offsetWidth - (this.anchor.offsetWidth + this.anchor.offsetLeft) : 0;\n    this.template = this.decorate();\n\n    this.addEventListeners();\n\n    this.parent.prepend(this.template);\n    this.elements.closeIcon.focus();\n\n    this.cleanupFn = this.initRedirect(this.options['pause-on-hover'] === 'on');\n  };\n\n  doesEntitlementMatch = async () => {\n    const config = getConfig();\n    const entitlements = await config.entitlements();\n    const extraEnts = new URLSearchParams(window.location.search).get('mockPepEnts');\n    extraEnts?.split(',').forEach((ent) => entitlements.push(ent.trim()));\n    return entitlements?.length && entitlements.includes(this.entName);\n  };\n\n  fetchContent = async () => {\n    const res = await fetch(`${this.promptPath}.plain.html`);\n\n    if (!res.ok) {\n      lanaLog({\n        message: `Error fetching content for prompt: ${this.promptPath}.plain.html`,\n        e: `Status ${res.status} when trying to fetch content for prompt`,\n        tags: 'pep',\n        errorType: 'e',\n      });\n      return '';\n    }\n\n    const text = await res.text();\n    const content = await replaceText(text, getFedsPlaceholderConfig());\n    const html = new DOMParser().parseFromString(content, 'text/html');\n\n    return html;\n  };\n\n  getData = async (content) => {\n    this.icon = getIcon(content);\n\n    const selectors = {\n      title: 'h2',\n      subtitle: 'h3',\n      cancel: 'em > a',\n    };\n\n    await Promise.all(Object.keys(selectors).map(async (key) => {\n      const element = content.querySelector(selectors[key]);\n      if (element?.innerText) this[key] = element.innerText;\n      else {\n        const label = await replaceKey(`pep-prompt-${key}`, getFedsPlaceholderConfig());\n        this[key] = label === `pep prompt ${key}` ? '' : label;\n      }\n    }));\n\n    await getUserProfile()\n      .then((data) => {\n        const requiredFields = ['display_name', 'email', 'avatar'];\n        const hasRequiredFields = requiredFields.every((field) => !!data[field]);\n        if (!hasRequiredFields) return;\n\n        this.profile = data;\n      }).catch((e) => {\n        lanaLog({\n          message: 'Error fetching user profile',\n          e,\n          tags: 'pep',\n          errorType: 'e',\n        });\n      });\n\n    const metadata = getMetadata(content.querySelector('.section-metadata'));\n    metadata['loader-duration'] = parseInt(metadata['loader-duration'] || CONFIG.delay, 10);\n    metadata['loader-color'] = metadata['loader-color'] || CONFIG.loaderColor;\n    metadata['dismissal-animation-count'] = parseInt(metadata['dismissal-animation-count'] ?? CONFIG.animationCount, 10);\n    metadata['dismissal-animation-duration'] = parseInt(metadata['dismissal-animation-duration'] ?? CONFIG.animationDuration, 10);\n    metadata['dismissal-tooltip-message'] ??= CONFIG.tooltipMessage;\n    metadata['dismissal-tooltip-duration'] = parseInt(metadata['dismissal-tooltip-duration'] ?? CONFIG.tooltipDuration, 10);\n    metadata['pause-on-hover'] ??= CONFIG.pauseOnHover;\n    this.options = metadata;\n  };\n\n  decorate = () => {\n    const animationPauseOnHover = this.options['pause-on-hover'] === 'on';\n    this.elements.closeIcon = toFragment`<button daa-ll=\"Close Modal\" aria-label=\"${this.cancel}\" class=\"appPrompt-close\"></button>`;\n    this.elements.cta = toFragment`<button daa-ll=\"Stay on this page\" class=\"appPrompt-cta appPrompt-cta--close\">${this.cancel}</button>`;\n    this.elements.profile = this.profile\n      ? toFragment`<div class=\"appPrompt-profile\">\n        <div class=\"appPrompt-avatar\">\n          <img class=\"appPrompt-avatar-image\" src=\"${this.profile.avatar}\" />\n        </div>\n        <div class=\"appPrompt-user\">\n          <div class=\"appPrompt-name\">${this.profile.display_name}</div>\n          <div class=\"appPrompt-email\">${this.profile.email}</div>\n        </div>\n      </div>`\n      : '';\n\n    return toFragment`<div\n      daa-state=\"true\" daa-im=\"true\" daa-lh=\"PEP Modal_${this.options['product-name']?.toLowerCase()}\"\n      class=\"appPrompt\" style=\"margin: 0 ${this.offset}px\">\n      ${this.elements.closeIcon}\n      <div class=\"appPrompt-icon\">\n        ${this.icon}\n      </div>\n      <div class=\"appPrompt-title\">${this.title}</div>\n      ${this.elements.profile}\n      <div class=\"appPrompt-footer\">\n        <div class=\"appPrompt-text\">${this.subtitle}</div>\n        ${this.elements.cta}\n      </div>\n      <div class=\"appPrompt-progressWrapper\">\n        <div class=\"appPrompt-progress ${animationPauseOnHover && 'appPrompt-progressPauseOnHover'}\" style=\"background-color: ${this.options['loader-color']}; animation-duration: ${this.options['loader-duration']}ms;\"></div>\n      </div>\n    </div>`;\n  };\n\n  addEventListeners = () => {\n    this.anchor?.addEventListener('click', () => this.close({ dismissalActions: false }));\n    document.addEventListener('keydown', this.handleKeyDown);\n\n    [this.elements.closeIcon, this.elements.cta]\n      .forEach((elem) => elem.addEventListener('click', this.close));\n  };\n\n  handleKeyDown = (event) => {\n    if (event.key === 'Escape') this.close();\n  };\n\n  static redirectTo(url) {\n    window.location.assign(url);\n  }\n\n  initRedirect = (withPause = false) => {\n    let timeoutId;\n    let remainingTime = this.options['loader-duration'];\n    let startTime;\n\n    const startTimeout = () => {\n      startTime = performance.now();\n      timeoutId = setTimeout(() => {\n        this.close({ saveDismissal: false, dismissalActions: false });\n        AppPrompt.redirectTo(this.options['redirect-url']);\n      }, remainingTime);\n    };\n\n    const stopTimeout = () => {\n      clearTimeout(timeoutId);\n      remainingTime -= performance.now() - startTime;\n    };\n\n    if (withPause) {\n      const appPromptElem = document.querySelector(CONFIG.selectors.prompt);\n      if (appPromptElem) {\n        appPromptElem.addEventListener('mouseenter', stopTimeout);\n        appPromptElem.addEventListener('mouseleave', startTimeout);\n      }\n    }\n\n    // Start the timeout initially\n    startTimeout();\n\n    return () => {\n      clearTimeout(timeoutId);\n      if (withPause) {\n        const appPromptElem = document.querySelector(CONFIG.selectors.prompt);\n        if (appPromptElem) {\n          appPromptElem.removeEventListener('mouseenter', stopTimeout);\n          appPromptElem.removeEventListener('mouseleave', startTimeout);\n        }\n      }\n    };\n  };\n\n  isDismissedPrompt = () => AppPrompt.getDismissedPrompts().includes(this.id);\n\n  setDismissedPrompt = () => {\n    const dismissedPrompts = new Set(AppPrompt.getDismissedPrompts());\n    dismissedPrompts.add(this.id);\n    document.cookie = `dismissedAppPrompts=${JSON.stringify([...dismissedPrompts])};path=/`;\n  };\n\n  close = ({ saveDismissal = true, dismissalActions = true } = {}) => {\n    const appPromptElem = document.querySelector(CONFIG.selectors.prompt);\n    this.cleanupFn();\n    appPromptElem?.remove();\n    if (saveDismissal) this.setDismissedPrompt();\n    document.removeEventListener('keydown', this.handleKeyDown);\n    this.anchor?.focus();\n    this.anchor?.removeEventListener('click', this.close);\n\n    if (dismissalActions) {\n      playFocusAnimation(\n        this.anchor,\n        this.options['dismissal-animation-count'],\n        this.options['dismissal-animation-duration'],\n      );\n      showTooltip(\n        this.anchor,\n        this.options['dismissal-tooltip-message'],\n        this.options['dismissal-tooltip-duration'],\n      );\n    }\n  };\n\n  static getDismissedPrompts = () => {\n    const cookie = document.cookie\n      .split(';')\n      .find((item) => item.trim().startsWith('dismissedAppPrompts='))\n      ?.split('=')[1];\n\n    return cookie ? JSON.parse(cookie) : [];\n  };\n}\n\nexport default async function init(config) {\n  try {\n    const miloConfig = getConfig();\n    await miloConfig.georouting.loadedPromise;\n    delete miloConfig.georouting;\n    const appPrompt = new AppPrompt(config);\n    if (!appPrompt.initializationQueued) await appPrompt.init();\n    return appPrompt;\n  } catch (e) {\n    lanaLog({ message: 'Could not initialize PEP', e, tags: 'pep', errorType: 'e' });\n    return null;\n  }\n}\n"],"names":["S","animationCount","animationDuration","tooltipMessage","tooltipDuration","n","selectors","prompt","delay","loaderColor","pauseOnHover","E","o","_o$textContent","textContent","trim","w","modalsActive","document","querySelector","$","setTimeout","h","_o","constructor","_this","promptPath","t","entName","e","parent","i","getAnchorState","s","arguments","length","undefined","_defineProperty","async","this","isDismissedPrompt","URLSearchParams","window","location","search","get","doesEntitlementMatch","fetchContent","getData","options","id","anchorId","isOpen","isAnchorExpanded","catch","p","message","tags","errorType","anchor","concat","offset","offsetWidth","offsetLeft","template","decorate","addEventListeners","prepend","elements","closeIcon","focus","cleanupFn","initRedirect","_URLSearchParams$get","d","entitlements","split","forEach","push","includes","fetch","ok","status","text","v","m","DOMParser","parseFromString","_i$dismissalAnimatio","_i$dismissalAnimatio2","_i$_dismissalTooltipM","_i$dismissalTooltip","_i$_pauseOnHover","icon","y","g","company","D","title","subtitle","cancel","Promise","all","Object","keys","map","r","innerText","c","f","P","then","every","a","profile","childNodes","reduce","_e$children","children","T","parseInt","_this$options$product","l","_templateObject2","_taggedTemplateLiteral","cta","_templateObject3","_templateObject4","avatar","display_name","email","_templateObject5","toLowerCase","_this$anchor","addEventListener","close","dismissalActions","handleKeyDown","key","startTimeout","performance","now","saveDismissal","redirectTo","stopTimeout","clearTimeout","removeEventListener","getDismissedPrompts","Set","add","cookie","JSON","stringify","_this$anchor2","_this$anchor3","remove","setDismissedPrompt","classList","style","setProperty","u","_templateObject","insertAdjacentElement","cleanup","once","I","setAttribute","removeAttribute","L","pop","init","initializationQueued","assign","_document$cookie$spli","find","startsWith","parse","x","georouting","loadedPromise"],"sourceRoot":""}