"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[4500],{4500:(t,e,o)=>{o.r(e),o.d(e,{PROD_BASE_URL:()=>a,REGEX_ADOBETV:()=>c,REGEX_YOUTUBE:()=>r,VIDEO_OBJECT_PROVIDERS:()=>n,appendScriptTag:()=>p,default:()=>v,getRepoByImsClientId:()=>u,getStructuredData:()=>h,getVideoObject:()=>s,logError:()=>i,parseVideoUrl:()=>d,sha256:()=>l});o(3658);var a="https://www.adobe.com/seotech/api",c=/(?:https?:\/\/)?(?:stage-)?video.tv.adobe.com\/v\/([\d]+)/,r=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=)?([a-zA-Z0-9_-]+)/,n=[{provider:"adobe",regex:c},{provider:"youtube",regex:r}];function i(t){var e;let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];o.bucket&&a.push("bucket:".concat(o.bucket)),o.id&&a.push("id:".concat(o.id)),o.videoUrl&&a.push("videoUrl:".concat(o.videoUrl)),o.pathname&&a.push("pathname:".concat(o.pathname));const c=a.length>0?"".concat(t," \xb6 ").concat(a.join(" \xb6 ")):t;null===(e=window.lana)||void 0===e||e.log("SEOTECH: ".concat(c),{debug:!1,sampleRate:100,tags:"seotech",severity:"error"})}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;for(const{regex:o,provider:a}of e){const e=t.match(o);if(e)return{provider:a,id:e[1]}}return null}async function s(t){let{baseUrl:e=a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=d(t);if(!o)throw new Error("Invalid video url: ".concat(t));const{provider:c,id:r}=o,n="".concat(e,"/json-ld/types/video-object/providers/").concat(c,"/").concat(r),i=await fetch(n,{headers:{"Content-Type":"application/json"}}),s=await(null===i||void 0===i?void 0:i.json());if(!i.ok)throw new Error("Failed to fetch video: ".concat((null===s||void 0===s?void 0:s.error)||i.statusText," (Status: ").concat(i.status,")"));return s.videoObject}function u(t){return{"adobedotcom-cc":"cc",acrobatmilo:"dc",bacom:"bacom",homepage_milo:"homepage",milo:"milo"}[t]}async function l(t){const e=(new TextEncoder).encode(t),o=await window.crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(o)).map((t=>t.toString(16).padStart(2,"0"))).join("")}async function h(t,e){let{baseUrl:o=a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t||!e)throw new Error("bucket and id are required. Received: bucket=".concat(t,", id=").concat(e));const c="".concat(o,"/structured-data/").concat(t,"/").concat(e),r=await fetch(c);if(!r)throw new Error("Network error: No response received");if(!r.ok)throw new Error("HTTP ".concat(r.status,": ").concat(r.statusText));return await r.json()}async function p(t){let{locationUrl:e,getMetadata:o,createTag:a,getConfig:c}=t;const r=new URL(e),n=new URLSearchParams(r.search).get("seotech-api-base-url")||void 0,d=(t,e)=>{if(!t)return;const o={type:"application/ld+json"};e&&(o.class=e);const c=a("script",o,JSON.stringify(t));document.head.append(c)},p=[];if("on"===o("seotech-structured-data")){var v,w;const t=u(null===(v=c())||void 0===v?void 0:v.imsClientId),e=await l(null===(w=r.pathname)||void 0===w?void 0:w.replace(".html",""));p.push(h(t,e,{baseUrl:n}).then((t=>d(t,"seotech-structured-data"))).catch((()=>i("Structured data operation failed",{bucket:t,id:e,pathname:r.pathname}))))}const m=o("seotech-video-url");return m&&p.push(s(m,{baseUrl:n}).then((t=>d(t,"seotech-video-url"))).catch((()=>i("Video object operation failed",{videoUrl:m})))),Promise.all(p)}var v=p}}]);
//# sourceMappingURL=4500.d7ef1c8e.chunk.js.map