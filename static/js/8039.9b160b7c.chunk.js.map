{"version":3,"file":"static/js/8039.9b160b7c.chunk.js","mappings":"sJAAMA,EAAgB,yCAChBC,EAAY,2EACZC,EAAc,mBACdC,EAAU,eAEVC,EAAUC,MAAOC,EAAaC,EAAMC,KAAc,IAAAC,EAAAC,EACtD,IAAIC,EACEC,EAASJ,IACf,IAAI,IAAAK,EACFF,EACwC,QADxCE,EAAc,IAAIC,IAA6C,mBAAlCF,EAAOG,6BAA8CH,EAAOG,yBACrFT,EAAY,iCAAwB,IAAAO,OAAA,EAD1BA,EAC6BG,IAC7C,CAAE,MAEF,OAEMC,OAAOC,SAASC,qBAAqB,CACzCC,YAAa,SACbC,UAAW,OAAAd,QAAA,IAAAA,OAAA,EAAAA,EAAMe,WACjBC,UAAkB,QAAlBd,EAAWQ,OAAOO,eAAA,IAAAf,OAAA,EAAPA,EAAgBc,UAC3BE,MAAc,QAAdf,EAAOO,OAAOO,eAAA,IAAAd,OAAA,EAAPA,EAAgBe,QACtBC,MAAK,MAC6B,IAA/BT,OAAOU,sBAEPhB,EACFM,OAAOW,SAASC,OAAOlB,GAEvBM,OAAOW,SAASE,SAEpB,IAAGC,OAAM,KAEPd,OAAOC,SAASc,yBAAyB,SAAU,CAAEC,aAActB,GAAeM,OAAOW,SAASZ,MACpG,GACF,EAEA,eAAOkB,EAAuC5B,EAASC,EAAaC,EAAYG,GAAW,IAAAwB,EAAAC,EAAAC,EAAAC,EACzF,UACQhC,GACR,CAAE,MACA,MACF,CACA,GAAW,QAAX6B,EAAIlB,OAAOC,gBAAA,IAAAiB,GAAPA,EAAiBI,iBAAkB,aAEjC/B,EAAWR,GACjB,IAAMY,EAAc4B,SAASC,cAAc,OAC3C7B,EAAY8B,GAAKxC,EACmB,QADnBkC,EACjBI,SAASG,cAAA,IAAAC,OAAkBzC,WAAS,IAAAiC,GAApCA,EAAuCS,OAAOjC,GAEvC,QAFkDyB,EAEzDpB,OAAO6B,cAAA,IAAAT,GAAQ,QAARA,EAAPA,EAAeU,gBAAA,IAAAV,GAAU,QAAVA,EAAfA,EAAyBK,UAAA,IAAAL,GAAzBA,EAA6BW,WAAW,CACtCzB,UAAWtB,EACXgD,SAAWC,GAAS9C,EAAQG,EAAa2C,EAAMvC,GAC/CwC,iBAAkBjD,EAClBkD,uBAAuB,IAElB,QADNd,EACDrB,OAAO6B,cAAA,IAAAR,GAAQ,QAARA,EAAPA,EAAeS,gBAAA,IAAAT,GAAU,QAAVA,EAAfA,EAAyBI,UAAA,IAAAJ,GAAzBA,EAA6Be,QAC/B,C","sources":["../../milo/libs/features/google-login.js"],"sourcesContent":["const GOOGLE_SCRIPT = 'https://accounts.google.com/gsi/client';\nconst GOOGLE_ID = '530526366930-l874a90ipfkn26naa71r010u8epp39jt.apps.googleusercontent.com';\nconst PLACEHOLDER = 'feds-googleLogin';\nconst WRAPPER = 'feds-profile';\n\nconst onToken = async (getMetadata, data, getConfig) => {\n  let destination;\n  const config = getConfig();\n  try {\n    destination = new URL(typeof config.googleLoginURLCallback === 'function' ? await config.googleLoginURLCallback()\n      : getMetadata('google-login-redirect'))?.href;\n  } catch {\n    // Do nothing\n  }\n\n  await window.adobeIMS.socialHeadlessSignIn({\n    provider_id: 'google',\n    idp_token: data?.credential,\n    client_id: window.adobeid?.client_id,\n    scope: window.adobeid?.scope,\n  }).then(() => {\n    if (window.DISABLE_PAGE_RELOAD === true) return;\n    // Existing account\n    if (destination) {\n      window.location.assign(destination);\n    } else {\n      window.location.reload();\n    }\n  }).catch(() => {\n    // New account\n    window.adobeIMS.signInWithSocialProvider('google', { redirect_uri: destination || window.location.href });\n  });\n};\n\nexport default async function initGoogleLogin(loadIms, getMetadata, loadScript, getConfig) {\n  try {\n    await loadIms();\n  } catch {\n    return;\n  }\n  if (window.adobeIMS?.isSignedInUser()) return;\n\n  await loadScript(GOOGLE_SCRIPT);\n  const placeholder = document.createElement('div');\n  placeholder.id = PLACEHOLDER;\n  document.querySelector(`.${WRAPPER}`)?.append(placeholder);\n\n  window.google?.accounts?.id?.initialize({\n    client_id: GOOGLE_ID,\n    callback: (data) => onToken(getMetadata, data, getConfig),\n    prompt_parent_id: PLACEHOLDER,\n    cancel_on_tap_outside: false,\n  });\n  window.google?.accounts?.id?.prompt();\n}\n"],"names":["d","l","c","r","g","async","i","n","t","_window$adobeid","_window$adobeid2","o","e","_URL","URL","googleLoginURLCallback","href","window","adobeIMS","socialHeadlessSignIn","provider_id","idp_token","credential","client_id","adobeid","scope","then","DISABLE_PAGE_RELOAD","location","assign","reload","catch","signInWithSocialProvider","redirect_uri","s","_window$adobeIMS","_document$querySelect","_window$google","_window$google2","isSignedInUser","document","createElement","id","querySelector","concat","append","google","accounts","initialize","callback","a","prompt_parent_id","cancel_on_tap_outside","prompt"],"sourceRoot":""}