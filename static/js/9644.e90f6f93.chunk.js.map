{"version":3,"file":"static/js/9644.e90f6f93.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/personalization/personalization.js"],"sourcesContent":["/* eslint-disable default-param-last */\n/* eslint-disable no-underscore-dangle */\n/* eslint-disable no-console */\n\nimport {\n  createTag,\n  getConfig,\n  loadLink,\n  loadScript,\n  localizeLink,\n  getFederatedUrl,\n} from '../../utils/utils.js';\n\n/* c8 ignore start */\nconst PHONE_SIZE = window.screen.width < 550 || window.screen.height < 550;\nconst safariIpad = navigator.userAgent.includes('Macintosh') && navigator.maxTouchPoints > 1;\nconst isGalaxyTab = navigator.userAgent.includes('Linux') && navigator.maxTouchPoints > 1;\nexport const US_GEO = 'en-us';\nexport const PERSONALIZATION_TAGS = {\n  all: () => true,\n  chrome: () => navigator.userAgent.includes('Chrome') && !navigator.userAgent.includes('Edg'),\n  firefox: () => navigator.userAgent.includes('Firefox'),\n  safari: () => navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome'),\n  edge: () => navigator.userAgent.includes('Edg'),\n  android: () => navigator.userAgent.includes('Android') || isGalaxyTab,\n  ios: () => /iPad|iPhone|iPod/.test(navigator.userAgent) || safariIpad,\n  windows: () => navigator.userAgent.includes('Windows'),\n  mac: () => navigator.userAgent.includes('Macintosh') && !safariIpad,\n  'mobile-device': () => safariIpad\n    || /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Touch/i\n      .test(navigator.userAgent) || isGalaxyTab,\n  phone: () => PERSONALIZATION_TAGS['mobile-device']() && PHONE_SIZE,\n  tablet: () => PERSONALIZATION_TAGS['mobile-device']() && !PHONE_SIZE,\n  desktop: () => !PERSONALIZATION_TAGS['mobile-device'](),\n  loggedout: () => !window.adobeIMS?.isSignedInUser(),\n  loggedin: () => !!window.adobeIMS?.isSignedInUser(),\n};\nconst PERSONALIZATION_KEYS = Object.keys(PERSONALIZATION_TAGS);\n/* c8 ignore stop */\n\nconst CLASS_EL_DELETE = 'p13n-deleted';\nconst CLASS_EL_REPLACE = 'p13n-replaced';\nconst COLUMN_NOT_OPERATOR = 'not ';\nconst TARGET_EXP_PREFIX = 'target-';\nconst INLINE_HASH = '_inline';\nconst MARTECH_RETURNED_EVENT = 'martechReturned';\nconst PAGE_URL = new URL(window.location.href);\nconst FLAGS = {\n  all: 'all',\n  includeFragments: 'include-fragments',\n};\nlet isPostLCP = false;\n\nexport const TRACKED_MANIFEST_TYPE = 'personalization';\n\n// Replace any non-alpha chars except comma, space, ampersand, colon, and hyphen\nconst RE_KEY_REPLACE = /[^a-z0-9\\- _,&=:]/g;\n\nconst MANIFEST_KEYS = [\n  'action',\n  'selector',\n  'pagefilter',\n  'page filter',\n  'page filter optional',\n];\n\nexport const DATA_TYPE = {\n  JSON: 'json',\n  TEXT: 'text',\n};\n\nconst IN_BLOCK_SELECTOR_PREFIX = 'in-block:';\n\nconst isDamContent = (path) => path?.includes('/content/dam/');\n\nexport const normalizePath = (p, localize = true) => {\n  let path = p;\n\n  if (isDamContent(path) || !path?.includes('/')) return path;\n\n  if (path.includes('/federal/')) return getFederatedUrl(path);\n\n  const config = getConfig();\n  if (!path.startsWith(config.codeRoot) && !path.startsWith('http') && !path.startsWith('/')) {\n    path = `/${path}`;\n  }\n\n  try {\n    const url = new URL(path);\n    const { hash, pathname } = url;\n    const firstFolder = pathname.split('/')[1];\n    const mepHash = '#_dnt';\n\n    if (path.startsWith(config.codeRoot)\n      || path.includes('.hlx.')\n      || path.includes('.aem.')\n      || path.includes('.adobe.')) {\n      if (!localize\n        || config.locale.ietf === 'en-US'\n        || hash.includes(mepHash)\n        || firstFolder in config.locales\n        || path.includes('.json')) {\n        path = pathname;\n      } else {\n        path = `${config.locale.prefix}${pathname}`;\n      }\n    }\n    return `${path}${hash.replace(mepHash, '')}`;\n  } catch (e) {\n    return path;\n  }\n};\n\nexport const getFileName = (path) => path?.split('/').pop();\n\nconst isInLcpSection = (el) => {\n  const lcpSection = document.querySelector('body > main > div');\n  return lcpSection === el || lcpSection?.contains(el);\n};\n\nconst GLOBAL_CMDS = [\n  'insertscript',\n  'replacepage',\n  'updatemetadata',\n  'useblockcode',\n];\n\nconst CREATE_CMDS = {\n  insertafter: 'afterend',\n  insertbefore: 'beforebegin',\n  prepend: 'afterbegin',\n  append: 'beforeend',\n};\n\nconst COMMANDS_KEYS = {\n  remove: 'remove',\n  replace: 'replace',\n  updateAttribute: 'updateattribute',\n};\n\nfunction addIds(el, manifestId, targetManifestId) {\n  if (manifestId) el.dataset.manifestId = manifestId;\n  if (targetManifestId) el.dataset.adobeTargetTestid = targetManifestId;\n}\n\nfunction getSelectorType(selector) {\n  const sel = selector.toLowerCase().trim();\n  if (sel.startsWith('/') || sel.startsWith('http')) return 'fragment';\n  return 'other';\n}\n\nexport function replacePlaceholders(value, ph) {\n  const placeholders = ph || getConfig().placeholders;\n  if (!placeholders) return value;\n  let val = value;\n  const matches = val.match(/{{(.*?)}}/g);\n  if (!matches) return val;\n  matches.forEach((match) => {\n    const key = match.replace(/{{|}}/g, '').trim();\n    if (placeholders[key]) val = val.replace(match, placeholders[key]);\n  });\n  return val;\n}\n\nconst getUpdatedHref = (el, content, action) => {\n  const href = el.getAttribute('href');\n  const newContent = replacePlaceholders(content);\n  if (action === 'insertafter' || action === 'append') return `${href}${newContent}`;\n  if (action === 'insertbefore' || action === 'prepend') return `${newContent}${href}`;\n  return newContent;\n};\n\nconst createFrag = (el, action, content, manifestId, targetManifestId) => {\n  if (action === 'replace') el.classList.add(CLASS_EL_DELETE, CLASS_EL_REPLACE);\n  let href = content;\n  try {\n    const { pathname, search, hash } = new URL(content);\n    href = `${pathname}${search}${hash}`;\n  } catch {\n    // ignore\n  }\n  const a = createTag('a', { href }, content);\n  addIds(a, manifestId, targetManifestId);\n  const frag = createTag('p', undefined, a);\n  const isDelayedModalAnchor = /#.*delay=/.test(href);\n  if (isDelayedModalAnchor) frag.classList.add('hide-block');\n  if (isInLcpSection(el)) {\n    loadLink(`${localizeLink(a.href)}.plain.html`, { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n  }\n  return frag;\n};\n\nexport const createContent = (el, { content, manifestId, targetManifestId, action, modifiers }) => {\n  if (action === 'replace') {\n    addIds(el, manifestId, targetManifestId);\n  }\n  if (el?.nodeName === 'A' && modifiers?.includes('href')) {\n    el.setAttribute('href', getUpdatedHref(el, content, action));\n    addIds(el, manifestId, targetManifestId);\n    return el;\n  }\n  if (getSelectorType(content) !== 'fragment') {\n    const newContent = replacePlaceholders(content);\n\n    if (action === 'replace') {\n      el.innerHTML = newContent;\n\n      return el;\n    }\n\n    const container = createTag('div', {}, newContent);\n    addIds(container, manifestId, targetManifestId);\n    return container;\n  }\n\n  const frag = createFrag(el, action, content, manifestId, targetManifestId);\n  addIds(frag, manifestId, targetManifestId);\n  if (el?.parentElement.nodeName !== 'MAIN') return frag;\n  return createTag('div', undefined, frag);\n};\n\nconst COMMANDS = {\n  [COMMANDS_KEYS.remove]: (el, { content }) => {\n    if (content !== 'false') el.classList.add(CLASS_EL_DELETE);\n  },\n  [COMMANDS_KEYS.replace]: (el, cmd) => {\n    if (!el || el.classList.contains(CLASS_EL_REPLACE)) return;\n    el.insertAdjacentElement(\n      'beforebegin',\n      createContent(el, cmd),\n    );\n  },\n  [COMMANDS_KEYS.updateAttribute]: (el, cmd) => {\n    const { manifestId, targetManifestId } = cmd;\n    if (!cmd.attribute || !cmd.content) return;\n    const [attribute, parameter] = cmd.attribute.split('_');\n\n    let value;\n\n    if (attribute === 'href' && parameter) {\n      const href = el.getAttribute('href');\n      try {\n        const url = new URL(href);\n        const parameters = new URLSearchParams(url.search);\n        parameters.set(parameter, cmd.content);\n        url.search = parameters.toString();\n        value = url.toString();\n      } catch (error) {\n        /* c8 ignore next 2 */\n        console.log(`Invalid updateAttribute URL: ${href}`, error.message || error);\n      }\n    } else {\n      value = cmd.content;\n    }\n\n    if (value) {\n      el.setAttribute(attribute, value);\n      addIds(el, manifestId, targetManifestId);\n    }\n  },\n};\n\nconst log = (...msg) => {\n  const config = getConfig();\n  if (config.mep?.preview) console.log(...msg);\n};\n\nexport const fetchData = async (url, type = DATA_TYPE.JSON, config) => {\n  try {\n    const resp = await fetch(normalizePath(url), config);\n    if (!resp.ok) {\n      /* c8 ignore next 5 */\n      if (resp.status === 404) {\n        throw new Error('File not found');\n      }\n      throw new Error(`Invalid response: ${resp.status} ${resp.statusText}`);\n    }\n    return await resp[type]();\n  } catch (e) {\n    /* c8 ignore next 3 */\n    log(`Error loading content: ${url}`, e.message || e);\n  }\n  return null;\n};\n\nconst getBlockProps = (fVal, config, origin) => {\n  let val = fVal;\n  if (val?.includes('\\\\')) val = val?.split('\\\\').join('/');\n  if (!val?.startsWith('/')) val = `/${val}`;\n  const blockSelector = val?.split('/').pop();\n\n  if (val.startsWith('/libs/')) {\n    /* c8 ignore next 1 */\n    val = `${config.miloLibs || config.codeRoot}${val.replace('/libs', '')}`;\n  } else {\n    val = `${origin}${val}`;\n  }\n\n  return { blockSelector, blockTarget: val };\n};\n\nconst consolidateArray = (arr, prop, existing = []) => arr\n  .reduce((results, i) => [...results, ...i[prop] || []], existing);\n\nconst consolidateObjects = (arr, prop, existing = {}) => arr.reduce((propMap, item) => {\n  item[prop]?.forEach((i) => {\n    const { selector, val } = i;\n    if (prop === 'blocks') {\n      propMap[selector] = val;\n      return;\n    }\n\n    if (selector in propMap) return;\n    const action = {\n      action: i.action,\n      fragment: val,\n      selector,\n      manifestPath: item.manifestPath,\n      manifestId: i.manifestId,\n      targetManifestId: i.targetManifestId,\n    };\n    // eslint-disable-next-line no-restricted-syntax\n    for (const key in propMap) {\n      if (propMap[key].fragment === selector) propMap[key] = action;\n    }\n    propMap[selector] = action;\n  });\n  return { ...existing, ...propMap };\n}, {});\n\nexport const matchGlob = (searchStr, inputStr) => {\n  const pattern = searchStr.replace(/\\*\\*/g, '.*');\n  const reg = new RegExp(`^${pattern}(\\\\.html)?$`, 'i'); // devtool bug needs this backtick: `\n  return reg.test(inputStr);\n};\n\nexport async function replaceInner(path, element) {\n  if (!path || !element) return false;\n  let plainPath = path.endsWith('/') ? `${path}index` : path;\n  plainPath = plainPath.endsWith('.plain.html') ? plainPath : `${plainPath}.plain.html`;\n  const html = await fetchData(plainPath, DATA_TYPE.TEXT);\n  if (!html) return false;\n\n  element.innerHTML = html;\n  const { decorateArea } = getConfig();\n  if (decorateArea) decorateArea(element);\n  return true;\n}\n/* c8 ignore stop */\n\nconst setMetadata = (metadata) => {\n  const { selector, val } = metadata;\n  if (!selector || !val) return;\n  const propName = selector.startsWith('og:') ? 'property' : 'name';\n  let metaEl = document.querySelector(`meta[${propName}=\"${selector}\"]`);\n  if (!metaEl) {\n    metaEl = createTag('meta', { [propName]: selector });\n    document.head.append(metaEl);\n  }\n  metaEl.setAttribute('content', val);\n};\n\nfunction toLowerAlpha(str) {\n  const s = str.toLowerCase();\n  return s.replace(RE_KEY_REPLACE, '');\n}\n\nfunction normalizeKeys(obj) {\n  return Object.keys(obj).reduce((newObj, key) => {\n    newObj[toLowerAlpha(key)] = obj[key];\n    return newObj;\n  }, {});\n}\n\nfunction registerInBlockActions(command) {\n  const blockAndSelector = command.selector.substring(IN_BLOCK_SELECTOR_PREFIX.length)\n    .trim().split(/\\s+/);\n  const [blockName] = blockAndSelector;\n\n  const config = getConfig();\n  config.mep.inBlock ??= {};\n  config.mep.inBlock[blockName] ??= {};\n\n  let blockSelector;\n  if (blockAndSelector.length === 1) delete command.selector;\n  if (blockAndSelector.length > 1) {\n    blockSelector = blockAndSelector.slice(1).join(' ');\n    command.selector = blockSelector;\n    if (getSelectorType(blockSelector) === 'fragment') {\n      if (blockSelector.includes('/federal/')) blockSelector = getFederatedUrl(blockSelector);\n      if (command.content.includes('/federal/')) command.content = getFederatedUrl(command.content);\n      config.mep.inBlock[blockName].fragments ??= {};\n      const { fragments } = config.mep.inBlock[blockName];\n      delete command.selector;\n      if (blockSelector in fragments) return;\n\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in fragments) {\n        if (fragments[key].content === blockSelector) fragments[key] = command;\n      }\n      fragments[blockSelector] = command;\n\n      blockSelector = normalizePath(blockSelector);\n      // eslint-disable-next-line no-restricted-syntax\n      for (const key in fragments) {\n        if (fragments[key].content === blockSelector) fragments[key] = command;\n      }\n      fragments[blockSelector] = command;\n      return;\n    }\n  }\n  config.mep.inBlock[blockName].commands ??= [];\n  config.mep.inBlock[blockName].commands.push(command);\n}\n\nconst updateEndNumber = (endNumber, term) => (endNumber\n  ? term.replace(endNumber, `:nth-child(${endNumber})`)\n  : term);\nfunction modifySelectorTerm(termParam) {\n  let term = termParam;\n  const specificSelectors = {\n    section: 'main > div',\n    'primary-cta': 'strong a',\n    'secondary-cta': 'em a',\n    'action-area': '*:has(> em a, > strong a)',\n    'any-marquee-section': 'main > div:has([class*=\"marquee\"])',\n    'any-marquee': '[class*=\"marquee\"]',\n    'any-header': ':is(h1, h2, h3, h4, h5, h6)',\n  };\n  const otherSelectors = ['row', 'col'];\n  const htmlEls = [\n    'html', 'body', 'header', 'footer', 'main',\n    'div', 'a', 'p', 'strong', 'em', 'picture', 'source', 'img', 'h',\n    'ul', 'ol', 'li',\n  ];\n  const startTextMatch = term.match(/^[a-zA-Z/./-]*/);\n  const startText = startTextMatch ? startTextMatch[0].toLowerCase() : '';\n  const startTextPart1 = startText.split(/\\.|:/)[0];\n  const endNumberMatch = term.match(/[0-9]*$/);\n  const endNumber = endNumberMatch && startText.match(/^[a-zA-Z]/) ? endNumberMatch[0] : '';\n  if (!startText || htmlEls.includes(startText)) return term;\n  if (otherSelectors.includes(startText)) {\n    term = term.replace(startText, '> div');\n    term = updateEndNumber(endNumber, term);\n    return term;\n  }\n  if (Object.keys(specificSelectors).includes(startTextPart1)) {\n    term = term.replace(startTextPart1, specificSelectors[startTextPart1]);\n    term = updateEndNumber(endNumber, term);\n    return term;\n  }\n\n  if (!startText.startsWith('.')) term = `.${term}`;\n  if (endNumber) {\n    term = term.replace(endNumber, '');\n    term = `${term}:nth-child(${endNumber} of ${term})`;\n  }\n  return term;\n}\nfunction getModifiers(selector) {\n  let sel = selector;\n  const modifiers = [];\n  const flags = sel.split(/\\s+#_/);\n  if (flags.length) {\n    sel = flags.shift();\n    flags.forEach((flag) => {\n      flag.split(/_|#_/).forEach((mod) => modifiers.push(mod.toLowerCase().trim()));\n    });\n  }\n  return { sel, modifiers };\n}\nexport function modifyNonFragmentSelector(selector, action) {\n  const { sel, modifiers } = getModifiers(selector);\n\n  let modifiedSelector = sel\n    .split('>').join(' > ')\n    .split(',').join(' , ')\n    .replaceAll(/main\\s*>?\\s*(section\\d*)/gi, '$1')\n    .split(/\\s+/)\n    .map(modifySelectorTerm)\n    .join(' ')\n    .trim();\n\n  let attribute;\n\n  if (action === COMMANDS_KEYS.updateAttribute) {\n    const string = modifiedSelector.split(' ').pop();\n    attribute = string.replace('.', '');\n    modifiedSelector = modifiedSelector.replace(string, '').trim();\n  }\n\n  return {\n    modifiedSelector,\n    modifiers,\n    attribute,\n  };\n}\n\nfunction getSelectedElements(sel, rootEl, forceRootEl, action) {\n  const root = forceRootEl ? rootEl : document;\n  const selector = sel.trim();\n  if (!selector) return {};\n\n  if (getSelectorType(selector) === 'fragment') {\n    try {\n      const fragments = root.querySelectorAll(\n        `a[href*=\"${normalizePath(selector, false)}\"], a[href*=\"${normalizePath(selector, true)}\"]`,\n      );\n      return { els: fragments, modifiers: [FLAGS.all, FLAGS.includeFragments] };\n    } catch (e) {\n      /* c8 ignore next 2 */\n      return { els: [], modifiers: [] };\n    }\n  }\n  const {\n    modifiedSelector,\n    modifiers,\n    attribute,\n  } = modifyNonFragmentSelector(selector, action);\n\n  let els;\n  try {\n    els = root.querySelectorAll(modifiedSelector);\n  } catch (e) {\n    /* eslint-disable-next-line no-console */\n    log('Invalid selector: ', selector);\n    return null;\n  }\n  if (modifiers.includes(FLAGS.all) || !els.length) return { els, modifiers, attribute };\n  els = [els[0]];\n  return { els, modifiers, attribute };\n}\n\nconst addHash = (url, newHash) => {\n  if (!newHash) return url;\n  try {\n    const { origin, pathname, search } = new URL(url);\n    return `${origin}${pathname}${search}#${newHash}`;\n  } catch (e) {\n    return `${url}#${newHash}`;\n  }\n};\n\nconst setDataIdOnChildren = (sections, id, value) => {\n  [...sections[0].children].forEach(\n    (child) => (child.dataset[id] = value),\n  );\n};\n\nexport const updateFragDataProps = (a, inline, sections, fragment) => {\n  const { manifestId, adobeTargetTestid } = a.dataset;\n  if (inline) {\n    if (manifestId) setDataIdOnChildren(sections, 'manifestId', manifestId);\n    if (adobeTargetTestid) setDataIdOnChildren(sections, 'adobeTargetTestid', adobeTargetTestid);\n  } else {\n    addIds(fragment, manifestId, adobeTargetTestid);\n  }\n};\n\nexport const deleteMarkedEls = (rootEl = document) => {\n  [...rootEl.querySelectorAll(`.${CLASS_EL_DELETE}`)]\n    .forEach((el) => el.remove());\n};\n\nexport function addSectionAnchors(rootEl = document) {\n  rootEl.querySelectorAll('.section-metadata').forEach((block) => {\n    [...block.children].forEach((row) => {\n      const col1 = row.children[0]?.textContent.toLowerCase().trim();\n      const col2 = row.children[1]?.textContent.toLowerCase().trim().replaceAll(/\\s+/g, '-');\n      if (!col1 || !col2 || col1 !== 'anchor') return;\n      block.parentElement.setAttribute('id', col2);\n    });\n  });\n}\n\nexport function handleCommands(\n  commands,\n  rootEl = document,\n  forceInline = false,\n  forceRootEl = false,\n) {\n  const section1 = document.querySelector('main > div');\n  addSectionAnchors(rootEl);\n  commands.forEach((cmd) => {\n    const { action, content, selector } = cmd;\n    cmd.content = forceInline && getSelectorType(content) === 'fragment' ? addHash(content, INLINE_HASH) : content;\n    if (selector.startsWith(IN_BLOCK_SELECTOR_PREFIX)) {\n      registerInBlockActions(cmd);\n      cmd.selectorType = IN_BLOCK_SELECTOR_PREFIX;\n      return;\n    }\n    const {\n      els,\n      modifiers,\n      attribute,\n    } = getSelectedElements(selector, rootEl, forceRootEl, action);\n\n    Object.assign(cmd, { modifiers, attribute });\n\n    els?.forEach((el) => {\n      if (!el\n        || (!(action in COMMANDS) && !(action in CREATE_CMDS))\n        || (rootEl && !rootEl.contains(el))\n        || (isPostLCP && section1?.contains(el))) return;\n\n      if (action in COMMANDS) {\n        COMMANDS[action](el, cmd);\n        return;\n      }\n      const insertAnchor = getSelectorType(selector) === 'fragment' ? el.parentElement : el;\n      insertAnchor?.insertAdjacentElement(\n        CREATE_CMDS[action],\n        createContent(el, cmd),\n      );\n    });\n    if ((els.length && !cmd.modifiers.includes(FLAGS.all))\n      || !cmd.modifiers.includes(FLAGS.includeFragments)) {\n      cmd.completed = true;\n    }\n  });\n  deleteMarkedEls(rootEl);\n  return commands.filter((cmd) => !cmd.completed\n    && cmd.selectorType !== IN_BLOCK_SELECTOR_PREFIX);\n}\n\nconst getVariantInfo = (line, variantNames, variants, manifestPath, fTargetId) => {\n  const config = getConfig();\n  let manifestId = getFileName(manifestPath);\n  let targetId = manifestId.replace('.json', '');\n  if (fTargetId) targetId = fTargetId;\n  if (!config.mep?.preview) manifestId = false;\n  // retro support\n  const action = line.action?.toLowerCase()\n    .replace('content', '').replace('fragment', '').replace('tosection', '');\n  if (!action) {\n    log('Row found with empty action field: ', line);\n    return;\n  }\n  const pageFilter = line['page filter'] || line['page filter optional'];\n  const { selector } = line;\n\n  if (pageFilter && !matchGlob(pageFilter, new URL(window.location).pathname)) return;\n\n  if (!config.mep?.preview) manifestId = false;\n  const { origin } = PAGE_URL;\n  variantNames.forEach((vn) => {\n    const targetManifestId = vn.includes(TARGET_EXP_PREFIX) ? targetId : false;\n    if (!line[vn] || line[vn].toLowerCase() === 'false') return;\n\n    const variantInfo = {\n      action,\n      selector,\n      pageFilter,\n      content: line[vn],\n      selectorType: getSelectorType(selector),\n      manifestId,\n      targetManifestId,\n    };\n\n    if (action in COMMANDS && variantInfo.selectorType === 'fragment') {\n      variants[vn].fragments.push({\n        selector: normalizePath(variantInfo.selector.split(' #_')[0]),\n        val: normalizePath(line[vn]),\n        action,\n        manifestId,\n        targetManifestId,\n      });\n    } else if (GLOBAL_CMDS.includes(action)) {\n      variants[vn][action] = variants[vn][action] || [];\n\n      if (action === 'useblockcode') {\n        const { blockSelector, blockTarget } = getBlockProps(line[vn], config, origin);\n        variants[vn][action].push({\n          selector: blockSelector,\n          val: blockTarget,\n          pageFilter,\n          manifestId,\n          targetManifestId,\n        });\n      } else {\n        variants[vn][action].push({\n          selector: normalizePath(selector),\n          val: normalizePath(line[vn]),\n          pageFilter,\n          manifestId,\n          targetManifestId,\n        });\n      }\n    } else if (action in COMMANDS || action in CREATE_CMDS) {\n      variants[vn].commands.push(variantInfo);\n    }\n  });\n};\n\nexport function parseManifestVariants(data, manifestPath, targetId) {\n  if (!data?.length) return null;\n\n  const manifestConfig = {};\n  const experiences = data.map((d) => normalizeKeys(d));\n\n  try {\n    const variants = {};\n    const variantNames = Object.keys(experiences[0])\n      .filter((vn) => !MANIFEST_KEYS.includes(vn));\n\n    variantNames.forEach((vn) => {\n      variants[vn] = { commands: [], fragments: [] };\n    });\n\n    experiences.forEach((line) => {\n      getVariantInfo(line, variantNames, variants, manifestPath, targetId);\n    });\n\n    manifestConfig.variants = variants;\n    manifestConfig.variantNames = variantNames;\n    const config = getConfig();\n    if (!config.mep?.preview) manifestConfig.manifestId = false;\n\n    return manifestConfig;\n  } catch (e) {\n    /* c8 ignore next 3 */\n    log('error parsing personalization manifestConfig:', e, experiences);\n  }\n  return null;\n}\n\nexport async function createMartechMetadata(placeholders, config, column) {\n  if (config.locale.ietf === 'en-US') return;\n\n  await import('../../martech/attributes.js').then(({ processTrackingLabels }) => {\n    config.mep.analyticLocalization ??= {};\n\n    placeholders.forEach((item, i) => {\n      const firstRow = placeholders[i];\n      let usValue = firstRow[US_GEO] || firstRow.us || firstRow.en || firstRow.key;\n\n      if (!usValue) return;\n\n      usValue = processTrackingLabels(usValue);\n      const translatedValue = processTrackingLabels(item[column]);\n      config.mep.analyticLocalization[translatedValue] = usValue;\n    });\n  });\n}\n\n/* c8 ignore start */\nexport function parsePlaceholders(placeholders, config, selectedVariantName = '') {\n  if (!placeholders?.length || selectedVariantName === 'default') return config;\n  const valueNames = [\n    selectedVariantName.toLowerCase(),\n    config.mep?.prefix,\n    config.locale.region.toLowerCase(),\n    config.locale.ietf.toLowerCase(),\n    ...config.locale.ietf.toLowerCase().split('-'),\n    'value',\n    'other',\n  ];\n  const keys = placeholders?.length ? Object.entries(placeholders[0]) : [];\n  const keyVal = keys.find(([key]) => valueNames.includes(key.toLowerCase()));\n  const key = keyVal?.[0];\n\n  if (key) {\n    const results = placeholders.reduce((res, item) => {\n      res[item.key] = item[key];\n      return res;\n    }, {});\n    config.placeholders = { ...(config.placeholders || {}), ...results };\n  }\n\n  createMartechMetadata(placeholders, config, key);\n\n  return config;\n}\n\nconst checkForParamMatch = (paramStr) => {\n  const [name, val] = paramStr.split('param-')[1].split('=');\n  if (!name) return false;\n  const params = new URLSearchParams(\n    Array.from(PAGE_URL.searchParams, ([key, value]) => [key.toLowerCase(), value?.toLowerCase()]),\n  );\n  const searchParamVal = params.get(name.toLowerCase());\n  if (searchParamVal !== null) {\n    if (val) return val === searchParamVal;\n    return true; // if no val is set, just check for existence of param\n  }\n  return false;\n};\n\nfunction trimNames(arr) {\n  return arr.map((v) => v.trim()).filter(Boolean);\n}\nexport function buildVariantInfo(variantNames) {\n  return variantNames.reduce((acc, name) => {\n    let nameArr = [name];\n    if (!name.startsWith(TARGET_EXP_PREFIX)) nameArr = name.split(',');\n    acc[name] = trimNames(nameArr);\n    acc.allNames = [...acc.allNames, ...trimNames(name.split(/[,&]|\\bnot\\b/))];\n    return acc;\n  }, { allNames: [] });\n}\n\nconst getXLGListURL = (config) => {\n  const sheet = config.env?.name === 'prod' ? 'prod' : 'stage';\n  return `https://www.adobe.com/federal/assets/data/mep-xlg-tags.json?sheet=${sheet}`;\n};\n\nexport const getEntitlementMap = async () => {\n  const config = getConfig();\n  if (config.mep?.entitlementMap) return config.mep.entitlementMap;\n  const entitlementUrl = getXLGListURL(config);\n  const fetchedData = await fetchData(entitlementUrl, DATA_TYPE.JSON);\n  if (!fetchedData) return config.consumerEntitlements || {};\n  const entitlements = {};\n  fetchedData?.data?.forEach((ent) => {\n    const { id, tagname } = ent;\n    entitlements[id] = tagname;\n  });\n  config.mep ??= {};\n  config.mep.entitlementMap = { ...config.consumerEntitlements, ...entitlements };\n  return config.mep.entitlementMap;\n};\n\nexport const getEntitlements = async (data) => {\n  const entitlementMap = await getEntitlementMap();\n\n  return data.flatMap((destination) => {\n    const ents = destination.segments?.flatMap((segment) => {\n      const entMatch = entitlementMap[segment.id];\n      return entMatch ? [entMatch] : [];\n    });\n\n    return ents || [];\n  });\n};\n\nasync function getPersonalizationVariant(\n  manifestPath,\n  variantNames = [],\n  variantLabel = null,\n) {\n  const config = getConfig();\n  if (config.mep?.variantOverride?.[manifestPath]) {\n    return config.mep.variantOverride[manifestPath];\n  }\n\n  const variantInfo = buildVariantInfo(variantNames);\n\n  const entitlementKeys = Object.values(await getEntitlementMap());\n  const hasEntitlementTag = entitlementKeys.some((tag) => variantInfo.allNames.includes(tag));\n\n  let userEntitlements = [];\n  if (hasEntitlementTag) {\n    if (config?.mep?.enablePersV2) {\n      userEntitlements = [];\n    } else {\n      userEntitlements = await config.entitlements();\n    }\n  }\n\n  const hasMatch = (name) => {\n    if (!name) return true;\n    if (name === variantLabel?.toLowerCase()) return true;\n    if (name.startsWith('param-')) return checkForParamMatch(name);\n    if (userEntitlements?.includes(name)) return true;\n    return PERSONALIZATION_KEYS.includes(name) && PERSONALIZATION_TAGS[name]();\n  };\n\n  const matchVariant = (n) => {\n    // split before checks\n    const name = n.includes(':') ? n.split(':')[1] : n;\n    if (name.startsWith(TARGET_EXP_PREFIX)) return hasMatch(name);\n    const processedList = name.split('&').map((condition) => {\n      const reverse = condition.trim().startsWith(COLUMN_NOT_OPERATOR);\n      const match = hasMatch(condition.replace(COLUMN_NOT_OPERATOR, '').trim());\n      return reverse ? !match : match;\n    });\n    return !processedList.includes(false);\n  };\n\n  const matchingVariant = variantNames.find((variant) => variantInfo[variant].some(matchVariant));\n  return matchingVariant;\n}\n\nconst createDefaultExperiment = (manifest) => ({\n  disabled: manifest.disabled,\n  event: manifest.event,\n  manifest: manifest.manifestPath,\n  executionOrder: '1-1',\n  selectedVariant: { commands: [], fragments: [] },\n  selectedVariantName: 'default',\n  variantNames: ['all'],\n  variants: {},\n  source: ['promo'],\n});\n\nexport const addMepAnalytics = (config, header) => {\n  config.mep?.experiments?.forEach((experiment) => {\n    experiment?.selectedVariant?.useblockcode?.forEach(({ selector, targetManifestId }) => {\n      if (selector && targetManifestId) {\n        document.querySelectorAll(`.${selector}`)\n          .forEach((el) => (el.dataset.adobeTargetTestid = targetManifestId));\n      }\n    });\n    if (header) {\n      experiment?.selectedVariant?.updatemetadata?.forEach((updateMetaData) => {\n        if (updateMetaData?.selector === 'gnav-source' && updateMetaData.targetManifestId) {\n          header.dataset.adobeTargetTestid = updateMetaData.targetManifestId;\n        }\n      });\n    }\n  });\n};\nexport async function getManifestConfig(info = {}, variantOverride = false) {\n  const {\n    name,\n    manifestData,\n    manifestPath,\n    manifestUrl,\n    manifestPlaceholders,\n    manifestInfo,\n    variantLabel,\n    disabled,\n    event,\n    source,\n  } = info;\n  if (disabled && (!variantOverride || !Object.keys(variantOverride).length)) {\n    return createDefaultExperiment(info);\n  }\n  let data = manifestData;\n  if (!data) {\n    const fetchedData = await fetchData(manifestPath, DATA_TYPE.JSON);\n    if (fetchData) data = fetchedData;\n  }\n\n  const persData = data?.experiences?.data || data?.data || data;\n  if (!persData) return null;\n  const infoTab = manifestInfo || data?.info?.data;\n  const infoObj = infoTab?.reduce((acc, item) => {\n    acc[item.key] = item.value;\n    return acc;\n  }, {});\n  const manifestOverrideName = infoObj?.['manifest-override-name']?.toLowerCase();\n  const targetId = name || manifestOverrideName;\n  const manifestConfig = parseManifestVariants(persData, manifestPath, targetId);\n\n  if (!manifestConfig) {\n    /* c8 ignore next 3 */\n    log('Error loading personalization manifestConfig: ', name || manifestPath);\n    return null;\n  }\n  const infoKeyMap = {\n    'manifest-type': ['Personalization', 'Promo', 'Test'],\n    'manifest-execution-order': ['First', 'Normal', 'Last'],\n  };\n  if (infoTab) {\n    manifestConfig.manifestType = infoObj?.['manifest-type']?.toLowerCase();\n    if (manifestConfig.manifestType === TRACKED_MANIFEST_TYPE) {\n      manifestConfig.manifestOverrideName = manifestOverrideName;\n      const analytics = manifestOverrideName || getFileName(manifestPath).replace('.json', '');\n      manifestConfig.analyticsTitle = analytics.trim().slice(0, 15);\n    }\n    const executionOrder = {\n      'manifest-type': 1,\n      'manifest-execution-order': 1,\n    };\n    Object.keys(infoObj).forEach((key) => {\n      if (!infoKeyMap[key]) return;\n      const index = infoKeyMap[key].indexOf(infoObj[key]);\n      executionOrder[key] = index > -1 ? index : 1;\n    });\n    manifestConfig.executionOrder = `${executionOrder['manifest-execution-order']}-${executionOrder['manifest-type']}`;\n  } else {\n    // eslint-disable-next-line prefer-destructuring\n    manifestConfig.manifestType = infoKeyMap['manifest-type'][1];\n    manifestConfig.executionOrder = '1-1';\n  }\n\n  manifestConfig.manifestPath = normalizePath(manifestPath);\n  manifestConfig.selectedVariantName = await getPersonalizationVariant(\n    manifestConfig.manifestPath,\n    manifestConfig.variantNames,\n    variantLabel,\n  );\n\n  manifestConfig.placeholderData = manifestPlaceholders || data?.placeholders?.data;\n  manifestConfig.name = name;\n  manifestConfig.manifest = manifestPath;\n  manifestConfig.manifestUrl = manifestUrl;\n  manifestConfig.disabled = disabled;\n  manifestConfig.event = event;\n  if (source?.length) manifestConfig.source = source;\n  return manifestConfig;\n}\n\nconst normalizeFragPaths = ({ selector, val, action, manifestId, targetManifestId }) => ({\n  selector: normalizePath(selector),\n  val: normalizePath(val),\n  action,\n  manifestId,\n  targetManifestId,\n});\nexport async function categorizeActions(experiment, config) {\n  if (!experiment) return null;\n  const { manifestPath, selectedVariant } = experiment;\n  if (!selectedVariant || selectedVariant === 'default') return { experiment };\n\n  // only one replacepage can be defined\n  const { replacepage } = selectedVariant;\n  // eslint-disable-next-line prefer-destructuring\n  if (selectedVariant.replacepage?.length) config.mep.replacepage = replacepage[0];\n\n  selectedVariant.insertscript?.map((script) => loadScript(script.val));\n  selectedVariant.updatemetadata?.map((metadata) => setMetadata(metadata));\n\n  selectedVariant.fragments &&= selectedVariant.fragments.map(normalizeFragPaths);\n\n  return {\n    manifestPath,\n    experiment,\n    blocks: selectedVariant.useblockcode,\n    fragments: selectedVariant.fragments,\n    commands: selectedVariant.commands,\n  };\n}\n\nfunction parseMepParam(mepParam) {\n  if (!mepParam) return false;\n  const mepObject = Object.create(null);\n  const decodedParam = decodeURIComponent(mepParam);\n  decodedParam.split('---').forEach((item) => {\n    const pair = item.trim().split('--');\n    if (pair.length > 1) {\n      const [manifestPath, selectedVariant] = pair;\n      mepObject[manifestPath] = selectedVariant;\n    }\n  });\n\n  return mepObject;\n}\n\nfunction compareExecutionOrder(a, b) {\n  if (a.executionOrder === b.executionOrder) return 0;\n  return a.executionOrder > b.executionOrder ? 1 : -1;\n}\n\nexport function cleanAndSortManifestList(manifests, conf) {\n  const config = conf ?? getConfig();\n  const manifestObj = {};\n  let allManifests = manifests;\n  let targetManifestWinsOverServerManifest = false;\n  if (config.mep?.experiments) allManifests = [...manifests, ...config.mep.experiments];\n  allManifests.forEach((manifest) => {\n    try {\n      if (!manifest?.manifest) return;\n      if (!manifest.manifestPath) manifest.manifestPath = normalizePath(manifest.manifest);\n      if (manifest.manifestPath in manifestObj) {\n        let fullManifest = manifestObj[manifest.manifestPath];\n        let freshManifest = manifest;\n        if (manifest.name) {\n          fullManifest = manifest;\n          freshManifest = manifestObj[manifest.manifestPath];\n        }\n        freshManifest.source = freshManifest.source.concat(fullManifest.source);\n        freshManifest.name = fullManifest.name;\n        freshManifest.selectedVariantName = fullManifest.selectedVariantName;\n        targetManifestWinsOverServerManifest = config?.env?.name === 'prod' && fullManifest.selectedVariantName.startsWith('target-');\n\n        freshManifest.variants = targetManifestWinsOverServerManifest\n          ? fullManifest.variants\n          : freshManifest.variants;\n\n        freshManifest.selectedVariant = freshManifest.variants[freshManifest.selectedVariantName];\n        manifestObj[manifest.manifestPath] = freshManifest;\n      } else {\n        manifestObj[manifest.manifestPath] = manifest;\n      }\n\n      const manifestConfig = manifestObj[manifest.manifestPath];\n      const { selectedVariantName, variantNames, placeholderData } = manifestConfig;\n\n      if (selectedVariantName && variantNames.includes(selectedVariantName)) {\n        manifestConfig.selectedVariant = manifestConfig.variants[selectedVariantName];\n      } else {\n        /* c8 ignore next 2 */\n        manifestConfig.selectedVariantName = 'default';\n        manifestConfig.selectedVariant = 'default';\n      }\n\n      parsePlaceholders(placeholderData, getConfig(), manifestConfig.selectedVariantName);\n    } catch (e) {\n      log(`MEP Error parsing manifests: ${e.toString()}`);\n      window.lana?.log(`MEP Error parsing manifests: ${e.toString()}`);\n    }\n  });\n  Object.keys(manifestObj).forEach((key) => {\n    delete manifestObj[key].variants;\n  });\n  return Object.values(manifestObj).sort(compareExecutionOrder);\n}\n\nexport function handleFragmentCommand(command, a) {\n  const { action, fragment, manifestId, targetManifestId } = command;\n  if (action === COMMANDS_KEYS.replace) {\n    a.href = fragment;\n    addIds(a, manifestId, targetManifestId);\n    return fragment;\n  }\n  if (action === COMMANDS_KEYS.remove) {\n    a.parentElement.remove();\n  }\n  return false;\n}\n\nexport function parseNestedPlaceholders({ placeholders }) {\n  if (!placeholders) return;\n  Object.entries(placeholders).forEach(([key, value]) => {\n    placeholders[key] = replacePlaceholders(value, placeholders);\n  });\n}\n\nexport async function applyPers({ manifests }) {\n  if (!manifests?.length) return;\n  let experiments = manifests;\n  const config = getConfig();\n  for (let i = 0; i < experiments.length; i += 1) {\n    experiments[i] = await getManifestConfig(\n      experiments[i],\n      config.mep?.variantOverride,\n    );\n  }\n\n  experiments = cleanAndSortManifestList(experiments);\n  parseNestedPlaceholders(config);\n\n  let results = [];\n\n  for (const experiment of experiments) {\n    const result = await categorizeActions(experiment, config);\n    if (result) results.push(result);\n  }\n  results = results.filter(Boolean);\n\n  config.mep.experiments = [...config.mep.experiments, ...experiments];\n  config.mep.blocks = consolidateObjects(results, 'blocks', config.mep.blocks);\n  config.mep.fragments = consolidateObjects(results, 'fragments', config.mep.fragments);\n  config.mep.commands = consolidateArray(results, 'commands', config.mep.commands);\n\n  const main = document.querySelector('main');\n  if (config.mep.replacepage && !isPostLCP && main) {\n    await replaceInner(config.mep.replacepage.val, main);\n    const { manifestId, targetManifestId } = config.mep.replacepage;\n    addIds(main, manifestId, targetManifestId);\n  }\n\n  config.mep.commands = handleCommands(config.mep.commands);\n\n  const pznList = results.filter((r) => (r.experiment?.manifestType === TRACKED_MANIFEST_TYPE));\n  if (!pznList.length) return;\n\n  const pznVariants = pznList.map((r) => {\n    const val = r.experiment.selectedVariantName.replace(TARGET_EXP_PREFIX, '').trim().slice(0, 15);\n    const arr = val.split(':');\n    if (arr.length > 2 || arr[0]?.trim() === '' || arr[1]?.trim() === '') {\n      log('MEP Error: When using (optional) column nicknames, please use the following syntax: \"<nickname>: <original audience>\"');\n    }\n    if (!val.includes(':') || val.startsWith(':')) return val === 'default' ? 'nopzn' : val;\n    return arr[0].trim();\n  });\n  const pznManifests = pznList.map((r) => r.experiment.analyticsTitle);\n  config.mep.martech = `|${pznVariants.join('--')}|${pznManifests.join('--')}`;\n}\n\nexport const combineMepSources = async (persEnabled, promoEnabled, mepParam) => {\n  let persManifests = [];\n\n  if (persEnabled) {\n    persManifests = persEnabled.toLowerCase()\n      .split(/,|(\\s+)|(\\\\n)/g)\n      .filter((path) => path?.trim())\n      .map((manifestPath) => ({ manifestPath, source: ['pzn'] }));\n  }\n\n  if (promoEnabled) {\n    const { default: getPromoManifests } = await import('./promo-utils.js');\n    persManifests = persManifests.concat(getPromoManifests(promoEnabled, PAGE_URL.searchParams));\n  }\n\n  if (mepParam && mepParam !== 'off') {\n    const persManifestPaths = persManifests.map((manifest) => {\n      const { manifestPath } = manifest;\n      if (manifestPath?.startsWith('/')) return manifestPath;\n      try {\n        const url = new URL(manifestPath);\n        return url.pathname;\n      } catch (e) {\n        return manifestPath;\n      }\n    });\n\n    mepParam.split('---').forEach((manifestPair) => {\n      const manifestPath = manifestPair.trim().toLowerCase().split('--')[0];\n      if (!persManifestPaths.includes(manifestPath)) {\n        persManifests.push({ manifestPath, source: ['mep param'] });\n      }\n    });\n  }\n  return persManifests;\n};\n\nasync function updateManifestsAndPropositions(\n  { config, targetAjoManifests, targetAjoPropositions },\n) {\n  targetAjoManifests.forEach((manifest) => {\n    manifest.source = [config.mep.ajoEnabled ? 'ajo' : 'target'];\n  });\n  config.mep.targetAjoManifests = targetAjoManifests;\n  if (config.mep.enablePersV2) {\n    if (!config.mep.hybridPersEnabled) {\n      window.addEventListener('alloy_sendEvent', () => {\n        if (targetAjoPropositions?.length && window._satellite) {\n          window._satellite.track('propositionDisplay', targetAjoPropositions);\n        }\n      }, { once: true });\n    }\n  } else if (targetAjoPropositions?.length && window._satellite) {\n    window._satellite.track('propositionDisplay', targetAjoPropositions);\n  }\n  if (config.mep.targetEnabled === 'postlcp') {\n    const event = new CustomEvent(MARTECH_RETURNED_EVENT, { detail: 'Martech returned' });\n    window.dispatchEvent(event);\n  }\n  return targetAjoManifests;\n}\n\nfunction roundToQuarter(num) {\n  return Math.ceil(num / 250) / 4;\n}\n\nfunction calculateResponseTime(responseStart) {\n  const responseTime = Date.now() - responseStart;\n  return roundToQuarter(responseTime);\n}\n\nfunction sendTargetResponseAnalytics(failure, responseStart, timeoutLocal, message) {\n  // temporary solution until we can decide on a better timeout value\n  const responseTime = calculateResponseTime(responseStart);\n  const timeoutTime = roundToQuarter(timeoutLocal);\n  let val = `target response time ${responseTime}:timed out ${failure}:timeout ${timeoutTime}`;\n  if (message) val += `:${message}`;\n  // eslint-disable-next-line no-underscore-dangle\n  window.addEventListener('alloy_sendEvent', () => {\n    window._satellite?.track?.('event', {\n      documentUnloading: true,\n      xdm: {\n        eventType: 'web.webinteraction.linkClicks',\n        web: {\n          webInteraction: {\n            linkClicks: { value: 1 },\n            type: 'other',\n            name: val,\n          },\n        },\n      },\n      data:\n        { _adobe_corpnew: { digitalData: { primaryEvent: { eventInfo: { eventName: val } } } } },\n    });\n  }, { once: true });\n}\n\nconst handleAlloyResponse = (response) => ((response.propositions || response.decisions))\n  ?.map((i) => {\n    const { id } = i;\n    return i.items.map((item) => ({ ...item, id }));\n  })\n  ?.flat()\n  ?.map((item) => {\n    const content = item?.data?.content;\n    if (!content || !(content.manifestLocation || content.manifestContent)) return null;\n    return {\n      manifestPath: content.manifestLocation || content.manifestPath,\n      manifestUrl: content.manifestLocation,\n      manifestData: content.manifestContent?.experiences?.data || content.manifestContent?.data,\n      manifestPlaceholders: content.manifestContent?.placeholders?.data,\n      manifestInfo: content.manifestContent?.info.data,\n      name: item.meta?.['activity.name'] || item.id,\n      variantLabel: (item.meta?.['experience.name'] && `target-${item.meta['experience.name']}`)\n        || content.experienceName,\n      meta: item.meta,\n    };\n  })\n  ?.filter(Boolean) ?? [];\n\nasync function handleMartechTargetInteraction(\n  { config, targetInteractionPromise, calculatedTimeout },\n) {\n  const targetAjo = config.mep.ajoEnabled ? 'ajo' : 'target';\n  let targetAjoManifests = [];\n  let targetAjoPropositions = [];\n  if (config?.mep?.enablePersV2 && targetInteractionPromise) {\n    const { targetInteractionData, respTime, respStartTime } = await targetInteractionPromise;\n    sendTargetResponseAnalytics(false, respStartTime, calculatedTimeout);\n    if (targetInteractionData.result) {\n      const roundedResponseTime = roundToQuarter(respTime);\n      performance.clearMarks();\n      performance.clearMeasures();\n      try {\n        window.lana.log(`${targetAjo} response time: ${roundedResponseTime}`, {\n          tags: 'martech',\n          errorType: 'e',\n          sampleRate: 0.5,\n        });\n      } catch (e) {\n        // eslint-disable-next-line no-console\n        console.error(`Error logging ${targetAjo} response time:`, e);\n      }\n      targetAjoManifests = handleAlloyResponse(targetInteractionData.result);\n      targetAjoPropositions = targetInteractionData.result?.propositions || [];\n    }\n  }\n\n  return updateManifestsAndPropositions(\n    { config, targetAjoManifests, targetAjoPropositions },\n  );\n}\n\nasync function callMartech(config) {\n  const { getTargetAjoPersonalization } = await import('../../martech/martech.js');\n  const {\n    targetAjoManifests,\n    targetAjoPropositions,\n  } = await getTargetAjoPersonalization(\n    { handleAlloyResponse, config, sendTargetResponseAnalytics },\n  );\n  return updateManifestsAndPropositions(\n    { config, targetAjoManifests, targetAjoPropositions },\n  );\n}\n\nconst awaitMartech = () => new Promise((resolve) => {\n  const listener = (event) => resolve(event.detail);\n  window.addEventListener(MARTECH_RETURNED_EVENT, listener, { once: true });\n});\n\nexport async function init(enablements = {}) {\n  let manifests = [];\n  const {\n    mepParam, mepHighlight, mepButton, pzn, promo, enablePersV2, hybridPersEnabled,\n    target, ajo, targetInteractionPromise, calculatedTimeout, postLCP,\n  } = enablements;\n  const config = getConfig();\n  if (postLCP) {\n    isPostLCP = true;\n  } else {\n    config.mep = {\n      updateFragDataProps,\n      preview: (mepButton !== 'off'\n        && (config.env?.name !== 'prod' || mepParam || mepParam === '' || mepButton)),\n      variantOverride: parseMepParam(mepParam),\n      highlight: (mepHighlight !== undefined && mepHighlight !== 'false'),\n      targetEnabled: target,\n      ajoEnabled: ajo,\n      experiments: [],\n      prefix: config.locale?.prefix.split('/')[1]?.toLowerCase() || US_GEO,\n      enablePersV2,\n      hybridPersEnabled,\n    };\n\n    manifests = manifests.concat(await combineMepSources(pzn, promo, mepParam));\n    manifests?.forEach((manifest) => {\n      if (manifest.disabled) return;\n      const normalizedURL = normalizePath(manifest.manifestPath);\n      loadLink(normalizedURL, { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n    });\n    if (pzn) loadLink(getXLGListURL(config), { as: 'fetch', crossorigin: 'anonymous', rel: 'preload' });\n  }\n\n  if (enablePersV2 && target === true) {\n    manifests = manifests.concat(await handleMartechTargetInteraction(\n      { config, targetInteractionPromise, calculatedTimeout },\n    ));\n  } else {\n    if (target === true || ajo === true) manifests = manifests.concat(await callMartech(config));\n    if (target === 'postlcp' || ajo === 'postlcp') callMartech(config);\n  }\n  if (postLCP) {\n    if (!config.mep.targetAjoManifests) await awaitMartech();\n    manifests = config.mep.targetAjoManifests;\n  }\n  try {\n    if (manifests?.length) await applyPers({ manifests });\n    if (config.mep?.preview) await import('./preview.js').then(({ saveToMmm }) => saveToMmm());\n  } catch (e) {\n    log(`MEP Error: ${e.toString()}`);\n    window.lana?.log(`MEP Error: ${e.toString()}`);\n  }\n}\n"],"names":["PHONE_SIZE","window","screen","width","height","safariIpad","navigator","userAgent","includes","maxTouchPoints","isGalaxyTab","US_GEO","PERSONALIZATION_TAGS","all","chrome","firefox","safari","edge","android","ios","test","windows","mac","mobile-device","phone","tablet","desktop","loggedout","_window$adobeIMS","adobeIMS","isSignedInUser","loggedin","_window$adobeIMS2","PERSONALIZATION_KEYS","Object","keys","CLASS_EL_DELETE","CLASS_EL_REPLACE","COLUMN_NOT_OPERATOR","TARGET_EXP_PREFIX","INLINE_HASH","MARTECH_RETURNED_EVENT","PAGE_URL","URL","location","href","FLAGS","includeFragments","isPostLCP","TRACKED_MANIFEST_TYPE","RE_KEY_REPLACE","MANIFEST_KEYS","DATA_TYPE","JSON","TEXT","IN_BLOCK_SELECTOR_PREFIX","normalizePath","p","_path","localize","arguments","length","undefined","path","isDamContent","getFederatedUrl","config","getConfig","startsWith","codeRoot","concat","url","hash","pathname","firstFolder","split","mepHash","locale","ietf","locales","prefix","replace","e","getFileName","pop","GLOBAL_CMDS","CREATE_CMDS","insertafter","insertbefore","prepend","append","COMMANDS_KEYS","remove","updateAttribute","addIds","el","manifestId","targetManifestId","dataset","adobeTargetTestid","getSelectorType","selector","sel","toLowerCase","trim","replacePlaceholders","value","ph","placeholders","val","matches","match","forEach","key","createFrag","action","content","classList","add","search","a","createTag","frag","lcpSection","document","querySelector","contains","isInLcpSection","loadLink","localizeLink","as","crossorigin","rel","createContent","_ref","modifiers","nodeName","setAttribute","getUpdatedHref","getAttribute","newContent","innerHTML","container","parentElement","COMMANDS","_ref2","cmd","insertAdjacentElement","attribute","parameter","parameters","URLSearchParams","set","toString","error","console","log","message","_config$mep","mep","preview","fetchData","async","type","resp","fetch","ok","status","Error","statusText","consolidateArray","arr","prop","existing","reduce","results","i","consolidateObjects","propMap","item","_item$prop","fragment","manifestPath","matchGlob","searchStr","inputStr","pattern","RegExp","replaceInner","element","plainPath","endsWith","html","decorateArea","setMetadata","metadata","propName","metaEl","head","normalizeKeys","obj","newObj","str","updateEndNumber","endNumber","term","modifySelectorTerm","termParam","specificSelectors","section","startTextMatch","startText","startTextPart1","endNumberMatch","modifyNonFragmentSelector","flags","shift","flag","mod","push","getModifiers","modifiedSelector","join","replaceAll","map","string","addHash","newHash","origin","setDataIdOnChildren","sections","id","children","child","updateFragDataProps","inline","deleteMarkedEls","querySelectorAll","addSectionAnchors","block","row","_row$children$","_row$children$2","col1","textContent","col2","handleCommands","commands","rootEl","forceInline","forceRootEl","section1","command","_config$mep2","_config$mep2$inBlock","_config$mep$inBlock","_config$mep$inBlock$b","_config$mep$inBlock$b4","_config$mep$inBlock$b5","blockAndSelector","substring","blockName","blockSelector","inBlock","slice","_config$mep$inBlock$b2","_config$mep$inBlock$b3","fragments","registerInBlockActions","selectorType","els","root","getSelectedElements","assign","insertAnchor","completed","filter","getVariantInfo","line","variantNames","variants","fTargetId","_config$mep3","_line$action","_config$mep4","targetId","pageFilter","vn","variantInfo","blockTarget","getBlockProps","fVal","_val","_val2","_val3","_val4","miloLibs","parseManifestVariants","data","manifestConfig","experiences","d","_config$mep5","createMartechMetadata","column","then","_ref3","_config$mep6","_config$mep6$analytic","processTrackingLabels","analyticLocalization","firstRow","usValue","us","en","translatedValue","parsePlaceholders","_config$mep7","selectedVariantName","valueNames","region","keyVal","entries","find","_ref4","key2","res","checkForParamMatch","paramStr","name","searchParamVal","Array","from","searchParams","_ref5","get","trimNames","v","Boolean","buildVariantInfo","acc","nameArr","allNames","getXLGListURL","_config$env","sheet","env","getEntitlementMap","_config$mep8","_fetchedData$data","_config$mep9","entitlementMap","entitlementUrl","fetchedData","consumerEntitlements","entitlements","ent","tagname","getEntitlements","flatMap","destination","_destination$segments","segments","segment","entMatch","createDefaultExperiment","manifest","disabled","event","executionOrder","selectedVariant","source","addMepAnalytics","header","_config$mep12","experiments","experiment","_experiment$selectedV","_experiment$selectedV2","useblockcode","_ref6","updatemetadata","updateMetaData","getManifestConfig","_data","_data2","_data3","_infoObj$manifestOve","_data4","info","variantOverride","manifestData","manifestUrl","manifestPlaceholders","manifestInfo","variantLabel","persData","infoTab","infoObj","manifestOverrideName","infoKeyMap","_infoObj$manifestTyp","manifestType","analytics","analyticsTitle","index","indexOf","_config$mep10","hasEntitlementTag","values","some","tag","userEntitlements","_config$mep11","enablePersV2","hasMatch","_userEntitlements","matchVariant","n","condition","reverse","variant","getPersonalizationVariant","placeholderData","normalizeFragPaths","_ref7","categorizeActions","_selectedVariant$repl","_selectedVariant$inse","_selectedVariant$upda","replacepage","insertscript","script","loadScript","blocks","parseMepParam","mepParam","mepObject","create","decodeURIComponent","pair","compareExecutionOrder","b","cleanAndSortManifestList","manifests","conf","_config$mep13","manifestObj","allManifests","targetManifestWinsOverServerManifest","_config$env2","fullManifest","freshManifest","_window$lana","lana","sort","handleFragmentCommand","parseNestedPlaceholders","_ref8","_ref9","applyPers","_ref10","_config$mep14","result","main","pznList","r","_r$experiment","pznVariants","_arr$","_arr$2","pznManifests","martech","combineMepSources","persEnabled","promoEnabled","persManifests","default","getPromoManifests","persManifestPaths","manifestPair","updateManifestsAndPropositions","_ref11","targetAjoManifests","targetAjoPropositions","ajoEnabled","hybridPersEnabled","addEventListener","_satellite","track","once","targetEnabled","CustomEvent","detail","dispatchEvent","roundToQuarter","num","Math","ceil","sendTargetResponseAnalytics","failure","responseStart","timeoutLocal","responseTime","Date","now","calculateResponseTime","timeoutTime","_window$_satellite","_window$_satellite$tr","call","documentUnloading","xdm","eventType","web","webInteraction","linkClicks","_adobe_corpnew","digitalData","primaryEvent","eventInfo","eventName","handleAlloyResponse","response","_map$flat$map$filter","_ref12","propositions","decisions","items","flat","_item$data","_content$manifestCont","_content$manifestCont2","_content$manifestCont3","_content$manifestCont4","_item$meta","_item$meta2","manifestLocation","manifestContent","meta","experienceName","callMartech","getTargetAjoPersonalization","awaitMartech","Promise","resolve","init","enablements","mepHighlight","mepButton","pzn","promo","target","ajo","targetInteractionPromise","calculatedTimeout","postLCP","_config$env3","_config$locale","_manifests","highlight","normalizedURL","_ref13","_config$mep15","targetAjo","targetInteractionData","respTime","respStartTime","_targetInteractionDat","roundedResponseTime","performance","clearMarks","clearMeasures","tags","errorType","sampleRate","handleMartechTargetInteraction","_manifests2","_config$mep16","_ref14","saveToMmm","_window$lana2"],"sourceRoot":""}