"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[2120,3718],{3718:(e,t,s)=>{function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if("function"!=typeof e)return;let s=null;return function(){for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];clearTimeout(s),s=setTimeout((()=>e(...i)),t)}}s.r(t),s.d(t,{a:()=>a,b:()=>i});var i={debounce:a}},2120:(e,t,s)=>{s.r(t),s.d(t,{default:()=>L});var a,i,r,n,l,h,c=s(7528),o=s(4705),u=s(3718),d=s(4365),p=(s(3269),s(5848)),g=s(4112),f=(s(6483),{scope:"adobecom",apiKey:"adobedotcom2"}),m={hasResults:"has-results",inputIsPopulated:"feds-search-input--isPopulated"},{locale:v}=(0,g.i)(),[,b="US"]=v.ietf.split("-"),L=class e{constructor(e){(0,o.A)(this,"onSearchInput",(0,u.a)((()=>{let e=this.getQuery();if(!e.length)return this.resultsList.replaceChildren(),void delete this.query;e!==this.query&&(this.query=e,this.getSuggestions().then((e=>{let t=null===e||void 0===e?void 0:e.suggested_completions;if(!Array.isArray(t)||!t.length)return this.resultsList.replaceChildren(this.getNoResultsTemplate()),void(this.parent instanceof HTMLElement&&this.parent.classList.remove(m.hasResults));this.resultsList.replaceChildren(this.getResultsTemplate(t)),this.parent instanceof HTMLElement&&this.parent.classList.add(m.hasResults)})).catch((()=>{this.resultsList.replaceChildren(this.getNoResultsTemplate()),this.parent instanceof HTMLElement&&this.parent.classList.remove(m.hasResults)})))}),150)),this.icon=e.icon,this.trigger=e.trigger,this.parent=this.trigger.closest(".feds-nav-wrapper"),new MutationObserver((()=>{this.clearSearchForm()})).observe(this.trigger,{attributeFilter:["aria-expanded"]}),(0,d.f)(this.init.bind(this),"Search init has failed","errorType=e,module=gnav-search")}async init(){await this.getLabels(),this.decorate(),this.addEventListeners(),this.toggleDropdown()}async getLabels(){this.labels={},[this.labels.search,this.labels.clearResults,this.labels.tryAdvancedSearch]=await(0,p.b)(["search","clear-results","try-advanced-search"],(0,g.n)())}decorate(){this.input=(0,d.h)(a||(a=(0,c.A)(['<input placeholder="','" aria-label="','" class="feds-search-input" autocomplete="off" aria-autocomplete="list" aria-controls="feds-search-results" daa-ll="search-results:standard search" />'])),this.labels.search,this.labels.search),this.resultsList=(0,d.h)(i||(i=(0,c.A)(['<ul class="feds-search-results" id="feds-search-results" role="region" daa-ll="search-results:suggested-search:click"></ul>']))),this.clearButton=(0,d.h)(r||(r=(0,c.A)(['<button tabindex="0" class="feds-search-clear" aria-label="','"></button>'])),this.labels.clearResults),this.searchBar=(0,d.h)(n||(n=(0,c.A)(['\n      <aside class="feds-search-dropdown">\n        <div class="feds-search-bar">\n          <div class="feds-search-field">\n            ','\n            <div class="feds-search-icons">\n              ',"\n              ","\n            </div>\n          </div>\n          ","\n        </div>\n      </aside>"])),this.input,this.icon,this.clearButton,this.resultsList),this.trigger.after(this.searchBar)}clearSearchForm(){this.input.value="",this.onSearchInput()}addEventListeners(){this.trigger.addEventListener("click",(()=>{this.toggleDropdown()})),this.input.addEventListener("input",(()=>{this.onSearchInput()})),this.input.addEventListener("keydown",(t=>{if("Escape"===t.code&&(this.input.value.length?this.clearSearchForm():d.q.matches&&((0,d.F)(),this.trigger.focus())),"Enter"===t.code){if(!this.query)return;window.location.href=e.getHelpxLink(this.query)}})),this.resultsList.addEventListener("keydown",(e=>{"Escape"===e.code&&this.input.focus()})),this.clearButton.addEventListener("click",(()=>{this.clearSearchForm(),this.input.focus()})),d.q.addEventListener("change",(()=>{(0,d.F)()}))}getSuggestions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.query,{env:t}=(0,g.i)(),s="https://".concat("prod"===t?"adobesearch":"adobesearch-stage",".adobe.io/autocomplete/completions?q[locale]=").concat(v.ietf,"&scope=").concat(f.scope,"&q[text]=").concat(encodeURIComponent(e));return fetch(s,{headers:{"x-api-key":f.apiKey}}).then((e=>e.json())).catch((()=>{}))}getQuery(){let e=this.input.value.trim();return e.length?(this.input.classList.add(m.inputIsPopulated),e):(this.input.classList.remove(m.inputIsPopulated),this.resultsList.replaceChildren(),this.parent instanceof HTMLElement&&this.parent.classList.remove(m.hasResults),"")}getResultsTemplate(t){let s=document.createDocumentFragment();return t.map((t=>{let a=t.name;if(!a.length)return;let i,r=(()=>{let e=0,t=this.query.length;for(;e<t&&this.query[e].toLowerCase()===a[e].toLowerCase();)e+=1;return this.query.substring(0,e).trim()})(),n=new RegExp("(".concat(r,")"),"i"),h=a.replace(n,(e=>(i=e,""))),o=(0,d.h)(l||(l=(0,c.A)(['<li>\n          <a href="','" class="feds-search-result" aria-label="','">\n            <span>',"</span>","\n          </a>\n        </li>"])),e.getHelpxLink(a),a,i,h);s.appendChild(o)})),s}getNoResultsTemplate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.query;return(0,d.h)(h||(h=(0,c.A)(['<li>\n      <a href="','" class="feds-search-result"><span>',"</span></a>\n    </li>"])),e.getHelpxLink(t),this.labels.tryAdvancedSearch)}focusInput(){d.q.matches&&this.input.focus()}toggleDropdown(){d.q.matches&&((0,d.I)({element:this.trigger})?((0,d.p)(!0),this.focusInput()):this.clearSearchForm())}static getHelpxLink(e){return"https://helpx.adobe.com".concat(v.prefix,"/globalsearch.html?q=").concat(encodeURIComponent((e||"").trim()),"&start_index=0&country=").concat(b)}}}}]);
//# sourceMappingURL=2120.8f0aa889.chunk.js.map