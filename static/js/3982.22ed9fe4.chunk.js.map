{"version":3,"file":"static/js/3982.22ed9fe4.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/features/personalization/promo-utils.js"],"sourcesContent":["import { getMetadata, getConfig } from '../../utils/utils.js';\n\nconst GMTStringToLocalDate = (gmtString) => new Date(`${gmtString}+00:00`);\n\nconst APAC = ['au', 'cn', 'hk_en', 'hk_zh', 'id_en', 'id_id', 'in', 'in_hi', 'kr', 'my_en', 'my_ms', 'nz', 'ph_en', 'ph_fil', 'sg', 'th_en', 'th_th', 'tw', 'vn_en', 'vn_vi'];\nconst EMEA = ['ae_en', 'ae_ar', 'africa', 'at', 'be_en', 'be_fr', 'be_nl', 'bg', 'ch_de', 'ch_fr', 'ch_it', 'cis_en', 'cis_ru', 'cz', 'de', 'dk', 'ee', 'eg_ar', 'eg_en', 'es', 'fi', 'fr', 'gr_el', 'gr_en', 'hu', 'ie', 'il_en', 'il_he', 'iq', 'is', 'it', 'kw_ar', 'kw_en', 'lt', 'lu_de', 'lu_en', 'lu_fr', 'lv', 'mena_ar', 'mena_en', 'ng', 'nl', 'no', 'pl', 'pt', 'qa_ar', 'qa_en', 'ro', 'ru', 'sa_en', 'sa_ar', 'se', 'si', 'sk', 'tr', 'ua', 'uk', 'za'];\nconst AMERICAS = ['us', 'ar', 'br', 'ca', 'ca_fr', 'cl', 'co', 'cr', 'ec', 'gt', 'la', 'mx', 'pe', 'pr'];\nconst JP = ['jp'];\nconst REGIONS = { APAC, EMEA, AMERICAS, JP };\nconst localeCode = getConfig()?.locale?.prefix?.substring(1) || 'us';\nconst regionCode = Object.keys(REGIONS)\n  .find((r) => REGIONS[r]?.includes(localeCode))?.toLowerCase() || null;\n\nexport const isDisabled = (event, searchParams) => {\n  if (!event) return false;\n  if (event.locales && !event.locales.includes(localeCode)) return true;\n  const currentDate = searchParams?.get('instant') ? new Date(searchParams.get('instant')) : new Date();\n  if ((!event.start && event.end) || (!event.end && event.start)) return true;\n  return Boolean(event.start && event.end\n    && (currentDate < event.start || currentDate > event.end));\n};\n\nconst isManifestWithinLocale = (locales) => {\n  if (!locales) return true;\n  return locales.split(';').map((locale) => locale.trim()).includes(localeCode);\n};\n\nconst getRegionalPromoManifests = (manifestNames, region, searchParams) => {\n  const attachedManifests = manifestNames\n    ? manifestNames.split(',')?.map((manifest) => manifest?.trim())\n    : [];\n\n  const schedule = getMetadata(region ? `${region}_schedule` : 'schedule');\n  if (!schedule) {\n    return [];\n  }\n  return schedule.split(',')\n    .map((manifest) => {\n      const [name, start, end, manifestPath, locales, cdtStart, cdtEnd] = manifest.trim().split('|').map((s) => s.trim());\n      if (attachedManifests.includes(name) && isManifestWithinLocale(locales)) {\n        const event = {\n          name,\n          start: GMTStringToLocalDate(start),\n          end: GMTStringToLocalDate(end),\n          cdtStart,\n          cdtEnd,\n        };\n        const disabled = isDisabled(event, searchParams);\n        return { manifestPath, disabled, event, source: ['promo'] };\n      }\n      return null;\n    })\n    .filter((manifest) => manifest != null);\n};\n\nexport default function getPromoManifests(manifestNames, searchParams) {\n  const promoManifests = regionCode != null ? getRegionalPromoManifests(\n    manifestNames[`${regionCode}_manifestnames`],\n    regionCode,\n    searchParams,\n  ) : [];\n  const globalPromoManifests = getRegionalPromoManifests(\n    manifestNames.manifestnames,\n    null,\n    searchParams,\n  );\n  return [...promoManifests, ...globalPromoManifests];\n}\n"],"names":["GMTStringToLocalDate","gmtString","Date","concat","REGIONS","APAC","EMEA","AMERICAS","JP","localeCode","_getConfig","getConfig","locale","prefix","substring","regionCode","_Object$keys$find","Object","keys","find","r","_REGIONS$r","includes","toLowerCase","isDisabled","event","searchParams","locales","currentDate","get","start","end","Boolean","getRegionalPromoManifests","manifestNames","region","_manifestNames$split","attachedManifests","split","map","manifest","trim","schedule","getMetadata","name","manifestPath","cdtStart","cdtEnd","s","isManifestWithinLocale","disabled","source","filter","getPromoManifests","manifestnames"],"sourceRoot":""}