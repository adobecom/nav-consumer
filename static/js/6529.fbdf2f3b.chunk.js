(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[6529,5853,8234,8910],{3664:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=3664,e.exports=a},4417:e=>{function a(e){return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}))}a.keys=()=>[],a.resolve=a,a.id=4417,e.exports=a},5853:(e,a,n)=>{"use strict";n.r(a),n.d(a,{decoratePlaceholderArea:()=>u,fetchPlaceholders:()=>l,replaceKey:()=>i,replaceKeyArray:()=>s,replaceText:()=>d});var t=n(1608),r={};window.mph={};var o=async(e,a)=>{try{var n;null===(n=(e.ok?await e.json():{data:[]}).data)||void 0===n||n.forEach((e=>{window.mph[e.key]=e.value,a[e.key]=e.value}))}catch(t){window.lana.log("Error parsing placeholder json: ".concat(t.message),{tags:"placeholders",errorType:"e"})}},l=async e=>{let{config:a,sheet:n,placeholderRequest:l,placeholderPath:c}=e;const i=c||((e,a)=>{const n="".concat(e.locale.contentRoot,"/placeholders.json"),t="default"!==a&&"string"===typeof a&&a.length?"?sheet=".concat(a):"";return"".concat(n).concat(t)})(a,n);return r[i]||(r[i]=((e,a)=>new Promise((async n=>{const r=await a||await(0,t.customFetch)({resource:e,withCacheRules:!0}).catch((()=>({}))),l={};if(Array.isArray(r))for(const e of r)await o(e,l);else await o(r,l);n(l)})))(i,l)),r[i]};async function c(e,a,n){var r,o;let c=!1;const i="en-US",s=(0,t.getMetadata)("disable-geo-placeholders")||"off",d=()=>{const e=a.locale.contentRoot,n=a.locale.prefix;return n.length?e.endsWith(n)?e.replace(n,""):e.replace("".concat(n,"/"),"/"):e},u=async()=>{const e={locale:{ietf:i,contentRoot:d()}},a=await l({config:e,sheet:n}).catch((()=>({})));return c=!0,a};if(null!==(r=a.placeholders)&&void 0!==r&&r[e])return a.placeholders[e];let p;if(p="on"===s?await u():await l({config:a,sheet:n}),"string"===typeof(null===(o=p)||void 0===o?void 0:o[e]))return p[e];if(!c&&a.locale.ietf!==i){const a=await u();if(null!==a&&void 0!==a&&a[e])return a[e]}return function(e){return e.replaceAll("-"," ")}(e)}async function i(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if("string"!==typeof e||!e.length)return"";return await c(e,a,n)}async function s(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default";if(!Array.isArray(e)||!e.length)return[];const t=[];e.forEach((e=>{t.push(c(e,a,n))}));return await Promise.all(t)}async function d(e,a){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/{{(.*?)}}|%7B%7B(.*?)%7D%7D/g,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"default";if("string"!==typeof e||!e.length)return"";const r=[...e.matchAll(new RegExp(n))];if(!r.length)return e;const o=Array.from(r,(e=>e[1]||e[2])),l=await s(o,a,t);let c=0,i=e.replaceAll(n,(()=>l[c++]));return i=i.replace(/&nbsp;/g,"\xa0"),i}async function u(e){let{placeholderPath:a,placeholderRequest:n,nodes:r}=e;if(!r.length)return;const o=(0,t.getConfig)();await l({placeholderPath:a,config:o,placeholderRequest:n});const c=r.map((async e=>{if(e.nodeType===Node.TEXT_NODE)e.nodeValue=await d(e.nodeValue,o);else if(e.nodeType===Node.ELEMENT_NODE){const a=[...e.attributes].map((async e=>{const a=await d(e.value,o);return{name:e.name,value:a}}));(await Promise.all(a)).forEach((a=>{let{name:n,value:t}=a;e.setAttribute(n,t)}))}}));await Promise.all(c)}},6529:(e,a,n)=>{"use strict";n.r(a),n.d(a,{LANA_OPTIONS:()=>h,default:()=>w,handleIFrameEvents:()=>v,lanaLog:()=>g});var t=n(5853),r=n(1608),o=(n(3658),"AppLoaded"),l="EXTERNAL",c="SWITCH",i="RETURN_BACK",s="OrderComplete",d="Error",u="Close",p=["FFPU"],f=(e,a)=>{var n;const t=null===e||void 0===e||null===(n=e.offer)||void 0===n||null===(n=n.product_arrangement_v2)||void 0===n?void 0:n.family;return t&&a.includes(t)&&!(e=>{var a;return(null===e||void 0===e||null===(a=e.offer)||void 0===a?void 0:a.product_code)&&p.includes(e.offer.product_code)})(e)},h={clientId:"merch-at-scale",sampleRate:10,tags:"manage-plan"},g=async(e,a)=>{var n,t,r;const{userId:o}=null!==(n=await(null===(t=window.adobeIMS)||void 0===t?void 0:t.getProfile()))&&void 0!==n?n:{};null===(r=window.lana)||void 0===r||r.log("ManagePlan/".concat(a,"/").concat(o,": ").concat(e),h)},m=!1;var v=e=>{var a,n,t;let{data:p}=e,f=null;try{f=JSON.parse(p)}catch(y){return}const{app:h,subType:v,data:w}=f||{};if("ManagePlan"===h)switch(v){case o:null===(a=document.querySelector(".upgrade-flow-content iframe"))||void 0===a||null===(a=a.classList)||void 0===a||a.remove("loading"),null===(n=document.querySelector(".upgrade-flow-content sp-theme"))||void 0===n||n.remove(),g("Showing modal",v);break;case l:if(null===w||void 0===w||!w.externalUrl||!w.target)return;g("Opening external URL",v),window.open(w.externalUrl,w.target);break;case c:if(null===w||void 0===w||!w.externalUrl||!w.target)return;g("Opening external URL (SWITCH)",v),window.open(w.externalUrl,w.target);break;case i:if(null===w||void 0===w||!w.externalUrl||!w.target)return;w.returnUrl&&window.sessionStorage.setItem("upgradeModalReturnUrl",w.returnUrl),g("Opening external URL (RETURN_BACK)",v),window.open(w.externalUrl,w.target);break;case s:m=!0;break;case d:break;case u:m&&(g("Reloading page to update entitlements",v),(0,r.reloadPage)()),g("Closing modal",v),null===(t=document.querySelector(".dialog-modal.upgrade-flow-modal"))||void 0===t||t.dispatchEvent(new Event("closeModal"))}};async function w(e,a,o,l,c){if(!c.includes(e))return;if(null===o||void 0===o?void 0:o.find((e=>f(e,c))))return;const i=null===o||void 0===o?void 0:o.filter((e=>!0===e.change_plan_available)),s=null===i||void 0===i?void 0:i.find((e=>f(e,l)));if(!s)return;const{env:d,base:u}=(0,r.getConfig)(),p=function(e,a,n){var t,r;const o=null===e||void 0===e?void 0:e.value[0].offerId,l=null===a||void 0===a||null===(t=a.offer)||void 0===t?void 0:t.offer_id;if(!o||!l)return;const c=new URL("prod"===(null===n||void 0===n?void 0:n.name)?"https://plan.adobe.com":"https://stage.plan.adobe.com");return c.searchParams.append("intent","switch"),c.searchParams.append("toOfferId",o),c.searchParams.append("fromOffer",l),c.searchParams.append("language","en"),c.searchParams.append("surface","ADOBE_COM"),c.searchParams.append("ctx","if"),c.searchParams.append("ctxRtUrl",encodeURIComponent(window.location.href)),null!==(r=e.dataset)&&void 0!==r&&r.promotionCode&&c.searchParams.append("promoCode",e.dataset.promotionCode),c.toString()}(a,s,d);if(p){window.addEventListener("message",v);const{getModal:e}=await n.e(1474).then(n.bind(n,1474)),a=async(a,t)=>{a.preventDefault(),await Promise.all([n(4417)("".concat(u,"/features/spectrum-web-components/dist/theme.js")),n(3664)("".concat(u,"/features/spectrum-web-components/dist/progress-circle.js"))]);const o=(0,r.createTag)("div",{class:"upgrade-flow-content"}),l=(0,r.createTag)("iframe",{src:p,title:"Upgrade modal",frameborder:"0",marginwidth:"0",marginheight:"0",allowfullscreen:"true",loading:"lazy",class:"loading upgrade-flow-iframe"}),c=(0,r.createTag)("sp-progress-circle",{label:"progress circle",indeterminate:!0,size:"l"}),i=(0,r.createTag)("sp-theme",{theme:"spectrum",color:"light",scale:"medium",dir:"ltr"});if(i.append(c),o.append(i),o.append(l),t){const e=window.location.hash.replace("#","")===t?"":window.location.hash;window.location.hash=t,window.addEventListener("milo:modal:closed",(()=>{window.location.hash=e}),{once:!0})}return e(null,{id:"switch-modal",content:o,closeEvent:"closeModal",class:["upgrade-flow-modal"]})};return{text:await(0,t.replaceKey)("upgrade-now",(0,r.getConfig)()),className:"upgrade",url:p,handler:a}}}}}]);
//# sourceMappingURL=6529.fbdf2f3b.chunk.js.map