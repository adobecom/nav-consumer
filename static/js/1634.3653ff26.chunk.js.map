{"version":3,"file":"static/js/1634.3653ff26.chunk.js","mappings":"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","sources":["../../milo/libs/utils/lana.js"],"sourcesContent":["/* eslint-disable no-param-reassign */\n/* eslint-disable no-console */\n(function iife() {\n  const MSG_LIMIT = 2000;\n\n  const defaultOptions = {\n    clientId: '',\n    endpoint: 'https://www.adobe.com/lana/ll',\n    endpointStage: 'https://www.stage.adobe.com/lana/ll',\n    errorType: 'e',\n    sampleRate: 1,\n    tags: '',\n    implicitSampleRate: 1,\n    useProd: true,\n    isProdDomain: false,\n  };\n\n  const VALID_SEVERITIES = new Set(['d', 'debug', 'i', 'info', 'w', 'warn', 'e', 'error', 'c', 'critical']);\n\n  const w = window;\n\n  function isProd() {\n    const { host } = window.location;\n\n    if (host.endsWith('.adobe.com')\n      && !host.endsWith('.corp.adobe.com')\n      && !host.endsWith('.stage.adobe.com')) {\n      return true;\n    }\n\n    return ['sign.ing', 'edit.ing'].includes(host);\n  }\n\n  function mergeOptions(op1, op2) {\n    if (!op1) {\n      op1 = {};\n    }\n\n    if (!op2) {\n      op2 = {};\n    }\n\n    function getOpt(key) {\n      if (op1[key] !== undefined) {\n        return op1[key];\n      }\n      if (op2[key] !== undefined) {\n        return op2[key];\n      }\n      return defaultOptions[key];\n    }\n\n    return Object.keys(defaultOptions).reduce((options, key) => {\n      options[key] = getOpt(key);\n      return options;\n    }, {});\n  }\n\n  function hasDebugParam() {\n    return w.location.search.toLowerCase().indexOf('lanadebug') !== -1;\n  }\n\n  function isLocalhost() {\n    return w.location.host.toLowerCase().indexOf('localhost') !== -1;\n  }\n\n  function log(msg, options) {\n    msg = msg && msg.stack ? msg.stack : (msg || '');\n    if (msg.length > MSG_LIMIT) {\n      msg = `${msg.slice(0, MSG_LIMIT)}<trunc>`;\n    }\n\n    const o = mergeOptions(options, w.lana.options);\n    if (!o.clientId) {\n      console.warn('LANA ClientID is not set in options.');\n      return;\n    }\n\n    let severity;\n    if (options && options.severity !== undefined) {\n      if (VALID_SEVERITIES.has(options.severity)) {\n        severity = options.severity;\n      } else {\n        const isDebugMode = hasDebugParam() || w.lana.debug;\n        const defaultSeverity = isDebugMode ? 'd' : 'i';\n        console.warn(`LANA: Invalid severity '${options.severity}'. Defaulting to '${defaultSeverity}'.`);\n        severity = defaultSeverity;\n      }\n    } else if (w.lana.debug) {\n      severity = 'd';\n    }\n\n    const sampleRateParam = parseInt(new URL(window.location).searchParams.get('lana-sample'), 10);\n    const sampleRate = sampleRateParam || (o.errorType === 'i' ? o.implicitSampleRate : o.sampleRate);\n\n    if (!w.lana.debug && !w.lana.localhost && sampleRate <= Math.random() * 100) return;\n\n    const isProdDomain = isProd() || o.isProdDomain;\n\n    const endpoint = (!isProdDomain || !o.useProd) ? o.endpointStage : o.endpoint;\n    const queryParams = [\n      `m=${encodeURIComponent(msg)}`,\n      `c=${encodeURI(o.clientId)}`,\n      `s=${sampleRate}`,\n      `t=${encodeURI(o.errorType)}`,\n    ];\n\n    if (severity) {\n      queryParams.push(`r=${encodeURI(severity)}`);\n    }\n\n    if (o.tags) {\n      queryParams.push(`tags=${encodeURI(o.tags)}`);\n    }\n\n    if (!isProdDomain || w.lana.debug || w.lana.localhost) console.log('LANA Msg: ', msg, '\\nOpts:', o);\n\n    if (!w.lana.localhost || w.lana.debug) {\n      const xhr = new XMLHttpRequest();\n      if (w.lana.debug) {\n        queryParams.push('d');\n        xhr.addEventListener('load', () => {\n          console.log('LANA response:', xhr.responseText);\n        });\n      }\n      xhr.open('GET', `${endpoint}?${queryParams.join('&')}`);\n      xhr.send();\n      // eslint-disable-next-line consistent-return\n      return xhr;\n    }\n  }\n\n  function sendUnhandledError(e) {\n    log(e.reason || e.error || e.message, { errorType: 'i' });\n  }\n\n  w.lana = {\n    debug: false,\n    log,\n    options: mergeOptions(w.lana && w.lana.options),\n  };\n\n  /* c8 ignore next */\n  if (hasDebugParam()) w.lana.debug = true;\n  if (isLocalhost()) w.lana.localhost = true;\n\n  w.addEventListener('error', sendUnhandledError);\n  w.addEventListener('unhandledrejection', sendUnhandledError);\n}());\n"],"names":["l","clientId","endpoint","endpointStage","errorType","sampleRate","tags","implicitSampleRate","useProd","isProdDomain","w","Set","n","window","d","e","o","Object","keys","reduce","a","s","t","c","location","search","toLowerCase","indexOf","u","stack","length","concat","slice","lana","options","console","warn","severity","has","h","debug","p","parseInt","URL","searchParams","get","localhost","Math","random","g","host","endsWith","includes","I","m","r","encodeURIComponent","encodeURI","push","log","i","XMLHttpRequest","addEventListener","responseText","open","join","send","f","reason","error","message"],"sourceRoot":""}