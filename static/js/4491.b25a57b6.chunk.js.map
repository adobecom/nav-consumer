{"version":3,"file":"static/js/4491.b25a57b6.chunk.js","mappings":"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","sources":["../node_modules/@adobecom/utils/service-config.js","../node_modules/@adobecom/blocks/preflight/checks/constants.js","../node_modules/@adobecom/blocks/preflight/checks/asoApi.js","../node_modules/@adobecom/blocks/preflight/checks/assets.js","../node_modules/@adobecom/blocks/preflight/checks/performance.js","../node_modules/@adobecom/blocks/preflight/checks/seo.js","../node_modules/@adobecom/blocks/preflight/checks/preflightApi.js"],"sourcesContent":["/**\n * Get author-facing config options.\n */\n\nimport { getConfig, SLD } from './utils.js';\n\nconst DOT_MILO = '/.milo/config.json';\n\nlet config;\n\n/* c8 ignore next 6 */\nfunction getSiteOrigin() {\n  const search = new URLSearchParams(window.location.search);\n  const repo = search.get('repo');\n  const owner = search.get('owner');\n  return repo && owner ? `https://main--${repo}--${owner}.${SLD}.live` : window.location.origin;\n}\n\n/**\n * Get Service Config\n * @param {*} origin The origin of the site to pull the config from.\n * @param {*} envName The name of the environment to pull configs for.\n * @returns the config\n */\nexport default async function getServiceConfig(suppliedOrigin, envName) {\n  if (config) return config;\n  const origin = suppliedOrigin || getSiteOrigin();\n  const utilsConfig = getConfig();\n  const queryEnv = new URLSearchParams(window.location.search).get('env');\n  const env = queryEnv || envName || utilsConfig.env.name;\n  const resp = await fetch(`${origin}${DOT_MILO}`);\n  if (!resp.ok) return { error: 'Could not fetch .milo/config.' };\n  const json = await resp.json();\n  const configs = {};\n  json.configs.data.forEach((conf) => {\n    const [confEnv, confService, confType] = conf.key.split('.');\n    configs[confEnv] ??= {};\n    configs[confEnv][confService] ??= {};\n    configs[confEnv][confService][confType] = conf.value;\n  });\n  config = configs.prod;\n  if (env === 'prod') return config;\n\n  // Stage inheritance\n  Object.keys(config).forEach((key) => {\n    if (configs.stage && configs.stage[key]) {\n      config[key] = { ...config[key], ...configs.stage[key] };\n    }\n  });\n  if (env === 'stage') return config;\n\n  // Local inheritance\n  Object.keys(config).forEach((key) => {\n    if (configs.local && configs.local[key]) {\n      config[key] = { ...config[key], ...configs.local[key] };\n    }\n  });\n  return config;\n}\n","export const STATUS = {\n  PASS: 'pass',\n  FAIL: 'fail',\n  LIMBO: 'limbo',\n  EMPTY: 'empty',\n};\n\nexport const SEO_TITLES = {\n  h1Count: 'H1 count',\n  title: 'Title size',\n  canonical: 'Canonical',\n  description: 'Meta description',\n  bodySize: 'Body size',\n  loremIpsum: 'Lorem Ipsum',\n  links: 'Links',\n};\n\nexport const SEO_IDS = {\n  title: 'title',\n  description: 'description',\n  h1Count: 'h1-count',\n  canonical: 'canonical',\n  bodySize: 'body-size',\n  loremIpsum: 'lorem-ipsum',\n  links: 'links',\n};\n\nexport const SEO_DESCRIPTIONS = {\n  title: 'Title size is appropriate.',\n  description: 'Meta description is present and within the recommended character limit.',\n  h1Count: 'Found exactly one H1 heading.',\n  canonical: 'Canonical reference is valid.',\n  bodySize: 'Body content has a good length.',\n  loremIpsum: 'No Lorem ipsum is used on the page.',\n  links: 'Links are valid.',\n};\n\nexport const STRUCTURE_TITLES = {\n  navigation: 'Navigation',\n  footer: 'Footer',\n  regionSelector: 'Region selector',\n  georouting: 'Georouting',\n  breadcrumbs: 'Breadcrumbs',\n};\n\nexport const STRUCTURE_IDS = {\n  navigation: 'navigation',\n  footer: 'footer',\n  regionSelector: 'region-selector',\n  georouting: 'georouting',\n  breadcrumbs: 'breadcrumbs',\n};\n\nexport const PERFORMANCE_TITLES = {\n  Performance: 'Performance',\n  LcpEl: 'LCP',\n  SingleBlock: 'Single Block',\n  ImageSize: 'Images Size',\n  VideoPoster: 'Videos',\n  Fragments: 'Fragments',\n  Personalization: 'Personalization',\n  Placeholders: 'Placeholders',\n  Icons: 'Icons',\n};\n\nexport const ASSETS_TITLES = { AssetDimensions: 'Asset Dimensions' };\n\nexport const ASO_TIMEOUT_MS = 60_000;\nexport const ASO_POLL_INTERVAL_MS = 2_000;\nexport const ASO_MAX_RETRIES = Math.ceil(ASO_TIMEOUT_MS / ASO_POLL_INTERVAL_MS);\n","import {\n  SEO_TITLES,\n  STATUS,\n  SEO_IDS,\n  SEO_DESCRIPTIONS,\n  ASO_POLL_INTERVAL_MS,\n  ASO_MAX_RETRIES,\n  ASO_TIMEOUT_MS,\n} from './constants.js';\n\nconst CHECK_API = 'https://spacecat.experiencecloud.live/api/v1';\n\nexport const asoCache = {\n  identify: null,\n  identifyFinished: false,\n  suggest: null,\n  suggestFinished: false,\n  sessionToken: null,\n};\n\nconst lanaLog = (message) => {\n  window.lana.log(message, {\n    sampleRate: 100,\n    tags: 'preflight',\n    errorType: 'e',\n  });\n};\n\nexport async function getASOToken() {\n  if (!window.asoIMS) {\n    window.adobeImsFactory.createIMSLib({\n      client_id: 'milo-tools',\n      scope: 'AdobeID,openid,gnav,read_organizations,additional_info.projectedProductContext,additional_info.roles',\n      environment: 'prod',\n      autoValidateToken: true,\n      useLocalStorage: false,\n      modalMode: true,\n    }, 'asoIMS');\n    await window.asoIMS.initialize();\n  }\n\n  if (!window.asoIMS.getAccessToken()?.token) return null;\n\n  try {\n    const res = await fetch(`${CHECK_API}/auth/login`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ accessToken: window.asoIMS.getAccessToken().token }),\n    });\n\n    if (!res.ok) {\n      lanaLog(`ASO: Error fetching token | status: ${res.status} | url: ${CHECK_API}/auth/login`);\n      return null;\n    }\n\n    const data = await res.json();\n    asoCache.sessionToken = data.sessionToken;\n    return asoCache.sessionToken;\n  } catch (err) {\n    lanaLog(`ASO: Error fetching token | error: ${err.reason || err.error || err.message || err} | url: ${CHECK_API}/auth/login`);\n    return null;\n  }\n}\n\nfunction resultsFormatter(results) {\n  const formattedResults = [];\n\n  const processMetaAudit = ({ seoId, seoTitle, passDescription }) => {\n    const audit = results.find((result) => result.name === 'metatags');\n    if (!audit) return;\n    const opportunity = audit?.opportunities.find((opp) => opp.tagName === seoId);\n\n    formattedResults.push({\n      id: seoId,\n      title: seoTitle,\n      status: opportunity ? STATUS.FAIL : STATUS.PASS,\n      description: opportunity ? `${opportunity.issue} ${opportunity.issueDetails}` : passDescription,\n      aiSuggestion: opportunity?.aiSuggestion,\n    });\n  };\n\n  const processStandardAudit = ({ seoId, seoTitle, passDescription }) => {\n    const audit = results.find((result) => result.name === seoId);\n    if (!audit) return;\n    const [issue] = audit.opportunities;\n    formattedResults.push({\n      id: seoId,\n      title: seoTitle,\n      status: issue ? STATUS.FAIL : STATUS.PASS,\n      description: issue ? issue.issue : passDescription,\n      aiSuggestion: issue?.aiSuggestion || issue?.seoRecommendation,\n    });\n  };\n\n  const processLinksAudit = () => {\n    const [links] = results.filter((audit) => audit.name === SEO_IDS.links);\n    if (links) {\n      const [badLinksOpportunity] = links.opportunities.filter((o) => o.check === 'bad-links');\n      const [brokenLinksOpportunity] = links.opportunities.filter((o) => o.check === 'broken-internal-links');\n      const [brokenExternalLinksOpportunity] = links.opportunities.filter((o) => o.check === 'broken-external-links');\n      const badLinks = badLinksOpportunity?.issue || [];\n      const brokenLinks = brokenLinksOpportunity?.issue || [];\n      const brokenExternalLinks = brokenExternalLinksOpportunity?.issue || [];\n      const issueLinks = [...badLinks, ...brokenLinks, ...brokenExternalLinks];\n      const hasIssues = issueLinks.length > 0;\n\n      formattedResults.push({\n        id: SEO_IDS.links,\n        title: SEO_TITLES.links,\n        status: hasIssues ? STATUS.FAIL : STATUS.PASS,\n        description: hasIssues ? `Reason: ${issueLinks.length} problem ${issueLinks.length > 1 ? 'links' : 'link'}. Use the list below to fix them.` : SEO_DESCRIPTIONS.links,\n        details: {\n          badLinks: hasIssues ? issueLinks.map((link) => ({\n            liveHref: link.url,\n            status: link.issue,\n            parent: 'main',\n          })) : [],\n        },\n      });\n    }\n  };\n\n  processMetaAudit({\n    seoId: SEO_IDS.title,\n    seoTitle: SEO_TITLES.title,\n    passDescription: SEO_DESCRIPTIONS.title,\n  });\n  processMetaAudit({\n    seoId: SEO_IDS.description,\n    seoTitle: SEO_TITLES.description,\n    passDescription: SEO_DESCRIPTIONS.description,\n  });\n  processStandardAudit({\n    seoId: SEO_IDS.h1Count,\n    seoTitle: SEO_TITLES.h1Count,\n    passDescription: SEO_DESCRIPTIONS.h1Count,\n  });\n  processStandardAudit({\n    seoId: SEO_IDS.canonical,\n    seoTitle: SEO_TITLES.canonical,\n    passDescription: SEO_DESCRIPTIONS.canonical,\n  });\n  processStandardAudit({\n    seoId: SEO_IDS.bodySize,\n    seoTitle: SEO_TITLES.bodySize,\n    passDescription: SEO_DESCRIPTIONS.bodySize,\n  });\n  processStandardAudit({\n    seoId: SEO_IDS.loremIpsum,\n    seoTitle: SEO_TITLES.loremIpsum,\n    passDescription: SEO_DESCRIPTIONS.loremIpsum,\n  });\n  processLinksAudit();\n  return formattedResults;\n}\n\nasync function getJobId(step) {\n  try {\n    const res = await fetch(`${CHECK_API}/preflight/jobs`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${asoCache.sessionToken}`,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(\n        {\n          step,\n          urls: [window.location.href],\n        },\n      ),\n    });\n\n    if (!res.ok) {\n      lanaLog(`ASO: Error creating preflight job | step: ${step} | status: ${res.status} | url: ${CHECK_API}/preflight/jobs`);\n      return null;\n    }\n\n    const data = await res.json();\n    return data.jobId;\n  } catch (err) {\n    lanaLog(`ASO: Error creating preflight job | step: ${step} | error: ${err.reason || err.error || err.message || err} | url: ${CHECK_API}/preflight/jobs`);\n    return null;\n  }\n}\n\nasync function fetchJobStatus(jobId) {\n  try {\n    const res = await fetch(`${CHECK_API}/preflight/jobs/${jobId}`, { headers: { Authorization: `Bearer ${asoCache.sessionToken}` } });\n    if (!res.ok) {\n      lanaLog(`ASO: Error fetching job status | status: ${res.status} | url: ${CHECK_API}/preflight/jobs/${jobId}`);\n      return null;\n    }\n    return res;\n  } catch (err) {\n    lanaLog(`ASO: Error fetching job status | error: ${err.reason || err.error || err.message || err} | url: ${CHECK_API}/preflight/jobs/${jobId}`);\n    return null;\n  }\n}\n\nfunction processJobUpdate(data, step) {\n  if (!data?.result?.[0]?.audits) return null;\n  const formattedResults = resultsFormatter(data.result[0].audits);\n  if (step === 'IDENTIFY') asoCache.identify = formattedResults;\n  if (step === 'SUGGEST') asoCache.suggest = formattedResults;\n  return { results: formattedResults, status: data.status };\n}\n\nasync function attemptJobPoll(jobId, step) {\n  try {\n    const response = await fetchJobStatus(jobId);\n    if (!response || !response.ok) {\n      lanaLog(`ASO: Error fetching job results | step:${step} | status: ${response?.status} | url: ${CHECK_API}/preflight/jobs/${jobId}`);\n      return null;\n    }\n\n    const data = await response.json();\n    return processJobUpdate(data, step);\n  } catch (err) {\n    lanaLog(`ASO: Error fetching job results | step:${step} | error: ${err.reason || err.error || err.message || err} | url: ${CHECK_API}/preflight/jobs/${jobId}`);\n    return null;\n  }\n}\n\nfunction sleep(ms) {\n  return new Promise((resolve) => {\n    setTimeout(resolve, ms);\n  });\n}\n\nasync function getJobResults(jobId, step) {\n  let retries = 0;\n\n  while (retries < ASO_MAX_RETRIES) {\n    const update = await attemptJobPoll(jobId, step);\n    if (update?.status === 'COMPLETED') {\n      asoCache[step === 'IDENTIFY' ? 'identifyFinished' : 'suggestFinished'] = true;\n      return update.results;\n    }\n\n    await sleep(ASO_POLL_INTERVAL_MS);\n    retries += 1;\n  }\n\n  lanaLog(`ASO: Max retries exceeded for job results | error: Failed to fetch job results after ${ASO_MAX_RETRIES} retries for step: ${step}, jobId: ${jobId} | url: ${CHECK_API}/preflight/jobs/${jobId}`);\n  return null;\n}\n\nexport default async function getChecks(step) {\n  const jobId = await getJobId(step);\n  if (!jobId) return null;\n  if (step === 'IDENTIFY') asoCache.identifyJobId = jobId;\n  const checks = await getJobResults(jobId, step);\n  if (!checks) return null;\n  return checks;\n}\n\nexport async function fetchPreflightChecks() {\n  await getASOToken();\n  if (!asoCache.sessionToken) return null;\n\n  if (!asoCache.identify) asoCache.identify = getChecks('IDENTIFY');\n  if (!asoCache.suggest) asoCache.suggest = getChecks('SUGGEST');\n\n  const raceResult = await Promise.race([\n    asoCache.identify,\n    new Promise((_, reject) => {\n      setTimeout(() => {\n        const identifyTimeoutSeconds = ASO_TIMEOUT_MS / 1000;\n        lanaLog(`ASO: identify results not available within ${identifyTimeoutSeconds} seconds | jobId: ${asoCache.identifyJobId || 'unknown'}`);\n        reject(new Error(`ASO: identify results not available within ${identifyTimeoutSeconds} seconds`));\n      }, ASO_TIMEOUT_MS);\n    }),\n  ]);\n\n  if (raceResult) return raceResult;\n\n  return null;\n}\n","import { STATUS, ASSETS_TITLES } from './constants.js';\nimport { createTag } from '../../../utils/utils.js';\n\nconst maxFullWidth = 1920;\nconst assetsCache = new Map();\n\nfunction loadImage(asset) {\n  if (asset.complete) return Promise.resolve();\n  asset.setAttribute('loading', 'eager');\n\n  return new Promise((resolve) => {\n    ['load', 'error'].forEach((evt) => asset.addEventListener(evt, resolve, { once: true }));\n  });\n}\n\nfunction loadVideo(asset) {\n  if (asset.querySelector('source')\n    && asset.readyState > 1\n    && asset.videoWidth > 0) return Promise.resolve();\n\n  return new Promise((resolve) => {\n    asset.appendChild(createTag('source', { src: asset.getAttribute('data-video-source'), type: 'video/mp4' }));\n    ['loadedmetadata', 'error'].forEach((evt) => asset.addEventListener(evt, resolve, { once: true }));\n    asset.load();\n  });\n}\n\nfunction loadMpc(asset) {\n  return new Promise((resolve) => {\n    const idMatch = asset.src.match(/\\/v\\/(\\d+)/);\n    const videoId = idMatch ? idMatch[1] : null;\n    if (!videoId) resolve();\n\n    window.fetch(`https://video.tv.adobe.com/v/${videoId}?format=json`)\n      .then((res) => res.json())\n      .then((info) => {\n        const activeSource = info.sources.find((source) => source.active);\n        asset.setAttribute('data-video-width', activeSource.width);\n        asset.setAttribute('data-video-height', activeSource.height);\n        resolve();\n      });\n  });\n}\n\nasync function loadAssets(assets) {\n  const loadedAssets = assets.map((asset) => {\n    if (asset.tagName === 'IMG') return loadImage(asset);\n    if (asset.tagName === 'VIDEO') return loadVideo(asset);\n    if (asset.tagName === 'IFRAME') return loadMpc(asset);\n\n    return Promise.resolve();\n  });\n\n  await Promise.all(loadedAssets);\n\n  return assets.filter((asset) => asset.checkVisibility()\n    && !asset.closest('.icon-area')\n    && !asset.src.includes('.svg'));\n}\n\nfunction getAssetDimensions(asset, type) {\n  let naturalWidth;\n  let naturalHeight;\n\n  switch (type) {\n    case 'video':\n      naturalWidth = asset.videoWidth;\n      naturalHeight = asset.videoHeight;\n      break;\n    case 'mpc':\n      naturalWidth = asset.getAttribute('data-video-width');\n      naturalHeight = asset.getAttribute('data-video-height');\n      break;\n    default:\n      naturalWidth = asset.getAttribute('width') ? parseInt(asset.getAttribute('width'), 10) : asset.naturalWidth;\n      naturalHeight = asset.getAttribute('height') ? parseInt(asset.getAttribute('height'), 10) : asset.naturalHeight;\n  }\n\n  return { naturalWidth, naturalHeight };\n}\n\nfunction isNotConstrainedByContainer(asset) {\n  const picture = asset.closest?.('picture');\n  if (!picture) return false;\n  const childWidth = picture.offsetWidth;\n  let parent = picture.parentElement;\n  let depth = 0;\n  while (parent && depth < 5) {\n    const parentWidth = parent.offsetWidth;\n    if (parentWidth === childWidth) return false;\n    if (parentWidth > 0 && parentWidth !== childWidth) return true;\n    parent = parent.parentElement;\n    depth += 1;\n  }\n  return false;\n}\n\nfunction getAssetData(asset) {\n  // Get the asset type\n  const type = (asset.tagName === 'VIDEO' && 'video') || (asset.tagName === 'IFRAME' && 'mpc') || 'image';\n\n  // Calculate asset dimensions\n  const { naturalWidth, naturalHeight } = getAssetDimensions(asset, type);\n\n  // Get the display dimensions of the asset\n  const { offsetWidth, offsetHeight } = asset;\n\n  // Check if the asset is full width\n  const viewportWidth = document.documentElement.clientWidth;\n  const isFullWidthAsset = offsetWidth >= viewportWidth;\n\n  // Define the ideal factor depending on the asset's display width\n  let idealFactor = isFullWidthAsset ? 1.5 : 2;\n  if (['video', 'mpc'].includes(type)) idealFactor = 1;\n\n  // Get the multiplication factor depending on asset display width; allow 5% tolerance\n  const factorDivisor = isFullWidthAsset ? maxFullWidth : offsetWidth;\n  const actualFactor = Math.round((naturalWidth / factorDivisor) * 100) / 100;\n  const roundedFactor = Math.ceil(actualFactor * 20) / 20;\n\n  // Check if the asset meets the ideal factor\n  let hasMismatch = roundedFactor < idealFactor;\n\n  if (hasMismatch && type === 'image' && isNotConstrainedByContainer(asset)) hasMismatch = false;\n\n  // Define the recommended dimensions\n  const recommendedDimensions = isFullWidthAsset\n    ? `${maxFullWidth * idealFactor}x${Math.ceil((maxFullWidth * idealFactor * naturalHeight) / naturalWidth)}`\n    : `${Math.ceil(offsetWidth * idealFactor)}x${Math.ceil(offsetHeight * idealFactor)}`;\n\n  // Check if the source is an MPC MP4\n  const sourceElement = asset.querySelector?.('source');\n  const isMpcSrc = sourceElement?.src && new URL(sourceElement.src).hostname === 'images-tv.adobe.com';\n\n  // Define the type label\n  const typeLabel = (type === 'mpc' && 'Video (MPC)')\n    || (isMpcSrc && 'Video (MPC source)')\n    || (type === 'video' && 'Video (Sharepoint)')\n    || 'Image';\n\n  // Perform additional video checks\n  let notes;\n  if (type === 'video'\n    && asset.webkitAudioDecodedByteCount\n    && (asset.controls || !asset.muted)) {\n    notes = 'Has audio, MPC should be used instead.';\n  }\n  if (type === 'video' && asset.closest('.background') && isMpcSrc) {\n    notes = 'MPC MP4 used as background, Sharepoint MP4 should be used instead.';\n  }\n\n  // Return the asset data relevant to the final template\n  return {\n    type,\n    src: asset.getAttribute(type === 'video' ? 'data-video-source' : 'src'),\n    fragmentPath: asset?.closest('.fragment')?.dataset?.path,\n    naturalDimensions: `${naturalWidth}x${naturalHeight}`,\n    displayDimensions: `${offsetWidth}x${offsetHeight}`,\n    recommendedDimensions,\n    roundedFactor,\n    hasMismatch,\n    typeLabel,\n    notes,\n  };\n}\n\nfunction populateAssetMeta(asset, assetData) {\n  // Check for or define an asset meta element to display analysis results\n  let assetMetaParent;\n  switch (assetData.type) {\n    case 'video':\n      if (asset.closest('.video-holder')) {\n        assetMetaParent = '.video-holder';\n      } else {\n        const videoParent = asset.parentElement;\n        videoParent.style.position = 'relative';\n        assetMetaParent = videoParent.tagName;\n      }\n      break;\n    case 'mpc':\n      assetMetaParent = '.milo-video';\n      break;\n    default:\n      assetMetaParent = 'picture';\n      break;\n  }\n  let assetMetaElem = asset.closest(assetMetaParent).querySelector('.asset-meta');\n\n  if (!assetMetaElem) {\n    assetMetaElem = createTag('div', { class: 'asset-meta' });\n    asset.closest(assetMetaParent).insertBefore(assetMetaElem, asset.nextSibling);\n  }\n\n  const sizeMsg = createTag(\n    'div',\n    { class: `asset-meta-entry preflight-decoration ${assetData.hasMismatch ? 'is-invalid' : 'is-valid'}` },\n    assetData.hasMismatch\n      ? `Size: too small, use > ${assetData.recommendedDimensions}`\n      : 'Size: correct',\n  );\n  assetMetaElem.append(sizeMsg);\n\n  if (assetData.type === 'mpc') {\n    const { title } = asset;\n    const titleMsg = createTag(\n      'div',\n      { class: `asset-meta-entry preflight-decoration ${!title.length ? 'is-invalid' : 'is-valid'}` },\n      title.length\n        ? `Title: ${title}`\n        : 'Title: no title',\n    );\n    assetMetaElem.append(titleMsg);\n  }\n}\n\nexport function isViewportTooSmall() {\n  return !window.matchMedia('(min-width: 1200px)').matches;\n}\n\nexport async function checkImageDimensions(url, area, injectVisualMetadata) {\n  if (isViewportTooSmall()) {\n    return {\n      title: ASSETS_TITLES.AssetDimensions,\n      status: STATUS.EMPTY,\n      description: 'Viewport is too small to run asset checks (minimum width: 1200px).',\n    };\n  }\n\n  if (assetsCache.has(url)) {\n    const cachedResult = assetsCache.get(url);\n    return JSON.parse(JSON.stringify(cachedResult));\n  }\n\n  const allAssets = [\n    ...area.querySelectorAll(\n      'main picture img, main video, :is(main, .dialog-modal:not(#preflight)) .adobetv',\n    ),\n  ];\n\n  if (!allAssets.length) {\n    return {\n      title: ASSETS_TITLES.AssetDimensions,\n      status: STATUS.EMPTY,\n      description: 'No assets found in the main content.',\n    };\n  }\n\n  const assets = await loadAssets(allAssets);\n\n  if (!assets.length) {\n    return {\n      title: ASSETS_TITLES.AssetDimensions,\n      status: STATUS.EMPTY,\n      description: 'No eligible assets found (visible, non-icon, non-SVG).',\n    };\n  }\n\n  const assetsWithMismatch = [];\n  const assetsWithMatch = [];\n\n  if (injectVisualMetadata) area.body.classList.add('preflight-assets-analysis');\n\n  for (const asset of assets) {\n    const assetData = getAssetData(asset);\n    if (injectVisualMetadata) populateAssetMeta(asset, assetData);\n\n    if (assetData.hasMismatch) {\n      assetsWithMismatch.push(assetData);\n    } else {\n      assetsWithMatch.push(assetData);\n    }\n  }\n\n  if (injectVisualMetadata) area.body.classList.remove('preflight-assets-analysis');\n\n  const result = {\n    title: ASSETS_TITLES.AssetDimensions,\n    status: assetsWithMismatch.length > 0 ? STATUS.FAIL : STATUS.PASS,\n    description:\n      assetsWithMismatch.length > 0\n        ? `${assetsWithMismatch.length} asset(s) have dimension mismatches.`\n        : 'All assets have matching dimensions.',\n    details: {\n      assetsWithMismatch,\n      assetsWithMatch,\n    },\n  };\n\n  if (result.status === STATUS.PASS || result.status === STATUS.FAIL) {\n    assetsCache.set(url, JSON.parse(JSON.stringify(result)));\n  }\n\n  return result;\n}\n\nexport function runChecks(url, area, injectVisualMetadata) {\n  return [checkImageDimensions(url, area, injectVisualMetadata)];\n}\n","import { STATUS, PERFORMANCE_TITLES } from './constants.js';\nimport { getMetadata } from '../../../utils/utils.js';\n\nconst lcpCache = new Map();\n\nexport function defaultObserveLcp(area) {\n  if (area !== document) {\n    return Promise.resolve(null);\n  }\n  return new Promise((resolve) => {\n    new PerformanceObserver((entryList) => {\n      const entries = entryList.getEntries();\n      const lastEntry = entries[entries.length - 1];\n      if (lastEntry) {\n        resolve(lastEntry);\n      }\n    }).observe({ type: 'largest-contentful-paint', buffered: true });\n  });\n}\n\nexport async function getLcpEntry(url, area, observeLcp = defaultObserveLcp) {\n  if (lcpCache.has(url)) {\n    return lcpCache.get(url);\n  }\n  const lcpPromise = observeLcp(area);\n  lcpCache.set(url, lcpPromise);\n  return lcpPromise;\n}\n\nexport function checkSingleBlock(area) {\n  const firstSection = area.querySelector('main > div.section');\n  const hasMultipleBlocks = firstSection && firstSection.childElementCount > 1;\n  return {\n    title: PERFORMANCE_TITLES.SingleBlock,\n    status: hasMultipleBlocks ? STATUS.FAIL : STATUS.PASS,\n    description: hasMultipleBlocks\n      ? 'First section has more than one block.'\n      : 'First section has exactly one block.',\n  };\n}\n\nexport function checkForPersonalization(area) {\n  const personalization = getMetadata('personalization', area);\n  const target = getMetadata('target', area) === 'on';\n  const hasPersonalization = personalization || target;\n  return {\n    title: PERFORMANCE_TITLES.Personalization,\n    status: hasPersonalization ? STATUS.FAIL : STATUS.PASS,\n    description: hasPersonalization\n      ? 'MEP or Target enabled.'\n      : 'Personalization is currently not enabled.',\n  };\n}\n\nexport async function checkLcpEl(url, area, observeLcp) {\n  const lcp = await getLcpEntry(url, area, observeLcp);\n  if (!lcp) {\n    return {\n      title: PERFORMANCE_TITLES.Performance,\n      status: STATUS.FAIL,\n      description: 'No LCP element found.',\n    };\n  }\n  const firstSection = area.querySelector('main > div.section');\n  const validLcp = lcp?.element && lcp?.url && firstSection?.contains(lcp.element);\n  return {\n    title: PERFORMANCE_TITLES.LcpEl,\n    status: validLcp ? STATUS.PASS : STATUS.FAIL,\n    description: validLcp\n      ? 'Valid LCP in the first section detected.'\n      : 'No LCP image or video in the first section detected. Please check the page and make sure the first section is your marquee and all the fragments are working properly. If everything is good, ignore the error.',\n  };\n}\n\nexport async function checkImageSize(url, area, observeLcp) {\n  const lcp = await getLcpEntry(url, area, observeLcp);\n  if (!lcp || !lcp.url || lcp.url.match('media_.*.mp4')) {\n    return {\n      title: PERFORMANCE_TITLES.ImageSize,\n      status: STATUS.EMPTY,\n      description: 'No image as LCP element.',\n    };\n  }\n  try {\n    const blob = await fetch(lcp.url).then((res) => res.blob());\n    const isSizeValid = blob.size / 1024 <= 100;\n    return {\n      title: PERFORMANCE_TITLES.ImageSize,\n      status: isSizeValid ? STATUS.PASS : STATUS.FAIL,\n      description: isSizeValid\n        ? 'LCP image is less than 100KB.'\n        : 'LCP image is over 100KB.',\n    };\n  } catch (error) {\n    return {\n      title: PERFORMANCE_TITLES.ImageSize,\n      status: STATUS.EMPTY,\n      description: 'Could not fetch LCP image.',\n    };\n  }\n}\n\nexport async function checkVideoPoster(url, area, observeLcp) {\n  const lcp = await getLcpEntry(url, area, observeLcp);\n  const hasVideoUrl = lcp?.url?.match(/\\.mp4/);\n  const videoElement = lcp?.element?.closest('video') || lcp?.element?.querySelector('video');\n  if (!hasVideoUrl && !videoElement) {\n    return {\n      title: PERFORMANCE_TITLES.VideoPoster,\n      status: STATUS.EMPTY,\n      description: 'No video as LCP element.',\n    };\n  }\n  const hasPoster = !!videoElement?.poster;\n  return {\n    title: PERFORMANCE_TITLES.VideoPoster,\n    status: hasPoster ? STATUS.PASS : STATUS.FAIL,\n    description: hasPoster\n      ? 'LCP video has a poster attribute.'\n      : 'LCP video has no poster attribute.',\n  };\n}\n\nexport async function checkFragments(url, area, observeLcp) {\n  const lcp = await getLcpEntry(url, area, observeLcp);\n  if (!lcp?.element) {\n    return {\n      title: PERFORMANCE_TITLES.Performance,\n      status: STATUS.FAIL,\n      description: 'No LCP element found.',\n    };\n  }\n  const hasFragments = lcp.element.closest('.fragment') || lcp.element.closest('.section')?.querySelector('[data-path*=\"fragment\"]');\n  return {\n    title: PERFORMANCE_TITLES.Fragments,\n    status: hasFragments ? STATUS.FAIL : STATUS.PASS,\n    description: hasFragments\n      ? 'Fragments used within the LCP section.'\n      : 'No fragments used within the LCP section.',\n  };\n}\n\nexport async function checkPlaceholders(url, area, observeLcp) {\n  const lcp = await getLcpEntry(url, area, observeLcp);\n  if (!lcp?.element) {\n    return {\n      title: PERFORMANCE_TITLES.Performance,\n      status: STATUS.FAIL,\n      description: 'No LCP element found.',\n    };\n  }\n  const section = lcp.element.closest('.section');\n  const hasPlaceholders = section?.dataset.hasPlaceholders === 'true';\n  return {\n    title: PERFORMANCE_TITLES.Placeholders,\n    status: hasPlaceholders ? STATUS.FAIL : STATUS.PASS,\n    description: hasPlaceholders\n      ? 'Placeholders found within the LCP section'\n      : 'No placeholders found within the LCP section.',\n  };\n}\n\nexport async function checkIcons(url, area, observeLcp) {\n  const lcp = await getLcpEntry(url, area, observeLcp);\n  if (!lcp?.element) {\n    return {\n      title: PERFORMANCE_TITLES.Icons,\n      status: STATUS.FAIL,\n      description: 'No LCP element found.',\n    };\n  }\n  const hasIcons = lcp.element.closest('.section')?.querySelector('.icon-milo');\n  return {\n    title: PERFORMANCE_TITLES.Icons,\n    status: hasIcons ? STATUS.FAIL : STATUS.PASS,\n    description: hasIcons\n      ? 'Icons found within the LCP section.'\n      : 'No icons found within the LCP section.',\n  };\n}\n\nexport function runChecks(url, area, observeLcp = defaultObserveLcp) {\n  return [\n    checkLcpEl(url, area, observeLcp),\n    checkSingleBlock(area),\n    checkImageSize(url, area, observeLcp),\n    checkVideoPoster(url, area, observeLcp),\n    checkFragments(url, area, observeLcp),\n    checkForPersonalization(area),\n    checkPlaceholders(url, area, observeLcp),\n    checkIcons(url, area, observeLcp),\n  ];\n}\n","import { STATUS, SEO_TITLES, SEO_IDS, SEO_DESCRIPTIONS } from './constants.js';\nimport getServiceConfig from '../../../utils/service-config.js';\nimport { getConfig, updateConfig } from '../../../utils/utils.js';\n\nconst KNOWN_BAD_URLS = ['news.adobe.com'];\nconst SPIDY_URL_FALLBACK = 'https://spidy.gwp.corp.adobe.com';\n\nconst linksCache = new Map();\n\n// Wait for footer using onFooterReady callback\nfunction waitForFooter() {\n  return new Promise((resolve) => {\n    const config = getConfig();\n    if (config.footerReady) {\n      resolve();\n      return;\n    }\n\n    const originalCallback = config.onFooterReady;\n\n    config.onFooterReady = async () => {\n      if (originalCallback) await originalCallback();\n      await window.milo?.deferredPromise;\n      config.footerReady = true;\n      resolve();\n    };\n\n    updateConfig(config);\n  });\n}\n\nexport function checkH1s(area) {\n  const h1s = area.querySelectorAll('h1');\n  let status;\n  let description;\n\n  if (h1s.length === 0) {\n    status = STATUS.FAIL;\n    description = 'No H1 found on the page. Each page should have exactly one H1 heading.';\n  } else if (h1s.length > 1) {\n    status = STATUS.FAIL;\n    description = `Found ${h1s.length} H1 headings. Each page should have exactly one H1 heading.`;\n  } else {\n    status = STATUS.PASS;\n    description = SEO_DESCRIPTIONS.h1Count;\n  }\n\n  return {\n    id: SEO_IDS.h1Count,\n    title: SEO_TITLES.h1Count,\n    status,\n    description,\n  };\n}\n\nexport function checkTitle(area) {\n  const titleSize = area.title.replace(/\\s/g, '').length;\n  let status;\n  let description;\n\n  if (titleSize < 15) {\n    status = STATUS.FAIL;\n    description = 'Title size is too short. A title should be at least 15 characters.';\n  } else if (titleSize > 70) {\n    status = STATUS.FAIL;\n    description = 'Title size is too long. A title should not exceed 70 characters.';\n  } else {\n    status = STATUS.PASS;\n    description = SEO_DESCRIPTIONS.title;\n  }\n\n  return {\n    id: SEO_IDS.title,\n    title: SEO_TITLES.title,\n    status,\n    description,\n  };\n}\n\nexport async function checkCanon(area) {\n  const canon = area.querySelector(\"link[rel='canonical']\");\n  let status;\n  let description;\n\n  if (!canon) {\n    status = STATUS.PASS;\n    description = 'Canonical is self-referencing.';\n  } else {\n    const { href } = canon;\n    try {\n      const resp = await fetch(href, { method: 'HEAD' });\n      if (!resp.ok) {\n        status = STATUS.FAIL;\n        description = 'Reason: Error with canonical reference.';\n      } else if (resp.status >= 300 && resp.status <= 308) {\n        status = STATUS.FAIL;\n        description = 'Reason: Canonical reference redirects';\n      } else {\n        status = STATUS.PASS;\n        description = SEO_DESCRIPTIONS.canonical;\n      }\n    } catch (e) {\n      status = STATUS.LIMBO;\n      description = 'Canonical cannot be crawled.';\n    }\n  }\n\n  return {\n    id: SEO_IDS.canonical,\n    title: SEO_TITLES.canonical,\n    status,\n    description,\n  };\n}\n\nexport async function checkDescription(area) {\n  const metaDesc = area.querySelector('meta[name=\"description\"]');\n  let status;\n  let description;\n\n  if (!metaDesc) {\n    status = STATUS.FAIL;\n    description = 'Reason: No meta description found.';\n  } else {\n    const descSize = metaDesc.content.replace(/\\s/g, '').length;\n    if (descSize < 50) {\n      status = STATUS.FAIL;\n      description = 'Reason: Meta description too short.';\n    } else if (descSize > 150) {\n      status = STATUS.FAIL;\n      description = 'Reason: Meta description too long.';\n    } else {\n      status = STATUS.PASS;\n      description = 'Meta description is good.';\n    }\n  }\n\n  return {\n    id: SEO_IDS.description,\n    title: SEO_TITLES.description,\n    status,\n    description,\n  };\n}\n\nexport async function checkBody(area) {\n  const { length } = area.documentElement.innerText.trim();\n  let status;\n  let description;\n\n  if (length > 100) {\n    status = STATUS.PASS;\n    description = SEO_DESCRIPTIONS.bodySize;\n  } else {\n    status = STATUS.FAIL;\n    description = 'Reason: Not enough content.';\n  }\n\n  return {\n    id: SEO_IDS.bodySize,\n    title: SEO_TITLES.bodySize,\n    status,\n    description,\n  };\n}\n\nexport async function checkLorem(area) {\n  const { innerHTML } = area.documentElement;\n  const htmlWithoutPreflight = innerHTML.replace(area.getElementById('preflight')?.outerHTML, '');\n  let status;\n  let description;\n\n  if (htmlWithoutPreflight.toLowerCase().includes('lorem ipsum')) {\n    status = STATUS.FAIL;\n    description = 'Reason: Lorem ipsum is used on the page.';\n  } else {\n    status = STATUS.PASS;\n    description = SEO_DESCRIPTIONS.loremIpsum;\n  }\n\n  return {\n    id: SEO_IDS.loremIpsum,\n    title: SEO_TITLES.loremIpsum,\n    status,\n    description,\n  };\n}\n\nfunction makeGroups(arr, n = 20) {\n  const batchSize = Math.ceil(arr.length / n);\n  const size = Math.ceil(arr.length / batchSize);\n  return Array.from({ length: batchSize }, (v, i) => arr.slice(i * size, i * size + size));\n}\n\nexport function connectionError() {\n  return {\n    id: SEO_IDS.links,\n    title: SEO_TITLES.links,\n    status: STATUS.LIMBO,\n    description: 'A VPN connection is required to use the link check service. Please turn on VPN and refresh the page.',\n    details: { badLinks: [] },\n  };\n}\n\nasync function spidyCheck(url) {\n  try {\n    const resp = await fetch(url, { method: 'HEAD' });\n    return !!resp.ok;\n  } catch (e) {\n    window.lana.log(`There was a problem connecting to the link check API ${url}. ${e}`, { tags: 'preflight', errorType: 'i' });\n    return false;\n  }\n}\n\nasync function getSpidyResults(url, opts) {\n  try {\n    const resp = await fetch(`${url}/api/url-http-status`, opts);\n    if (!resp.ok) return [];\n\n    const json = await resp.json();\n    if (!json.data || json.data.length === 0) return [];\n\n    return json.data.reduce((acc, result) => {\n      const status = result.status === 'ECONNREFUSED' ? 503 : result.status;\n      if (status >= 399) {\n        result.status = status;\n        acc.push(result);\n      }\n      return acc;\n    }, []);\n  } catch (e) {\n    window.lana.log(`There was a problem connecting to the link check API ${url}/api/url-http-status. ${e}`, { tags: 'preflight', errorType: 'i' });\n    return [];\n  }\n}\n\nfunction compareResults(result, link) {\n  const match = link.liveHref === result.url;\n  if (!match) return false;\n  if (link.closest('header')) link.parent = 'gnav';\n  if (link.closest('main')) link.parent = 'main';\n  if (link.closest('footer')) link.parent = 'footer';\n  link.classList.add('problem-link');\n  link.status = result.status;\n  link.dataset.status = link.status;\n  return true;\n}\n\nexport async function validLinkFilter(area = document, envName = null) {\n  const { preflight } = await getServiceConfig(window.location.origin, envName);\n  const knownBadUrls = preflight?.ignoreDomains\n    ? preflight?.ignoreDomains.split(',').map((url) => url.trim())\n    : KNOWN_BAD_URLS;\n  const links = [...area.querySelectorAll('a')]\n    .filter((link) => {\n      if (\n        link.href\n        // Added extra checks because Spidy misidentifies these URL schemes as faulty.\n        // Can be removed once we stop using Spidy.\n        && !link.href.includes('tel:')\n        && !link.href.includes('mailto:')\n        && !link.href.startsWith('#')\n        && !link.href.startsWith('https://#')\n        && !link.href.includes('bookmark://')\n        && !link.href.includes('local')\n        && !link.closest('.preflight')\n        && !knownBadUrls.some((url) => url === link.hostname)\n      ) {\n        link.liveHref = link.href;\n        if (link.href.includes('hlx.page')) link.liveHref = link.href.replace('hlx.page', 'hlx.live');\n        if (link.href.includes('aem.page')) link.liveHref = link.href.replace('aem.page', 'aem.live');\n        return true;\n      }\n      return false;\n    });\n  return links;\n}\n\nexport async function checkLinks({ area, urlHash, envName }) {\n  if (urlHash && linksCache.has(urlHash)) {\n    const cachedResult = linksCache.get(urlHash);\n    return {\n      ...cachedResult,\n      details: { ...cachedResult.details, linksChecked: true },\n    };\n  }\n\n  const { spidy } = await getServiceConfig(window.location.origin, envName);\n  const spidyUrl = spidy?.url || SPIDY_URL_FALLBACK;\n  const canSpidy = await spidyCheck(spidyUrl);\n  if (!canSpidy) return connectionError();\n\n  /**\n   * Find all links with an href.\n   * Filter out any local or existing preflight links.\n   * Set link to use hlx.live so the service can see them without auth\n   * */\n  const links = await validLinkFilter(area, envName);\n\n  const groups = makeGroups(links);\n  const baseOpts = { method: 'POST', headers: { 'Content-Type': 'application/json' } };\n  const badResults = [];\n\n  [...area.querySelectorAll('a')].forEach((link) => {\n    if (link.dataset?.httpLink) {\n      const httpLink = {\n        url: link.liveHref,\n        status: 'authored as http',\n      };\n      badResults.push(httpLink);\n    }\n  });\n\n  for (const group of groups) {\n    const urls = group.map((link) => link.liveHref);\n    const opts = { ...baseOpts, body: JSON.stringify({ urls }) };\n    const spidyResults = await getSpidyResults(spidyUrl, opts);\n    badResults.push(...spidyResults);\n  }\n\n  const badLinks = badResults.map((result) => links.find((link) => compareResults(result, link)))\n    .filter(Boolean);\n\n  const count = badLinks.length;\n  const linkText = count > 1 || count === 0 ? 'links' : 'link';\n  const status = count > 0 ? STATUS.FAIL : STATUS.PASS;\n  const description = status === STATUS.FAIL\n    ? `Reason: ${count} problem ${linkText}. Use the list below to fix them.`\n    : SEO_DESCRIPTIONS.links;\n\n  const result = {\n    id: SEO_IDS.links,\n    title: SEO_TITLES.links,\n    status,\n    description,\n    details: { badLinks },\n  };\n\n  if (urlHash) {\n    linksCache.set(urlHash, result);\n  }\n\n  return result;\n}\n\nexport function runChecks({ url, area = document, envName }) {\n  return [\n    checkH1s(area),\n    checkTitle(area),\n    checkCanon(area),\n    checkDescription(area),\n    checkBody(area),\n    checkLorem(area),\n    (async () => {\n      await waitForFooter();\n      return checkLinks({ area, url, envName });\n    })(),\n  ];\n}\n","import { getConfig, getFederatedContentRoot } from '../../../utils/utils.js';\nimport { fetchPreflightChecks } from './asoApi.js';\nimport { isViewportTooSmall, checkImageDimensions, runChecks as runChecksAssets } from './assets.js';\nimport {\n  getLcpEntry,\n  checkSingleBlock,\n  checkForPersonalization,\n  checkLcpEl,\n  checkImageSize,\n  checkVideoPoster,\n  checkFragments,\n  checkPlaceholders,\n  checkIcons,\n  runChecks as runChecksPerformance,\n} from './performance.js';\nimport {\n  checkH1s,\n  checkTitle,\n  checkCanon,\n  checkDescription,\n  checkBody,\n  checkLorem,\n  connectionError,\n  checkLinks,\n  runChecks as runChecksSeo,\n} from './seo.js';\n\nlet checksSuite = null;\n\nexport default {\n  assets: {\n    isViewportTooSmall,\n    checkImageDimensions,\n    runChecks: runChecksAssets,\n  },\n  performance: {\n    getLcpEntry,\n    checkSingleBlock,\n    checkForPersonalization,\n    checkLcpEl,\n    checkImageSize,\n    checkVideoPoster,\n    checkFragments,\n    checkPlaceholders,\n    checkIcons,\n    runChecks: runChecksPerformance,\n  },\n  seo: {\n    checkH1s,\n    checkTitle,\n    checkCanon,\n    checkDescription,\n    checkBody,\n    checkLorem,\n    connectionError,\n    checkLinks,\n    runChecks: runChecksSeo,\n  },\n};\n\nexport const getChecksSuite = () => {\n  if (checksSuite) return checksSuite;\n  return new Promise((resolve) => {\n    const config = getConfig();\n    fetch(`${getFederatedContentRoot()}/federal/preflight/preflight-config.json`)\n      .then((r) => r.json())\n      .then((consumersList) => {\n        const isAsoEnabled = consumersList?.data?.find((item) => item.value === config.imsClientId);\n        const suite = isAsoEnabled ? 'ASO' : 'OG';\n        checksSuite = suite;\n        resolve(suite);\n      })\n      .catch(() => {\n        checksSuite = 'OG';\n        resolve(checksSuite);\n      });\n  });\n};\n\nconst runChecks = async (url, area) => {\n  const isASO = (await getChecksSuite()) === 'ASO';\n  const assets = await Promise.all(runChecksAssets(url, area));\n  const performance = await Promise.all(runChecksPerformance(url, area));\n  const seo = isASO ? await fetchPreflightChecks() : runChecksSeo({ url, area });\n  return { assets, performance, seo };\n};\n\nconst processResults = (results) => {\n  const allResults = [\n    ...(results.assets || []),\n    ...(results.performance || []),\n    ...(results.seo || []),\n  ];\n\n  return {\n    isViewportTooSmall: isViewportTooSmall(),\n    runChecks: results,\n    hasFailures: allResults.some((result) => result.status === 'fail'),\n  };\n};\n\nexport async function getPreflightResults(url, area) {\n  const results = await runChecks(url, area);\n  return processResults(results);\n}\n"],"names":["config","DOT_MILO","getServiceConfig","suppliedOrigin","envName","origin","search","URLSearchParams","window","location","repo","get","owner","concat","SLD","getSiteOrigin","utilsConfig","getConfig","env","name","resp","fetch","ok","error","json","configs","data","forEach","conf","_configs$confEnv","_configs$confEnv2","_configs$confEnv2$con","confEnv","confService","confType","key","split","value","prod","Object","keys","stage","local","STATUS","PASS","FAIL","LIMBO","EMPTY","SEO_TITLES","h1Count","title","canonical","description","bodySize","loremIpsum","links","SEO_IDS","SEO_DESCRIPTIONS","PERFORMANCE_TITLES","Performance","LcpEl","SingleBlock","ImageSize","VideoPoster","Fragments","Personalization","Placeholders","Icons","ASSETS_TITLES","AssetDimensions","ASO_TIMEOUT_MS","ASO_POLL_INTERVAL_MS","ASO_MAX_RETRIES","Math","ceil","CHECK_API","asoCache","identify","identifyFinished","suggest","suggestFinished","sessionToken","lanaLog","message","lana","log","sampleRate","tags","errorType","processJobUpdate","step","_data$result","result","audits","formattedResults","results","processMetaAudit","_ref","seoId","seoTitle","passDescription","audit","find","opportunity","opportunities","opp","tagName","push","id","status","issue","issueDetails","aiSuggestion","processStandardAudit","_ref2","seoRecommendation","processLinksAudit","filter","badLinksOpportunity","o","check","brokenLinksOpportunity","brokenExternalLinksOpportunity","issueLinks","hasIssues","length","details","badLinks","map","link","liveHref","url","parent","resultsFormatter","async","attemptJobPoll","jobId","response","res","headers","Authorization","err","reason","fetchJobStatus","sleep","ms","Promise","resolve","setTimeout","getChecks","method","body","JSON","stringify","urls","href","getJobId","identifyJobId","checks","retries","update","getJobResults","fetchPreflightChecks","_window$asoIMS$getAcc","asoIMS","adobeImsFactory","createIMSLib","client_id","scope","environment","autoValidateToken","useLocalStorage","modalMode","initialize","getAccessToken","token","accessToken","getASOToken","raceResult","race","_","reject","Error","maxFullWidth","assetsCache","Map","loadAssets","assets","loadedAssets","asset","complete","setAttribute","evt","addEventListener","once","loadImage","querySelector","readyState","videoWidth","appendChild","createTag","src","getAttribute","type","load","loadVideo","idMatch","match","videoId","then","info","activeSource","sources","source","active","width","height","loadMpc","all","checkVisibility","closest","includes","getAssetData","_asset$querySelector","_asset$closest2","naturalWidth","naturalHeight","videoHeight","parseInt","getAssetDimensions","offsetWidth","offsetHeight","isFullWidthAsset","document","documentElement","clientWidth","idealFactor","factorDivisor","actualFactor","round","roundedFactor","hasMismatch","_asset$closest","picture","call","childWidth","parentElement","depth","parentWidth","isNotConstrainedByContainer","recommendedDimensions","sourceElement","isMpcSrc","URL","hostname","typeLabel","notes","webkitAudioDecodedByteCount","controls","muted","fragmentPath","dataset","path","naturalDimensions","displayDimensions","populateAssetMeta","assetData","assetMetaParent","videoParent","style","position","assetMetaElem","class","insertBefore","nextSibling","sizeMsg","append","titleMsg","isViewportTooSmall","matchMedia","matches","checkImageDimensions","area","injectVisualMetadata","has","cachedResult","parse","allAssets","querySelectorAll","assetsWithMismatch","assetsWithMatch","classList","add","remove","set","runChecks","lcpCache","defaultObserveLcp","PerformanceObserver","entryList","entries","getEntries","lastEntry","observe","buffered","getLcpEntry","observeLcp","arguments","undefined","lcpPromise","checkSingleBlock","firstSection","hasMultipleBlocks","childElementCount","checkForPersonalization","personalization","getMetadata","target","hasPersonalization","checkLcpEl","lcp","validLcp","element","contains","checkImageSize","isSizeValid","blob","size","checkVideoPoster","_lcp$url","_lcp$element","_lcp$element2","hasVideoUrl","videoElement","hasPoster","poster","checkFragments","_lcp$element$closest","hasFragments","checkPlaceholders","section","hasPlaceholders","checkIcons","_lcp$element$closest2","hasIcons","runChecks2","KNOWN_BAD_URLS","SPIDY_URL_FALLBACK","linksCache","checkH1s","h1s","checkTitle","titleSize","replace","checkCanon","canon","e","checkDescription","metaDesc","descSize","content","checkBody","innerText","trim","checkLorem","_area$getElementById","innerHTML","getElementById","outerHTML","toLowerCase","connectionError","getSpidyResults","opts","reduce","acc","checkLinks","_ref3","urlHash","linksChecked","spidy","spidyUrl","spidyCheck","preflight","knownBadUrls","ignoreDomains","startsWith","some","validLinkFilter","groups","arr","n","batchSize","Array","from","v","i","slice","makeGroups","baseOpts","badResults","_link$dataset","httpLink","group","spidyResults","result2","compareResults","Boolean","count","linkText","runChecks3","_ref4","footerReady","originalCallback","onFooterReady","_window$milo","milo","deferredPromise","updateConfig","checksSuite","preflightApi_default","performance","seo","getChecksSuite","getFederatedContentRoot","r","consumersList","_consumersList$data","suite","item","imsClientId","catch","runChecks4","isASO","processResults","allResults","hasFailures","getPreflightResults"],"sourceRoot":""}