"use strict";(self.webpackChunknav_consumer=self.webpackChunknav_consumer||[]).push([[8778],{8778:(e,t,n)=>{n.r(t),n.d(t,{CC_ALL_APPS:()=>D,CC_SINGLE_APPS:()=>A,CC_SINGLE_APPS_ALL:()=>N,CHECKOUT_ALLOWED_KEYS:()=>M,CHECKOUT_LINK_CONFIG_PATH:()=>h,CHECKOUT_LINK_SANDBOX_CONFIG_PATH:()=>g,MAS_COMMERCE_SERVICE:()=>c,MAS_MERCH_CARD:()=>r,MAS_MERCH_CARD_COLLECTION:()=>l,MAS_MERCH_MNEMONIC_LIST:()=>s,MAS_MERCH_OFFER_SELECT:()=>d,MAS_MERCH_QUANTITY_SELECT:()=>u,MAS_MERCH_SECURE_TRANSACTION:()=>m,MAS_MERCH_SIDENAV:()=>p,MAS_MERCH_WHATS_INCLUDED:()=>f,MEP_SELECTOR:()=>ye,PLACEHOLDER_KEY_DOWNLOAD:()=>O,PRICE_TEMPLATE_ANNUAL:()=>S,PRICE_TEMPLATE_DISCOUNT:()=>v,PRICE_TEMPLATE_LEGAL:()=>E,PRICE_TEMPLATE_OPTICAL:()=>_,PRICE_TEMPLATE_REGULAR:()=>C,PRICE_TEMPLATE_STRIKETHROUGH:()=>w,addAriaLabelToCta:()=>Oe,appendDexterParameters:()=>ce,applyPromo:()=>ie,buildCta:()=>Ae,default:()=>Pe,fetchCheckoutLinkConfigs:()=>$,fetchEntitlements:()=>X,getCheckoutAction:()=>he,getCheckoutContext:()=>Ee,getCheckoutLinkConfig:()=>te,getCommerceContext:()=>_e,getDownloadAction:()=>oe,getGeoLocaleSettings:()=>R,getLocaleSettings:()=>U,getMasBase:()=>Y,getMasLibs:()=>z,getMiloLocaleSettings:()=>P,getModalAction:()=>fe,getOptions:()=>ke,getPriceContext:()=>Le,getUpgradeAction:()=>ae,getWorkflowStep:()=>Se,initService:()=>ve,isFallbackStepUsed:()=>we,loadMasComponent:()=>Z,modalState:()=>se,openModal:()=>ue,overrideOptions:()=>be,polyfills:()=>Q,setCtaHash:()=>me,setPreview:()=>ge,updateModalState:()=>de});var o=n(5853),a=n(1608),i=(0,n(3658).__glob)({"../../deps/mas/commerce.js":()=>n.e(7947).then(n.bind(n,7947)),"../../deps/mas/constants.js":()=>n.e(3095).then(n.bind(n,3095)),"../../deps/mas/mas-mnemonic.js":()=>Promise.all([n.e(9063),n.e(12)]).then(n.bind(n,12)),"../../deps/mas/merch-card-collection.js":()=>Promise.all([n.e(9063),n.e(5716)]).then(n.bind(n,5716)),"../../deps/mas/merch-card.js":()=>Promise.all([n.e(9063),n.e(2756),n.e(6573)]).then(n.bind(n,2756)),"../../deps/mas/merch-icon.js":()=>Promise.all([n.e(9063),n.e(7128)]).then(n.bind(n,7128)),"../../deps/mas/merch-mnemonic-list.js":()=>Promise.all([n.e(9063),n.e(2161)]).then(n.bind(n,2161)),"../../deps/mas/merch-offer-select.js":()=>Promise.all([n.e(9063),n.e(1538)]).then(n.bind(n,1538)),"../../deps/mas/merch-quantity-select.js":()=>Promise.all([n.e(9063),n.e(6209)]).then(n.bind(n,6209)),"../../deps/mas/merch-secure-transaction.js":()=>Promise.all([n.e(9063),n.e(288)]).then(n.bind(n,288)),"../../deps/mas/merch-sidenav.js":()=>Promise.all([n.e(9063),n.e(5586)]).then(n.bind(n,5586)),"../../deps/mas/merch-stock.js":()=>Promise.all([n.e(9063),n.e(8139)]).then(n.bind(n,8139)),"../../deps/mas/merch-whats-included.js":()=>Promise.all([n.e(9063),n.e(3448)]).then(n.bind(n,3448)),"../../deps/mas/plans-modal.js":()=>Promise.all([n.e(9063),n.e(1083)]).then(n.bind(n,1083))}),c="commerce",r="merch-card",l="merch-card-collection",s="merch-mnemonic-list",d="merch-offer-select",u="merch-quantity-select",m="merch-secure-transaction",p="merch-sidenav",f="merch-whats-included",h="/commerce/checkout-link.json",g="/commerce/checkout-link-sandbox.json",v="discount",_="optical",C="price",w="strikethrough",S="annual",E="legal",L=new Map([["priceDiscount",v],[v,v],["priceOptical",_],[_,_],["priceStrikethrough",w],[w,w],["priceAnnual",S],[S,S],[E,E]]),O="download",A=[["3D_TEXTURING"],["3DI"],["ACROBAT","ACROBAT_STOCK_BUNDLE"],["AFTEREFFECTS","AFTER_EFFECTS_STOCK_BUNDLE"],["AUDITION","AUDITION_STOCK_BUNDLE"],["CC_EXPRESS"],["FLASH","FLASH_STOCK_BUNDLE"],["DREAMWEAVER","DREAMWEAVER_STOCK_BUNDLE"],["EDGE_ANIMATE"],["ILLUSTRATOR","ILLUSTRATOR_STOCK_BUNDLE"],["INCOPY","INCOPY_STOCK_BUNDLE"],["INDESIGN","INDESIGN_STOCK_BUNDLE"],["PHOTOGRAPHY","PHOTOGRAPHY_STOCK_BUNDLE"],["PHOTOSHOP_LIGHTROOM"],["PHOTOSHOP","PHOTOSHOP_STOCK_BUNDLE"],["PREMIERE","PREMIERE_STOCK_BUNDLE"],["RUSH"],["XD"],["FIREFLY"],["CC_PRO_APPS"],["NIMBUS_LIGHTROOM"],["NIMBUS_LIGHTROOM_PHOTOSHOP"]],T={en:"US","en-gb":"GB","es-mx":"MX","fr-ca":"CA",da:"DK",et:"EE",ar:"DZ",el:"GR",iw:"IL",he:"IL",id:"ID",ms:"MY",nb:"NO",sl:"SI",sv:"SE",cs:"CZ",uk:"UA",hi:"IN","zh-hans":"CN","zh-hant":"TW",ja:"JP",ko:"KR",fil:"PH",th:"TH",vi:"VN"},y={ar:"AR_es",be_en:"BE_en",be_fr:"BE_fr",be_nl:"BE_nl",br:"BR_pt",ca:"CA_en",ch_de:"CH_de",ch_fr:"CH_fr",ch_it:"CH_it",cl:"CL_es",co:"CO_es",la:"DO_es",mx:"MX_es",pe:"PE_es",africa:"MU_en",dk:"DK_da",de:"DE_de",ee:"EE_et",eg_ar:"EG_ar",eg_en:"EG_en",es:"ES_es",fr:"FR_fr",gr_el:"GR_el",gr_en:"GR_en",ie:"IE_en",il_he:"IL_iw",it:"IT_it",lv:"LV_lv",lt:"LT_lt",lu_de:"LU_de",lu_en:"LU_en",lu_fr:"LU_fr",my_en:"MY_en",my_ms:"MY_ms",hu:"HU_hu",mt:"MT_en",mena_en:"DZ_en",mena_ar:"DZ_ar",nl:"NL_nl",no:"NO_nb",pl:"PL_pl",pt:"PT_pt",ro:"RO_ro",si:"SI_sl",sk:"SK_sk",fi:"FI_fi",se:"SE_sv",tr:"TR_tr",uk:"GB_en",at:"AT_de",cz:"CZ_cs",bg:"BG_bg",ru:"RU_ru",ua:"UA_uk",au:"AU_en",in_en:"IN_en",in_hi:"IN_hi",id_en:"ID_en",id_id:"ID_id",nz:"NZ_en",sa_ar:"SA_ar",sa_en:"SA_en",sg:"SG_en",cn:"CN_zh-Hans",tw:"TW_zh-Hant",hk_zh:"HK_zh-hant",jp:"JP_ja",kr:"KR_ko",za:"ZA_en",ng:"NG_en",cr:"CR_es",ec:"EC_es",pr:"US_es",gt:"GT_es",cis_en:"TM_en",cis_ru:"TM_ru",sea:"SG_en",th_en:"TH_en",th_th:"TH_th"},b={ms:"plan",cs:"plan",e:"edu",t:"team"},k="langstore/";function P(e){var t,n;const o=null!==(t=((null===e||void 0===e?void 0:e.prefix)||"US_en").replace("/",""))&&void 0!==t?t:"";let[a="US",i="en"]=(null!==(n=y[o])&&void 0!==n?n:o).split("_",2);if(o.startsWith(k)||window.location.pathname.startsWith("/".concat(k))){const e=o.replace(k,"").toLowerCase();a=function(e){let t=T[e];return!t&&y[e]&&(t=e),!t&&e.includes("-")&&([t]=e.split("-")),t||"US"}(e),i=e}return a=a.toUpperCase(),i=i.toLowerCase(),{language:i,country:a,locale:"".concat(i,"_").concat(a)}}async function R(e){var t;const o=P(e);let a=(null===(t=new URLSearchParams(window.location.search).get("akamaiLocale"))||void 0===t?void 0:t.toLowerCase())||sessionStorage.getItem("akamai");if(!a)try{const{getAkamaiCode:e}=await n.e(4935).then(n.bind(n,4935));a=await e(!0)}catch(c){var i;null===(i=window.lana)||void 0===i||i.log("Error getting Akamai code (will go with default country): ".concat(c))}return a&&(a=a.toUpperCase(),o.country=a),o}async function U(e){const t=(0,a.getMetadata)("mas-geo-detection");return t&&["on","true"].includes(t)?R(e):Promise.resolve(P(e))}var I,M=["af","ai","apc","appctxid","cli","co","csm","ctx","ctxRtUrl","DCWATC","dp","fr","gsp","ijt","lang","lo","mal","ms","cs","mv","mv2","nglwfdata","ot","otac","pa","pcid","promoid","q","rf","sc","scl","sdid","sid","spint","svar","th","thm","trackingid","usid","workflowid","context.guid","so.ca","so.su","so.tr","so.va","quantity","authCode","checkoutPromoCode","rurl","curl","ctxrturl","country","language","clientId","context","productArrangementCode","offerType","marketSegment"],N=A.flatMap((e=>e)),D=["CC_ALL_APPS","CC_ALL_APPS_STOCK_BUNDLE","CC_PRO"],H="LOCALE",F="PRODUCT_FAMILY",x="FREE_TRIAL_PATH",B="BUY_NOW_PATH",W="FREE_TRIAL_HASH",G="BUY_NOW_HASH",j="TRIAL",K="loading-entitlements",q=null;function Y(e,t){let{baseUrl:n}=Y;if(!n){if("stage"===t)n="https://www.stage.adobe.com/mas";else if("local"===t)n="http://localhost:9001";else if(t){const o=e.split(".");let a="hlx";if(o.length>=2){const t=e.endsWith(".page")?o.length-1:o.length;t>=2&&(a=o[t-2])}const i=/.page$/.test(e)?"page":"live";n="https://".concat(t,".").concat(a,".").concat(i)}else n="https://www.adobe.com/mas";Y.baseUrl=n}return n}function z(){const e=new URLSearchParams(window.location.search).get("maslibs");if(!e||""===e.trim())return null;const t=e.trim().toLowerCase();if("local"===t)return"http://localhost:3030/web-components/dist";if("main"===t)return"https://mas.adobe.com/web-components/dist";const{hostname:n}=window.location,o=n.endsWith(".page")?"page":"live";return t.includes("--mas--")||t.includes("--")?"https://".concat(t,".aem.").concat(o,"/web-components/dist"):"https://".concat(t,"--mas--adobecom.aem.").concat(o,"/web-components/dist")}var J=new Set,V=new Map;async function Z(e){if(V.has(e))return V.get(e);if(customElements.get(e))return Promise.resolve();const t=(async()=>{const t=z();if(!t)return i("../../deps/mas/".concat(e,".js"));{const a="".concat(t,"/").concat(e,".js");if(J.has(a))throw new Error("Failed to load component from ".concat(a));try{return await n(5311)(a)}catch(o){throw J.add(a),o}}})();return V.set(e,t),t.finally((()=>V.delete(e))),t}async function Q(){if(Q.promise)return Q.promise;let e=!1;if(document.createElement("div",{get is(){e=!0}}),e)Q.promise=Promise.resolve();else{const{base:e}=(0,a.getConfig)();Q.promise=await(0,a.loadScript)("".concat(e,"/deps/custom-elements.js"))}return Q.promise}async function X(){var e;return X.promise=null!==(e=X.promise)&&void 0!==e?e:n.e(748).then(n.bind(n,748)).then((e=>{let{default:t}=e;return t({params:[{name:"include",value:"OFFER.PRODUCT_ARRANGEMENT_V2"}],format:"raw"})})),X.promise}async function $(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const o="on"===new URLSearchParams(window.location.search).get("checkout-link-sandbox")&&"prod"!==n?"".concat(t).concat(g):"".concat(t).concat(h);return $.promise=null!==(e=$.promise)&&void 0!==e?e:fetch(o).catch((e=>{var t;null===(t=I)||void 0===t||t.error("Failed to fetch checkout link configs",e)})).then((e=>null!==e&&void 0!==e&&e.ok?e.json():{data:[]})),$.promise}function ee(e,t,n,o){const a=e[F]===t||n&&e[F]==="".concat(t,"+").concat(n),i=o.some((e=>e[F]==="".concat(t,"+").concat(n)));a&&!i&&o.push(e)}async function te(e,t,n,o){var i;const c=null===o||void 0===o?void 0:o.extraOptions,r=function(e){if(!e)return;return JSON.parse(e).svar}(c);if(r){const e=JSON.parse(c);delete e.svar,o.extraOptions=JSON.stringify(e)}let{base:l}=(0,a.getConfig)();const{env:s}=(0,a.getConfig)();/\.page$/.test(document.location.origin)&&(l=l.replace(".live",".page"));const d=await $(l,s);if(!d.data.length)return;const{locale:{region:u}}=(0,a.getConfig)();d.data.sort(((e,t)=>{const n=e[F],o=t[F];return n.includes("+")&&!o.includes("+")?-1:1}));const{paCodeConfigs:m,productCodeConfigs:p,productFamilyConfigs:f}=d.data.reduce(((o,a)=>(function(e,t,n,o,a,i){ee(e,o,t,n.paCodeConfigs),ee(e,a,t,n.productCodeConfigs),ee(e,i,t,n.productFamilyConfigs)}(a,r,o,n,t,e),o)),{paCodeConfigs:[],productCodeConfigs:[],productFamilyConfigs:[]}),h=[...m,...p,...f];if(!h.length)return;const g=h.find((e=>{let{[H]:t}=e;return""===t})),v=null!==(i=h.find((e=>{let{[H]:t}=e;return t===u})))&&void 0!==i?i:{},_={...g,...Object.fromEntries(Object.entries(v).filter((e=>{let[,t]=e;return t})))};return Object.entries(_).forEach((e=>{let[t,n]=e;"X"!==n&&"\u274c"!==n||(_[t]="")})),_}var ne={ACROBAT:{ARCH:["ARCH","APCC"]}};async function oe(e,t,n){var i;let[{offerType:c,productArrangementCode:r,productArrangement:{productCode:l,productFamily:s}={}}]=n;if(!0!==e.entitlement)return;if(!await t)return;const d=await X();if(null===d||void 0===d||!d.length)return;const u=await te(s,l,r,e);if(null===u||void 0===u||!u.DOWNLOAD_URL)return;if(!d.find((e=>{let{offer:{product_code:t,product_arrangement_v2:{family:n}}}=e;if(D.includes(n))return!0;if(D.includes(s))return!1;const o=A.find((e=>e.includes(s)));return(null===o||void 0===o?void 0:o.includes(n))&&function(e,t,n){var o;const a=ne[e];return!a||(null===(o=a[t])||void 0===o?void 0:o.includes(n))||t===n}(n,t,l)})))return;const m=(0,a.getConfig)(),p=await(0,o.replaceKey)(u.DOWNLOAD_TEXT||O,m),f=(0,a.localizeLink)(u.DOWNLOAD_URL),h=null!==(i=null===c||void 0===c?void 0:c.toLowerCase())&&void 0!==i?i:"";return{text:p,className:"download ".concat(h),url:f}}async function ae(e,t,o,a){var i;let[{productArrangement:{productFamily:c}={}}]=o;if(!e.upgrade)return;if(!await t)return;const r=await X();if(null===q&&(q=void 0,q=await document.querySelector(".merch-offers.upgrade [data-wcs-osi]")),await(null===(i=q)||void 0===i?void 0:i.onceSettled()),q&&null!==r&&void 0!==r&&r.length&&c){var l;const{default:e}=await n.e(8910).then(n.bind(n,6529)),t=await e(c,q,r,N,D);return null===a||void 0===a||null===(l=a.closest("merch-card"))||void 0===l||null===(l=l.querySelector("merch-addon"))||void 0===l||l.remove(),t}}function ie(e){var t;const{mep:n}=(0,a.getConfig)(),o=null===n||void 0===n||null===(t=n.inBlock)||void 0===t||null===(t=t.merch)||void 0===t||null===(t=t.fragments)||void 0===t?void 0:t[e.pathname];try{return new URL(null===o||void 0===o?void 0:o.content)}catch(c){var i;null===(i=I)||void 0===i||i.error("Failed to apply promo to external modal",c)}return e}function ce(e,t,n){const o=e.startsWith("/");let a;try{a=new URL(o?"".concat(window.location.origin).concat(e):e)}catch(c){var i;return null===(i=window.lana)||void 0===i||i.log("Invalid URL ".concat(e," : ").concat(c)),e}return a=ie(a),a=function(e,t){if(!t)return e;const n=JSON.parse(t);return Object.keys(n).forEach((t=>{if(M.includes(t)){var o,a;const i=n[t];e.searchParams.set(null!==(o=b[t])&&void 0!==o?o:t,null!==(a=b[i])&&void 0!==a?a:i)}})),e}(a,t),a=function(e,t){null!==t&&void 0!==t&&t.is3in1Modal&&("EDU"===t.marketSegment?e.searchParams.set("plan","edu"):"TEAM"===t.customerSegment&&e.searchParams.set("plan","team"));const n=document.querySelector('meta[name="preselect-plan"]');return null!==n&&void 0!==n&&n.content?(e.searchParams.set("plan",n.content),e):e}(a,n),o?a.href.replace(window.location.origin,""):a.href}var re=e=>/\/fragments\//.test(e),le=e=>{e&&(document.querySelectorAll("#".concat(e)).forEach((t=>{var n;if(t.classList.contains("dialog-modal")){const n=document.querySelector("#".concat(e,"~.modal-curtain"));n&&n.remove(),t.remove()}null===(n=document.querySelector('[data-modal-hash="#'.concat(t.id,'"]')))||void 0===n||n.focus()})),document.querySelectorAll(".modal-curtain").length||document.body.classList.remove("disable-scroll"),[...document.querySelectorAll("header, main, footer")].forEach((e=>e.removeAttribute("aria-disabled"))))},se={isOpen:!1};async function de(){var e;let{cta:t,closedByUser:o}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{hash:a}=window.location;if(null!==a&&void 0!==a&&a.includes("=")){const e=document.querySelector(".dialog-modal");return e?(se.isOpen=!1,le(e.id),se.isOpen):se.isOpen}const i=document.querySelector(".dialog-modal".concat(a))||document.querySelector(".dialog-modal#checkout-link-modal"),c=(null===i||void 0===i||null===(e=i.id)||void 0===e?void 0:e.includes("locale-modal"))?null:i;if(a&&!t&&se.isOpen&&!c){const e=document.querySelector(".dialog-modal");return e?(le(e.id),se.isOpen=!1,se.isOpen):se.isOpen}if(a&&!t&&!se.isOpen&&!c){const e=document.querySelector("[is=checkout-link][data-modal-id=".concat(a.replace("#",""),"]"));return e&&!e.dataset.clickDisabled&&(e.dataset.clickDisabled="true",e.click(),se.isOpen=!0,setTimeout((()=>{delete e.dataset.clickDisabled}),1e3)),se.isOpen}if(a&&a==="#".concat(null===t||void 0===t?void 0:t.getAttribute("data-modal-id"))&&!se.isOpen&&!c)return t.click(),se.isOpen=!0,se.isOpen;if(o&&document.querySelector("#checkout-link-modal"))return se.isOpen=!1,se.isOpen;if(o&&c)return se.isOpen=!1,se.isOpen;if(!a&&c){se.isOpen=!1;const{closeModal:e}=await n.e(1474).then(n.bind(n,1474));e(c)}return se.isOpen}async function ue(e,t,o,i,c,r){if(e.preventDefault(),e.stopImmediatePropagation(),se.isOpen)return;se.isOpen=!0;const{getModal:l}=await n.e(1474).then(n.bind(n,1474));await n.e(3230).then(n.bind(n,3230));const s=o===j?"twp":"crm";let d;if(i&&(window.location.hash=i),null!==r&&void 0!==r&&r.isOpen3in1Modal){const{default:e,handle3in1IFrameEvents:t}=await Promise.all([n.e(9063),n.e(5897)]).then(n.bind(n,5897));return window.addEventListener("message",t),void(document.querySelector(".dialog-modal.three-in-one")||(d=await e(r)))}if(re(t)){const e=t.split(/(hlx|aem).(page|live)/).pop();d=await async function(e,t){const n=(0,a.createTag)("div");n.style.visibility="hidden",(0,a.createTag)("a",{href:"".concat(e)},"",{parent:n});const o=await t(null,{id:"checkout-link-modal",content:n,closeEvent:"closeModal",class:"commerce-frame"});return await(0,a.loadArea)(o),n.style.visibility="",o}(e,l)}else d=await async function(e,t,n,o){(0,a.loadStyle)("".concat((0,a.getConfig)().base,"/blocks/iframe/iframe.css"));const i=(0,a.createTag)("div",{class:"milo-iframe"}),c=ce(e,n,o);return(0,a.createTag)("iframe",{src:c,frameborder:"0",marginwidth:"0",marginheight:"0",allowfullscreen:"true",loading:"lazy"},"",{parent:i}),t(null,{id:"checkout-link-modal",content:i,closeEvent:"closeModal",class:"commerce-frame"})}(t,l,c,r);d.classList.add(s)}function me(e,t,n){if(!(e&&t&&n))return;const o=t["".concat(n===j?W:G)];return o&&e.setAttribute("data-modal-id",o),o}var pe=e=>{try{return new URL(e).hostname.endsWith(".adobe.com")}catch(t){return!1}};async function fe(e,t,n){if(!t.modal)return;const o="off"!==new URLSearchParams(window.location.search).get("commerce.preload");if(null!==n&&void 0!==n&&n.isOpen3in1Modal&&o){const e=function(){const{env:e}=(0,a.getConfig)();return"prod"===e.name?"https://commerce.adobe.com/store/iframe/preload.js":"https://commerce-stg.adobe.com/store/iframe/preload.js"}(),t="creative";window.milo.deferredPromise.then((()=>{setTimeout((()=>{(0,a.loadScript)("".concat(e,"?cli=").concat(t),"text/javascript",{mode:"defer",id:"ucv3-preload-script"})}),1e3)}))}const[{offerType:i,productArrangementCode:c,productArrangement:{productCode:r,productFamily:l}={}}]=null!==e&&void 0!==e?e:[{}],s=await te(l,r,c,t);if(!s)return;const d=i===j?x:B,u=me(n,s,i);let m=s[d];return m||null!==n&&void 0!==n&&n.isOpen3in1Modal?(m=re(m)||pe(m)?(0,a.localizeLink)(s[d]):s[d],{url:m,handler:e=>ue(e,m,i,u,t.extraOptions,n)}):void 0}async function he(e,t,n,o){try{await n;const[a,i,c]=await Promise.all([oe(t,n,e),ae(t,n,e,o),fe(e,t,o)]);return a||i||c}catch(i){var a;return null===(a=I)||void 0===a||a.error("Failed to resolve checkout action",i),[]}}function ge(e){const{host:t}=window.location;(t.includes("".concat(a.SLD,".page"))||"www.stage.adobe.com"===t)&&(e.preview="on")}async function ve(){var e;let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(ve.promise=void 0,null===(o=document.head.querySelector("mas-commerce-service"))||void 0===o||o.remove(),X.promise=void 0,$.promise=void 0);const{commerce:i,env:r,locale:l}=(0,a.getConfig)();return["checkout-workflow-step","force-tax-exclusive","checkout-client-id","allow-override"].forEach((e=>{const t=e.replace(/-([a-z])/g,(e=>e[1].toUpperCase()));if(null!==i&&void 0!==i&&i.hasOwnProperty(t)){const n=i[t];delete i[t],i[e]=n}})),ve.promise=null!==(e=ve.promise)&&void 0!==e?e:Q().then((async()=>{await Z(c);const e=function(){const e=new URLSearchParams(window.location.search).get("maslibs");if(!e||""===e.trim())return null;const t=e.trim().toLowerCase();if("local"===t)return"http://localhost:3030/studio/libs/fragment-client.js";if("main"===t)return"https://mas.adobe.com/studio/libs/fragment-client.js";const{hostname:n}=window.location,o=n.endsWith(".page")?"page":"live";return t.includes("--mas--")||t.includes("--")?"https://".concat(t,".aem.").concat(o,"/studio/libs/fragment-client.js"):"https://".concat(t,"--mas--adobecom.aem.").concat(o,"/studio/libs/fragment-client.js")}();if(e){const{loadScript:t}=await n.e(2717).then(n.bind(n,2717));try{await t(e,"module")}catch(f){var o;null===(o=I)||void 0===o||o.error("Failed to load fragment-client.js:",f)}}const{language:s,locale:d,country:u}=await U(l);let m=document.head.querySelector("mas-commerce-service");var p;m||(ge(t),m=(0,a.createTag)("mas-commerce-service",{locale:d,language:s,country:u,...t,...i}),"prod"!==(null===r||void 0===r?void 0:r.name)&&m.setAttribute("allow-override",""),"function"===typeof m.registerCheckoutAction&&m.registerCheckoutAction(he),document.head.append(m),"function"!==typeof m.prefillWcsCache&&(m.prefillWcsCache=()=>{var e;null===(e=I)||void 0===e||e.warn("prefillWcsCache not available in this version of commerce service")}),null===(p=m.imsSignedInPromise)||void 0===p||p.then((e=>{e&&X()})));return"AU"===u&&(0,a.loadStyle)("".concat((0,a.getConfig)().base,"/blocks/merch/au-merch.css")),m})),ve.promise}async function _e(e,t){var n,o,a;const i=t.get("osi");if(!i)return null;const c="true"===t.get("perp")||void 0;return{promotionCode:(null!==(n=null!==(o=t.get("promo"))&&void 0!==o?o:t.get("promotionCode"))&&void 0!==n?n:null===(a=e.closest("[data-promotion-code]"))||void 0===a?void 0:a.dataset.promotionCode)||void 0,perpetual:c,wcsOsi:i}}function Ce(e,t){if("doc_cloud"!==t)return;return{"vQmS1H18A6_kPd0tYBgKnp-TQIF0GbT6p8SH8rWcLMs":"commitment","ZZQMV2cU-SWQoDxuznonUFMRdxSyTr4J3fB77YBNakY":"commitment","vV01ci-KLH6hYdRfUKMBFx009hdpxZcIRG1-BY_PutE":"email","nTbB50pS4lLGv_x1l_UKggd-lxxo2zAJ7WYDa2mW19s":"email","QgYu51CVY2wKyFEqMuvec4N1tc1OaCypeKJjT5n2-Fc":"commitment","AW-jV275GNYtPao6Q7XWENqyv_Stkc1BbzF7ak2u1dk":"email","nIy-IPGnALw3KNncaqMjOJsMUrqElWi8sdGnBFBAgTw":"commitment",WRe4gUHuyqJgCCr3ZywwU9CDP0ezBaCKoMk4xryVQhs:"commitment",Hnk2P6L5wYhnpZLFYTW5upuk2Y3AJXlso8VGWQ0l2TI:"commitment","-lYm-YaTSZoUgv1gzqCgybgFotLqRsLwf8CgYdvdnsQ":"commitment",WJLr3TF4T4qyJIGZTsDf9KPbTfxA7qAgStpaF2IgYao:"commitment","8Lr09qx_PHqAJUwvUNiof4FFFEKjsR1TTbvBUncV2b0":"email",lI5NvdLBWJUJEHkP9CAx787kt0uCc3WnoCFVVIjECiA:"email","OQ1oCm1tZG35Gj7LCrkGeOOdUMfVlC7xx-7ml-CTWIE":"commitment"}[e]}function we(e){let{modal:t,fallbackStep:n,wcsOsi:o,checkoutClientId:a}=e;const i=["twp","d2p","crm"].includes(t),c=document.querySelector("meta[name=mas-ff-3in1]"),r=!c||"off"!==c.content;return i&&!r&&!!(null!==n&&void 0!==n?n:Ce(o,a))}function Se(e){var t;let{wcsOsi:n,modal:o,fallbackStep:a,checkoutWorkflowStep:i,checkoutClientId:c}=e;return we({modal:o,fallbackStep:a,wcsOsi:n,checkoutClientId:c})&&null!==(t=null!==a&&void 0!==a?a:Ce(n,c))&&void 0!==t?t:i}async function Ee(e,t){var n;const o=await _e(e,t);if(!o)return null;const{settings:a}=await ve(),{checkoutClientId:i}=a,c=t.get("marketSegment"),r=null!==(n=null===t||void 0===t?void 0:t.get("workflowStep"))&&void 0!==n?n:a.checkoutWorkflowStep,l=null===t||void 0===t?void 0:t.get("entitlement"),s=null===t||void 0===t?void 0:t.get("upgrade"),d=null===t||void 0===t?void 0:t.get("modal"),u=null===t||void 0===t?void 0:t.get("fallbackStep"),m={};return t.forEach(((e,t)=>{M.includes(t)&&(m[t]=e)})),{...o,checkoutClientId:i,checkoutWorkflowStep:Se({wcsOsi:o.wcsOsi,modal:d,fallbackStep:u,checkoutWorkflowStep:r,checkoutClientId:i}),checkoutMarketSegment:c,entitlement:l,upgrade:s,modal:we({modal:d,fallbackStep:u,wcsOsi:o.wcsOsi,checkoutClientId:i})?void 0:d,fallbackStep:u,extraOptions:JSON.stringify(m)}}async function Le(e,t){var n;const o=await _e(e,t);if(!o)return null;const i=(0,a.getMetadata)("mas-ff-annual-price"),c=o.promotionCode?t.get("old"):void 0,r=t.get("seat"),l=t.get("term"),s=t.get("tax"),d=t.get("planType"),u=i&&"false"!==t.get("annual")||void 0,m=t.get("exclusive"),p=t.get("alt"),f=t.get("quantity"),h=null!==(n=L.get(t.get("type")))&&void 0!==n?n:C;return{...o,displayOldPrice:c,displayPerUnit:r,displayRecurrence:l,displayTax:s,displayPlanType:d,displayAnnual:u,forceTaxExclusive:m,alternativePrice:p,template:h,quantity:f}}async function Oe(e){var t;const n=null===(t=e.value[0])||void 0===t||null===(t=t.productArrangement)||void 0===t?void 0:t.productCode,{marketSegment:i,customerSegment:c}=e,r="EDU"===i?i:c;let l=e.textContent;l=n?"".concat(l," - ").concat(await(0,o.replaceKey)(n,(0,a.getConfig)())):l,l=r?"".concat(l," - ").concat(await(0,o.replaceKey)(r,(0,a.getConfig)())):l,e.setAttribute("aria-label",l)}async function Ae(e,t){var o,i,c;const r=!!e.closest(".marquee"),l="STRONG"===(null===(o=e.firstElementChild)||void 0===o?void 0:o.tagName)||"STRONG"===(null===(i=e.parentElement)||void 0===i?void 0:i.tagName);e.closest(".merch-offers.upgrade")&&t.append("entitlement","false");const s=await Ee(e,t);if(!s)return null;const d=await ve(),u=null===(c=e.textContent)||void 0===c?void 0:c.replace(/^CTA +/,""),m=d.createCheckoutLink(s,u);e.href.includes("#_tcl")?e.href=e.href.replace("#_tcl",""):(m.classList.add("con-button"),m.classList.toggle("button-l",r),m.classList.toggle("blue",l));const p=e.href.matchAll(/#_button-([a-zA-Z-]+)/g);for(const n of p)m.classList.add(n[1]);if("false"!==s.entitlement&&(m.classList.add(K),m.onceSettled().finally((()=>{m.classList.remove(K),de({cta:m})}))),e.ariaLabel?m.setAttribute("aria-label",e.ariaLabel):m.ariaLabel||m.onceSettled().then((async()=>{await Oe(m)})),"on"===(0,a.getMetadata)("mas-ff-copy-cta")){const{default:t}=await n.e(7133).then(n.bind(n,7133));return t(e,m)}return m.onceSettled().then((()=>{var t,n;const o=null===(t=(0,a.getConfig)())||void 0===t||null===(t=t.locale)||void 0===t?void 0:t.prefix;"/kr"===o&&(null===(n=m.value[0])||void 0===n?void 0:n.offerType)===j&&((0,a.shouldAllowKrTrial)(e,o)?m.classList.remove("hidden-osi-trial-link"):m.remove())})),m}async function Te(e,t){const n=await Le(e,t);if(!n)return null;return(await ve()).createInlinePrice(n)}var ye="mas";function be(e,t){var n;const{mep:o}=(0,a.getConfig)(),i=null===o||void 0===o||null===(n=o.inBlock)||void 0===n||null===(n=n[ye])||void 0===n?void 0:n.fragments;if(i){const n=i[e];if(n&&"replace"===n.action)return{...t,fragment:n.content}}return t}function ke(e){const{hash:t}=new URL(e.href),n=t.startsWith("#")?t.substring(1):t,o=new URLSearchParams(n),a={};for(const[i,c]of o.entries())"sidenav"===i?a.sidenav="true"===c:"fragment"!==i&&"query"!==i||(a.fragment=c);return a}async function Pe(e){var t;if(null===e||void 0===e||null===(t=e.classList)||void 0===t||!t.contains("merch"))return;const{searchParams:n}=new URL(e.href),o="checkoutUrl"===n.get("type"),a=await(o?Ae:Te)(e,n),i=await ve();return I=i.Log.module("merch"),a?(I.debug("Rendering:",{options:{...a.dataset},merch:a,el:e}),e.replaceWith(a),a):(I.warn("Failed to get context:",{el:e}),null)}window.addEventListener("hashchange",de),window.addEventListener("popstate",de),window.addEventListener("milo:modal:closed",(()=>{de({closedByUser:!0})}))}}]);
//# sourceMappingURL=8778.ba22cb01.chunk.js.map